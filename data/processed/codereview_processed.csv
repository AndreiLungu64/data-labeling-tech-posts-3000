id,text
1,"Database connection in constructor and destructor. I am playing with different ways to do database interaction in PHP, and one of the ideas I have been playing with is connecting to the DB in the constructor and disconnecting in the destructor. This is the code from my Database class. function __construct()
{
  $this->link = mysql_connect($this->server.':'.$this->port, $this->username);
  if(!$this->link)
    die('Could not connect: '.mysql_error());

  if(!mysql_select_db($this->database, $this->link))
    die('Could not select database: '.mysql_error());
}    

function __destruct()
{
  if(mysql_close($this->link))
    $this->link = null; 
} This works well, my only reservation is that if I need to connect several to hit the database several times it will do multiple connections and disconnects. If I do that a lot I can see, maybe, potential problems. Is this a concern or is there a better way to do this? And is my code even up to snuff in general?"
2,"Project Euler problem 1 in Python - Multiples of 3 and 5. I'd like suggestions for optimizing this brute force solution to problem 1 .  The algorithm currently checks every integer between 3 and 1000.  I'd like to cut as many unnecessary calls to isMultiple as possible: '''
If we list all the natural numbers below 10 that are multiples of 3 or 5, 
we get 3, 5, 6 and 9. The sum of these multiples is 23.

Find the sum of all the multiples of 3 or 5 below 1000.
'''

end = 1000

def Solution01():
    '''
        Solved by brute force
        #OPTIMIZE
    '''
    sum = 0
    for i in range(3, end):
        if isMultiple(i):
            sum += i 
    print(sum)

def isMultiple(i):
    return (i % 3 == 0) or (i % 5 == 0)"
3,"You could use MySQLi (PHP extension) which is class based by default instead of MySQL. It
is very easy to set up multiple connections. You are, however, required to know the connection you are querying always."
4,"PHP Autoloader Library. Basically, I had written this class a little while ago to ease autoloading of our local libraries. The premise is that everything is split by packages into multiple layers of sub-packages.  Classes are named using CamelCasing.  So, a class' name is related to its package as follows: PackageSubpackageSubpackageName .  Now, each package can have package specific interfaces defined by isPackageName for interfaces, exceptions by PackageNameException , etc.  I tried to make it flexible enough for reuse. /**
 * A class for lazy-loading other classes
 *
 * This class enables lazy-loading of php classes.  The benefit of this is
 * three-fold.  First, there is a memory benefit, since not all classes are
 * loaded until they are needed.  Second, there is a time benefit, since not all
 * classes are loaded.  Third, it produces cleaner code, since there is no need
     * to litter files with require_once() calls.
 *
 * @category Libraries
 * @package  Libraries
 * @author   Me
 */
abstract class Loader
{

    /**
     * @var array An array of class to path mappings
     */
    protected static $classes = array();

    /**
     * @var boolean Has the loader been initialized already
     */
    protected static $initialized = false;

    /**
     * @var array An array of auto-search paths
     */
    protected static $namedPaths = array(
        'exception',
        'interface',
        'iterator',
    );

    /**
     * @var array An array of include paths to search
     */
    protected static $paths = array(
        PATH_LIBS,
    );

    /**
     * Tell the auto-loader where to find an un-loaded class
     *
     * This can be used to ""register"" new classes that are unknown to the
     * system.  It can also be used to ""overload"" a class (redefine it
     * elsewhere)
     *
     * @param string $class The class name to overload
     * @param string $path  The path to the new class
     *
     * @throws InvalidArgumentException Upon an Invalid path submission
     * @return void
     */
    public static function _($class, $path)
    {
        $class = strtolower($class);
        if (!file_exists($path)) {
            throw new InvalidArgumentException('Invalid Path Specified');
        }
        self::$classes[$class] = $path;
    }

    /**
     * Add a path to the include path list
     *
     * This adds a path to the list of paths to search for an included file.
     * This should not be used to overload classes, since the default include
     * directory will always be searched first.  This can be used to extend
     * the search path to include new parts of the system
     *
     * @param string $path The path to add to the search list
     *
     * @throws InvalidArgumentException when an invalid path is specified
     * @return void
     */
    public static function addPath($path)
    {
        if (!is_dir($path)) {
            throw new InvalidArgumentException('Invalid Include Path Added');
        }
        $path = rtrim($path, DS);
        if (!in_array($path, self::$paths)) {
                self::$paths[] = $path;
        }
    }

    /**
     * Add a path to the auto-search paths (for trailing extensions)
     *
     * The path should end with an 's'.  Default files should not.
     *
     * @param string $path The name of the new auto-search path
     *
     * @return void
     */
    public static function addNamedPath($path)
    {
        $path = strtolower($path);
        if (substr($path, -1) == 's') {
            $path = substr($path, 0, -1);
        }
        if (!in_array($path, self::$namedPaths)) {
            self::$namedPaths[] = $path;
        }
    }

    /**
     * Initialize and register the autoloader.
     *
     * This method will setup the autoloader.  This should only be called once.
     *
     * @return void
     */
    public static function initialize()
    {
        if (!self::$initialized) {
            self::$initialized = true;
            spl_autoload_register(array('Loader', 'load'));
        }
    }

    /**
     * The actual auto-loading function.
     *
     * This is automatically called by PHP whenever a class name is used that
     * doesn't exist yet.  There should be no need to manually call this method.
     *
     * @param string $class The class name to load
     *
     * @return void
     */
    public static function load($class)
    {
        $className = strtolower($class);
        if (isset(self::$classes[$className])) {
            $file = self::$classes[$className];
        } else {
            $file = self::findFile($class);
        }
        if (file_exists($file)) {
            include_once $file;
        }
    }

    /**
     * Find the file to include based upon its name
     *    
     * This splits the class name by uppercase letter, and then rejoins them
     * to attain the file system path.  So FooBarBaz will be turned into
     * foo/bar/baz.  It then searches the include paths for that chain.  If baz
     * is a directory, it searches that directory for a file called baz.php.
     * Otherwise, it looks for baz.php under the bar directory.
     *
     * @param string $class The name of the class to find
     *
     * @return string The path to the file defining that class
     */
    protected static function findFile($class)
    {
        $regex = '#([A-Z]{1}[a-z0-9_]+)#';
        $options = PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE;
        $parts = preg_split($regex, $class, null, $options);

        $subpath = '';
        $file = strtolower(end($parts));
        $test = strtolower(reset($parts));
        if ($test == 'is') {
            array_shift($parts);
            return self::findNamedFile($class, $parts, 'interface');
        }
        foreach ($parts as $part) {
            $subpath .= DS . strtolower($part);
        }    
        foreach (self::$paths as $path) {
            $newpath = $path . $subpath;
            if (is_file($newpath . '.php')) {
                return $newpath . '.php';
            } elseif (is_file($newpath . DS . $file . '.php')) {
                return $newpath . DS . $file . '.php';
            }
        }
        if (in_array($file, self::$namedPaths)) {
            //Get rid of the trailing part
            array_pop($parts);
            return self::findNamedFile($class, $parts, $file);
        }    
        return '';
    }

    /**
     * Find a file for named directories (interfaces, exceptions, iterators, etc)
     *
     * @param string $class The class name of the exception to find
     * @param array  $parts The parts of the class name pre-split
     * @param string $name  The name of the named directory to search in
     *    
     * @return string The found path, or '' if not found
     */
    protected static function findNamedFile($class, array $parts, $name)
    {    
        if (empty($parts)) {
            return '';
        }
        $name = strtolower($name);
        //Add a trailing s, since individual files are not plural
        $filename = $name;
        $name .= 's';
        //Try the global path first
        $subpath = DS . $name . DS . strtolower(implode('', $parts)) . '.php';
        foreach (self::$paths as $path) {
            $newpath = $path . $subpath;
            if (is_file($newpath)) {
                return $newpath;
            }
        }
        //Try to build a full sub path for package specific named files
        $package = array_shift($parts);
        $subpath = DS . strtolower($package) . DS . $name . DS;
        if (!empty($parts)) {
            $subpath .= strtolower(implode('', $parts)) . '.php';
        } else {
            $subpath .= $filename . '.php';
        }
        foreach (self::$paths as $path) {
            $newpath = $path . $subpath;
            if (is_file($newpath)) {
                return $newpath;
            }
        }
        return '';
    }
} It's also fully unit tested. What are your thoughts? Is it over-complex?"
5,From your question I infer that you're thinking of having several instances of the DB class.  If so I'd suggest abstracting the connection out to another class and holding a reference to the same connection in each DB instance. You could then set your connection up as a singleton and thus only connect & disconnect once. Apologies in advance if I've missed anything here - my PHP is far from fluent.
6,"You might also look into the built-in php command mysql_pconnect().  This differs from mysql_connect in that it opens a persistent connection to the DB the first time it is called, and each subsequent time, it checks to see if an existing connection to that database exists and uses that connection instead.  You should then remove the mysql_close command from the destructor, as they will persist between page loads. The php manual page: http://php.net/manual/en/function.mysql-pconnect.php"
7,"Using separate functions for Project Euler 1. I started programming with Java and C++, so I'm used to having a 'main' function that calls other functions that do the actual work. At university I was always told that doing actual computation in the main function is bad practice. I'm currently playing around with Python, and I have trouble figuring out how to write a nice 'main' function, especially since I'm doing small stuff that doesn't need separate classes. What do you think about the following code? Is the main function necessary, or would  you just write everything without functions? Is there a general consent on this in the Python world? # Finds sum of all multiples of 3 and 5 from 0 to 999 

def find_multiples():
    global numbers

    for i in range(0,1000):
       if i%3==0 or i%5==0:
           numbers.append(i);

numbers = []

if __name__ == '__main__':
    find_multiples()
    print sum(numbers)"
8,"In most of the Python code I've ever seen, there is normally a main function defined that you call from the condition you put to establish the script was executed and not imported.  I believe that's the standard way of doing things in Python, but I don't believe its actually a written rule anywhere, though that is how they do it in their docs as well ."
9,"Too many loops in Drawing App. I have a method that has a lot of loops: private void update(double depth)
        {

            Console.WriteLine(""update with level "" + depth);

            this.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new Action(delegate()
                {


            List<Grid> grids = new List<Grid>();

            Dependencies.Children.Clear();

            Grid g = new Grid();
            //Canvas.SetZIndex(g, 100);
            g.Width = 50;
            g.Height = 50;
            g.Tag = focus;

            Ellipse e = new Ellipse();
            e.Width = 50;
            e.Height = 50;
            e.Fill = Brushes.Red;
            if (depth == 1)
            {
                Canvas.SetTop(g, 163);
            }
            else if (depth == 2)
            {
                Canvas.SetTop(g, 108);
            }
            else if (depth == 3)
            {
                Canvas.SetTop(g, 81);
            }
            else if (depth == 4)
            {
                Canvas.SetTop(g, 65);
            }
            else if (depth == 5)
            {
                Canvas.SetTop(g, 54);
            }
            else if (depth == 6)
            {
                Canvas.SetTop(g, 46);
            }
            Canvas.SetLeft(g, 500);

            g.Children.Add(e);

            Viewbox box = new Viewbox();
            box.Width = e.Width;
            box.Height = e.Height;


            TextBox txt = new TextBox();
            txt.Text = focus.getName();
            box.Child = txt;
            txt.Background = Brushes.Transparent;
            txt.BorderBrush = Brushes.Transparent;

            g.Children.Add(box);



            grids.Add(g);

            List<SourceFile> list = new List<SourceFile>();

            list = focus.getInvocations();

            int counter = 1;
            foreach (SourceFile sf in list)
            {
                Grid g1 = new Grid();
                //Canvas.SetZIndex(g, 101);
                g1.Width = 50;
                g1.Height = 50;
                g1.Tag = sf;

                Ellipse e1 = new Ellipse();
                //Dependencies.Children.Add(e1);
                sf.setGrid(g1);
                e1.Width = 50;
                e1.Height = 50;
                e1.Fill = Brushes.Red;

                g1.Children.Add(e1);

                if (depth == 1)
                {
                    Canvas.SetTop(g1, 488);
                }
                else if (depth == 2)
                {
                    Canvas.SetTop(g1, 324);
                }
                else if (depth == 3)
                {
                    Canvas.SetTop(g1, 244);
                }
                else if (depth == 4)
                {
                    Canvas.SetTop(g1, 195);
                }
                else if (depth == 5)
                {
                    Canvas.SetTop(g1, 163);
                }
                else if (depth == 6)
                {
                    Canvas.SetTop(g1, 139);
                }
                Canvas.SetLeft(g1, counter * (1000 / (list.Count + 1) ));

                Viewbox box1 = new Viewbox();
                box1.Width = g1.Width;
                box1.Height = g1.Height;

                TextBox txt1 = new TextBox();
                txt1.Text = sf.getName();
                txt1.Background = Brushes.Transparent;
                txt1.BorderBrush = Brushes.Transparent;

                box1.Child = txt1;
                g1.Children.Add(box1);

                Line l = new Line();
                //Canvas.SetZIndex(l, 1);
                l.Stroke = Brushes.Green;
                l.StrokeThickness = 10;
                Binding x1 = new Binding(); x1.Path = new PropertyPath(Canvas.LeftProperty);
                x1.Converter = new MyConverter();
                x1.ConverterParameter = g;
                Binding y1 = new Binding(); y1.Path = new PropertyPath(Canvas.TopProperty);
                y1.Converter = new MyConverter();
                y1.ConverterParameter = g;
                Binding x2 = new Binding(); x2.Path = new PropertyPath(Canvas.LeftProperty);
                x2.Converter = new MyConverter();
                x2.ConverterParameter = g1;
                Binding y2 = new Binding(); y2.Path = new PropertyPath(Canvas.TopProperty);
                y2.Converter = new MyConverter();
                y2.ConverterParameter = g1;
                x1.Source = y1.Source = g;
                x2.Source = y2.Source = g1;
                l.SetBinding(Line.X1Property, x1);
                l.SetBinding(Line.Y1Property, y1);
                l.SetBinding(Line.X2Property, x2);
                l.SetBinding(Line.Y2Property, y2);
                Dependencies.Children.Add(l);
                l.Tag = new Call(focus, sf);
                Contacts.AddPreviewContactDownHandler(l, OnLineDown);
                counter++;

                grids.Add(g1);

                SizeChangedEventHandler act = (Object s, SizeChangedEventArgs args) =>
                {
                    BindingOperations.GetBindingExpressionBase(l, Line.X1Property).UpdateTarget();
                    BindingOperations.GetBindingExpressionBase(l, Line.Y1Property).UpdateTarget();
                    BindingOperations.GetBindingExpressionBase(l, Line.X2Property).UpdateTarget();
                    BindingOperations.GetBindingExpressionBase(l, Line.Y2Property).UpdateTarget();
                };

                g.SizeChanged += act;
                g1.SizeChanged += act;
            }


            int counter2 = 1;
            if (depth >= 2)
            {

                int invocCount = 0;

                foreach (SourceFile s in list)
                {
                    foreach (SourceFile source in s.getInvocations())
                    {
                        invocCount = invocCount + s.getInvocations().Count;
                    }
                }

                Console.WriteLine(invocCount);

                foreach (SourceFile s in list)
                {
                    foreach (SourceFile source in s.getInvocations())
                    {

                        Console.WriteLine(""`Found invocation of "" + s.getName() + "": "" + source.getName());

                        Grid g1 = new Grid();
                        g1.Width = 50;
                        g1.Height = 50;

                        Ellipse e1 = new Ellipse();
                       // Canvas.SetZIndex(g1, 102);
                        grids.Add(g1);
                        e1.Width = 50;
                        e1.Height = 50;
                        e1.Fill = Brushes.Red;
                        source.setGrid(g1);
                        g1.Tag = source;

                        g1.Children.Add(e1);

                        if (depth == 2)
                        {
                            Canvas.SetTop(g1, 540);
                        }
                        else if (depth == 3)
                        {
                            Canvas.SetTop(g1, 406);
                        }
                        else if (depth == 4)
                        {
                            Canvas.SetTop(g1, 325);
                        }
                        else if (depth == 5)
                        {
                            Canvas.SetTop(g1, 271);
                        }
                        else if (depth == 6)
                        {
                            Canvas.SetTop(g1, 232);
                        }

                        Canvas.SetLeft(g1, counter2 * (1000 / (invocCount + 1)));

                        Viewbox box1 = new Viewbox();
                        box1.Width = g1.Width;
                        box1.Height = g1.Height;

                        TextBox txt1 = new TextBox();
                        txt1.Text = source.getName();
                        txt1.Background = Brushes.Transparent;
                        txt1.BorderBrush = Brushes.Transparent;

                        box1.Child = txt1;
                        g1.Children.Add(box1);

                        Line l = new Line();
                        //Canvas.SetZIndex(l, 2);
                        l.Stroke = Brushes.Green;
                        l.StrokeThickness = 10;
                        Binding x1 = new Binding(); x1.Path = new PropertyPath(Canvas.LeftProperty);
                        x1.Converter = new MyConverter();
                        x1.ConverterParameter = s.getGrid();
                        Binding y1 = new Binding(); y1.Path = new PropertyPath(Canvas.TopProperty);
                        y1.Converter = new MyConverter();
                        y1.ConverterParameter = s.getGrid();
                        Binding x2 = new Binding(); x2.Path = new PropertyPath(Canvas.LeftProperty);
                        x2.Converter = new MyConverter();
                        x2.ConverterParameter = g1;
                        Binding y2 = new Binding(); y2.Path = new PropertyPath(Canvas.TopProperty);
                        y2.Converter = new MyConverter();
                        y2.ConverterParameter = g1;
                        x1.Source = y1.Source = findGrid(grids, s, source);
                        x2.Source = y2.Source = g1;
                        l.SetBinding(Line.X1Property, x1);
                        l.SetBinding(Line.Y1Property, y1);
                        l.SetBinding(Line.X2Property, x2);
                        l.SetBinding(Line.Y2Property, y2);
                        Dependencies.Children.Add(l);
                        l.Tag = new Call(s, source);
                        Contacts.AddPreviewContactDownHandler(l, OnLineDown);

                        counter2++;

                        SizeChangedEventHandler act = (Object o, SizeChangedEventArgs args) =>
                        {
                            BindingOperations.GetBindingExpressionBase(l, Line.X1Property).UpdateTarget();
                            BindingOperations.GetBindingExpressionBase(l, Line.Y1Property).UpdateTarget();
                            BindingOperations.GetBindingExpressionBase(l, Line.X2Property).UpdateTarget();
                            BindingOperations.GetBindingExpressionBase(l, Line.Y2Property).UpdateTarget();
                        };

                        source.getGrid().SizeChanged += act;
                        g1.SizeChanged += act;
                    }
                }
            }


            int counter3 = 1;
            if (depth >= 3)
            {

                int invocCount = 0;

                foreach (SourceFile s in list)
                {
                    foreach (SourceFile source in s.getInvocations())
                    {
                        foreach (SourceFile s1 in source.getInvocations())
                        {
                            invocCount = invocCount + source.getInvocations().Count;
                        }
                    }
                }

                foreach (SourceFile s in list)
                {
                    foreach (SourceFile source in s.getInvocations())
                    {
                        foreach (SourceFile s1 in source.getInvocations())
                        {
                            Grid g1 = new Grid();
                            grids.Add(g1);
                            g1.Width = 50;
                            g1.Height = 50;
                            g1.Tag = s1;
                            Ellipse e1 = new Ellipse();

                            e1.Width = 50;
                            e1.Height = 50;
                            e1.Fill = Brushes.Red;
                            s1.setGrid(g1);
                            g1.Children.Add(e1);

                            if (depth == 3)
                            {
                                Canvas.SetTop(g1, 569);
                            }
                            else if (depth == 4)
                            {
                                Canvas.SetTop(g1, 455);
                            }
                            else if (depth == 5)
                            {
                                Canvas.SetTop(g1, 379);
                            }
                            else if (depth == 6)
                            {
                                Canvas.SetTop(g1, 325);
                            }
                            Canvas.SetLeft(g1, counter3 * (1000 / (invocCount + 1)));

                            Viewbox box1 = new Viewbox();
                            box1.Width = g1.Width;
                            box1.Height = g1.Height;

                            TextBox txt1 = new TextBox();
                            txt1.Background = Brushes.Transparent;
                            txt1.BorderBrush = Brushes.Transparent;
                            txt1.Text = s1.getName();
                            box1.Child = txt1;
                            g1.Children.Add(box1);

                            Line l = new Line();
                            //Canvas.SetZIndex(l, 2);
                            l.Stroke = Brushes.Green;
                            l.StrokeThickness = 10;
                            Binding x1 = new Binding(); x1.Path = new PropertyPath(Canvas.LeftProperty);
                            x1.Converter = new MyConverter();
                            x1.ConverterParameter = source.getGrid();
                            Binding y1 = new Binding(); y1.Path = new PropertyPath(Canvas.TopProperty);
                            y1.Converter = new MyConverter();
                            y1.ConverterParameter = source.getGrid();
                            Binding x2 = new Binding(); x2.Path = new PropertyPath(Canvas.LeftProperty);
                            x2.Converter = new MyConverter();
                            x2.ConverterParameter = g1;
                            Binding y2 = new Binding(); y2.Path = new PropertyPath(Canvas.TopProperty);
                            y2.Converter = new MyConverter();
                            y2.ConverterParameter = g1;
                            x1.Source = y1.Source = findGrid(grids, source, s1);
                            x2.Source = y2.Source = g1;
                            l.SetBinding(Line.X1Property, x1);
                            l.SetBinding(Line.Y1Property, y1);
                            l.SetBinding(Line.X2Property, x2);
                            l.SetBinding(Line.Y2Property, y2);
                            Dependencies.Children.Add(l);
                            l.Tag = new Call(source, s1);
                            Contacts.AddPreviewContactDownHandler(l, OnLineDown);

                            counter3++;

                            SizeChangedEventHandler act = (Object o, SizeChangedEventArgs args) =>
                            {
                                BindingOperations.GetBindingExpressionBase(l, Line.X1Property).UpdateTarget();
                                BindingOperations.GetBindingExpressionBase(l, Line.Y1Property).UpdateTarget();
                                BindingOperations.GetBindingExpressionBase(l, Line.X2Property).UpdateTarget();
                                BindingOperations.GetBindingExpressionBase(l, Line.Y2Property).UpdateTarget();
                            };

                            s1.getGrid().SizeChanged += act;
                            g1.SizeChanged += act;
                        }
                    }
                }
            }


         int counter4 = 1;
         if (depth >= 4)
         {

             int invoCount = 0;
             foreach (SourceFile s in list)
             {
                 foreach (SourceFile source in s.getInvocations())
                 {
                     foreach (SourceFile s1 in source.getInvocations())
                     {
                         foreach (SourceFile s2 in s1.getInvocations())
                         {
                             invoCount = invoCount + s1.getInvocations().Count;
                         }
                     }
                 }
             }

             foreach (SourceFile s in list)
             {
                 foreach (SourceFile source in s.getInvocations())
                 {
                     foreach (SourceFile s1 in source.getInvocations())
                     {
                         foreach (SourceFile s2 in s1.getInvocations())
                         {

                             Grid g1 = new Grid();
                             grids.Add(g1);
                             g1.Width = 50;
                             g1.Height = 50;
                             g1.Tag = s2;
                             Ellipse e1 = new Ellipse();

                             e1.Width = 50;
                             e1.Height = 50;
                             e1.Fill = Brushes.Red;
                             s2.setGrid(g1);

                             g1.Children.Add(e1);

                             if (depth == 4)
                             {
                                 Canvas.SetTop(g1, 585);
                             }
                             else if (depth == 5)
                             {
                                 Canvas.SetTop(g1, 488);
                             }
                             else if (depth == 6)
                             {
                                 Canvas.SetTop(g1, 418);
                             }
                             Canvas.SetLeft(g1, counter4 * (1000 / (invoCount + 1)));

                             Viewbox box1 = new Viewbox();
                             box1.Width = g1.Width;
                             box1.Height = g1.Height;

                             TextBox txt1 = new TextBox();
                             txt1.Background = Brushes.Transparent;
                             txt1.BorderBrush = Brushes.Transparent;
                             txt1.Text = s2.getName();
                             box1.Child = txt1;
                             g1.Children.Add(box1);

                             Line l = new Line();
                             //Canvas.SetZIndex(l, 2);
                             l.Stroke = Brushes.Green;
                             l.StrokeThickness = 10;
                             Binding x1 = new Binding(); x1.Path = new PropertyPath(Canvas.LeftProperty);
                             x1.Converter = new MyConverter();
                             x1.ConverterParameter = s1.getGrid();
                             Binding y1 = new Binding(); y1.Path = new PropertyPath(Canvas.TopProperty);
                             y1.Converter = new MyConverter();
                             y1.ConverterParameter = s1.getGrid();
                             Binding x2 = new Binding(); x2.Path = new PropertyPath(Canvas.LeftProperty);
                             x2.Converter = new MyConverter();
                             x2.ConverterParameter = g1;
                             Binding y2 = new Binding(); y2.Path = new PropertyPath(Canvas.TopProperty);
                             y2.Converter = new MyConverter();
                             y2.ConverterParameter = g1;
                             x1.Source = y1.Source = findGrid(grids, s1, s2);
                             x2.Source = y2.Source = g1;
                             l.SetBinding(Line.X1Property, x1);
                             l.SetBinding(Line.Y1Property, y1);
                             l.SetBinding(Line.X2Property, x2);
                             l.SetBinding(Line.Y2Property, y2);
                             Dependencies.Children.Add(l);
                             l.Tag = new Call(s1, s2);
                             Contacts.AddPreviewContactDownHandler(l, OnLineDown);
                             counter4++;

                             SizeChangedEventHandler act = (Object o, SizeChangedEventArgs args) =>
                             {
                                 BindingOperations.GetBindingExpressionBase(l, Line.X1Property).UpdateTarget();
                                 BindingOperations.GetBindingExpressionBase(l, Line.Y1Property).UpdateTarget();
                                 BindingOperations.GetBindingExpressionBase(l, Line.X2Property).UpdateTarget();
                                 BindingOperations.GetBindingExpressionBase(l, Line.Y2Property).UpdateTarget();
                             };

                             s2.getGrid().SizeChanged += act;
                             g1.SizeChanged += act;
                         }
                     }
                 }
             }
         }



      int counter5 = 1;
      if (depth >= 5)
      {

          int invoCount = 0;

          foreach (SourceFile s in list)
          {
              foreach (SourceFile source in s.getInvocations())
              {
                  foreach (SourceFile s1 in source.getInvocations())
                  {
                      foreach (SourceFile s2 in s1.getInvocations())
                      {
                          foreach (SourceFile s3 in s2.getInvocations())
                          {
                              invoCount = invoCount + s2.getInvocations().Count;
                          }
                      }
                  }
              }
          }

          foreach (SourceFile s in list)
          {
              foreach (SourceFile source in s.getInvocations())
              {
                  foreach (SourceFile s1 in source.getInvocations())
                  {
                      foreach (SourceFile s2 in s1.getInvocations())
                      {
                          foreach (SourceFile s3 in s2.getInvocations())
                          {
                              Grid g1 = new Grid();
                              g1.Width = 50;
                              g1.Height = 50;
                              grids.Add(g1);
                              g1.Tag = s3;
                              Ellipse e1 = new Ellipse();
                              //Dependencies.Children.Add(e1);
                              e1.Width = 50;
                              e1.Height = 50;
                              e1.Fill = Brushes.Red;
                              s3.setGrid(g1);

                              g1.Children.Add(e1);

                              if (depth == 5)
                              {
                                  Canvas.SetTop(g1, 596);
                              }
                              else if (depth == 6)
                              {
                                  Canvas.SetTop(g1, 511);
                              }
                              Canvas.SetLeft(g1, counter5 * (1000 / (invoCount + 1)));

                              Viewbox box1 = new Viewbox();
                              box1.Width = g1.Width;
                              box1.Height = g1.Height;

                              TextBox txt1 = new TextBox();
                              txt1.Background = Brushes.Transparent;
                              txt1.BorderBrush = Brushes.Transparent;
                              txt1.Text = s3.getName();
                              box1.Child = txt1;
                              g1.Children.Add(box1);

                              Line l = new Line();
                              //Canvas.SetZIndex(l, 2);
                              l.Stroke = Brushes.Green;
                              l.StrokeThickness = 10;
                              Binding x1 = new Binding(); x1.Path = new PropertyPath(Canvas.LeftProperty);
                              x1.Converter = new MyConverter();
                              x1.ConverterParameter = s2.getGrid();
                              Binding y1 = new Binding(); y1.Path = new PropertyPath(Canvas.TopProperty);
                              y1.Converter = new MyConverter();
                              y1.ConverterParameter = s2.getGrid();
                              Binding x2 = new Binding(); x2.Path = new PropertyPath(Canvas.LeftProperty);
                              x2.Converter = new MyConverter();
                              x2.ConverterParameter = g1;
                              Binding y2 = new Binding(); y2.Path = new PropertyPath(Canvas.TopProperty);
                              y2.Converter = new MyConverter();
                              y2.ConverterParameter = g1;
                              x1.Source = y1.Source = findGrid(grids, s2, s3);
                              x2.Source = y2.Source = g1;
                              l.SetBinding(Line.X1Property, x1);
                              l.SetBinding(Line.Y1Property, y1);
                              l.SetBinding(Line.X2Property, x2);
                              l.SetBinding(Line.Y2Property, y2);
                              l.Tag = new Call(s2, s3);
                              Contacts.AddPreviewContactDownHandler(l, OnLineDown);
                              Dependencies.Children.Add(l);

                              counter5++;

                              SizeChangedEventHandler act = (Object o, SizeChangedEventArgs args) =>
                              {
                                  BindingOperations.GetBindingExpressionBase(l, Line.X1Property).UpdateTarget();
                                  BindingOperations.GetBindingExpressionBase(l, Line.Y1Property).UpdateTarget();
                                  BindingOperations.GetBindingExpressionBase(l, Line.X2Property).UpdateTarget();
                                  BindingOperations.GetBindingExpressionBase(l, Line.Y2Property).UpdateTarget();
                              };

                              s3.getGrid().SizeChanged += act;
                              g1.SizeChanged += act;
                          }
                      }
                  }
              }
          }
      }



            foreach (Grid grid in grids)
            {
                Dependencies.Children.Add(grid);
                Contacts.AddPreviewContactDownHandler(grid, DownOnSourceFile);
            }
                }
  ));
        } Is there any easy way to improve that? And to make it working not only for 6 steps but also for n steps?"
10,"The first problem I see is that there are a lot of cases where someone will want to create a class with more than one word in the name (DataMapper), and the autoloader you have provided won't allow for that.  I would recommend using another character to delimit between package names.  The Zend Framework uses Package_SubPackage_SubPackage_Class and that works very well. As an aside, I'm not sure what your specific reasons are for writing your own autoloader (whether it is for production, education, etc.), but if you are planning to use it for production, I would recommend the Zend_Loader class from the Zend Framework, as it is supported, fully tested, and continually being developed.  You can read it's quickstart guide Here"
11,"I think the best way to cut out possible checks is something like this: valid = set([])

for i in range(3, end, 3):
  valid.add(i)

for i in range(5, end, 5):
  valid.add(i)

total = sum(valid) There's still a bit of redundancy (numbers which are multiples of both 3 and 5 are checked twice) but it's minimal."
12,"CodeIgniter Active Record Subqueries. I use CodeIgniter at work, and one of our model files had a lot of subqueries in it.  I originally had to manually write each subquery, and wondered if I could use active records instead. So, to make my life easier, I made a subquery library for CodeIgniter. I put it on the CodeIgniter Wiki , but I never really had any one look over it.  So, can you tell me if there is anything I should improve in this, or anything I really shouldn't be doing? P.S. Feel free to use this if you wish. P.P.S. join_range is a helper method for use with the answer to this question . P.P.P.S. The latest version can be found here . class Subquery{
    var $CI;
    var $db;
    var $statement;
    var $join_type;
    var $join_on;

    function __construct(){
        $this->CI =& get_instance();
        $this->db = array();
        $this->statement = array();
        $this->join_type = array();
        $this->join_on = array();
    }

    /**
     * start_subquery - Creates a new database object to be used for the subquery
     *
     * @param $statement - SQL statement to put subquery into (select, from, join, etc.)
     * @param $join_type - JOIN type (only for join statements)
     * @param $join_on - JOIN ON clause (only for join statements)
     *
     * @return A new database object to use for subqueries
     */
    function start_subquery($statement, $join_type='', $join_on=1){
        $db = $this->CI->load->database('', true);
        $this->db[] = $db;
        $this->statement[] = $statement;
        if(strtolower($statement) == 'join'){
            $this->join_type[] = $join_type;
            $this->join_on[] = $join_on;
        }
        return $db;
    }

    /**
     * end_subquery - Closes the database object and writes the subquery
     *
     * @param $alias - Alias to use in query
     *
     * @return none
     */
    function end_subquery($alias=''){
        $db = array_pop($this->db);
        $sql = ""({$db->_compile_select()})"";
        $alias = $alias!='' ? ""AS $alias"" : $alias;
        $statement = array_pop($this->statement);
        $database = (count($this->db) == 0)
            ? $this->CI->db: $this->db[count($this->db)-1];
        if(strtolower($statement) == 'join'){
            $join_type = array_pop($this->join_type);
            $join_on = array_pop($this->join_on);
            $database->$statement(""$sql $alias"", $join_on, $join_type);
        }
        else{
            $database->$statement(""$sql $alias"");
        }
    }
    
    /**
     * join_range - Helper function to CROSS JOIN a list of numbers
     *
     * @param $start - Range start
     * @param $end - Range end
     * @param $alias - Alias for number list
     * @param $table_name - JOINed tables need an alias(Optional)
     */
    function join_range($start, $end, $alias, $table_name='q'){
        $range = array();
        foreach(range($start, $end) AS $r){
            $range[] = ""SELECT $r AS $alias"";
        }
        $range[0] = substr($range[0], 7);
        $range = implode(' UNION ALL ', $range);
        
        $sub = $this->start_subquery('join', 'inner');
        $sub->select($range, false);
        $this->end_subquery($table_name);
    }
} Example Usage This query: SELECT `word`, (SELECT `number` FROM (`numbers`) WHERE `numberID` = 2) AS number
FROM (`words`) WHERE `wordID` = 3 would become: $this->db->select('word')->from('words')->where('wordID', 3);
$sub = $this->subquery->start_subquery('select');
$sub->select('number')->from('numbers')->where('numberID', 2);
$this->subquery->end_subquery('number');"
13,"Break this down into several methods - it's very long, meaning it's not easy to read."
15,"Give some thought to abstracting the decisions around setting the top of the canvas (cf. all those if statements) out into a set of classes - or perhaps a single class with different suitable parameters in the constructor.  A lot of this code differs only in the numbers being applied. A simple rule is ""Abstract the concept that varies""."
16,"Comparing data in 2 tables on different servers with CHECKSUM. So I've had a problem where I need to compare data in 2 different tables on two different servers.  Now, I know MySQL supports CHECKSUM TABLES , but from my testing and understanding, it's not reliable across server instances and versions. So I created this query: $part = '@CRC := MD5(CONCAT_WS(\'#\', COALESCE(`'.
    implode('`, ""#NULL#""), COALESCE(`', $this->_columns).
    '`, ""#NULL#"")))';
$sql1 = ""SELECT COUNT(*) AS cnt, 
        SUM(CONV(SUBSTRING({$part}, 1, 4), 16, 10)) as a1, 
        SUM(CONV(SUBSTRING(@CRC, 5, 4), 16, 10)) as a2, 
        SUM(CONV(SUBSTRING(@CRC, 9, 4), 16, 10)) as a3, 
        SUM(CONV(SUBSTRING(@CRC, 13, 4), 16, 10)) as a4, 
        SUM(CONV(SUBSTRING(@CRC, 17, 4), 16, 10)) as a5, 
        SUM(CONV(SUBSTRING(@CRC, 21, 4), 16, 10)) as a6, 
        SUM(CONV(SUBSTRING(@CRC, 25, 4), 16, 10)) as a7, 
        SUM(CONV(SUBSTRING(@CRC, 29, 4), 16, 10)) as a8 
    FROM `dbname`.`tablename` 
    WHERE `id` >= $min AND `id` <= $max ""; So basically, it's concatenating each row together (all the columns of each row more specifically) and then MD5ing them.  Then it walks 4 hexbits at a time through that MD5 and sums them across all rows (4 hexbits to allow me to do huge tables without needing to worry about overflowing).  Then, I just compare the result of this query on both tables to see if everything is the same. By using this binary search, I am able to rather quickly narrow down where the changes are so that I can port them. It's actually reasonably efficient, so I'm not too concerned about that.  What I am concerned about is if this is even necessary.  It's screaming to me ""You're doing it wrong"", but I can't figure out any cleaner method around it... What are your thoughts?"
17,"For the n steps bit, consider using recursion - but tread carefully."
18,I might recommend the use of switch statements and white space along with LRE's suggestion of breaking this into multiple methods. It also looks like you have quite a bit of repeated code maybe try to break that out for sure it its own methods.
19,"use an abstraction library like Pear MDB2 for your database connection. This abstracts all the connection logic away from your code, so should ever change your database (mysql to SQLite,etc) you won't have to change your code. http://pear.php.net/manual/en/package.database.mdb2.php"
22,"Custom checksum algorithm. A while back, I reverse-engineered a checksum algorithm from an MMO used to check the validity of an item that's linked to chat (similar to WoW ). The idea is that if the checksum is invalid then the game client would ignore the link when clicked. Otherwise clicking on the item link in in-game chat would display the stat and attrib for that item. ushort16 CreateChecksum(const string &itemlink)
{
    stringstream parseitemlink(itemlink);
    uint32 hexform[ITEMLINKGROUPCOUNT] = {0};
    uint32 hexsum = 0;

    //Parse itemLink string into hexform array
    for (int i = 0; i < ITEMLINKGROUPCOUNT; ++i)
        parseitemlink >> hex >> hexform[i];

    //sum all the itemlink group together
    for (int i = 0; i < ITEMLINKGROUPCOUNT; ++i)
        hexsum += hexform[i];

    for (int i = 0; i < ITEMLINKGROUPCOUNT; ++i)
    {
        uint32 ebx = hexform[i], edi = ebx * i;

        //if loop iteration is odd store MSB 2-bytes.
        //Otherwise, store working hexgroup as is untouched
        if (i & 0x01)
            ebx = hexform[i] >> 16; // aka same as dividing hexform[i] by 65,536

        // (hexform[i] / 65,536) + (hexform[i] * i) + hexsum -- for odd groups
        //  hexform[i] + (hexform[i] * i) + hexsum           -- for even groups
        ebx += edi + hexsum;
        hexsum = ebx ^ hexform[i];
    }

    for (int i = 0; i < ITEMLINKGROUPCOUNT; ++i)
    {
        // the more familiar high-level form would be
        // hexform[i]^2 + hexform[i] * hexsum
        uint32 ecx = (hexform[i] + 1) * hexsum,
               eax = ecx * hexform[i];

        eax >>= 16;
        eax += ecx;
        hexsum = eax ^ hexform[i];
    }

    //return the lower 2-bytes of hexsum
    //as the final checksum
    return hexsum & 0xFFFF;
}//CreateChecksum The format of the itemlink is comprised of a group of hexadecimal separated with a space in string format. It's passed into main() as an argument when the program is run. Here's what an itemlink 's hex string might look like: const string EXAMPLELINK = ""36c6a 0 3f000a54 d0f1 0 0 0 0 0 0 20d0""; Are there any code smells or readability issues in this code segment? Can any part(s) of it be improved?"
24,"g.d.d.c's solution is slightly redundant in that it checks numbers that are multiples of 3 and 5 twice.  I was wondering about optimizations to this, so this is slightly longer than a comment, but not really an answer in itself, as it totally relies on g.d.d.c's awesome answer as inspiration. If you add multiples to the valid list for the multiple ""3"" and then do another pass over the whole list (1-1000) for the multiple ""5"" then you do experience some redundancy. The order in which you add them: add 3-multiples first
 add 5 multiples second will matter (albeit slightly) if you want to check if the number exists in the list or not. That is, if your algorithm is something like add 3-multiples to the list

add 5-multiples to the list if they don't collide it will perform slightly worse than add 5-multiples to the list

add 3-multiples to the list if they don't collide namely, because there are more 3-multiples than 5-multiples, and so you are doing more ""if they don't collide"" checks. So, here are some thoughts to keep in mind, in terms of optimization: It would be best if we could iterate through the list once It would be best if we didn't check numbers that weren't multiples of 3 nor 5. One possible way is to notice the frequency of the multiples.  That is, notice that the LCM (least-common multiple) of 3 and 5 is 15: 3   6  9   12  15  18  21  24   27  30
               ||                   ||
  5     10     15     20     25     30 Thus, you should want to, in the optimal case, want to use the frequency representation of multiples of 3 and 5 in the range (1,15) over and over until you reach 1000. (really 1005 which is divided by 15 evenly 67 times). So, you want, for each iteration of this frequency representation: the numbers at: 3 5 6 9 10 12 15 Your frequencies occur (I'm sorta making up the vocab for this, so please correct me if there are better math-y words) at starting indexes from 0k + 1  to  67k (1 to 1005) [technically 66k] And you want the numbers at positions 3, 5, 6, 9, 10, 12, and 15 enumerating from the index. Thus, for (freq_index = 0; freq_index < 66; ++freq_index) {
    valid.add(15*freq_index + 3);
    valid.add(15*freq_index + 5);
    valid.add(15*freq_index + 6);
    valid.add(15*freq_index + 9);
    valid.add(15*freq_index + 10);
    valid.add(15*freq_index + 12);
    valid.add(15*freq_index + 15); //also the first term of the next indexed range
} and we have eliminated redundancy =) Exercise for the astute / determined programmer: Write a function that takes three integers as arguments, x y z and, without redundancy, finds all the multiples of x and of y in the range from 1 to z . (basically a generalization of what I did above)."
26,"The only things I can see having problems are your acronym variable names i.e. (eax, ecx, ebx, and edi) don't explain what the variables are storing clearly for someone not experienced with doing checksums. The other thing I can see for readability issues is your all lowercase variable names which are descriptive (ie parseitemlink) should be camelCased so I can tell the different words (ie parseItemLink).  That's the only thing I can think of readability wise."
28,"I may be missing something here,
But to me it seems that you have a class that you pass a pre-built query into? I am thinking would it not be beneficial to have a subquery built the same way as the top level queries?"
29,"This code... if (depth == 1)
{
    Canvas.SetTop(g1, 163);
}
else if (depth == 2)
{
    Canvas.SetTop(g1, 108);
}
else if (depth == 3)
{
    Canvas.SetTop(g1, 81);
}
else if (depth == 4)
{
    Canvas.SetTop(g1, 65);
}
else if (depth == 5)
{
    Canvas.SetTop(g1, 54);
}
else if (depth == 6)
{
    Canvas.SetTop(g1, 46);
} Could be better implemented using an array... int[] values = new [] { 0, 163, 108, 81, 65, 54, 46  } Or Dictionary... var values = new Dictionary<int,int>() { { 1, 163 }, { 2, 108 }, { 3, 81 }, { 4, 65 }, { 5, 54 }, { 6, 46} }; This way you could simple say Canvas.SetTop(g1, values[depth])"
30,"If you are using the standard library classes of the same name, I would give the following names the correct namespace qualifier: std::string , std::stringstream , std::hex . In C++, this works just as well, IMHO it's mildy more idiomatic. uint32 hexform[ITEMLINKGROUPCOUNT] = {}; ebx , edi , ecx , eax are not good variable names, if you can give them more meaningful names, then do. uint32 ecx = (hexform[i] + 1) * hexsum,
           eax = ecx * hexform[i]; Personally, I think this is clearer: uint32 ecx = (hexform[i] + 1) * hexsum;
    uint32 eax = ecx * hexform[i]; The comment is really bad because it talks about hexform[i]^2 + hexform[i] * hexsum whereas ecx gets the value hexform[i] * hexsum + hexsum and eax gets the value hexform[i]^2 * hexsum + hexform[i] * hexsum . I think the comment needs a pair of parentheses if the code is doing what you meant. To be robust, you should check whether the parse worked. parseitemlink >> hex >> hexform[i]; You can trivially combine the first two for loops as well."
32,"Here's some superficial review. More for testing the site and some comment formatting than anything, but: do create main functions (helps us benchmarkers a lot) and do think that your module can be imported, so docstrings and local variables help. # Finds...
###-^ Put this in a docstring

def find_multiples():
    """"""Finds sum of all multiples of 3 and 5 from 0 to 999 """"""
###-^ This allows you to ""from x import find_multiples,  help(find_multiples)""
    numbers = []
###-^ Avoid globals
    for i in xrange(1000):
###-^ Use xrange if Python 2.x, no need to start at 0 (it's the default)
       if not (i % 3) or not (i % 5):
###-^ Add spaces around operators, simplify
###-^ the boolean/numeric checks
           numbers.append(i)
###-^ Remove trailing ;
    return numbers

###-^ Removed global

def main():
###-^ Allows calling main many times, e.g. for benchmarking
    numbers = find_multiples()
    print sum(numbers)

if __name__ == '__main__':
    main()"
36,"Generating CSV strings for various 3rd party utilities. I'm generating CSV strings for various 3rd party utilities and this section of code gets repeated in many classes. Is there a better way to generate this string? public override string CsvString()
{
    return (
        string.Format(""\u0022{0}\u0022,\u0022{1}\u0022,\u0022{2}\u0022,\u0022{3}\u0022,\u0022{4}\u0022,\u0022{5}\u0022,\u0022{6}\u0022,\u0022{7}\u0022,\u0022{8}\u0022,\u0022{9}\u0022,\u0022{10}\u0022,\u0022{11}\u0022,\u0022{12}\u0022,\u0022{13}\u0022"",

        this.BlockType,         //  1, A_NAME
        this.Tag,               //  2, A_TAG
        this.Description,       //  3, A_DESC
        this.InitialScan,       //  4, A_ISCAN
        this.AutoManual,        //  5, A_SCAN
        this.ScanTime,          //  6, A_SCANT
        this.IoDevice,          //  7, A_IODV
        this.IoAddress,         //  8, A_IOAD
        this.InitialAmStatus,   //  9, A_IAM
        this.AlarmPriority,     // 10, A_PRI
        this.AlarmEnable,       // 11, A_ENAB
        this.EnableOutput,      // 12, A_EOUT
        this.HistDescription,   // 13, A_HIST_DESC
        this.SecurityArea1      // 14, A_SECURITYAREA1
    ));
}"
39,"Use a StringBuilder : sbuilder.AppendFormat(""\u0022{0}\u0022,\u0022{1}\u0022,\u0022{2}\u0022,\u0022{3}\u0022,\u0022{4}\u0022,\u0022{5}\u0022,\u0022{6}\u0022,\u0022{7}\u0022,\u0022{8}\u0022,\u0022{9}\u0022,\u0022{10}\u0022,\u0022{11}\u0022,\u0022{12}\u0022,\u0022{13}\u0022"",
    this.BlockType,         //  1, A_NAME
    this.Tag,               //  2, A_TAG
    this.Description,       //  3, A_DESC
    this.InitialScan,       //  4, A_ISCAN
    this.AutoManual,        //  5, A_SCAN
    this.ScanTime,          //  6, A_SCANT
    this.IoDevice,          //  7, A_IODV
    this.IoAddress,         //  8, A_IOAD
    this.InitialAmStatus,   //  9, A_IAM
    this.AlarmPriority,     // 10, A_PRI
    this.AlarmEnable,       // 11, A_ENAB
    this.EnableOutput,      // 12, A_EOUT
    this.HistDescription,   // 13, A_HIST_DESC
    this.SecurityArea1      // 14, A_SECURITYAREA1
 ).AppendLine();"
40,"When it comes to Autoloaders, I would tend make it compatible with any of my projects, therefore I would always stay to the best coding standards such as Zend. There is a proposal that states the layout of classes, directory structure, namespaces where autoloaders work very good. The following describes the mandatory requirements that must be adhered to for autoloader interoperability. Mandatory: A fully-qualified namespace and class must have the following structure: \<Vendor Name>\(<Namespace>\)*<Class Name> Each namespace must have a top-level namespace (""Vendor Name""). Each namespace can have as many sub-namespaces as it wishes. Each namespace separator is converted to a DIRECTORY_SEPARATOR when loading from the file system. Each _ character in the CLASS NAME is converted to a DIRECTORY_SEPARATOR . The _ character has no special meaning in the namespace. The fully-qualified namespace and class is suffixed with "".php"" when loading from the file system. Alphabetic characters in vendor names, namespaces, and class names may be of any combination of lower case and upper case. Examples: \Doctrine\Common\IsolatedClassLoader => /path/to/project/lib/vendor/Doctrine/Common/IsolatedClassLoader.php \Symfony\Core\Request => /path/to/project/lib/vendor/Symfony/Core/Request.php \Zend\Acl => /path/to/project/lib/vendor/Zend/Acl.php \Zend\Mail\Message => /path/to/project/lib/vendor/Zend/Mail/Message.php Using the above to construct your autoloader will surely be migratable around your projects regarding weather you have namespaces or not. @Reference There is a very nice class that I use in around 6 projects, and I find that this is perfect and you should study and see what you can do with it. Class Link An example usage would be like so: $classLoader = new SplClassLoader('Doctrine\Common', '/libs/doctrine');
$classLoader->register();

$classLoader = new SplClassLoader('Ircmexell\MyApplication', 'libs/internal');
$classLoader->register();"
41,"I don't think it makes any difference in regards to connecting to the database within the construction or within a connect method, what i do think you need to change is those die commands. using die causes the script to halt and send 1 little message to the user, who would think this is rubbish, and never visit your site again :( :( What you should be doing is catching your errors, and redirecting to a static page where you can show a very nice message to the user, fully apologising for the technical issues your having. You can also have an box that says, Enter your email address and we will email you when were back on line, you get the idea. as for the code I would go down the lines of: class Database
{
    public function __construct($autoconnect = false)
    {
        //Here you would 'globalize' your config and set it locally as a reference.
        if($autoconnect === true)
        {
             $this->connect();
        }
    }

    public function connect()
    {
        if($this->connected() === false)
        {
             $result = $this->driver->sendCommand(""connect"");
             if($result === true)
             {
                  $this->setConnectionState(""active"");
                  $this->setConnectionResource($this->driver->sendCommand(""get_resource""));
             }else
             {
                 throw new DatabaseConnectionError($this->driver->sendCommand(""getDriverError""));
             }
        }
    }
} This gives you more functionality in the long run as every action is decidable within your APP, nothing is auto fired on default. you can simple use try,catch blocks to maintain your error reporting."
45,"Emacs Etags Shortcut Functions. A few functions to let me manage TAGS files more easily. Typically, my projects contain at least one sub-folder. I got sick of manually updating, so I wrote this to help me update a single TAGS file per project (always in the projects' root directory). Please share your thoughts (aside from ""Why are you using Emacs?"", you're not likely to change my mind). One thing I've noticed that could trip me up is that it only tags files of one language (and if I had a project that had both Haskell and JS code, for example, I could tag one or the other). I would particularly appreciate advice on better ways to write find-parent-tags than just building each path from available sub-strings. (defun create-tag-table ()
  ""This will recursively tag all files of a given type starting with the current buffers' directory. 
   It overwrites the old TAGS file, if one exists. 
   Haskell files assume you've installed `hasktags`.""
  (interactive)
  (let ((file-type (get-taggable-extension))
        (cur-dir default-directory)
        (tags-file (find-parent-tags default-directory)))
    (if (equalp file-type ""hs"")
        (shell-command ""hasktags --ignore-close-implementation --etags `find . -type f -name \""*.*hs\""`"")
          (shell-command (concat ""find -name \""*."" file-type ""\"" -print | etags -"")))))

(defun find-parent-tags (dir)
  ""Traverses the directory tree up to /home/[user]/ or / whichever comes first. 
   Returns either nil or the directory containing the first TAGS file it finds.""
  (interactive (list default-directory))
  (find-parent-tags-rec (build-tag-paths dir)))

(defun find-parent-tags-rec (list-of-filepath)
  (cond ((null list-of-filepath) nil)
        ((file-exists-p (car list-of-filepath)) (car list-of-filepath))
        (t (find-parent-tags-rec (cdr list-of-filepath)))))

(defun build-tag-paths (dir-string)
  (build-tag-paths-rec (remove-if #'empty-string? (split-string dir-string ""/"")) (list ""/"")))

(defun build-tag-paths-rec (steps acc)
  (if (null steps) 
      (mapcar (lambda (p) (concat p ""TAGS"")) acc)
    (build-tag-paths-rec (cdr steps)
             (cons (concat (car acc) (car steps) ""/"") acc))))

(defun get-taggable-extension ()
  ""Either returns the current file's extension (if it's appropriate) or asks the user to pick one with completion""
  (let ((b-name (buffer-file-name (current-buffer)))
        (valid-exts (list ""lisp"" ""py"" ""c"" ""hs"" ""rb"" ""ss"" ""scm"" ""js"" ""erl"" ""el"")))
    (string-match ""\\.\\(.*?\\)$"" b-name)
    (let ((current-filetype (match-string 1 b-name)))
      (if (member current-filetype valid-exts)
          current-filetype
        (completing-read ""File type: "" valid-exts nil 'confirm)))))

(defun empty-string? (s) (equalp s """"))

(provide 'tagariffic)"
46,"Break your code into its own methods definitely, there are other ways, but that will probably be the easiest and less time consuming way to make it easier read and debug down the track for a start."
47,"Test case for a caching library. This shows a test case for an old caching library that I use for a project. It features simple save/load/delete functions (sadly static calls) but what I want to focus on is the test code written for this class. In my opinion the unit tests for a class should show how all functions in the class work and what to expect from that class. Recently we got this great change to show off code, so I'd like to ask you if you can read that test code, understand what the class might do and how you would improve upon it. <?php

class DatenCacheTest extends PHPUnit_Framework_TestCase {

    function testNothingFound() {
        $this->assertSame(false, DatenCache::load(""testNotHereCache""));
    }

    function testSaveLoadSimple() {
        $sDatenSimple = ""testStringSaveLoadSimple"";
        $sDatenSimpleParam = ""testStringParam"";
        $sDatenSimpleParam2 = ""testStringParam2"";
        $sDatenSimpleParam3 = """";
        $sDatenSimpleParam4 = 0;

        $this->assertSame(true, DatenCache::save(""testCacheSimple"", false, $sDatenSimple));
        $this->assertSame($sDatenSimple, DatenCache::load(""testCacheSimple"", false));

        $this->assertSame(true, DatenCache::save(""testCacheLinearParam"", ""string"", $sDatenSimpleParam));
        $this->assertSame($sDatenSimpleParam, DatenCache::load(""testCacheLinearParam"", ""string""));

        $this->assertSame(true, DatenCache::save(""testCacheLinearParam"", 5, $sDatenSimpleParam2));
        $this->assertSame($sDatenSimpleParam2, DatenCache::load(""testCacheLinearParam"", 5));

        $this->assertSame(true, DatenCache::save(""testCacheBoundStringParam"", false, $sDatenSimpleParam3)); 
        $this->assertSame($sDatenSimpleParam3, DatenCache::load(""testCacheBoundStringParam"", false));

        $this->assertSame(true, DatenCache::save(""testCacheBoundIntParam"", false, $sDatenSimpleParam4));
        $this->assertSame($sDatenSimpleParam4, DatenCache::load(""testCacheBoundIntParam"", false));

        $oObj = new stdClass();
        $oObj->bob = 2;
        $this->assertSame(true,   DatenCache::save(""testCacheBoundObjParam"", $oObj, ""zwei""));
        $this->assertSame(""zwei"", DatenCache::load(""testCacheBoundObjParam"", $oObj));
   }

    function testSaveLoadArray() {
        $aDaten = array(""da"" => ""ten"", array(""ten"" => ""da""), ""Striche"" => ""' \"";s:5:"", ""h''uh"" => ""mep"", ""\\mep\\"" => ""^^"", ""Zeilenumbruch"" => ""\n"", ""Zeug"" => ""::}}{:"", ""'"" => '""', '""' => ""'"");

        $this->assertSame(true, DatenCache::save(""testCacheArray"", false, $aDaten));
        $this->assertSame($aDaten, DatenCache::load(""testCacheArray"", false));
    }

    function testSaveLoadExpired() {
        $this->assertSame(true,  DatenCache::save(""testCacheExpired"", false, ""testStringLoadExpired"", ""-1 seconds""));
        $this->assertSame(false, DatenCache::load(""testCacheExpired"", false));
    }

    function testSaveLoadObject() {
        $oObj = new stdClass();
        $oObj->bob = 2;
        $this->assertSame(true, DatenCache::save(""testCacheBoundIntParam"", false, $oObj));

        $oNewObj = DatenCache::load(""testCacheBoundIntParam"", false);
        $this->assertEquals($oObj, $oNewObj);
        $this->assertSame($oObj->bob, $oNewObj->bob);

    }

    function testSaveLoadComplexParam() {
        $aKonfigEins  = array(DatenCache::ANLAGEN_ID() => 1, DatenCache::SESSION_ID() => ""id1"");
        $aKonfigZwei  = array(DatenCache::ANLAGEN_ID() => 1, DatenCache::SESSION_ID() => ""id2"");
        $aKonfigDrei  = array(DatenCache::ANLAGEN_ID() => 1, DatenCache::SESSION_ID() => ""id3"");
        $aKonfigVier  = array(DatenCache::ANLAGEN_ID() => 1);
        $aKonfigFuenf = array(DatenCache::SESSION_ID() => ""id3"");
        $aKonfigSechs = array(DatenCache::ANLAGEN_ID() => 1, DatenCache::SESSION_ID() => ""id3"", DatenCache::PERSON_ID() => 1);

        $this->assertSame(true, DatenCache::save(""testCacheComplexParam"", $aKonfigEins, ""v1""));
        $this->assertSame(""v1"", DatenCache::load(""testCacheComplexParam"", $aKonfigEins));
        $this->assertSame(true, DatenCache::save(""testCacheComplexParam"", $aKonfigZwei, ""v2""));
        $this->assertSame(""v2"", DatenCache::load(""testCacheComplexParam"", $aKonfigZwei));

        $this->assertSame(false, DatenCache::load(""testCacheComplexParam"", $aKonfigDrei));
        $this->assertSame(false, DatenCache::load(""testCacheComplexParam"", $aKonfigVier));
        $this->assertSame(false, DatenCache::load(""testCacheComplexParam"", $aKonfigFuenf));
        $this->assertSame(false, DatenCache::load(""testCacheComplexParam"", $aKonfigSechs));

    }

    function testInvalidate() {
        $this->assertSame(true, DatenCache::save(""testCacheSimple"", false, ""testStringInvalidate""));
        DatenCache::invalidate(""testCacheSimple"");
        $this->assertSame(false, DatenCache::load(""testCacheSimple"", false));
    }

    function testInvalidateWithParams() {
        $sTestStringEins = ""testStringInvalidateWithParams"";
        $sTestStringZwei = ""testStringInvalidateWithParamsZwei"";
        $aKonfigEins = array(DatenCache::ANLAGEN_ID() => 1, ""Pony"" => false);
        $aKonfigZwei = array(DatenCache::ANLAGEN_ID() => 1, ""Pony"" => true);

        $this->assertSame(true, DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigEins, $sTestStringEins));
        $this->assertSame(true, DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigZwei, $sTestStringEins));
        DatenCache::invalidate(""testCacheInvalidateWithParams"", $aKonfigEins);
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigEins));
        $this->assertSame($sTestStringEins, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigZwei));


        $aKonfigDrei = array(DatenCache::ANLAGEN_ID() => 1, DatenCache::BENUTZER_ID() => 123, ""bob"" => ""please"");
        $aKonfigVier = array(DatenCache::ANLAGEN_ID() => 2, ""Pony"" => true, ""bob"" => ""please"");
        $aPartEins   = array(DatenCache::ANLAGEN_ID() => 1);
        $aPartZwei   = array(DatenCache::BENUTZER_ID() => 123);
        $aPartDrei   = array(""bob""  => ""please"");

        $this->assertSame(true,  DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigDrei, $sTestStringZwei.""1""));
        DatenCache::invalidate(""testCacheInvalidateWithParams"", $aPartEins);
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigDrei));

        $this->assertSame(true,  DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigDrei, $sTestStringZwei.""2""));      
        DatenCache::invalidate(""testCacheInvalidateWithParams"", $aPartZwei);
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigDrei));

        $this->assertSame(true,  DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigDrei, $sTestStringZwei.""3""));
        DatenCache::invalidate(""testCacheInvalidateWithParams"", $aPartDrei);
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigDrei));



        $this->assertSame(true,  DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigEins, $sTestStringEins));
        $this->assertSame(true,  DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigZwei, $sTestStringEins));
        $this->assertSame(true,  DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigDrei, $sTestStringEins));
        DatenCache::invalidate(""testCacheInvalidateWithParams"", array(DatenCache::ANLAGEN_ID() => 1));
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigEins));
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigZwei));
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigDrei));

        $this->assertSame(true,  DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigEins, $sTestStringEins));
        $this->assertSame(true,  DatenCache::save(""testCacheInvalidateWithParams"", $aKonfigVier, $sTestStringEins));
        DatenCache::invalidate(""testCacheInvalidateWithParams"", array(DatenCache::ANLAGEN_ID() => 1));
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigEins));
        $this->assertSame($sTestStringEins, DatenCache::load(""testCacheInvalidateWithParams"", $aKonfigVier));

    }

    function testCleanup() {
        $this->assertSame(true, DatenCache::save(""testCacheSimple"",       false, ""testString"", ""-5 seconds""));
        $this->assertSame(true, DatenCache::save(""testCacheSimpleBleibt"", false, ""testString"", ""+30 seconds""));
        DatenCache::cleanup();
        $this->assertSame(""testString"", DatenCache::load(""testCacheSimpleBleibt"", false));
        $this->assertSame(false, DatenCache::load(""testCacheSimple"", false));
        // Direkt auf der DB Prfen ob der Datensatz wiklich gelscht wurde und nicht nur ausgelaufen ist
        $this->assertSame(
            array(),
            McDb::getConnection(DB_MC_CACHES)->getRow(
                ""SELECT * FROM mc_caches.T_DATEN_CACHE WHERE PARAMETER = ? AND VALUE = ?"", ""NAME"", ""testCacheSimple""
            )
        );

    }

    function testCleanupWithParam() {
        $aKonfig = array(DatenCache::ANLAGEN_ID() => 1);
        $this->assertSame(true, DatenCache::save(""testCacheSimple"", $aKonfig, ""testString"", ""+120 seconds""));
        DatenCache::cleanup();
        $this->assertSame(""testString"", DatenCache::load(""testCacheSimple"", $aKonfig));
    }

    function testInvalidateByParam() {
        $mValue1 = 1;
        $mValue2 = 2;
        $aKonfigEins = array(DatenCache::ANLAGEN_ID() => $mValue1);
        $aKonfigZwei = array(DatenCache::ANLAGEN_ID() => $mValue2);

        $this->assertSame(true, DatenCache::save(""testCacheInvalidateByParam"",  $aKonfigEins, ""testString""));
        $this->assertSame(true, DatenCache::save(""testCacheInvalidateByParam2"", $aKonfigZwei, ""testString2""));

        DatenCache::invalidateByParam(DatenCache::ANLAGEN_ID());

        $this->assertSame(false, DatenCache::load(""testCacheInvalidateByParam"",  $aKonfigEins));
        $this->assertSame(false, DatenCache::load(""testCacheInvalidateByParam2"", $aKonfigZwei));


        $this->assertSame(true, DatenCache::save(""testCacheSimple"",  $aKonfigEins, ""testString""));
        $this->assertSame(true, DatenCache::save(""testCacheSimple2"", $aKonfigZwei, ""testString2""));

        DatenCache::invalidateByParam(DatenCache::ANLAGEN_ID(), $mValue1);

        $this->assertSame(false, DatenCache::load(""testCacheSimple"",  $aKonfigEins));
        $this->assertSame(""testString2"", DatenCache::load(""testCacheSimple2"", $aKonfigZwei));
    }

    function testInvalidateByParamLike() {
        $mValue1 = ""I wan't a Pony"";
        $mValue2 = ""No Pony for you !"";
        $mValue3 = ""xxx"";

        $this->assertSame(true, DatenCache::save(""PonyCache"", array(""PonyParam"" => $mValue1), ""test1""));
        $this->assertSame(true, DatenCache::save(""PonyCache"", array(""PonyParam"" => $mValue2), ""test2""));
        $this->assertSame(true, DatenCache::save(""PonyCache"", array(""PonyParam"" => $mValue3), ""test3""));

        DatenCache::invalidateByParam(""PonyParam"", ""%Pony%"", true);

        $this->assertSame(false,   DatenCache::load(""PonyCache"", array(""PonyParam"" => $mValue1)));
        $this->assertSame(false,   DatenCache::load(""PonyCache"", array(""PonyParam"" => $mValue2)));
        $this->assertSame(""test3"", DatenCache::load(""PonyCache"", array(""PonyParam"" => $mValue3)));
    }

    /**
     * @expectedException PHPUnit_Framework_Error
     */
    function testInvalidSaveTime() {
        $this->assertSame(false, DatenCache::save(""testFail"", null, ""test1"", ""invalidStrtotime""));
    }

    function testInvalidSaveTimeReturn() {
        $this->assertSame(false, @DatenCache::save(""testFail"", null, ""test1"", ""invalidStrtotime""));
    }
}"
48,"Critique My Codeigniter Custom CMS Pages Model. I am currently developing a custom CMS being built on top of Codeigniter and was wondering if you can spot any flaws in my page fetching model code. The page fetching model is not entirely complete but the main functionality for retrieving a page is done, as well as retrieving modules assigned to a page (a module is really just a widget). Can this model be better in some parts, perhaps in relation to the joins I am doing? although not really joins, but multiple queries to pull out bits of related info the pages like modules and media. <?php

  class Mpages extends CI_Model {

      public function __construct()
      {
          parent::__construct();
      }

      public function fetch_page($page_slug = 'home') 
      {
          $db = $this->db;

          $query = 
            $db
               ->where('page_status', 1)
               ->where('page_slug', strtolower($page_slug))
               ->get('pages')
               ->result_array();

          $page_id = $query[0]['id'];

          $query['modules'] = 
            $db
                ->select('modules.module_name, modules.module_slug, modules.id moduleid')
                ->where('page_id', $page_id)
                ->join('pages_modules lpm', 'moduleid = lpm.module_id')
                ->order_by('module_order', 'asc')
                ->get('modules')
                ->result_array();

          /*$query['media'] = 
            $db
                ->select('lucifer_media.media_file_name, lucifer_media.media_file_extension, lucifer_media.media_directory')
                ->join('lucifer_pages_media', 'lucifer_pages_media.page_id = '.$page_id.'')
                ->get('lucifer_media')
                ->result_array();*/

          if ($query) {

            return $query;

          } else {
            return false;
          }
      }

      public function fetch_navigation()
      {
        $result = $this->db->order_by(""nav_order"", ""asc"")->where('published', 1)->get('navigation')->result_array();
        return $result;
      }

      public function fetch_layout($id)
      {

          $result = $this->db->where('id', $id)->get('layouts')->result_array();

          return $result[0];

      }

  }

?>"
49,"PHP/Doctrine bootstrap for review. Here's my bootstrap.php for my PHP/MySQL/Doctrine app.  It's my first PHP app so I'm interested in learning from the experience of others how this could be improved - security-wise, performance-wise, or otherwise. //-------------------------------------------------------------------------
// Define global constants
define('ROOT_PATH', dirname(__FILE__) . '/');
define('URL_BASE', 'http://localhost/myapp/public/');
define('LIB_PATH', 'C:\\wamp\\www\\lib\\');
define('OPENID_PATH', 'C:\\wamp\www\\lib\\lightopenid.git\\openid.php');

//-------------------------------------------------------------------------
// Bootstrap Doctrine.php, register autoloader, specify
// configuration attributes and load models.
require_once(LIB_PATH . 'doctrine12/lib/Doctrine.php');
spl_autoload_register(array('Doctrine', 'autoload'));
$manager = Doctrine_Manager::getInstance();

//-------------------------------------------------------------------------
// Define database connection
$dsn = 'mysql:dbname=mydb;host=127.0.0.1';
$user = 'xxx';
$password = 'yyy';
$dbh = new PDO($dsn, $user, $password);
$conn = Doctrine_Manager::connection($dbh);

//-------------------------------------------------------------------------
// Set defaults
$manager->setAttribute(Doctrine::ATTR_DEFAULT_COLUMN_OPTIONS,
  array('type' => 'string', 'length' => 255, 'notnull' => true));
$conn->setAttribute(Doctrine_Core::ATTR_QUOTE_IDENTIFIER, true);
$manager->setAttribute(Doctrine_Core::ATTR_AUTO_ACCESSOR_OVERRIDE, true);
// Don't load a model until it's needed (causes problems when this is on)
//$manager->setAttribute(Doctrine_Core::ATTR_MODEL_LOADING, Doctrine_Core::MODEL_LOADING_CONSERVATIVE);

//-------------------------------------------------------------------------
// Import model objects
Doctrine_Core::loadModels(ROOT_PATH . 'app/models/generated'); // have to load base classes first
Doctrine_Core::loadModels(ROOT_PATH . 'app/models');"
50,"Shuffling algorithm for a ""guess that tune"" game. I'm making a ""guess that tune"" game in Visual Basic 6 that is supposed to play each song in a random order: ' from frmGuessGame.frm
Private Sub Swap(ByRef Value1 As Variant, ByRef Value2 As Variant)
Dim Temporary As Variant
Temporary = Value1
Value1 = Value2
Value2 = Temporary
End Sub

Private Sub ShuffleList()
Dim LoopCtr As Integer, SwapWith As Integer
For LoopCtr = LBound(InnerPlaylist) To UBound(InnerPlaylist)
SwapWith = (Rnd * (UBound(InnerPlaylist) - LBound(InnerPlaylist))) + LBound(InnerPlaylist)
Swap InnerPlaylist(LoopCtr), InnerPlaylist(SwapWith)
Next
End Sub My initialization function does include the Randomize statement, so it should be a good, even shuffle. ' from mdiMain.frm
Private Sub MDIForm_Load()
'initialize pseudo-random number generator
Randomize
frmMusiguess.Show
frmSplash.Show
End Sub I'm not sure, however, that this is the best way to do it. Am I on the right track?"
54,"I lack the syntax knowledge to say I understand the class. I can say reading it is a bit hard due to long lines and the fact that the dominant patterns are repetitive method/variable names. Test names are descriptive enough Maybe if you could extract methods like DatenCache::load to Dload and $this->assertSame to aSame it would get less busy. Or make an utility function, since you're asserting equality on booleans (so assertTrue and assertFalse could make it clearer). Where possible, constructing more arrays outside the calls could also help."
55,"Here are a few lines that might be useful to add if you would like to use these options: /**
 * Needed for SoftDelete to work
 */
$manager->setAttribute(Doctrine::ATTR_USE_DQL_CALLBACKS, true);

/**
 * Tell doctrine to look for custom ___Table classes in the models folder
 */
$manager->setAttribute(Doctrine::ATTR_AUTOLOAD_TABLE_CLASSES, true);"
57,"I would probably do something like this: I don't know VB so this is pseudo code. Private Function Shuffle(playlist) as Playlist
{
    Dim PlayList as NewPlayList
    Dim RandomIndex as Integer

    while(playlist has elements)
    {
       RandomIndex = (Random number between lowerbound and upperbound)

       remove song at RemoveIndex from playlist
       add removed song to NewPlaylist
    }

    return NewPlayList
} The issue I have with the way you did it is that there is ample opportunity to undo the shuffle. For example, Suppose you are at index 1 and the random number is 2. You swap 1 and 2. Now suppose you are at index 2 and the random number is 1. Now you just undid the shuffle that you preformed in the previous iteration. Also, I don't like the use of the global variable InnerPlaylist."
59,We use mk-table-checksum . It works really great in Master-Slave context where it also allows to sync differences in both directions depending on your choice. Saidly from what i've seen most people it for replication and i can't provide any copy/pasteable output but if you don't know it it's definitly worth looking into. If you know it i'd like to hear why it doesn't work for you. To get an overview over many tables you can use something like mk-table-checksum host1 host2 | mk-checksum-filter
61,"I don't know Codeigniter so i can't comment on ""is this a propper model"". For my answer i'm just going to assume it is. It's not much code so i'm going to focus on some details: public function __construct()
  {
      parent::__construct();
  } Those 5 lines do absolutely nothing. I'd remove them. If you need a constructor later, add it later. public function fetch_navigation()
  {
    $result = $this->db->order_by(""nav_order"", ""asc"")->where('published', 1)->get('navigation')->result_array();
    return $result;
  } This is a pretty hard to read (113 Chars in that line). I'd go for something like this (to say with your formatting from above) public function fetch_navigation()
  {
      return $this->db
          ->order_by(""nav_order"", ""asc"")
          ->where('published', 1)
          ->get('navigation')
          ->result_array();
  } $db = $this->db; Seems unnecessary to create a local variable, those 6 extra chars shoudn't hurt. I needed to look twice to see where that variable is from and if its local because changes are made to it. So far those are really minor notes. Unreachable code ? if ($query) {
  return $query;
} else {
  return false;
} you are setting $query['modules'] = ... so even if that is null $query will at least contain array(""modules"" => null); and that will always be true."
62,"Other than long lines, I'm not seeing something too unreadable.  I don't advise shortening function names as doing so makes it less clear what the function is doing.  Instead, try splitting the function calls being passed as parameters onto different lines by either splitting the line across multiple lines or storing the returned value as a variable and passing that variable in."
65,"Maybe something like this: public static string MakeCsvLine(params string[] items)
{
  return String.Format(""\u0022{0}\u0022"",String.Join(""\u0022,\u0022"",items));
} Edit: On thinking about it might be better to use it to build up a string builder so: public static void AddCsvLine(StringBuilder sb, params string[] items)
{
  sb.AppendFormat(""\u0022{0}\u0022"",String.Join(""\u0022,\u0022"",items))
        .AppendLine();
} This would remove having to have long strings repeated all over the code.
Edit: Made the funtion return the orginal result."
67,"I would do it like this: total = 0

for i in range(3, end, 3):
  total += i

for i in range(5, end, 5):
  if i % 3 != 0: # Only add the number if it hasn't already
    total += i   # been added as a multiple of 3 The basic approach is the same as g.d.d.c's: iterate all the multiples of 3, then 5. However instead of using a set to remove duplicates, we simply check that the multiples of 5 aren't also multiples of 3. This has the following upsides: Checking divisibility is less expensive than adding to a set. We build the total up incrementally, so we don't need a separate call to sum at the end. We got rid of the set, so we only need constant space again."
69,"Shamos-Hoey algorithm for checking the self-intersection of a closed shape. I implemented the Shamos-Hoey algorithm to check if a closed shape is self-intersected. Is this algorithm ok in terms of performance? public boolean isSelfIntersected() {
    Set<Line2D> plines = new HashSet<Line2D>();
    for (Path2D ps : this.getPath()) {
        PathIterator p_it = ps.getPathIterator(null, /*flatness*/ 1);
        List<Line2D> estPath = new ArrayList<Line2D>();
        while (!p_it.isDone()) {
            p_it.next();
            double[] coords = new double[6];
            int s = p_it.currentSegment(coords);
            if (s == PathIterator.SEG_LINETO) {
                if (estPath.size() != 0) {
                    Point2D pp = estPath.get(estPath.size() - 1).getP2();
                    estPath.add(new Line2D.Double(pp, new Point2D.Double(coords[0],coords[1])));
                } else {
                    estPath.add(new Line2D.Double(new Point2D.Double(), new Point2D.Double(coords[0],coords[1])));
                }
            }
        }
        for (Line2D lq : estPath) {
            plines.add(tweakLine(lq));
        }
    }
    return ShamosHoeyAlgorithm(plines);

}

/**
 * Moves first point of the line by 0.0000001 of it's length.
 * @return
 */
static Line2D tweakLine(Line2D l) {
    Line2D ql = new Line2D.Double(
            l.getX1() + 0.0000001*(l.getX2() - l.getX1()),
            l.getY1() + 0.0000001*(l.getY2() - l.getY1()),
            l.getX2() - 0.0000001*(l.getX2() - l.getX1()),
            l.getY2() - 0.0000001*(l.getY2() - l.getY1()));
    return ql;
}

public class ShamosHoeyAlgorithm {

    public static boolean ShamosHoeyAlgorithm(Collection<Line2D> lines) {
        List<AlgEvent> events = new ArrayList<AlgEvent>(lines.size() * 2);
        for (Line2D li : lines) {
            if (li.getX1() < li.getX2()) {
                Line2D l = new Line2D.Double(li.getP1(), li.getP2());
                events.add(new AlgEvent(l, true));
                events.add(new AlgEvent(l, false));
            } else if (li.getX1() > li.getX2()) {
                Line2D l = new Line2D.Double(li.getP2(), li.getP1());
                events.add(new AlgEvent(l, true));
                events.add(new AlgEvent(l, false));
            } else {
                if (li.getY1() < li.getY2()) {
                    Line2D l = new Line2D.Double(li.getP1(), li.getP2());
                    events.add(new AlgEvent(l, true));
                    events.add(new AlgEvent(l, false));
                } else if (li.getY1() > li.getY2()) {
                    Line2D l = new Line2D.Double(li.getP2(), li.getP1());
                    events.add(new AlgEvent(l, true));
                    events.add(new AlgEvent(l, false));
                } else {
                    return true;
                }
            }
        }
        Collections.sort(events, new AlgEvtComparator());
        TreeSet<Line2D> sl = new TreeSet<Line2D>(new LineComparator());
        for (AlgEvent e : events) {
            if (e.isStart) {
                Line2D nl = e.line;
                Line2D above = sl.higher(nl);
                if (above != null) {
                    if (above.intersectsLine(nl)) {
                        return true;
                    }
                }
                Line2D below = sl.lower(nl);
                if (below != null) {
                    if (below.intersectsLine(nl)) {
                        return true;
                    }
                }
                sl.add(nl);
            } else {
                Line2D nl = e.line;
                Line2D above = sl.higher(nl);
                Line2D below = sl.lower(nl);
                sl.remove(nl);
                if (above != null && below != null) {
                    if (above.intersectsLine(below)) {
                        return true;
                    }
                }
            }
        }
        return false;
    }

    static class AlgEvent {

        public Line2D line;
        public boolean isStart;

        AlgEvent(Line2D l, boolean isStart) {
            line = l;
            this.isStart = isStart;
        }

        Point2D getPoint() {
            return (isStart) ? line.getP1() : line.getP2();
        }

        double getX() {
            return (isStart) ? line.getX1() : line.getX2();
        }

        double getY() {
            return (isStart) ? line.getY1() : line.getY2();
        }

        @Override
        public String toString() {
            return ""start =  "" + isStart + "", point = "" + this.getPoint() + "", line = "" + line.getP1() + "" : "" + line.getP2();
        }

    }

    static class AlgEvtComparator implements Comparator<AlgEvent> {

        public int compare(AlgEvent o1, AlgEvent o2) {
            if (o1.getX() < o2.getX()) {
                return -1;
            } else if (o1.getX() > o2.getX()) {
                return 1;
            } else {
                if (o1.getY() < o2.getY()) {
                    return -1;
                } else {
                    return 1;
                }
            }
        }

    }

    /**
     * Class to compare lines, to ensure above-below order.
     */
    static class LineComparator implements Comparator<Line2D> {

        public int compare(Line2D o1, Line2D o2) {
            if (o1.getY1() < o2.getY1()) {
                return -1;
            } else if (o1.getY1() > o2.getY2()) {
                return 1;
            } else {
                if (o1.getY2() < o2.getY2()) {
                    return -1;
                } else if (o1.getY2() > o2.getY2()) {
                    return 1;
                } else {
                    return 0;
                }
            }
        }

    }

}"
71,"I would get rid of the for loops and use sum on generator expressions. def solution_01(n):
    partialsum = sum(xrange(3, n, 3))  
    return partialsum + sum(x for x in xrange(5, n, 5) if x % 3) Note that we're using xrange instead of range for python 2. I have never seen a case where this isn't faster for a for loop or generator expression. Also consuming a generator expression with sum should be faster than adding them up manually in a for loop. If you wanted to do it with sets, then there's still no need for for loops def solution_01(n):
    values = set(range(3, n, 3)) | set(range(5, n, 5))
    return sum(values) Here, we're just passing the multiples to the set constructor, taking the union of the two sets and returning their sum. Here, I'm using range instead of xrange . For some reason, I've seen that it's faster when passing to list . I guess it would be faster for set as well. You would probably want to benchmark though."
72,"Implementation of a PID Controller. I've implemented a PID controller, but seeing as I'm not an expert in control theory, have I missed any edge cases? public class PIDController
{
    public enum PIDMode
    {
        Manual,
        Auto,
    }

    public enum PIDAction
    {
        Indirect,
        Direct,
    }

    public PIDMode Mode { get; set; }
    public PIDAction Action { get; set; }

    public double Proportional { get; set; }
    public double Integral { get; set; }
    public double Derivative { get; set; }

    public double Minimum { get; set; }
    public double Maximum { get; set; }

    public double DeltaMinimum { get; set; }
    public double DeltaMaximum { get; set; }

    private double _ProportionalTerm;
    private double _Integrator;
    private double _Derivator;

    public double Setpoint { get; set; }

    private double _Feedback;
    public double Feedback
    {
        get
        {
            return _Feedback;
        }
    }

    public void Calculate(double Input, long Time)
    {
        double output;

        // Compute the error value
        double Error = Setpoint - Input;

        if (Mode == PIDMode.Auto)
        {
            if (Action == PIDAction.Direct)
                Error = 0 - Error;

            // Compute the proportional component
            _ProportionalTerm = 1000.0f * (Error - _Derivator) / (double)Time;

            // Compute the integrator component, clamped to min/max delta movement
            _Integrator += (float)Error * (float)Time / 1000.0f;
            if (_Integrator < DeltaMinimum)
                _Integrator = DeltaMinimum;
            if (_Integrator > DeltaMaximum)
                _Integrator = DeltaMaximum;

            // Add the proportional component
            output = (Proportional * Error);

            // Add the integral component
            output += Integral * _Integrator;

            // Add the derivative component
            output += Derivative * _ProportionalTerm;

            // Clamp output to min/max
            if (output < Minimum)
                output = Minimum;
            if (output > Maximum)
                output = Maximum;
        }
        else
        {
            output = Input;
        }

        // Store values
        _Derivator = Error;

        // Returns the result
        _Feedback = output;
    }
}"
74,"I doubt you'll find a way of not listing all those properties without using reflection, but the following helps to eliminate that huge format string which is likely to become the source of bugs. var properties = new Object[]
{
    this.BlockType,         //  1, A_NAME
    this.Tag,               //  2, A_TAG
    this.Description,       //  3, A_DESC
    this.InitialScan,       //  4, A_ISCAN
    this.AutoManual,        //  5, A_SCAN
    this.ScanTime,          //  6, A_SCANT
    this.IoDevice,          //  7, A_IODV
    this.IoAddress,         //  8, A_IOAD
    this.InitialAmStatus,   //  9, A_IAM
    this.AlarmPriority,     // 10, A_PRI
    this.AlarmEnable,       // 11, A_ENAB
    this.EnableOutput,      // 12, A_EOUT
    this.HistDescription,   // 13, A_HIST_DESC
    this.SecurityArea1      // 14, A_SECURITYAREA1
}.Select(x => String.Format(""\u0022{0}\u0022"", x));

return String.Join("","", properties); A couple of things to note: This is hardly an efficient way of doing it, but offers fairly maintainable code. If you have an extra property, just add it to the array. This will only work in .NET 4.0. In earlier versions, you'll have to call ToArray() after that call to Select ."
77,"Pagination plugin. This plugin is written in jQuery and is made to support the codeigniter framework . It is an ajax powered table pagination plugin designed to provide only that. You should be able to use almost any other table scripts with this plugin. (function($){
    $.fn.extend({
        tpaginate: function(options) {

            //Settings list and the default values
            var defaults = {
                page: 0,
                url : null,
                rows: 20,
                nodata: 'The table is empty!',
                actions: true
            };

            var table;
            var foot;
            var body;
            var curpagespan;
            var totpagespan;
            var oldbody;
            var replaced = false;

            var options = $.extend(defaults, options);

            return this.each(function() {
                table = this;
                foot = $(table).find(' > tfoot > tr > td');
                body = $(table).find(' > tbody');
                create_footer(foot);
                curpagespan = foot.find(' > #table_pagecount > span#page');
                totpagespan = foot.find(' > #table_pagecount > span#page_total');
                curpagespan.html(0);
                totpagespan.html(0);
                $('#searchButton').click(function(){
                    var term = $('#search').val();
                    if(term.length >= 3){
                        if(replaced)
                            load_data(1, term, true, false);
                        else
                            load_data(1, term, true, true);
                    }
                });
                $('#search').keyup(function(){
                    if($(this).val() == ''){
                        create_tbody(false, false, true);
                    }
                });
            });

            function create_footer() {
                var pagecount = $('<div id=""table_pagecount"">Page <span id=""page""></span> of <span id=""page_total""></span></div>');
                var pager = $('<div id=""table_pageination""><a class=""link"" id=""first"" style=""display:none;"">First</a><a class=""link"" id=""prev"" style=""display:none;"">Prev</a><span id=""pages""></span><a class=""link"" id=""next"" style=""display:none;"">Next</a><a class=""link"" id=""last"" style=""display:none;"">Last</a></div>');
                foot.append(pagecount);
                foot.append(pager);
                load_data(1, '', true);
            }

            function current_page(page){
                curpagespan.html(page);
            }

            function total_page(page){
                totpagespan.html(Math.ceil(page/options.rows));
            }

            function load_data(page, search, action, save){
                if(save == null)
                    save = false;
                else
                    save = true;
                $('#table_pageination a.link').unbind('click');
                search = (search == null ? '' : search);
                var start = (page-1)*options.rows;
                if(page == 1)
                    start = 0;
                var url = options.url+'/'+start+'/'+action+'/'+search;
                $.ajax({
                    url: url,
                    success: function(data) {
                        if(data.total != 0){
                            current_page(page);
                            total_page(data.total);
                            create_tbody(data.members, save);
                            update_pages(page, Math.ceil(data.total/options.rows));
                        } else{
                            current_page(0);
                            total_page(0);
                            foot.find(' > #table_pageination > #pages').html('<a class=""link"">0</a>');
                            var newtr = $('<tr></tr>');
                            var newtd = $('<td style=""font-weight:bold;text-align: center;""></td>').attr('colspan', foot.attr('colspan')).text(options.nodata);
                            body.html(newtr.append(newtd));
                        }
                    }
                });
            }

            function create_tbody(rows, save, revert){
                if(save == true){
                    oldbody = body.html();
                    replaced = true;
                }
                var newbody = $('<tbody />');
                if(revert == null){
                    for(var i in rows){
                        var row = $('<tr />');
                        for(var j in rows[i]){
                            if(j != 'id' && j != 'actions')
                                row.append('<td class=""'+j+'td"">'+(rows[i][j] == null ? '' : rows[i][j])+'</td>');
                            if(j == 'actions' && rows[i][j] != null && options.actions)
                                row.append(rows[i][j]);
                        }
                        newbody.append(row);
                    }
                } else{
                    newbody.html(oldbody);
                    replaced = false;
                }
                body.html(newbody.html());
                $(table).trigger(""update"");
            }

            function update_pages(page, total){
                foot.find(' > #table_pageination > #pages').html(ranger(page, 5, total));
                if(page == 1){
                    foot.find(' > #table_pageination > a#first').fadeOut('slow');
                    foot.find(' > #table_pageination > a#prev').fadeOut('slow');
                } else{
                    foot.find(' > #table_pageination > a#first').attr('rel', 1).fadeIn('slow');
                    if(page != 2)
                        foot.find(' > #table_pageination > a#prev').attr('rel', page-1).fadeIn('slow');
                }
                if(total != page){
                    foot.find(' > #table_pageination > a#last').attr('rel', total).fadeIn('slow');
                    if(total != page+1)
                        foot.find(' > #table_pageination > a#next').attr('rel', ++page).fadeIn('slow');
                } else{
                    foot.find(' > #table_pageination > a#last').attr('rel', total).fadeOut('slow');
                    foot.find(' > #table_pageination > a#next').attr('rel', total).fadeOut('slow');
                }

                $('#table_pageination a.link').click(function(){
                    replaced = false;
                    load_data($(this).attr('rel'), '', true);
                });
            }

            function ranger(num, range, max) {
                var left = num*1;
                var right = num*1;

                while (right - left < range * 2) {
                    if (right + 1 <= max)
                        right++;

                    if (left - 1 > 0)
                        left--;

                    if (right == max && left == 1)
                        break;
                }

                var str = '';
                for (var i = left; i <= right; i++) {
                    if(i != num)
                        str += '<a class=""link"" rel=""'+i+'"">'+i+'</a>';
                    if(i == num)
                        str += '<a rel=""nolink"">'+i+'</a>';
                }
                return str;
            }
        }
    });
})(jQuery);"
79,"Implementing a Singleton pattern in C#. Is this the best way to implement this pattern in C#? public sealed class Singleton
{
    private static readonly Singleton instance = new Singleton();
    public static Singleton Instance { get { return instance; } }

    static Singleton() {}
    private Singleton() {}
}"
80,"I always use this solution if I have to implement a Singleton in C# public sealed class Logging
    {
        static Logging instance = null;
        static readonly object lockObj = new object();

        private Logging()
        {
        }

        public static Logging Logger
        {
            get
            {
                lock (lockObj)
                {
                    if (instance == null)
                    {
                        instance = new Logging();
                    }
                   return instance;
                }
            }
        }

} Compared to your solution this is threadsafe and uses a lazy-creation method. (The object is only instantiated if actually needed) The eager vs. lazy creation isn't really worth a discussion in this example, but I would whenever possible use the thread-safe implementation."
81,"I use Jon Skeet's version of a thread safe Singleton with fully lazy instantiation in C#: public sealed class Singleton
{
    // Thread safe Singleton with fully lazy instantiation  la Jon Skeet:
    // http://csharpindepth.com/Articles/General/Singleton.aspx
    Singleton()
    {
    }

    public static Singleton Instance
    {
        get
        {
            return Nested.instance;
        }
    }

    class Nested
    {
        // Explicit static constructor to tell C# compiler
        // not to mark type as beforefieldinit
        static Nested()
        {
        }

        internal static readonly Singleton instance = new Singleton();
    }
} It works wonders for me! It's really easy to use, just get the instance from the Instance property like so; SingletonName instance = SingletonName.Instance;"
82,"Loop with enclosing items every 'n' steps. I'm listing elements with a foreach , and I would like to enclose items in something tag n by n : $i = 0;
$open = $done = TRUE;
$n = 3;
$opening = ""<div>"";
$closing = ""</div>"";
$names = array(""Doc"", ""Marty"", ""George"", ""Lorraine"", ""Einstein"", ""Biff""); 

foreach($names as $name) { /** $condition was not a bool. My fault. */

    if($open && !($i % n)) {
        print $opening;
        $open = FALSE;
        $done = !$open;
    } elseif(!($i % n)) $done = FALSE;

    /** print element. */
    print $name;

    if(!$open && !($i % n) && !$done) {
        print $closing;
        $open = TRUE;
        $done = !$open;
    }

    $i++;

} Do you think this snippet can be improved? It would be better to have fewer check variables such as $open or $done ."
83,Usually everything in python is handled the come-on-we-are-all-upgrowns principle. This allows you to choose the way you want things to do. However it's best practice to put the main-function code into a function instead directly into the module. This makes it possible to import the function from some other module and makes simple scripts instantly programmable. However avoid the use of globals (what you did with numbers ) for return values since this makes it difficult to execute the function a second time.
84,"There are a couple of immediately obvious things that havent been mentioned yet: You have a lot of magic numbers in your code. Try to define them as const s with meaningful names. For example g.Width = 50; becomes private const int DefaultGridWidth = 50;
...
g.Width = DefaultGridWidth; It seems like a trivial change but it makes a big difference to someone who is reading your code. It gives an indication of why the value is 50, not just that it is 50. You should use more meaningful names for your identifiers. Names like g and g1 do not tell me a lot about what the object is, but mainGrid and innerGrid contain more information for the reader."
85,"Cleaning up class creation / extension. I was wondering for quite some time how to clean up the below code without blowing it up any further. The extension of the classes is the main concern here, it looks a bit too much like magic. That's mainly because it has to handle all the different cases, and I haven't figured out a way to reduce the code in a meaningful fashion here. Maybe I'm paranoid and the code is just fine, but I'd still love to get some feedback on it. The original code and test cases are here . function is(type, obj) {
    return Object.prototype.toString.call(obj).slice(8, -1) === type;
}
function copy(val) { /* ...make shallow copy */ }
function wrap(caller, obj) {
    obj = obj || Function.call;
    return function() {
        return obj.apply(caller, arguments);
    };
}

function Class(ctor) {
    // ...default ctor stuff here....
    function clas(args) { /* ...actual instance ctor stuff... */}

    var proto = {};
    clas.init = wrap(ctor);

    // extend needs to be reduced in width, it easily goes over 80 columns
    // without some ugly if statements
    clas.extend = function(ext) {
        if (is('Function', ext)) {
            return ext.extend(proto); // holy closure!
        }

        for (var e in ext) {
            if (!ext.hasOwnProperty(e)) {
                continue; // a bit ugly imo, but it helps to prevent the indentation
                          // from blowing up
            }

            // this needs some refactoring, it creates bound and unbound
            var val = ext[e], func = is('Function', val);
            if (/^\$/.test(e)) { // statics
                proto[e] = copy(val);
                clas[e] = clas.prototype[e] = func ? wrap(clas, val) : val;

            } else if (func) {
                clas[e] = wrap(proto[e] = clas.prototype[e] = val);
            }
        }
        return clas;
    };

    // this could also need some clean up I suppose
    for (var i = ctor.hasOwnProperty('init') ? 0 : 1,
             l = arguments.length; i < l; i++) {

        var arg = arguments[i];
        is('Object', arg) ? clas.extend(arg) : arg.extend(clas);
    }
    return clas;
}"
86,"Some points i found: Thats the class is marked as abstract struck me as odd as i found out it only has static method calls and since it uses ""self::"" for static call i guess there is no meaningful way to extend the class anyways. (With the LSB issue). I don't see any big issue with the class beeing ""all static"" and i assume it fits into your project. (You don't have a clear bootstrap and you don't want/need multiple instances of that class) The include_once $file; strucks me as a little odd as the ""_once"" part shouldn't be need. But if you wrote the loader at a later stage in the project i see where it might be needed to not run into issues with classes getting loaded two times. Usually i'd say you don't have to make php remember if it already touched a file (and do a disk expensive realpath() on it) since the load function will only be called one time for each previously unknown class. All in all i think the code/usefulness ratio is fine and it isn't overly complex. Alternatives The upcoming ""standards"" and libs are alreay mentioned so i'll just point out another way to do autoloading that ""performs better"" and is less intrusive (requires less code in your application) The PHP Autoload Builder will scan your codebase and provide one file with a big array mapping for all your classes (interface etc.) that you only need to include in your bootstrap. It can be run again to pick up new classes or the resulting file can be edited by hand. (Some people build tools around it so it automatically recreates itself in development if a class isn't found)."
89,"A few tips: Make sure your using good indentation Do not create a function that runs a native method so: if(is(""Function"",ext)) becomes if(typeof ext == ""Function"") remove unnecessary comments and comments should only be at the head of an entity. Do not shorten your variables as it causes issues with the latter developers use stricter typecasting: if (!ext.hasOwnProperty(e)) becomes if(ext.hasOwnProperty(e) == false) Keep your conditions in the for loops on one line There's is not point in reassigning a value from an array becuase you want to send it to a function var arg = arguments[i]; gets removed and arguments[i] is sent to the function Taking into account the above your class would look like so: function Class(ClassBase)
{
    /*
        * Default Constructor, used to do XXX with YYY
    */
    var Arguments = args || [];

    function __Class(Arguments)
    {

    }

    var Prototype = {};
    __Class.Initialize= Wrap(ClassBase);


    /*
        * extend needs to be reduced in width, it easily goes over 80 columns
        * without some ugly if statements
    */

    __Class.Extend = function(ExtendableEntity)
    {
        if (typeof ExtendableEntity == ""function"")
        {
            return ExtendableEntity.extend(Prototype);
        }

        for (var Entity in ExtendableEntity)
        {
            if (ext.hasOwnProperty(Entity) == true)
            {
                var Value = ext[Entity]
                var _Function = (typeof Value == ""function"");

                if (/^\$/.test(Entity)) 
                {
                    Prototype[Entity] = Copy(Value);
                    __Class[Entity] = __Class.Prototype[Entity] = function ? Wrap(__Class, Value) : Value;
                }else 
                {
                    __Class[Entity] = Wrap(Prototype[Entity] = __Class.Prototype[Entity] = Value);
                }
            }
        }
        return __Class;
    }

    for (var i = ClassBase.hasOwnProperty('Initialize') ? 0 : 1, l = Arguments.length; i < l; i++)
    {
        (typeof Arguments[i] == 'object') ? __Class.Extend(Arguments[i]) : Arguments[i].Extend(__Class);
    }
    return __Class;
}"
90,"One problem with your solution is that it won't print the last closing </div> tag if there are less than $n elements inside the last <div> . An approach which fixes that problem and also simplifies the conditional logic for deciding when to print the tags is to chunk the array first using array_chunk and then iterate over the chunks. Now we only need one boolean variable to remember which chunks to surround in tags. function alternate($names, $n, $opening, $closing) {
    $tag = TRUE;
    foreach(array_chunk($names, $n) as $chunk) {
        if($tag) {
            print $opening;
        }
        foreach($chunk as $name) {
            print $name;
        }
        if($tag) {
            print $closing;
        }
        $tag = !$tag;
    }
}"
91,"I always use this, it allows lazy initialisation of generics, instead of creating a new singleton class for each type of singleton I want. It's also threadsafe but does not use locks on every access. public static class Singleton<T> where T : class, new()
{
    private T instance = null;

    public T Instance
    {
        get
        {
            if (instance == null)
                Interlocked.CompareExchange(ref instance, new T(), null);

            return instance;
        }
    }
} If you're unfamiliar with the interlocked class, it performs atomic operations in a manner which is often quicker than a lock. Three possible cases: 1) First access by a single thread . Probably roughly the same performance as the obvious method using a lock 2) First access by many threads at the same time . Many threads might enter the interlocked exchange, in which case several items may get constructed but only 1 will ""win"". So long as your constructor has no global side effects (which is really shouldn't) behaviour will be correct. Performance will be slightly less than a lock, because of multiple allocations, but the overhead is small and this is a very rare case. 3) Later accesses . No locking or interlocked operations, this is pretty much optimal and is obviously the majority case."
92,"Extracting nodes from a graph database. I'm new to Postgres and PostGIS, but not to geospatial applications. I have a table loaded up with graph data in the form of links (edges). The link database has about 60,000,000 rows. I am trying to extract the nodes to allow for quicker searching. For some of my proof-of-concept work I was able to use the link table for the searches, but there will be lots of duplicates, and there's no guarantee that either the source column or the target column contains all nodes. This is Postgres & PostGIS, so I am also using the table to cache a geometry->geography conversion. Yes I do need to use geography fields. I'm also copying the geometry information ""just in case"". Table creation SQL: -- Recreate table and index
DROP TABLE IF EXISTS nodes;

CREATE TABLE nodes (node integer PRIMARY KEY, geog geography(POINT,4326) );

CREATE INDEX geogIndex ON nodes USING GIST(geog);

SELECT AddGeometryColumn('nodes', 'geom', 4326, 'POINT', 2);

-- Insert all unique nodes from the source column
INSERT INTO nodes (node,geog,geom)
       SELECT DISTINCT ON (source) source,geography( ST_Transform(geom_source,4326)),geom_source 
       FROM view_topo;

-- Insert any nodes in the target column that we don't have already
INSERT INTO nodes (node,geog,geom)
       SELECT DISTINCT ON (target) target,geography( ST_Transform(geom_target,4326)),geom_target 
       FROM view_topo
       WHERE NOT EXISTS( SELECT 1 FROM nodes WHERE nodes.node = view_topo.target);

VACUUM ANALYZE; I left the first INSERT running overnight and it took about 2-3hrs to run. This resulted in about 40,000,000 unique nodes being added. I have just enabled the second INSERT and the VACUUM ANALYZE . I am expecting it to take until at least lunchtime. Luckily this is only a batch job that has to be executed once after I've loaded a new link table, but is there a better way? Is there a faster way?"
98,"No. Your shuffle will not be random. You are stepping through each card and swapping it with another random card. This is a common bug found in many shuffling algorithms. To illustrate why your shuffle is not random, let's assume you are shuffling three songs (1, 2, 3). There are six combinations of three song (123, 132, 213, 231, 321, 312). If your shuffle was random, each of these combinations should appear with equal probability. So if you run your shuffle algorithm 600,000 times, each combination should appear roughly 100,000 times each. But it doesn't. When you run your shuffle algorithm 600,000 times (as written), you will see results similar to this: To understand why your implementation produces biased results, read this article on Coding Horror: The Danger of Navet . What you want is a Fisher-Yates shuffle where you swap the current card with any of the remaining cards (or itself). Here it is in pseudo code for an in-place shuffle: To shuffle an array a of n elements:
  for i from n  1 downto 1 do
       j  random integer with 0  j  i
       exchange a[j] and a[i] There are other types of Fisher-Yates shuffles listed here: Wikipedia: FisherYates shuffle ."
109,"HTTP request path parser. I have written a method to tokenize HTTP request paths such as /employee/23/edit : protected void compile(String path){
    int mark=0;
    for(int i=0; i<path.length(); ++i){
        if(path.charAt(i)==DELIM){
            if(mark!=i)
                tokens.add(path.substring(mark,i));
            mark=i+1;
        }
        else if(path.length()==i+1){
            tokens.add(path.substring(mark,i+1));
        }
    }
} And a method to tokenize the consumer of these paths such as /employee/[id]/edit : protected void compile(String path){
    int mark=0;
    boolean wild=false;
    for(int i=0; i<path.length(); ++i){
        if(!wild){
            if(path.charAt(i)==DELIM){
                if(mark!=i)
                    tokens.add(path.substring(mark,i));
                mark=i+1;
            }
            else if(path.length()==i+1){
                tokens.add(path.substring(mark,i+1));
            }
            else if(path.charAt(i)=='['){
                wild=true;
            }
        }
        else if(path.charAt(i)==']'){
            tokens.add(""?"");
            wild=false;
            mark=i+1;
        }
    }
} The idea here is that there will be an implicit variable called id with the value 23 . However, that isn't here nor there. How does my approach look? Can it be improved? Also: DELIM = '/' . This is more-or-less an exercise in writing a parser, which is why I didn't use String#split() ."
110,"Your first compile method can be replaced by a single call to String.split . Assuming the intended behavior for the second compile method is such that ""/foo/b[a]r/baz"" will compile to {""foo"", ""?"", ""baz""} , it can be replaced by a call to split and then iterating over the result and replacing any string the includes square brackets with ""?"". If the intended behavior is rather that it will compile to {""foo"", ""b"", ""?"", ""r"", ""baz""} , you can first replace [anything] by /?/ using String.replace and then use String.split ."
112,"Fetching tweets. I have written this (truncated) code to fetch some tweets: dispatch_async(dispatch_get_global_queue(0, 0), ^{
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

    NSString *JSONStr = [NSString stringWithContentsOfURL:[NSURL URLWithString:@""http://search.twitter.com/search.json?q=haak&lang=nl&rpp=100""] encoding:NSUTF8StringEncoding error:nil];
    if (!JSONStr) {
      [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
      return;
    }

    /*... PARSING ETC ...*/

    dispatch_sync(dispatch_get_main_queue(), ^{
      [delegate didReceiveTweets:foundTweets];
    });

    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
  }); Note the lines from dispatch_sync(dispatch_get_main_queue(), ^{ to }); . This will update the UI. Is this the good way to do it, or are there better ways than using dispatch_sync within a dispatch_async ? Or should I not do this at all? Should I also send setNetworkActivityIndicatorVisible: from within the main thread? The reason I'm not using NSURLConnection is because this code comes from a class method, so I need to create an object containing the delegate for the NSURLConnection , which seems overkill to me."
113,"It looks reasonable, but I don't see why you need to make the Proportional term a member of the class, it doesn't need to be saved, at best it might make sense to be able to query it with a get, but a set seems misleading. I'd be reluctant to allow public setting of the Integral and Derivatives too, querying them might be useful, but letting users of the class set it seems odd. Forcing the scaling by 1000.0 seems arbitrary and inflexible too, this would make sense to expose as a settable constant in my view."
114,"Just as an exercise in making the code easier to read, I'd recommend better variable names.  I can figure out what ""wild"" and ""mark"" are, but it should be immediately apparent to me so I don't have to spend time trying to figure out what they are. Also, I'm assuming you are going to eventually handle URLs with ""?"" and such in them.  You may want to consider checking for invalid characters in the URL so you know when you hit the end of the actual request path."
115,"Subroutine to call other subroutines. I have a Perl application that allows the user to choose between two different formats for data output (and there will likely be more in the near future). In the heart of the algorithm, the code makes a call to a print subroutine. my $stats = analyze_model_vectors( $reference_vector, $prediction_vector );
print_result( $stats, $tolerance ); The print_result subroutine simply calls more specific methods. sub print_result
{
  if($outformat eq ""text"")
  {
    print_result_text(@_);
  }
  elsif($outformat eq ""xml"")
  {
    print_result_xml(@_);
  }
  else
  {
    # Should not reach this far if input checking is done correctly
    printf(STDERR ""Error: unsupported output format '%s'\n"", $outformat);
  }
} Is this good practice? What other alternatives are there and what are their pros/cons? I could think of the following alternatives. Test for output format in the heart of the algorithm, and call the appropriate printing subroutine there. I've never used subroutine references before, but perhaps when I could store a reference to the correct subroutine in a scalar variable and call the print method with that scalar in the heart of the algorithm. Place code for all output formats in a single subroutine, separated by if/elsif/else statements. Keep in mind there may be more output formats required in the near future."
116,"I try to avoid Perl if I can, so this is more of a general answer: I've coded like this in an old VB6 app. Each output function had a wrapper function that then called the required implementation using a series of IFs. Sometimes a particular output method wouldn't need anything - eg. ""Start New Line"" is relevant for text file output, but not Excel worksheet output. I'm currently in the process of porting/re-writing that particular app in C#/.NET 4, where I've been able to take a much more object oriented approach. 
I have defined an ""output base class"" with a standard interface. This is then inherited by the various implementations. As I start the output, I can create the required implementation using a factory method/class, and pass data to it using the standard interface. This particular implementation is actually multi-threaded, so the bulk of the output base class is actually the thread & queue management. Data is then passed in using a small ""data chunk"" class, and queued for output using a thread-safe queue."
117,"This should simplify the looping assuming that you can generalize the positioning code like mention in several of the other answers //Get the initial set of sourcefiles
        var sourceFiles = from file in list
              from invocation in file.getInvocations()
              group invocation by (SourceFile)null into groupedByInvoker
              select groupedByInvoker;

        for (var currentDepth = 0; currentDepth <= depth; currentDepth++)
        {
            foreach (var currentGroup in sourceFiles)
            {
                int sourceFileCount = currentGroup.Count();
                int counter = 0;

                foreach (var invocation in currentGroup)
                {
                    /*
                     * Generalized grid code goes here
                     */
                    counter++;
                }
            }

            //Select the current sub source files
         sourceFiles = from invokerGroup in sourceFiles
              from file in invokerGroup
              from invocation in file.getInvocations()
              group invocation by file into groupedByInvoker
              select groupedByInvoker;

        } This is not an exact mapping to the above code in that this goes over the getInvocations tree breadth first instead of depth first. Updated with imput from Update grid from source hierarchy"
118,"If you can pass in the subroutine it makes the code a lot simpler, you also don't have to deal with an unknown string format as the subroutine itself has been passed in. sub print_result
{
    my $subroutine = shift;
    &$subroutine( @_ );
}

print_result( \&print_result_text, $arg1, $arg2 ) Otherwise I think I'd go with with a hash of subroutine references. It's easily readable and simple to update. sub print_result
{
    my %print_hash = ( text => \&print_result_text,
                        xml => \&print_result_xml );

    if( exists( $print_hash{ $outformat } ) )
    {
        &{$print_hash{ $outformat }}( @_ );
    }
    else
    {
        printf(STDERR ""Error: unsupported output format '%s'\n"", $outformat);
    }
}"
122,"Since you're using C#, you can make your initializers a bit nicer: Grid g = new Grid()
{
    Width = 50,
    Height = 50,
    Tag = focus,
}
//Canvas.SetZIndex(g, 100); The last part of your code (or rather, the second half) does very similar things multiple times: code duplication is a sign your code can be made clearer. For instance (note that your code almost surely contains a bug! The statement inside all the loops invokes s2 and not s3): foreach (SourceFile s in list)
{
    foreach (SourceFile source in s.getInvocations())
    {
        foreach (SourceFile s1 in source.getInvocations())
        {
            foreach (SourceFile s2 in s1.getInvocations())
            {
                foreach (SourceFile s3 in s2.getInvocations())
                {
                    invoCount = invoCount + s2.getInvocations().Count;
                }
            }
        }
    }
} can be changed into list.CountRecursive(t => t.getInvocations(), t => t.getInvocations().Count, 5);

(...)

public static int CountRecursive<T>(this IEnumerable<T> x, Func<T, IEnumerable<T>> f, Func<T, int> c, int depth)
{
    int counter = 0;
    foreach (T t in x)
    {
        if (depth > 1)
        {
            counter += f(t).CountRecursive(f, c, depth - 1);
        }
        else
        {
            counter += c(t);
        }
    }
    return counter;
} which also makes it a lot easier to do it for different recursion levels."
123,"I use a pattern similar to one already posted, but with the following difference: public sealed class Logging
{
    static Logging instance = null;
    static readonly object lockObj = new object();

    private Logging()
    {
    }

    public static Logging Logger
    {
        get
        {
            **if (instance == null)**
            {
                 lock (lockObj)
                 {
                     if (instance == null)
                     {
                         instance = new Logging();
                     }

                 }
            }
            return instance;
        }
    } } The reason being that it avoids calling lock every time, which can help you with performance.  So you check for null, then, if it is null, lock it.  Then you have to check for null again (because someone may have come in right that second) but then you should be ok.  That way, you'll only hit the lock the first time (or two), and blow past it without locking the rest of the time."
127,"The question of whether your code is performant enough is something your profiler can better answer for you. But from looking through the code above I notice quite a bit of duplication along with some rather deeply nested if's which you should try to refactor. Take this for example: if (li.getX1() < li.getX2()) {
            Line2D l = new Line2D.Double(li.getP1(), li.getP2());
            events.add(new AlgEvent(l, true));
            events.add(new AlgEvent(l, false));
        } else if (li.getX1() > li.getX2()) {
            Line2D l = new Line2D.Double(li.getP2(), li.getP1());
            events.add(new AlgEvent(l, true));
            events.add(new AlgEvent(l, false));
        } else {
            if (li.getY1() < li.getY2()) {
                Line2D l = new Line2D.Double(li.getP1(), li.getP2());
                events.add(new AlgEvent(l, true));
                events.add(new AlgEvent(l, false));
            } else if (li.getY1() > li.getY2()) {
                Line2D l = new Line2D.Double(li.getP2(), li.getP1());
                events.add(new AlgEvent(l, true));
                events.add(new AlgEvent(l, false));
            } else
          // ... The two statements events.add(new AlgEvent(l, true)); and events.add(new AlgEvent(l, false)); are being repeated 4 times here! Your line compare method here: static class LineComparator implements Comparator<Line2D> {
    public int compare(Line2D o1, Line2D o2) {
        if (o1.getY1() < o2.getY1()) {
            return -1;
        } else if (o1.getY1() > o2.getY2()) {
       // ...
} can be shorted by taking advantage of logical short-circuit and the ternary operator. So something like this might be easier to read: public int compare(Line2D o1, Line2D o2)
    {
        /* I'm not too familiar with java but can
           the equals method be used here to check
           if the lines are equal?
         */
        // if( o1.equals(o2) ) return 0;

        return (o1.getY1() < o2.getY1() || 
                o1.getY2() < o2.getY2()) ? -1 :
               (o1.getY1() > o2.getY2() ||
                o1.getY2() > o2.getY2()) ? 1 : 0;
    } You can apply the same idea to AlgEvtComparator's compare method. One other thing I noticed in your line compare method, the checks' aren't exactly symmetrical. You have o1.Y1 comparing to o2.Y2 while all the others are checking Y1 to Y1 or Y2 to Y2. Was that really intended? I think this deserves a comment. I'm guessing Line2D is a class you have defined somewhere. You might want to see if you're abstracting its usage enough or if an 'in-between' class is needed. The following code looks like it's leaking stuffing behind Line2D's interface: if (estPath.size() != 0) {
  Point2D pp = estPath.get(estPath.size() - 1).getP2();
  estPath.add(new Line2D.Double(pp, new Point2D.Double(coords[0],coords[1])));
} else {
  estPath.add(new Line2D.Double(new Point2D.Double(), new Point2D.Double(coords[0],coords[1])));
}"
128,"Best way to pass parameters to Factory class?. So I have a series of objects, which I will call Impl1, Impl2, and Impl3.  They each implement an interface, called IImpl.  I have a Factory class who's task is to retrieve the ImplX which is appropriate for a given circumstance, and pass it on to its callers.  So the code in the factory looks like: public IImpl GetInstance(params object[] args)
{
    if (args[0]==""Some Value"")
         return new IImpl1();
    else if (args[0]==""Other Value"")
         return new IImpl2(args[1]);
    else
         return new IImpl3(args[1]);
} So depending on the arguments passed in, different instances are selected.  All well and good and works ok.  The problem now is, that I have a class which needs to call this factory method.  It has no references to IImplX, which is good, but it winds up having to know exactly how to construct the input array to GetInstance, in order to ensure it receives the correct kind of instance.  Code winds up looking like: switch (_selectedInputEnum)
{
    case InputType.A:
        myIImplInst = Factory.GetInstance(""Some Value"");
    case InputType.B:
        myIImplInst = Factory.GetInstance(""Other Value"",this.CollectionB);
    case InputType.C:
        myIImplInst = Factory.GetInstance(""Third Value"",this.CollectionC);
} This feels very redundant, and off somehow.  What would be the best way to abstract the actual parameters of the factory?  I feel like with the above switch statement, I am strongly coupled to the implemenations of IImplx, even if I don't have a direct reference."
129,"How about some kind of intermediary blackboard that the client code constructs before calling the factory, and each concrete Impl can poll to construct itself? // client code:

Blackboard blackboard = new Blackboard();
blackboard.pushCollectionB(collectionB);
blackboard.pushCollectionC(collectionC);
blackboard.pushFoo(foo); 

IImpl myInstance = Factory.GetInstance(b);

///////////////////////////

// in Factory.GetInstance():

return new Impl3(blackboard);

////////////////////////////

// in Impl3:

Impl3(Blackboard b) { process(b.getCollectionC()); } I've hidden the switch statement in the client code, but you could move that into the blackboard as well. What data each concrete Impl needs is now hidden from both the Factory and the client code. However if you need more data in your Blackboard for Impl(x+1) you will need to update every place in your code that creates a Blackboard. Depending on application, over-constructing the Blackboard like this may be expensive for you. You could construct a cached version at startup, or you could make the Blackboard an interface and have your client code derive from it."
131,"Law of Demeter and data models?. Inspired by this question , but hopefully not a duplicate. I understand that the Law of Demeter is very useful in case of services interacting with other services, for example it's much easier to mock the other services in unit tests.
What about services interacting with data models, though? Let's say I have a hierarchy of immutable classes: public final class Document {
    private final List<Page> pages;
    // Constructor, getter, ...
}

public final class Page {
    private final List<Paragraph> paragraphs;
    // Constructor, getter, ...
}

public final class Paragraph {
    private final List<Line> lines;
    // Constructor, getter, ...
} Let's say I want to do something with certain lines in a document doc : public void doSomething(Document doc) {
    for (Page page : doc.getPages()) {
        for (Paragraph para : page.getParagraphs()) {
            for (Line line : para.getLines()) {
                if (someCondition(line)) {
                    someAction(line);
                }
            }
        }
    } Now, as far as I understand, the above code doesn't obey the Law of Demeter.
However, I don't want to force the law at all cost and clutter the model (here, the Document class) with tens of methods like: public List<Line> filterWrtSomeCondition();
public List<Line> filterWrtSomeOtherCondition(); Or maybe there's a third way?  I suspect that the Law of Demeter applies primarily to services interacting with other services.  Is it a valid interpretation?"
133,"I'd say that it isn't cluttering the model personally.  You are actually protecting yourself by not exposing internal implementation of your document class.  The entire idea is to put all of your behavior into your class instead of having external code modify the class in such a way that it may not pass its own internal invariants. Perhaps it also would make sense to make subclasses of your Document class which are specialized and only have the methods related to that usage of your Document.  You don't have to have a one stop shop where you can do absolutely everything, since that's probably not going to be your primary use case in all instances."
134,"For a game with no serious consequences you could just run it a bunch of times and see if it seems satisfying.  For something where there are serious consequences to it not being a good enough shuffle I would think that you shouldn't wonder if a shuffle is good enough, you need to have theory that tells you it is good enough (possibly under assumptions you are happy with).  Related to this Vol. 2 of The Art of Computer Programming in its first chapter gives lots of information about generating random numbers, AND how to test them."
135,"Code Review - Stack Exchange is for sharing code from projects you are working on for peer review. If you are looking for feedback on a specific working piece of code from your project in the following areas Best practices and design pattern usage Security issues Performance Correctness in unanticipated cases then you are in the right place! However, if your question is not about a particular piece of code and instead is a generally applicable question about  Tools, best practices, improving, or conducting code reviews Trouble-shooting, debugging, or understanding code snippets Higher-level architecture and design of software systems then your question is off-topic for this site. I'm confused! What questions are on-topic for this site? Simply ask yourself the following questions. To be on-topic the answer must be yes to all questions: Does my question contain code? (Please include the code in the question, not a link to it) Did I write that code? Is it actual code from a project rather than pseudo-code or example code? Do I want the code to be good code, (i.e. not code-golfing, obfuscation, or similar) To the best of my knowledge, does the code work? Do I want feedback about any or all facets of the code? If you answered yes to all the above questions, your question is on-topic for Code Review. Make sure you include your code in your question This site is for code reviews, which are hard to do when the code is behind a link somewhere out there on the internet. If you want a code review, you must post the relevant snippets of code in your question . It is fine to post a ""see more"" link (though, do be careful  very few reviewers will be willing to click through and read thousands of lines of your code), but the most important parts of the code must be placed directly in the question. Reviewers may comment on any part of the code. Feel free to call attention to specific areas you are concerned about (performance, formatting, etc). However, any aspect of the code posted is fair game for feedback and criticism. What? Questions about code reviews are off topic? Conducting code reviews is an important skill, much like any other programming discipline. These ""whiteboard""-style questions are best asked on Programmers Stack Exchange ."
136,"Is this a sufficient way to prevent script injections and other bad stuff in strings. Would this function be sufficient enough to remove all malicious code and foreign characters from a string? //Clean the string
$out = ltrim($do);
$out = rtrim($out);
$out = preg_replace('/[^(\x20-\x7F)]*/','', strip_tags($out)); This data is not going into a SQL database, so I dont have to worry about sql injection attempts. Is there any way to improve my code and make it more efficient? This function would clean any user inputted data (forms, and ?), and then save it do a database. This would be used in a global sanitizing function."
137,"That one is quite simple (for me at least) since there is a very general answer :) NO There is no way you can ever really safely ""repair"" user input. ""Please provide a list of everything you shouldn't to with a hammer"" is way harder than ""list all appropriate uses of a hammer"". You might forget one or two but no harm done there if you go back and add them. It might sound harsh but something will always byte you and if it's only EVAL(UNHEX(ASD23426363)) or something like that. (Sql example even so you did say it not sql but whatever). Of course you might want to do things like strip out tags out of input for html context anyways so that a hole in your other code is not as easily exploited and less damage will be done but i shouldn't be your only defense. Someone that said Filter Input, Escape Output way better than i could. Terry Chay In short: Whatever you are doing there, find the appropriate escaping function and use it. Shell context ? escapeshellarg Html context ? htmlspecialchars Database context ? Use prepared statements and never worry about sql injection again Little edit:
I know what i said and the blog post contradict a little but thats fine with me. 'In practice' will always differ from general advice and sometimes you want to do everything you can ;)"
138,"Counting the number of points that have both a larger theta and a larger radius than a given point. I don't like the fact that I am selecting all the points, even though I only care about the count of them. Which of the from parts should appear first, if it even matters? var count = (from type in ValidTypes()
    from point in GetData(type)
    where point.Radius > referencePoint.Radius
        && point.Theta > referencePoint.Theta
    select point).Count() ValidTypes() returns a few types, about 5. GetData(type) may return many points, possibly 100,000. This query is counting the number of points that have both a larger theta and a larger radius than a given point. Is there a way to write this faster or more readable?"
141,"It seems to me that the factory should be choosing the ImplX based on arg[1] then instead of arg[0]. So something like this would remove the need for the switch, arg[1] is now arg[0] in this example: public IImpl GetInstance(params object[] args)
{
    if (args.length == 0)
         return new IImpl1();
    else if (args[0] is IEnumerable<string>)
         return new IImpl2(args[0]);
    else
         return new IImpl3(args[0]);
} You could then call it like: var impl1 = GetInstance();
var impl2 = GetInstance(new List<string>{""1"",""2""});
var impl3 = GetInstance(""""); Edit:
If you don't want the caller to have to know the inner works of it then you should expose overloads for getInstance so: public IImpl GetInstance()
{ 
    return new Impl1();
}
public IImpl GetInstance(IEnumberable<string> strings)
{
    return new Impl2(strings);
}
public IImpl GetInstance(string string)
{
    return new Impl3(string);
}"
142,"Function for finding longest common path and formatting it along with filenames. This is a function I wrote yesterday and have tested with lots of input. It's been committed and is in use, but no review was done, so it seems like a good candidate for Code Review: it could be more readable and maybe refactored into simpler functions. Its purpose is to give the longest common path and a string listing filenames for lists of dictionaries with full file paths. It's used to process Bitbucket API results . import os.path
import py # Used for other functions, listed for possible use in refactoring

def getpaths(files, listfiles=False):
    """"""For a list of files, a common path prefix and optionally list filenames

    Returns a tuple (common_prefix, filenames):
        common_prefix: Longest common path to all files in the input. If input
                       is a single file, contains full file path.
                       Slash-terminated if present and directory, empty string
                       otherwise.
        filenames: String containing the names of modified files, in the format
                   "" M(file1, file2)"" if listfiles=True, empty string
                   if either listfiles=False or no file was modified.
    """"""

    # Handle empty input
    if not files:
        return '', ''
    files = [f['file'] for f in files]
    if not any(files):
        return '', ''

    dirname = os.path.dirname
    basename = os.path.basename

    common_prefix = [dirname(f) for f in files]

    # Single file, show its full path
    if len(files) == 1:
        common_prefix = files[0]
        listfiles = False

    else:
        common_prefix = [path.split(os.sep) for path in common_prefix]
        common_prefix = os.sep.join(os.path.commonprefix(common_prefix))
        if common_prefix and not common_prefix.endswith('/'):
            common_prefix += '/'

    if listfiles:
        filenames = [basename(f) for f in files if f and basename(f)]
        filenames = ' M(%s)' % ', '.join(filenames)
    else:
        filenames = ''
    return common_prefix, filenames

# Test suite    
# Don't worry too much about test style, this is informative enough with py.test.
# Adequate coverage and readibility are the main concern.
# However, if you think a doctest or classic unittest is better, I'm open to change.

def test_getpaths():
    d = dict

    barefile = [d(file='file')]
    distinct = [d(file='path1/file1'), d(file='path2/file2'),
                d(file='path3/file')]
    shared = [d(file='path/file1'), d(file='path/file2'),
              d(file='path/file')]

    deepfile = [d(file='a/long/path/to/deepfile.py')]
    slashesfile = [d(file='/slashesfile/')]
    slashleft = [d(file='/slashleft')]
    slashright = [d(file='slashright/')]


    nocommon = distinct + [d(file='path4/file')]
    nocommonplusroot = distinct + barefile

    common = [d(file='some/path/to/file'), d(file='some/path/to/deeper/file'),
              d(file='some/path/to/anotherfile'), d(file='some/path/to/afile')]
    commonplusroot = shared + barefile

    empty = d(file='')
    nocommonplusempty = distinct + [empty]
    commonplusempty = shared + [empty]
    nocommonplusslash = distinct + [d(file='path4/dir/')]
    commonplusslash = shared + [d(file='path/dir/')]

    pypydoubleslash = [d(file='pypy/jit/metainterp/opt/u.py'),
                       d(file='pypy/jit/metainterp/test/test_c.py'),
                       d(file='pypy/jit/metainterp/test/test_o.py')]
    nothing = ('', '')

    # (input, expected output) for listfiles=False
    files_expected = [([], nothing),
                      ([empty], nothing),
                      ([empty, empty], nothing),
                      (barefile, ('file', '')),
                      (deepfile, ('a/long/path/to/deepfile.py', '')),
                      (slashesfile, ('/slashesfile/', '')),
                      (slashleft, ('/slashleft', '')),
                      (slashright, ('slashright/', '')),
                      (nocommon, nothing),
                      (nocommonplusroot, nothing),
                      (nocommonplusempty, nothing),
                      (common, ('some/path/to/', '')),
                      (commonplusroot, nothing),
                      (commonplusempty, nothing),
                      (nocommonplusslash, nothing),
                      (commonplusslash, ('path/', '')),
                      (pypydoubleslash, ('pypy/jit/metainterp/', '')),
                      ]

    for f, wanted in files_expected:
        assert getpaths(f) == wanted

    # (input, expected output) for listfiles=True
    files_expected = [([], nothing),
                      ([empty], nothing),
                      ([empty, empty], nothing),
                      (barefile, ('file', '')),
                      (deepfile, ('a/long/path/to/deepfile.py', '')),
                      (slashesfile, ('/slashesfile/', '')),
                      (slashleft, ('/slashleft', '')),
                      (slashright, ('slashright/', '')),
                      (nocommon, ('', ' M(file1, file2, file, file)')),
                      (nocommonplusroot, ('', ' M(file1, file2, file, file)')),
                      (nocommonplusempty, ('',' M(file1, file2, file)')),
                      (common, ('some/path/to/',
                                ' M(file, file, anotherfile, afile)')),
                      (commonplusroot, ('', ' M(file1, file2, file, file)')),
                      (commonplusempty, ('',' M(file1, file2, file)')),
                      (nocommonplusslash, ('',' M(file1, file2, file)')),
                      (commonplusslash, ('path/',' M(file1, file2, file)')),
                      (pypydoubleslash, ('pypy/jit/metainterp/',
                                         ' M(u.py, test_c.py, test_o.py)')),
                      ]

    for f, wanted in files_expected:
        assert getpaths(f, listfiles=True) == wanted Improvements for both the function and its tests are welcome. For some context, this is how it's used: # Here's the kind of data we want to process. The return for listfiles=False
# should be ('bit/', ''). For True,
# ('bit/', ' M(hook.py, __init__.py, __init__.py, test_hook.py)')

commit = {
    u'files': [{u'file': u'bit/hook.py', u'type':
                u'modified'},
               {u'file': u'bit/__init__.py',
                u'type': u'added'},
               {u'file': u'bit/test/__init__.py',
                u'type': u'added'},
               {u'file': u'bit/test/test_hook.py',
                u'type': u'added'}]
          }

files = commit.get('files', [])
common_prefix, filenames = getpaths(files, True)
common_prefix = '/' + common_prefix
print '%s%s: ' % (common_prefix, filenames)"
143,"I'm doing a copy-pasta from My Answer to a similar question on SO : Always remember, Filter In, Escape Out for all user supplied (or untrusted) input. When reading user supplied data, filter it to known values. DO NOT BLACKLIST! Always always always always whitelist what you are expecting to get.  If you're expecting a hex number, validate it with a regex like: ^[a-f0-9]+$ .  Figure out what you expect, and filter towards that.  Do none of your filenames have anything but alpha, numeric and . ?  Then filter to ^[a-z0-9.]+$ .  But don't start thinking blacklisting against things.  It won't work. When using user-data, escape it properly for the use at hand.  If it's going in a database, either bind it as a parameterized query, or escape it with the database's escape function.  If you're calling a shell command, escape it with escapeshellarg() .  If you're using it in a regex pattern, escape it with preg_quote() .  There are more than that, but you get the idea. When outputting user data, escape it properly for the format you're outputting it as.  If you're outputting it to HTML or XML, use htmlspecialchars() .  If you're outputting to raw headers for some reason, escape any linebreaks ( str_replace(array(""\r"", ""\n""), array('\r', '\n'), $string) ).  Etc, etc, etc. But always filter using a white-list, and always escape using the correct method for the context.  Otherwise there's a significant chance you'll miss something..."
144,"First, your query is written fine. Its structure is not a concern; the order of the froms is clearly correct, the select is appropriate. Where you could look for improvement that could change the query (code and possibly performance) would be in the GetData method. If, for example, GetData is getting data from an external, queryable source, then you may want to offload the filtering to it rather than getting all of the data points and filtering it inside your application, particularly since you have so many points of data (potentially). So maybe your query could instead be (from type in ValidTypes()    
 select GetData(type, referencePoint).Count())
.Sum();

// or same meaning, different phrasing

(from type in ValidTypes()
from point in GetData(type, referencePoint)
select point).Count();"
145,"Extracting a set of numbers from a file. I do most of my programming in C/C++ and Perl, but I currently learning Fortran. I began by coding up a simple program, something that took me < 5 minutes in Perl (see this thread from BioStar). After working for several hours on a solution in Fortran 95 (teaching myself as I go), I came to this solution. implicit none ! Variable definitions
integer                 :: argc
integer                 :: num_digits
integer                 :: i, j
integer                 :: iocode
integer                 :: line_length
integer                 :: value
character ( len=256 )   :: infile
character ( len=16 )    :: int_format
character ( len=16 )    :: int_string
character ( len=2048 )  :: line

! Verify and parse command line arguments
argc = iargc()
if( argc < 1 ) then
  write(*, '(A, I0, A)') ""Error: please provide file name (argc="", argc, "")""
  stop
endif
call getarg(1, infile)

! Open input file, croak if there is an issue
open( unit=1, file=infile, action='read', iostat=iocode )
if( iocode > 0 ) then
  write(*, '(A, A, A)') ""Error: unable to open input file '"", trim(infile), ""'""
  stop
endif

! Process the file, print in CSV format
do while(1 == 1)
  ! Read the line, skip if it is empty
  100 read( unit=1, fmt='(A)', end=200 ) line
  line_length = len_trim(line)
  if( line_length == 0 ) then
    goto 100
  endif

  ! The first value in the line is a string
  ! Find string boundaries and print it out
  i = 0
  do while( line(i:i) == ' ' )
    i = i+1
  end do
  j = i
  do while( line(j:j) /= ' ' )
    j = j+1
  end do
  write(*, '(A)', advance=""no"") line(i:j-1)

  ! Now grab the rest of the integer values
  ! on the line, multiply them by 3, and print
  i = j
  j = 0
  do while( i < line_length)
    do while( line(i:i) == ' ' )
      i = i+1
    end do
    j = i
    do while( j < line_length .and. line(j:j) /= ' ' )
      j = j+1
    end do
    int_string = line(i:j-1)
    read(int_string, '(I)') value
    value = value*3
    write(*, '(A, I0)', advance=""no"") "","", value
    i = j
    j = 0
  end do

  print *
end do
200 close( 1 )

end program There is a lot that I don't like about how I've written this program, but it's hard to separate my inexperience with the new syntax from bad practice. One thing in particular that I don't like is my use of labels and the infamous goto statement. I'm interested in any feedback whatsoever, but I'm particularly interested in better ways to handle the control structure of the program (without using the goto statement and end parameter in the read function if possible). The compilers I have access to only support features through f95."
146,"A take on DB Abstraction. It's a little bit more code but I wanted to show the full class. I highlight the points I'd like input after the source. I've cut comments since they where not in English and translated the important ones. The class is inspired by PearDb (too old) and Zend_DB (to cluttered / unfinished at the time) and is used in a inhouse application. I know it's not ideal to write your own database handler (I'd go so far to say it's pretty pointless). <?php

class DbStatement {

    private $oStatement;
    private $aFieldnames = array();
    private $aResultRow = array();
    private $aResultSet = array();
    private $bMetadata = true;
    private $bPreparedFetch = false;
    private $iNumRows = false;
    private $sQuery;
    private $aArgs;
    private $fQuerytime;

    /**
     * @throws DbException
     * @param mysqli $oDb Datenbankverbindung
     * @param string $sQuery
     */
    public function __construct(mysqli $oDb, $sQuery) {
        $this->oStatement = $oDb->prepare($sQuery);
        $this->sQuery = $sQuery;
        if($this->oStatement === false) {
            switch($oDb->errno) {
                case 1054:
                    throw new DbNoSuchFieldException($oDb->error, $oDb->errno);
                case 1146:
                    throw new DbNoSuchTableException($oDb->error, $oDb->errno);
                default:
                    throw new DbException(
                        ""Prepared Statement could not be created: "".
                        $oDb->error."" ("".$oDb->errno.""). Query was: '$sQuery'"",
                        $oDb->errno
                    );
            }
        }
    }

    /**#@+
     *
     * @param mixed $mParams,...
     */

    public function execute() {
        $this->_execute(func_get_args());
        $this->_done();
    }

    /**
     * @return null|bool|int|string|float
     */
    public function getOne() {
        $this->_execute(func_get_args());
        $this->_fetchRow();
        if(isset($this->aResultSet[0][$this->aFieldnames[0]])) {
            return $this->aResultSet[0][$this->aFieldnames[0]];
        }
        return null;
    }

    /**
     * @return array
     */
    public function getCol() {
        $this->_execute(func_get_args());
        $this->_fetchAll();
        $sIndex = $this->aFieldnames[0];
        $aReturn = array();
        foreach($this->aResultSet as $aResultRow) {
            $aReturn[] = $aResultRow[$sIndex];
        }
        return $aReturn;
    }

    /**
     * @return array
     */
    public function getRow() {
        $this->_execute(func_get_args());
        $this->_fetchRow();
        if(isset($this->aResultSet[0])) {
            return $this->aResultSet[0];
        }
        return array();
    }

    /**
     * @return array
     */
    public function getAssoc() {
        $this->_execute(func_get_args());
        $this->_fetchAll();
        if(isset($this->aFieldnames[0]) && isset($this->aFieldnames[1])) {
            $sIndexKey = $this->aFieldnames[0];
            $sIndexValue = $this->aFieldnames[1];
            $aReturn = array();
            foreach($this->aResultSet as $aResultRow) {
                $aReturn[$aResultRow[$sIndexKey]] = $aResultRow[$sIndexValue];
            }
            return $aReturn;
        }
        return array();
    }

    /**
     * @return array
     */
    public function getAll() {
        $this->_execute(func_get_args());
        $this->_fetchAll();
        return $this->aResultSet;
    }
    /**#@-*/

    /**
     * @return false|int
     */
    public function numRows() {
        return $this->iNumRows;
    }

    /**
     * @return int
     */
    public function affectedRows() {
        return $this->oStatement->affected_rows;
    }

    /**
     * @return int
     */
    public function lastInsertId() {
        return $this->oStatement->insert_id;
    }

    public function getLastExecutedQuery() {
        $sReturn = $this->sQuery;
        if($this->aArgs) {
            $sReturn .= ""; -- Argumente: ~"".implode(""~,~"", $this->aArgs).""~"";
        }
        return $sReturn;
    }

    /**
     * @throws DbException
     *
     * @param array $aArgs
     */
    private function _execute($aArgs) {
        $aArgs = $this->_parseFuncArgs($aArgs);
        $this->aArgs = $aArgs;
        $iArgs = count($aArgs);
        if($iArgs) {
            if($this->oStatement->param_count !== $iArgs ) {
                throw new DbException(
                    ""Inserting parameters failed: "".$this->oStatement->param_count.
                    "" Parameters expected but "".$iArgs."" passed.""
                );
            }
            $aRefArgs = array();
            foreach(array_keys($aArgs) as $mIndex) {
                $aRefArgs[$mIndex] = &$aArgs[$mIndex];
            }
            array_unshift($aRefArgs, str_repeat(""s"", $iArgs));
            // Needs References
            call_user_func_array(array($this->oStatement, ""bind_param""), $aRefArgs);
        }
        $bWorked = $this->oStatement->execute();
        if($bWorked === false) {
            $sError = sprintf(
                ""Query failed: %s (%s) Query was: '%s'"",
                $this->oStatement->error,
                $this->oStatement->errno,
                $this->sQuery
            );
            switch($this->oStatement->errno) {
                case 1062:
                    throw new DbKeyViolationException($sError, $this->oStatement->errno);
                default:
                    throw new DbException($sError, $this->oStatement->errno);
            }

        }

        $this->_prepareFetch();
    }

    private function _prepareFetch() {
        if($this->bMetadata && !$this->bPreparedFetch) {
            $oMeta = $this->oStatement->result_metadata();
            if($oMeta === false) {
                $this->bMetadata = false;
            } else {
                $this->_prepareMetadata($oMeta);

                $this->aResultRow = array_fill(0, count($this->aFieldnames), null);
                // Ugly but 'bind_result' forces you to pass references
                $aRefs = array();
                foreach ($this->aResultRow as $iIndex => &$rmValue) {
                    $aRefs[$iIndex] = &$rmValue;
                }

                call_user_func_array(array($this->oStatement, ""bind_result""), $this->aResultRow);
                $this->bPreparedFetch = true;
            }
        }
    }

    /**
     * @param mysqli_result $oMeta
     */
    private function _prepareMetadata(mysqli_result $oMeta) {
        $aFields = $oMeta->fetch_fields();
        foreach($aFields as $oField) {
            $this->aFieldnames[] = $oField->name;
        }
    }

    private function _fetchRow() {
        $this->_fetch(true);
    }

    private function _fetchAll() {
        $this->_fetch(false);
    }

    /*
     * @param bool $bOne One line ?
     */
    private function _fetch($bOne) {
        $this->aResultSet = array();
        if($bOne !== true) {
            $this->oStatement->store_result();
        }
        while($this->oStatement->fetch()) {

            // Deref
            $aTmp = array();
            foreach($this->aResultRow as $mValue) {
                $aTmp[] = $mValue;
            }
            $this->aResultSet[] = array_combine($this->aFieldnames, $aTmp);

            if($bOne === true) {
                break;
            }
        }

        $this->iNumRows = $this->oStatement->num_rows;
        $this->_done();
    }

    private function _done() {
        $this->oStatement->free_result();
    }

    /**
     * @param array $aArgs
     * @return array
     */
    private function _parseFuncArgs($aArgs) {
        if(isset($aArgs[0]) && is_array($aArgs[0])) {
            return $aArgs[0];
        }
        return $aArgs;
    }

} The ugly bits (I think, that is why we are here I guess), are in _execute and _prepareFetch as the MySQLi API forced us to use references. The class takes for granted that the passed in MySQLi object is already connected to a database. If I missed something please let me know."
147,"Object cache storage for Rails. I want to have fast cache in which I want to keep all my nomenclature data.
I don't want to go with Memcached because I have to do serialize/de-serialize on each object which is slow. So I choose to be less effective in memory and keep the cache in each server instance.
I am sure I am doing it in the wrong way because the NoCache module - which skips my cache and hits the Rails cache is faster than mine. Here is how it is initialized $cache = Cache.new Here is the example usage property_types = $cache['PropertyType'] and here is the source module DirectCache
  def init_cache
  end

  def reload_model(model_class)
    key = get_key(model_class)
    klass = key.constantize
    object = klass.scoped
    puts ""Loading cache for #{key}...""
    if klass.respond_to?(:translates) and klass.translates?
      puts ""  Adding translation in the model for #{klass}""
      object = object.includes(:translations)
      self.storage[key] = object.send(""all"")
    end
  end

  def [] class_name_or_object
    puts ""Hiting cache for #{class_name_or_object}""
    key = get_key(class_name_or_object)
    reload_model(class_name_or_object) if self.storage[key].blank? or self.storage[key].empty?
    raise ""#{key} is missing in the cache #{@cache.keys.join ', '}"" unless key? key
    self.storage[key]
  end

  def init_cache
  end

end

module NoCache
  def reload_model(model_class)
    key = get_key(model_class)
    self.storage[key] = key.constantize
  end

  def [] class_name_or_object
    key = get_key(class_name_or_object)
    raise ""#{key} is missing in the cache #{@cache.keys.join ', '}"" unless key? key
    klass = self.storage[key]
    object = klass.scoped
    if klass.respond_to?(:translates) and klass.translates?
      puts ""Adding translation in the model for #{klass}""
      object = object.includes(:translations)
    end
    object.send(""all"")
  end

  def init_cache
  end

end

class Cache
  include DirectCache
  #  include NoCache
  #  include OpenStructCache

  @@models = [
    PropertyFunction,
    PropertyCategoryLocation,
    ConstructionType,
 ....20 more ....
    ExposureType,
  ]

  cattr_reader :models

  def initialize
    @cache = {}
    begin
      init_cache
    rescue
      puts ""missing tables""
    end
  end


  def storage
    @cache
  end

  # returns the the key - aways string
  def get_key class_name_or_record
    case class_name_or_record
    when Class
      key = class_name_or_record.to_s
    when String
      key = class_name_or_record
    else
      key = class_name_or_record.class.to_s
    end
    key
  end

  def key? class_name_or_object
    key = get_key(class_name_or_object)
    self.storage.keys.include? key
  end

end"
148,"Using a navigation menu to help keep material organized. I'm working on a personal project to keep different snippets/examples/small projects of mine organized. I want to make the most of my page width, so I decided to write a navigation menu that slides out. It works as expected, but the code is kinda big. I provided the HTML/CSS just in case that helps, but I'm really only looking for help with the JavaScript. I don't need anyone to rewrite the whole thing. $(document).ready(function() {
 $('#tab').click(function() {
  if($('#main').attr('class') != 'out') {
     $('#main').animate({
      'margin-left': '+=340px',
       }, 500, function() {
       $('#main').addClass('out');
       });
            
    } else {
      $('#main').animate({
       'margin-left': '-=340px',
        }, 500, function() {
       $('#main').removeClass('out');
        });
      
     }
    });
    
    //does the same as above, but when I press ctrl + 1. from /http://www.scottklarr.com/topic/126/how-to-create-ctrl-key-shortcuts-in-javascript/
    $(document).keyup(function (e) {
     if(e.which == 17) isCtrl=false;
      }).keydown(function (e) {
       if(e.which == 17) isCtrl=true;
       if(e.which == 97 && isCtrl == true) {
        if($('#main').attr('class') != 'out') {
           $('#main').animate({
            'margin-left': '+=340px',
             }, 500, function() {
             $('#main').addClass('out');
             });
                  
          } else {
            $('#main').animate({
             'margin-left': '-=340px',
              }, 500, function() {
             $('#main').removeClass('out');
              });
            
           }
            return false;
           }
    });
   }); #sidebar {  
 top: 0;
 left: 0;
 position: relative;
 float: left;
 }
 
#main {
 width: 320px;
 padding: 10px;
 float: left;
 margin-left: -340px;
 }

#tab {
 width: 30px;
 height: 120px;
 padding: 10px;
 float: left;
 }

.clear { clear: both; } <div id=""sidebar"">
  <div id=""main""></div>
  <div id=""tab""></div>
  <br class=""clear"">
 </div>"
149,"First, it seems that isCtrl is not declared anywhere in your code. Put var isCtrl = false; as your first line inside the ready function. Otherwise, you will get a JavaScript error when the first key the user presses is not the Ctrl key. Also, == true is unnecessary within an if statement; it can be omitted. Second, this line could be improved, as it fails if the element is a member of another class: if($('#main').attr('class') != 'out') { It can be rewritten using .hasClass() as: if(!$('#main').hasClass('out')) { In fact, you should refactor this entire block out to a separate function to avoid duplicating code: function toggleMenu() {
    if(!$('#main').hasClass('out')) {
        // ...
    } else {
        // ...
    }
} And put toggleMenu(); where the duplicate code was in each function. Also, if performance is a concern, you should cache the jQuery object $('#main') by declaring another variable at the beginning of the ready function. Not doing so is slow because jQuery would have to find the matched elements within the document again. A more minor criticism is that of braceless control statements, such as: if(e.which == 17) isCtrl=false; Some say that it is best to always put the code within indented braces to avoid errors caused by incorrectly placed semicolons. Finally, the indentation doesn't look right throughout the entire code. Fix that, and your code will become somewhat more readable. To add: It also looks like you have an extra comma at the end of: 'margin-left': '+=210px', This is syntactically valid, but it causes problems with Internet Explorer 7 and below ."
150,"Instantiating objects with many attributes. I have a class with quite a few attributes, most of which are known when I create an instance of the object.  So I pass all the values in the constructor: $op = new OpenIdProvider($imgPath . $name . $ext, 'openid_highlight', 
                         0, 0, 108, 68, 6, $info[0], $info[1], $name); I'm finding that having this many parameters makes it confusing both when writing and reading the code, as it's not easy to determine which attribute each value corresponds to.  Also, this has a bit of a code smell to it - seems like there should be a better way.  Any suggestions?"
152,"Martin Fowler's bible book Refactoring does identify a smell called "" Long Parameter List "" (p78) and proposes the following refactorings: Replace Parameter with Method (p292) Introduce Parameter Object (295) Preserve Whole Object (298) Of these I think that ""Introduce Parameter Object"" would best suit: You'd wrap the attributes up in their own object and pass that to the constructor.  You may face the same issue with the new object if you choose to bundle all the values directly into its' constructor, though you could use setters instead of parameters in that object. To illustrate (sorry, my PHP-fu is weak): $params = new OpenIDParams();
$params->setSomething( $imgPath . $name . $ext );
$params->setSomethingElse( 'openid_highlight' ); $params->setName( $name );

$op = new OpenIdProvider( $params ); This is a little more verbose but it addresses your concern about not being clear about the attributes' purpose / meaning.  Also it'll be a little less painful to add extra attributes into the equation later."
153,"For some perspective on the LoD, read "" The Law of Demeter Is Not A Dot Counting Exercise "".  In particular the part under the heading ""I Fought The Law and The Law Won"". I think in this instance that pages, paragraphs and lines are very logical subcomponents of documents.  These each have different but related behaviour.  The each also serve different purposes. Forcing the document to handle interactions with subcomponents will - as you say - lead to clutter (and more chance of introducing troublesome issues). The big thing about the LoD is that it aims to reduce coupling.  However adding methods to Document doesn't really reduce coupling as you're still writing code that says ""do x to line y"" - you're just asking Document to do it for you. Don't get me wrong, the LoD is useful.  But like all principles it has to be used correctly to stay useful. (Funnily enough a similar question with a similar answer as been asked at SO.) Conclusion In short I don't see any benefit for you in talking to Document rather than it's contained Pages, Paras, & Lines.  Frankly I don't think there's any ROI for you."
154,In addition to LRE's answer I would suggest you consider the idea that your class needs that many constructor arguments because it's trying to do too many things.
155,"You should provide the optional string message as last argument for assertion calls; turn this: $this->assertSame(true, DatenCache::save(""testCacheSimple"", false, $sDatenSimple)); Into this: $this->assertSame(
  true,
  DatenCache::save(""testCacheSimple"", false, $sDatenSimple),
                                      ""a successful [describe operation] "".
                                   ""is expected for [describe arguments]""); This form reminds me of Perl instructions do something or die ""message"", and I use the indentation, keeping the message alone, right-aligned, on a separate line when needed, to put it in perspective: assert( something,                                   ""something expected"");
assert( something else,                         ""something else expected"");
assert( something long
        that spans multiple lines,
                                                         ""something long "".
                                     ""that spans multiple lines expected""); In this way, all the messages get aligned on the right, and can be read separately. Also, you should use the most specific assertion available instead of using assertSame() all the time. When comparing with true, using assertTrue() instead would clarify the intent."
156,"I would suggest to add comments (Javadoc-style, but probably best if much lighter) to describe the intent of each method. Even the most simple ones. I found it especially useful in JavaScript to describe: the type and range of arguments expected which arguments are optional and what are the default values the type of the result value, if any what is the result when provided arguments do not match expectations Otherwise I agree with your inline comment ""this needs some refactoring, it creates bound and unbound"", corresponding code should be extracted into a separate function, which will also reduce nesting, which seems to be one of your worries. Regarding the code itself, I would rename wrap() to bind() to match the bind() function added in ECMAScript 5 and I would rename l to length in the for loop as letter l is easily confused with number 1. I have doubts about this portion of the code: if (is('Function', ext)) {
    return ext.extend(proto); // holy closure!
} In my understanding: you check first that ext is a funciton before calling the extend() method, but: extend() is not defined in JavaScript, it is one of your custom methods, so there is no guarantee that you will find this property on the function. You should probably add a check. I do not understand the intent: an inline comment would help :) All in all, I think it's fine that the code is a bit hairy because adding support for classes in JavaScript is no simple matter , but a lot more inline comments (up to one comment per line of code for the most complex stuff) would improve the code readability immensely."
157,"The ActiveSupport::Cache is not mandatory in Memcached, there are a cache in memory if you use the :memory_store ( http://api.rubyonrails.org/classes/ActiveSupport/Cache/MemoryStore.html ) config.cache_store = :memory_store Maybe can be a good start to implement your own Cache in memory"
158,"As @LRE answer (+1) mentioned his PHP-fu is weak and since his points are correct and valid i just want to provide some more php code to illustrate : class OpenIdProviderOptions {

    private $path;
    private $name = ""default_name"";
    private $param1;
    private $optionalParam2 = ""foo"";

    public function __construct($path, $param1) {
         /* you might take a $options array there for bc */
         /* Also if you have 2-3 REQUIRED parameters and the rest is optional
            i like putting all the required stuff in the constructor so you don't
            have to do any ""is that value set"" checking here.

            If you have 20 REQUIRED values you might split those into some objects
            or something ;) 
         */
    }

    public function getPath() {
        return $this->path;
    }

    /* etc */


}

class OpenIdProvider {

    private $settings;

    public function __construct(OpenIdProviderOptions $options) {
        $this->settings = $options;
    }

    public function foo {
        $path = $this->settings->getPath();
    }
}

$settings = new OpenIdProviderOptions(""myopenid.example.com"", ""i need this"");
$settings->setFoo(""bar"");
$settings->setBar(""fubar"");

$myProvider = new OpenIdProvider($settings);"
159,"Use of a regex stored inside a YAML file. I installed settingslogic and in the configuration file I put the regex for the email as follows: #config/settings.yml
defaults: &defaults

  email_regex: /^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i

development:
  <<: *defaults
  # neat_setting: 800

test:
  <<: *defaults

production:
  <<: *defaults That I load in devise configuration in this way: #config/initializers/devise.rb
  # Regex to use to validate the email address
  # config.email_regexp = /^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i
  config.email_regexp = eval Settings.email_regex It works, but what do you think about that eval ? Is it the correct way to convert a string to a regex?"
160,"I would definately not put the regex in the comment. That means that it needs to be changed in two places, one of which doesn't matter and will be misleading. Place a comment on the declaration of email_regex that explains what it is filtering. That way if it ever changes, all the places to change are contained and easy to find. #config/initializers/devise.rb
   # Regex to use to validate the email address
   config.email_regexp = eval Settings.email_regex and # Email validation regex - <short explanation to taste>
email_regex: /^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i I see no readability problems with the code, if that is the correct method of retrieving a setting. (I'm not a Ruby expert.)"
161,"I'm not crazy about using eval for such a simple task, it's easy and it works but it just doesn't sit well with me; it's like giving your gran' an Indy car to go get a loaf of bread.  Instead you could do something like this. split = Settings.email_regex.split(""/"")
options = (split[2].include?(""x"") ? Regexp::EXTENDED : 0) |
  (split[2].include?(""i"") ? Regexp::IGNORECASE : 0) |
  (split[2].include?(""m"") ? Regexp::MULTILINE : 0) unless split[2].nil?
Regexp.new(split[1], options) This will work if there are options or not and doesn't require a potentially dangerous eval. P.S. Sinetris made the much better suggestion of just adding !ruby/regexp before your regex and wrapping it in single quotes in your settings.yml file. That still doesn't fix the issue with the RegExp class not properly dealing with string representations of regex statements though so I'll leave the above code for anyone that wants to do that outside of a YML file."
162,"I've seen some pretty nasty Fortran in my time: Research departments seem to be the worse source! Your code is far, far superior to their code! In those days we were using an extended form of Fortran 77 with some structured extensions and formatting niceties. There was no avoiding GOTOs and FORMATs and their labels. I tried to keep them to a minimum and to only use them for break/cycle types of jumps like you are doing. So although I lack modern Fortran experience, you look to be on the right track."
163,"If you want avoiding the eval you can. It's a little more trick but you can be sure, you have a regexps after this code in your devise : #config/initializers/devise.rb
# Regex to use to validate the email addres
# config.email_regexp = /^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i
Setting.email_regexp[/\/(.*)\/(.?)/]  
config.email_regexp = x ; Regexp.new(/#{$1}/) The problem with this trick is you failed the second argument in your case the insensitive-case. You just need add a new setting like : email_regexp_sensitive_case: true And now you just need call like this : #config/initializers/devise.rb
# Regex to use to validate the email addres
# config.email_regexp = /^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i
Setting.email_regexp[/\/(.*)\/(.?)/]  
config.email_regexp = Regexp.new(/#{$1}/, Setting.email_regexp_sensitive_case) In my case you are sure to have a Regexp define in your email_regexp without any eval."
164,"Parsing a file for a game. Is this code good enough, or is it stinky? using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace DotNetLegends
{
    public class LogParser
    {
        /// <summary>
        /// Returns a populated Game objects that has a list of players and other information.
        /// </summary>
        /// <param name=""pathToLog"">Path to the .log file.</param>
        /// <returns>A Game object.</returns>
        public Game Parse(string pathToLog)
        {
            Game game = new Game();

            //On actual deployment of this code, I will use the pathToLog parameter.
            StreamReader reader = new StreamReader(@""D:\Games\Riot Games\League of Legends\air\logs\LolClient.20110121.213758.log"");
            var content = reader.ReadToEnd();

            game.Id = GetGameID(content);
            game.Length = GetGameLength(content);
            game.Map = GetGameMap(content);
            game.MaximumPlayers = GetGameMaximumPlayers(content);
            game.Date = GetGameDate(content);

            return game;
        }

        internal string GetGameID(string content)
        {
            var location = content.IndexOf(""gameId"");
            var gameID = content.Substring(location + 8, 10);
            gameID = gameID.Trim();
            return gameID;
        }

        internal string GetGameLength(string content)
        {
            var location = content.IndexOf(""gameLength"");
            var gamelength = content.Substring(location + 13, 6);
            gamelength = gamelength.Trim();
            var time = Convert.ToInt32(gamelength) / 60;
            return time.ToString();
        }

        internal string GetGameMap(string content)
        {
            var location = content.IndexOf(""mapId"");
            var gameMap = content.Substring(location + 8, 1);
            switch (gameMap)
            {
                case ""2"":
                    return ""Summoner's Rift"";
                default:
                    return ""nul"";
            }
        }

        internal string GetGameMaximumPlayers(string content)
        {
            var location = content.IndexOf(""maxNumPlayers"");
            var maxPlayers = content.Substring(location + 16, 2);
            maxPlayers = maxPlayers.Trim();
            return maxPlayers;
        }

        internal string GetGameDate(string content)
        {
            var location = content.IndexOf(""creationTime"");
            var creationDate = content.Substring(location + 14, 34);
            creationDate = creationDate.Trim();
            return creationDate;
        }
    }
}"
166,Remove the code responsible for retrieving the log file contents.  If this is a type that is just responsible for parsing log files than that is all it should do.  Think about either passing in the file contents to this method or using Dependency Injection so that you can mock out the StreamReader call in your tests.  You do have tests right? Return the appropriate types from these methods. GetGameLength should return an int and Game.Length should likewise be an int.  Same thing for Maximum Players and Game Date. The 'Get' methods should be private or protected unless there is some specific reason to make them internal. If there are a finite number of maps (and they are all known) you may want to consider using an enum rather than a string.  If an enum is not appropriate you may want to create a GameMap (or some such type to encapsulate the information you care about with regards to a map) and return that instead. Each 'Get' method needs to check that the location variable is set to something >= 0 when you search for the specified text. Throw helpful exceptions if the log file does not contain the expected data (or the data isn't the expected type).  A NullReferenceException is not a helpful exception. There are too many magic numbers and strings here.  Move these into constants with helpful names. Add comments with examples of the log file text that you will be searching for in each 'Get' method.  This makes maintenance significantly easier as you know the type of text you were expecting to be parsing. Wrap the StreamReader in a using block. Check that the file exists before attempting to load it.
167,"You have a lot of undescriptive magic numbers and code repetition whilst retrieving the contents of a field. You could eliminate the repetition and make those numbers a little more meaningful by introducing a single method: protected string GetFieldContent(string content, string field,
    int padding, int length)
{
    var location = content.indexOf(field);
    padding += field.Length;

    var fieldVal = content.Substring(location + padding, length);
    fieldVal = fieldVal.Trim();
    return fieldVal;
} Use it like so: internal string GetGameMaximumPlayers(string content)
{
    var maxPlayers = GetFieldContent(content, ""maxNumPlayers"", 3, 2);
    return maxPlayers;
} Something to note here is the padding value has changed. You no longer need to include the length of the field name itself and can just describe the number of junk characters afterwards. Padding length Upon examining your code I noticed one peculiarity - the fields have inconsistent, magical padding lengths: gameID padding: 2 gameLength padding: 3 mapId padding: 3 maxNumPlayers padding: 3 creationTime padding: 2 As a symptom of these being magic numbers I have no idea why this is the case. This is one of the many reasons to avoid magic numbers like the plague: it's difficult to understand their meaning. I'll trust you to evaluate whether varying padding lengths is necessary, or whether you can just assume a constant padding for all fields. If we can assume a constant padding amount for all fields then we can change the code further a little bit to make your life easier. There are two steps to this change. First, give your LogParser class a private field: private const var defaultPadding = 2 Second, GetFieldContent can be refactored to produce this: protected string GetFieldContent(string content, string field, int length)
{
    var location = content.indexOf(field);
    var padding = defaultPadding + field.Length;

    var fieldVal = content.Substring(location + padding, length);
    fieldVal = fieldVal.Trim();
    return fieldVal;
} Then getting the contents of a field becomes simpler: var maxPlayers = GetFieldContent(content, ""maxNumPlayers"", 2);"
168,"Seems like you're doing a lot of unecessary and standard managing of a simple logfile. If you were saving the log in binary perhaps it could be excused but seeing as you're working with text files, why not go with xml? or rather, why not go with XML Fragments?  Linq to XML has excellent support for managing those kinds of files, both  creating, parsing and querying."
169,"Seems like your abusing the factory pattern, the whole purpose of a factory is that you pass it some general object and the factory decides what is most appropriate to return. The passed object doesnt need to know about the factory but  the factory should know about the object it's passed. If you need to pass it very explicit parameters then that is a code smell in your architecture and I'd think seriously about doing some refactoring rather than just ""fixing"" this problem"
170,Why are you doing: Point.Radius > referencePoint.Radius && point.Theta > referencePoint.Theta Seems this probably should be a function like IsCorrectReferencePoint or whatnot. That will both make your code more readable and more understandable since you can simply look at the function name to see what it does.
171,"I would rename the methods GetGameID(), GetGameLength(), GetGameMap()... because they look like getters, that could be called in any order, while they are actually performing parsing and must be called in a given order. This is confusing at first glance. I suggest replacing 'Get' with 'Read' or 'Parse': ReadGameID() ReadGameLength() ReadGameMap() ..."
172,"Parsing a game file. Note: This file is out of my hands. I cannot change the format or type of file I have to parse. Here is some sample data that I'm trying to parse. This is information for just one player: [0] (com.riotgames.platform.gameclient.domain::PlayerParticipantStatsSummary)#8
            _profileIconId = 4
            elo = 0
            eloChange = 0
            gameId = 82736631
            gameItems = (null)
            inChat = false
            leaver = false
            leaves = 1
            level = 5
            losses = 2
            profileIconId = 4
            skinName = ""Vladimir""
            statistics = (mx.collections::ArrayCollection)#9
              filterFunction = (null)
              length = 26
              list = (mx.collections::ArrayList)#10
                length = 26
                source = (Array)#11
                  [0] (com.riotgames.platform.gameclient.domain::RawStatDTO)#12
                    displayName = (null)
                    statTypeName = ""PHYSICAL_DAMAGE_TAKEN""
                    value = 11156
                  [1] (com.riotgames.platform.gameclient.domain::RawStatDTO)#13
                    displayName = (null)
                    statTypeName = ""TOTAL_DAMAGE_TAKEN""
                    value = 20653
                  [2] (com.riotgames.platform.gameclient.domain::RawStatDTO)#14
                    displayName = (null)
                    statTypeName = ""ITEM2""
                    value = 3158
                  [3] (com.riotgames.platform.gameclient.domain::RawStatDTO)#15
                    displayName = (null)
                    statTypeName = ""ITEM4""
                    value = 3089
                  [4] (com.riotgames.platform.gameclient.domain::RawStatDTO)#16
                    displayName = (null)
                    statTypeName = ""WIN""
                    value = 1
                  [5] (com.riotgames.platform.gameclient.domain::RawStatDTO)#17
                    displayName = (null)
                    statTypeName = ""PHYSICAL_DAMAGE_DEALT_PLAYER""
                    value = 18413
                  [6] (com.riotgames.platform.gameclient.domain::RawStatDTO)#18
                    displayName = (null)
                    statTypeName = ""TOTAL_HEAL""
                    value = 16877
                  [7] (com.riotgames.platform.gameclient.domain::RawStatDTO)#19
                    displayName = (null)
                    statTypeName = ""ITEM0""
                    value = 3083
                  [8] (com.riotgames.platform.gameclient.domain::RawStatDTO)#20
                    displayName = (null)
                    statTypeName = ""LARGEST_CRITICAL_STRIKE""
                    value = 173
                  [9] (com.riotgames.platform.gameclient.domain::RawStatDTO)#21
                    displayName = (null)
                    statTypeName = ""ITEM3""
                    value = 3116
                  [10] (com.riotgames.platform.gameclient.domain::RawStatDTO)#22
                    displayName = (null)
                    statTypeName = ""ITEM1""
                    value = 0
                  [11] (com.riotgames.platform.gameclient.domain::RawStatDTO)#23
                    displayName = (null)
                    statTypeName = ""GOLD_EARNED""
                    value = 11123
                  [12] (com.riotgames.platform.gameclient.domain::RawStatDTO)#24
                    displayName = (null)
                    statTypeName = ""ASSISTS""
                    value = 8
                  [13] (com.riotgames.platform.gameclient.domain::RawStatDTO)#25
                    displayName = (null)
                    statTypeName = ""LARGEST_MULTI_KILL""
                    value = 2
                  [14] (com.riotgames.platform.gameclient.domain::RawStatDTO)#26
                    displayName = (null)
                    statTypeName = ""MAGIC_DAMAGE_DEALT_PLAYER""
                    value = 103124
                  [15] (com.riotgames.platform.gameclient.domain::RawStatDTO)#27
                    displayName = (null)
                    statTypeName = ""BARRACKS_KILLED""
                    value = 0
                  [16] (com.riotgames.platform.gameclient.domain::RawStatDTO)#28
                    displayName = (null)
                    statTypeName = ""LARGEST_KILLING_SPREE""
                    value = 5
                  [17] (com.riotgames.platform.gameclient.domain::RawStatDTO)#29
                    displayName = (null)
                    statTypeName = ""ITEM5""
                    value = 0
                  [18] (com.riotgames.platform.gameclient.domain::RawStatDTO)#30
                    displayName = (null)
                    statTypeName = ""MINIONS_KILLED""
                    value = 176
                  [19] (com.riotgames.platform.gameclient.domain::RawStatDTO)#31
                    displayName = (null)
                    statTypeName = ""CHAMPIONS_KILLED""
                    value = 11
                  [20] (com.riotgames.platform.gameclient.domain::RawStatDTO)#32
                    displayName = (null)
                    statTypeName = ""MAGIC_DAMAGE_TAKEN""
                    value = 8581
                  [21] (com.riotgames.platform.gameclient.domain::RawStatDTO)#33
                    displayName = (null)
                    statTypeName = ""NEUTRAL_MINIONS_KILLED""
                    value = 12
                  [22] (com.riotgames.platform.gameclient.domain::RawStatDTO)#34
                    displayName = (null)
                    statTypeName = ""TOTAL_TIME_SPENT_DEAD""
                    value = 189
                  [23] (com.riotgames.platform.gameclient.domain::RawStatDTO)#35
                    displayName = (null)
                    statTypeName = ""TURRETS_KILLED""
                    value = 0
                  [24] (com.riotgames.platform.gameclient.domain::RawStatDTO)#36
                    displayName = (null)
                    statTypeName = ""NUM_DEATHS""
                    value = 5
                  [25] (com.riotgames.platform.gameclient.domain::RawStatDTO)#37
                    displayName = (null)
                    statTypeName = ""TOTAL_DAMAGE_DEALT""
                    value = 121538
                uid = ""B6F2F234-2E37-D979-E896-AA7614FCE9CB""
              sort = (null)
              source = (Array)#11
            summonerName = ""WeFearTheSun""
            teamId = 100
            userId = 21672484
            wins = 6 Now there are ten players in a game, meaning ten of that snippet above, each one with an increasing counter, [1],[2],[3], and so on. As you can see inside of this data there are further numbers, ie. another [0] . If the numbers were unique I could just parse the [0] , then the [1] , then the [2] , etc. Right now I'm parsing the files like so: private IEnumerable<Player> GetGamePlayers(string content)
{
    List<Player> Players = new List<Player>();

    var location = content.IndexOf(""com.riotgames.platform.gameclient.domain::EndOfGameStats"");
    var cutContent = content.Substring(location, 65000);

    var playerOneLocation = cutContent.IndexOf(""[0]"");
    //var playerOneContent = cutContent.Substring(playerOneLocation, 6231);
    var playerOneContent = cutContent.Substring(playerOneLocation, 6255);
    Players.Add(ParsePlayer(playerOneContent));

    cutContent = cutContent.Substring(playerOneLocation + 6229, cutContent.Length - playerOneLocation - 6229);
    var playerTwoLocation = cutContent.IndexOf(""[1]"");
    var playerTwoContent = cutContent.Substring(playerTwoLocation, 6255);
    Players.Add(ParsePlayer(playerTwoContent));

    cutContent = cutContent.Substring(playerTwoLocation + 6229, cutContent.Length - playerTwoLocation - 6229);
    var playerThreeLocation = cutContent.IndexOf(""[2]"");
    var playerThreeContent = cutContent.Substring(playerThreeLocation, 6255);
    Players.Add(ParsePlayer(playerThreeContent));

    cutContent = cutContent.Substring(playerThreeLocation + 6229, cutContent.Length - playerThreeLocation - 6229);
    var playerFourLocation = cutContent.IndexOf(""[3]"");
    var playerFourContent = cutContent.Substring(playerFourLocation, 6255);
    Players.Add(ParsePlayer(playerFourContent));

    cutContent = cutContent.Substring(playerFourLocation + 6229, cutContent.Length - playerFourLocation - 6229);
    var playerFiveLocation = cutContent.IndexOf(""[4]"");
    var playerFiveContent = cutContent.Substring(playerFiveLocation, 6255);
    Players.Add(ParsePlayer(playerFiveContent));

    location = cutContent.IndexOf(""teamPlayerParticipantStats"");
    cutContent = cutContent.Substring(location, 32000);
    var playerSixLocation = cutContent.IndexOf(""[0]"");
    var playerSixContent = cutContent.Substring(playerSixLocation, 6255);
    Players.Add(ParsePlayer(playerSixContent));

    cutContent = cutContent.Substring(playerSixLocation + 6229, cutContent.Length - playerSixLocation - 6229);
    var playerSevenLocation = cutContent.IndexOf(""[1]"");
    var playerSevenContent = cutContent.Substring(playerSevenLocation, 6255);
    Players.Add(ParsePlayer(playerSevenContent));

    cutContent = cutContent.Substring(playerSevenLocation + 6229, cutContent.Length - playerSevenLocation - 6229);
    var playerEightLocation = cutContent.IndexOf(""[2]"");
    var playerEightContent = cutContent.Substring(playerEightLocation, 6255);
    Players.Add(ParsePlayer(playerEightContent));

    cutContent = cutContent.Substring(playerEightLocation + 6229, cutContent.Length - playerEightLocation - 6229);
    var playerNineLocation = cutContent.IndexOf(""[3]"");
    var playerNineContent = cutContent.Substring(playerNineLocation, 6255);
    Players.Add(ParsePlayer(playerNineContent));

    cutContent = cutContent.Substring(playerNineLocation + 6229, cutContent.Length - playerNineLocation - 6229);
    var playerTenLocation = cutContent.IndexOf(""[4]"");
    var playerTenContent = cutContent.Substring(playerTenLocation, 6255);
    Players.Add(ParsePlayer(playerTenContent));

    return Players;
} I can tell the code is horrible, and there is a lot of room for improvement. How would I divide the huge content into single blocks for each individual player? I need to get the string content: [0] (com.riotgames.platform.gameclient.domain::PlayerParticipantStatsSummary)#8
to
[1] (com.riotgames.platform.gameclient.domain::PlayerParticipantStatsSummary)#8

then:
[1] (com.riotgames.platform.gameclient.domain::PlayerParticipantStatsSummary)#8
to
[2] (com.riotgames.platform.gameclient.domain::PlayerParticipantStatsSummary)#8"
173,"Some rules of thumb that should improve your code: If you have variables with names resembling varOne , varTwo , varThree , etc - no matter what the number you should probably be using an array. If you are doing several identical actions over a sequence of values you should be using a loop. Code should never need to be repeated. Now with these in mind let's get to work. private IEnumerable<Player> GetGamePlayers(string content)
{
    List<Player> Players = new List<Player>();

    // Get the endgame stats text
    string endgameStatsMarker = ""com.riotgames.platform.gameclient.domain::EndOfGameStats""
    int endgameStatsLocation = content.IndexOf(endgameStatsMarker);
    string endgameStats = content.Substring(endgameStatsLocation);
    
    // Split the endgame stats text into an array of player information sections
    string[] charBeginMarker = new string[] {""(com.riotgames.platform.gameclient.domain::PlayerParticipantStatsSummary)""}
    string[] playerInfoSet = endgameStats.Split(charBeginMarker, SplitStringOptions.None);

    // don't assume there's 10; get this from the logfile
    int numPlayers = GetMaxPlayers();

    // playerDataSet[0] is before any playerInfo begins, so we skip it.
    for (int i = 1; i <= numPlayers; i++);
    {
        Players.Add(ParsePlayer(playerData));
        // The string passed to ParsePlayer will be a little different now.
        // It will contain a [#] on the end except in the case of the last player.
        // This is since we split the text at the beginning of the player field
        // and AFTER the [#].
        // You will have to ensure your ParsePlayer method will work with this
        // new input.
    }
    
    return Players;
} ... Well's most of your code removed following some simple rules. The story of Bill Atkinson is probably quite relevant here. ;) On better parsing There is one large problem in your approach to file parsing I must talk to you about. You are guessing how long the player data section is going to be based on the current logfile format's appearance and hardcoding this into the program. Let's examine this method's faults. Tell me what happens when any of these things happen: Player data sections become one character longer. Player data sections get one one more line of information. Player data sections have another array introduced to them. The answers (no peeking): 1. Your parsing of player data might go funny. 2. Your parsing will probably explode. 3. Your parsing will definitely explode in a horrible mess. If you were parsing the file correctly, your program would be at least an order of magnitude less likely to stuff up in each case, until a major change is made to the logfile format. The key to parsing this file is recognising that this file is full of human-readable and computer-readable markup you are not exploiting at all. Here is what you are doing: Open file. Identify where sections split. Count the number of characters. Hardcode this into the program and extract those characters. Here is what you should be doing: Open file. Identify where sections split. Determine how you identified where the sections split. Write code that is able to recognise this split, and splits the file content accordingly. Thus, the key is: understanding how you understand what you see, then teaching your program to understand it as well! For instance, consider these rules: A character information section begins at a particular string and ends at the next occurrence of the same string, so you can just split the character information sections on that string. Once you reach a # you've found a special field. It may be a simple comment or it may be an ID for each unique object, allowing reusing objects from cache in case two objects are identical. It is probably safe to ignore from a # to the end of a line unless you find a use for it. A variable can be found at the beginning of a line after any whitespace. The amount of whitespace is significant (see last point). If the first character found on a line is [ it's an element of an array, not a variable name. A variable name ends at the first space. A variable's value is on the other side of the = , removing any unnecessary spaces on the other side. If a value starts with an integer it is an integer. If it starts with quotation marks it is a string. Variables will always contain an element ID then a type declaration. The variables that follow are probably the properties of an object of that type. An array item's contents are always indented. An increase in indent depth means you're now reading the contents of the array from the line above. A decrease in indent depth means you've finished reading the contents of that array. Nine rules just from understanding and describing how I understand what I see. They should be fairly simple to implement in the parser in the form of methods - then all of a sudden your parser can already deal with 90% of the logfile's syntax! Only a few things are missing at this point, such as parsing an array element's type declaration or inferring the type of a variable's value (string? integer?)."
174,"ExtJS Grid Plugin. The code below is a plugin I wrote for Ext.grid.GridPanel , which basically allows you to have a bit more control over how rows are striped in the grid. By default you can only have every other row in alternate colour. With this plugin you an have for example 5 in basic color, 5 in alternate and so on. What bothers me about it, is that it basically is 100+ lines copied from Ext.grid.GridView with no more than 10 lines of my modifications. I would love to know if there's a way to do it in a more elegant way. My second concern is with that it's a plugin for Ext.grid.GridPanel , but it actually modifies the underlying Ext.grid.GridView . As far as I know, there is no way to attach a plugin to a GridView with current framework architecture, but perhaps you DO know the way. Legal stuff: The code is largely based on ExtJS source code, and as such it's released under GNU GPL license v3 license MyNamespace.grid.plugins.RowStriper = Ext.extend(Object, {
  constructor : function(config) {
    config = config || {};
    Ext.apply(this, config);
  },
  init : function(parent) {
        if (parent instanceof Ext.grid.GridPanel) {
            this.parent = parent;
            this.parent.stripeInterval = this.stripeInterval;
            parent.on('destroy', this.onDestroy, this);
            Ext.apply(parent.getView(), this.parentViewOverrides);
        }
  },
  onDestroy : Ext.emptyFn,
    parentViewOverrides : {
        doRender : function(columns, records, store, startRow, colCount, stripe) {
      var templates    = this.templates,
          cellTemplate = templates.cell,
          rowTemplate  = templates.row,
          last         = colCount - 1;

      var tstyle = 'width:' + this.getTotalWidth() + ';';

      // buffers
      var rowBuffer = [],
          colBuffer = [],
          rowParams = {tstyle: tstyle},
          meta      = {},
          column,
          record;

      //build up each row's HTML
      for (var j = 0, len = records.length; j < len; j++) {
        record    = records[j];
        colBuffer = [];

        var rowIndex = j + startRow;

        //build up each column's HTML
        for (var i = 0; i < colCount; i++) {
          column = columns[i];

          meta.id    = column.id;
          meta.css   = i === 0 ? 'x-grid3-cell-first ' : (i == last ? 'x-grid3-cell-last ' : '');
          meta.attr  = meta.cellAttr = '';
          meta.style = column.style;
          meta.value = column.renderer.call(column.scope, record.data[column.name], meta, record, rowIndex, i, store);

                    if (Ext.isEmpty(meta.value)) {
            meta.value = '&#160;';
          }

          if (this.markDirty && record.dirty && Ext.isDefined(record.modified[column.name])) {
            meta.css += ' x-grid3-dirty-cell';
          }

          colBuffer[colBuffer.length] = cellTemplate.apply(meta);
        }

        //set up row striping and row dirtiness CSS classes
        var alt = [];

                if (stripe && (rowIndex % (this.grid.stripeInterval * 2)) > (this.grid.stripeInterval - 1)) {
          alt[0] = 'x-grid3-row-alt';
        }

        if (record.dirty) {
          alt[1] = ' x-grid3-dirty-row';
        }

        rowParams.cols = colCount;

        if (this.getRowClass) {
          alt[2] = this.getRowClass(record, rowIndex, rowParams, store);
        }

        rowParams.alt   = alt.join(' ');
        rowParams.cells = colBuffer.join('');

        rowBuffer[rowBuffer.length] = rowTemplate.apply(rowParams);
      }

      return rowBuffer.join('');
    },
        processRows : function(startRow, skipStripe) {
        if (!this.ds || this.ds.getCount() < 1) {
              return;
      }

      var rows = this.getRows(),
                    len  = rows.length,
                    i, r;

      skipStripe = skipStripe || !this.grid.stripeRows;
            var stripeInterval = this.grid.stripeInterval || 1;
      startRow   = startRow   || 0;

      for (i = 0; i<len; i++) {
                r = rows[i];
                if (r) {
                    r.rowIndex = i;
          if (!skipStripe) {
                        r.className = r.className.replace(this.rowClsRe, ' ');
            if ((i % (stripeInterval * 2)) > (stripeInterval - 1)){
                            r.className += ' x-grid3-row-alt';
            }
          }
        }
      }

      // add first/last-row classes
      if (startRow === 0) {
                Ext.fly(rows[0]).addClass(this.firstRowCls);
      }

      Ext.fly(rows[rows.length - 1]).addClass(this.lastRowCls);
        }
  }
});"
175,"I think it would be better to put all of your parameters into one array.  You then construct the array in a single command when you want to call the constructor. This approach also has the benefit that it is possible to add more options for the class, see the code below for an example: class OpenIdProvider
{
    public $_width = 0;
    public $_highliting = '';
    public $_Xposition = 0;
    public $_Yposition = 0;
        ...
        ...

    /**
     * Main constractor to set array of parameters.
     * param array $parameters
     * description  _Xposition , _width , _Yposition ...
     */
    function __constrauct($parameters)
    {
        if(is_array($parameters))
            foreach($parameters as $needle=>$parameter)
                $this->{'_'.$needle} = $parameter;
    }
}
$options = array('path'=>$imgPath . $name . $ext,
                'highliting'=> 'openid_highlight', 
                 'width'=>108, 
                 'height'=>68, 
                 '...'=>6, 
                 '...'=>$info[0], 
                 '...'=>$info[1],
                 '...'=>$name);
$openIdObj = new OpenIdProvider($options);"
177,"Simple ASP.NET C# class design. Here's a class I'm designing: using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.SqlClient;

namespace Artworking.classes
{

    // A group permission level
    public class PermissionGroup
    {
        public int ID;                  // Unique ID for this group
        public bool hasFullControl;     // Does this group have complete control
        public user creator;            // Who created this group
        public string groupName;        // Reference name for group

        // Constructor for when a permission group ID is passed
        public PermissionGroup(SqlConnection cn, int ID)
        {
            using (SqlCommand cmd = new SqlCommand(""SELECT creatorUserID, group_name, fullControl FROM tblATPermissionGroups WHERE ID = "" + ID, cn))
            {
                SqlDataReader rdr = cmd.ExecuteReader();
                if (rdr.Read())
                {
                    this.creator.ID = int.Parse(rdr[""creatorUserID""].ToString());
                    this.groupName = rdr[""group_name""].ToString();
                    this.hasFullControl = bool.Parse(rdr[""fullControl""].ToString());
                }
                rdr.Close();
            }
        }
    }

} Am I on the right track?  Please note I'm not using the built in authentication as it needs to be backwards compatible for an old system. What I'm just checking is that I'm handling these classes properly and loading the data in correctly etc.  As I understand it I'm meant to put my SQL commands in the classes and away from the actual pages right?"
178,"I know nothing about C#, so this is just a comment based on the design.  Is there any reason those members aren't private?  Why don't you provide accessors, or (as I've said in many comments on this site already) actually move behavior into this class rather than exposing each individual data member?  For example, this is a permission group, have a function called ""isAuthorized"" to which you can pass a command to find out if this group is allowed to do that thing.  This way when you move forward, you can make the permissions possibly more fine grained and no one else has to even know that consumes this class."
179,"I would agree with Mark: I'd make the members private, and then add property accessors to them. You can then control access if you need to now or in the future. For example, you might want to make one of the members read-only. Easy to do: implement the get() property but not the set() property. Similarly, data range checking can easily be added to the set()."
180,"It is generally not a good idea to do this type of processing in the .ctor.  Move it to a Load (or some such name) method.  This however means your object is not really loaded after instantiated which is another issue.  As such, I would recommend separating the entity information ( HasFullControl , Creator , GroupName , etc) type from the type that loads the information from the database.  You could change PermissionGroup type to just have the data properties and then move the loading logic to a data layer that is responsible for creating the instance a loading the data. Concatenating text to the end of a sql string leaves you open to Sql Injection attacks (though not in this specific case).  Use a parameter instead: using (SqlCommand cmd = new SqlCommand(""SELECT creatorUserID, group_name, 
    fullControl FROM tblATPermissionGroups WHERE ID = @id"", cn))
{
    cmd.Parameters.AddWithValue(""@id"", id);
    ...
} You need to wrap the SqlDataReader in a using block. Use public readonly properties rather than public fields. Consider using a IDbConnection rather than SqlConnection .  Doing so will allow you to more easily mock the data call when testing this method and makes it easier to support other RDBMS's should the need arise. Throw helpful exceptions if something goes wrong when populating the data fields. Follow the .Net Framework naming guidelines"
181,"Consider C# accepted practices. As other answers mention, you have member fields marked public. In C#, you typically expose values as properties and keep members private. Starting with C# 3, you do not even need to explicitly create member fields to back your properties unless getters and setters are non-trivial. So consider replacing your fields with public int ID { get; private set; }
public bool HasFullControl { get; private set; } Note that I added private to the setter. This is on the assumption that you do not want code external to your class setting these values, overriding your permissions, as it were. Feel free to remove that modifier if that is not the case. Note also that C# practices dictate that publicly visible names are Pascal cased instead of your camel casing. Capitalize the first character of your namespace (including nested namespaces), classes, properties, methods, etc. @akmad has addressed an additional set of concerns, such as the constructor doing expensive work and the vulnerability to SQL injection in a general sense (though not specifically here, as akmad also points out). If you need to do a database call to construct your object, consider a factory approach. public class PermissionGroup
{
    private PermissionGroup() { } // class cannot be constructed from outside

    public static PermissionGroup GetPermissionGroup(/* your parameters */)
    {
        // build the object starting here!
    }
}"
182,"Update grid from source hierarchy. In this question I answered with this Linq. While it does what I was looking for, I am not sure how easy the linq queries are for others to follow. So I am looking for feedback on formating, what comments would be helpful and other alternative approaches to moving through the children records. private void UpdateGridFromSourceHierarchy(int depth, IEnumerable<SourceFile> list)
    {

        //Get the initial set of sourcefiles
        var sourceFiles = list
            .SelectMany(current => current.getInvocations()
                                .Select(invocation => new {current = (SourceFile) null, invocation}))
            .ToList() //This ensures that getInvocations is only called once for each sourcefile
            .GroupBy(x => x.current, x => x.invocation);

        for (var currentDepth = 0; currentDepth <= depth; currentDepth++)
        {
            foreach (var currentGroup in sourceFiles)
            {
                int sourceFileCount = currentGroup.Count();
                int counter = 0;

                foreach (var invocation in currentGroup)
                {
                    /*
                     * Generalized grid code goes here
                     * In my code it was a call to:
                     * UpdateGridPosition(currentGroup,invocation,counter);
                     */
                    counter++;
                }
            }

            //Select the current sub source files
            sourceFiles = sourceFiles.SelectMany(current => current.Select(invocation => invocation))
                //Get all of the invocations paired with the new current level of source files
                .SelectMany(newCurrent => newCurrent.getInvocations()
                                     .Select(invocation => new { newCurrent, invocation }))
                //Group them so that we can loop through each set of invocations seperately
                .ToList().GroupBy(x => x.newCurrent, x => x.invocation);
        }
    }"
183,"Converting from polar coordinates to rectangular coordinates. This is performance critical. I measured and determined that using the sqrt is faster then using the cos method. I am aware that this code only works for some points, so that is not an issue. Point is System.Drawing.Point . _offset is also of type Point . I assumed, and the profiler seemed to confirm, that the try / catch will not slow down the code unless an exception occurs. Please correct me if that is wrong. /// <summary>
/// Convert from polar coordinates to rectangular coordinates.
/// Only works for points to the left of the origin.
/// </summary>
/// <param name=""radius"">The radius of the point in pixels.</param>
/// <param name=""theta"">The angle of the point in radians.</param>
/// <returns>The point in rectangular coordinates.</returns>
internal Point PolarToRectangular(
        double radius,
        double theta)
{
    try
    {
        double sin = Math.Sin(theta);

        // This is faster then:
        // double cos = Math.Cos(theta);
        double cos = -Math.Sqrt(1 - (sin * sin));

        Int32 x = _offset.X + (Int32)Math.Round(radius * cos);
        Int32 y = _offset.Y + (Int32)Math.Round(radius * sin);

        return new Point(x, y);
    }
    catch (OverflowException ex)
    {
        ex.Data.Add(""Screen polar Radius"", radius);
        ex.Data.Add(""Screen polar Theta"", theta);
        throw;
    }
}"
184,"Yes I think that is going to be pretty quick. It might be tempting to move the cos calc so that it does a full Pythagoras with the radius. This will save an assignment, but I thi it requires an additional multiplication (1*1 being known already in your current version). As a matter of personal style (possible because I code in multiple languages) but I would use different names for your sin and cos variables. most languages would not accept this, and it would, personally, have the potential to confuse me."
185,"Determining if a connection has been made to a communications device. I am unsure if my use of Monitor.Wait and Monitor.Pulse is correct. It seems to work alright, but there is a nagging doubt I am doing something wrong. Am I dealing with a timeout OK, or is there a better way to do it? All examples I have seen use Monitor.Wait with a while loop, and not with an if to re-check the blocking condition after Pulse , but I need to determine if a timeout occurred. _cmdDispatcher.EnqueueCommand(cmd) sends a command to the device, and it responds with an event that executes the CommResponseReceived method on another thread. private readonly object _connectLock = new object();

public bool Connect()
{
    if (this._connected) throw new InvalidOperationException(""Plc is already connected."");

    ICommand cmd = new Command(MessageIdentifier.Name);

    try
    {
        if (this._channel.Open() && !this._connected)
        {
            // Wait for communications to be fully established or timeout before continuing.
            lock (this._connectLock)
            {
                this._cmdDispatcher.EnqueueCommand(cmd);

                if (!this._connectSignal)
                {
                    if (Monitor.Wait(this._connectLock, this._timeout))
                    {
                        this._connected = true;
                        this._connectSignal = false;
                        Debug.WriteLine(""Connection succeeded."");
                    }
                    else
                    {
                        //TODO Log timeout.
                        Debug.WriteLine(""Connection timed out."");
                    }
                }
            }

            if (this._connected) this.OnConnectionChangedEvent(ConnectionStatus.Connected);
        }
    }
    catch (Exception ex)
    {
        //TODO Log errors.
        Debug.WriteLine(""Connection failed."");
    }

    return this._connected;
} Executed in another thread when the device responds: private void CommResponseReceived(object sender, CommsResponseEventArgs e)
{
    //

    // Signal that communications are successfully established.
    lock (this._connectLock)
    {
        this._connectSignal = true;
        Monitor.Pulse(this._connectLock);
    }
}"
186,"Getting/setting default values from my App.config. Imagine that I need a color palette for my Winforms application to have a consistent look. What I did was create a static helper class and helper methods that I can call from anywhere in my code, and invoke what I need from the App.settings file. Here for example, I am getting the school name from the App.config file, so I can sell this application to other schools with minimal changes on my part. <?xml version=""1.0"" encoding=""utf-8"" ?>
<configuration>
  <appSettings>
    <add key=""schoolName"" value=""Uboldi""/>
  </appSettings>
</configuration> using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Configuration;

namespace Uboldi.Helpers
{
    public static class CustomizationHelper
    {
        public static string GetSchoolName()
        {
            return ConfigurationManager.AppSettings[""schoolName""];
        }
    }
} Usage: using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Uboldi.Helpers;

namespace Uboldi
{
    public partial class MainForm : Form
    {
        public MainForm()
        {
            InitializeComponent();
            LoadFormTitle();
        }

        private void LoadFormTitle()
        {
            var schoolName = CustomizationHelper.GetSchoolName();
            this.Text = String.Format(""Sistema {0} - Pagina Principal"", schoolName);
        }
    }
} Are there any glaring mistakes I'm making by choosing this type of architecture?"
187,"Music info model. I'm learning Django as I go. I know this model is missing user authentication, registration, comments/comment threading, and voting. But this is my starting code for my model. What are some of the things I can improve on, modify, rewrite, etc? from django.contrib.auth.models import User
from django.db import models
from django.contrib import admin
from django.template.defaultfilters import escape
from django.utils.translation import ugettext as _
from django.utils.encoding import force_unicode
from django.http import HttpResponse, HttpResponseRedirect
from django.core.urlresolvers import reverse

class DateTime(models.Model):
  datetime = models.DateTimeField(auto_now_add=True)

  def __unicode__(self):
    return unicode(self.datetime.strftime(""%b %d, %Y, %I:%M %p""))

class Country(models.Model):
  country = models.CharField(max_length=50)

  def __unicode__(self):
    return unicode(self.country)

class Artist(models.Model):
  artist = models.CharField(max_length=50)
  country = models.ForeignKey(Country, blank=True, null=True)
  user = models.ForeignKey(User, blank=True, null=True)
  created = models.ForeignKey(DateTime)
  notes = models.TextField()

  def __unicode__(self):
    return artist

class Song(models.Model):
  name = models.CharField(max_length=200)
  artist = models.ForeignKey(Artist, blank=True, null=True)
  # language = models.ForeignKey(Country, blank=True, null=True)
  user = models.ForeignKey(User, blank=True, null=True)
  created = models.ForeignKey(DateTime)
  notes = models.TextField()

  def __unicode__(self):
    return song

class FileType(models.Model):
  file_type = models.CharField(max_length=3)
  description = models.TextField()
  user = models.ForeignKey(User, blank=True, null=True)
  created = models.ForeignKey(DateTime)
  notes = models.TextField()

  def __unicode__(self):
    return file_type

class Level(models.Model):
  level = models.CharField(max_length=3)
  description = models.TextField()
  user = models.ForeignKey(User, blank=True, null=True)
  created = models.ForeignKey(DateTime)
  notes = models.TextField()

  def __unicode__(self):
    return level

class MusicSheet(models.Model):
  version = models.CharField(max_length=2)
  song = models.ForeignKey(Song, blank=True, null=True)
  artist = models.ForeignKey(Artist, blank=True, null=True)
  file_type = models.ForeignKey(FileType, blank=True, null=True)
  level = models.ForeignKey(Level, blank=True, null=True)
  user = models.ForeignKey(User, blank=True, null=True)
  created = models.ForeignKey(DateTime)
  text = models.TextField()
  notes = models.TextField()

#include votes

#include comments

#include registration code


########################################################################################################################
######################################## ADMIN STUFF ###################################################################
########################################################################################################################


class MusicSheetAdmin(admin.ModelAdmin):
  list_display = [""version"", ""song"", ""artist"", ""file_type"", ""level"", ""user"" , ""created"", ""text"", ""notes""]
  search_fields = [""version""]

class MusicSheetInline(admin.TabularInline):
  model = MusicSheet

class DateAdmin(admin.ModelAdmin):
  list_display = [""datetime""]
  inlines = [MusicSheetInline]

  def response_add(self, request, obj, post_url_continue='../%s/'):
    """""" Determines the HttpResponse for the add_view stage.  """"""
    opts = obj._meta
    pk_value = obj._get_pk_val()

    msg = ""Song(s) were added successfully.""
    # Here, we distinguish between different save types by checking for
    # the presence of keys in request.POST.
    if request.POST.has_key(""_continue""):
      self.message_user(request, msg + ' ' + _(""You may edit it again below.""))
      if request.POST.has_key(""_popup""):
        post_url_continue += ""?_popup=1""
      return HttpResponseRedirect(post_url_continue % pk_value)

    if request.POST.has_key(""_popup""):
      return HttpResponse(
          '<script type=""text/javascript"">opener.dismissAddAnotherPopup(window, ""%s"", ""%s"");'
          '</script>' % (escape(pk_value), escape(obj)))
    elif request.POST.has_key(""_addanother""):
      self.message_user(request, msg + ' ' + (_(""You may add another %s below."") %
                                              force_unicode(opts.verbose_name)))
      return HttpResponseRedirect(request.path)
    else:
      self.message_user(request, msg)

    for music_sheet in MusicSheet.objects.filter(created=obj):
      if not music_sheet.user:
        music_sheet.user = request.user
        music_sheet.save()

    return HttpResponseRedirect(reverse(""admin:musicsheet_musicsheet_changelist""))


class CountryAdmin(admin.ModelAdmin):
  list_display = [""country""]
  search_fields = [""country""]

class CountryInline(admin.TabularInline):
  model = MusicSheet



class SongAdmin(admin.ModelAdmin):
  list_display = [""name"", ""artist"", ""user"", ""created"", ""notes""]
  search_fields = [""name"", ""artist""]

class SongInline(admin.TabularInline):
  model = MusicSheet



class ArtistAdmin(admin.ModelAdmin):
  list_display = [""artist"", ""country"", ""user"", ""created"", ""notes""]
  search_fields = [""artist"", ""country""]

class ArtistInline(admin.TabularInline):
  model = MusicSheet



class FileTypeAdmin(admin.ModelAdmin):
  list_display = [""file_type"", ""description"", ""user"", ""created"", ""notes""]
  search_fields = [""file_type""]

class FileTypeInline(admin.StackedInline):
  model = MusicSheet


class LevelAdmin(admin.ModelAdmin):
  list_display = [""level"", ""description"", ""user"", ""created"", ""notes""]
  search_fields = [""level""]

class LevelInline(admin.StackedInline):
  model = MusicSheet

admin.site.register(MusicSheet, MusicSheetAdmin)
admin.site.register(Country, CountryAdmin)
admin.site.register(Song, SongAdmin)
admin.site.register(Artist, ArtistAdmin)
admin.site.register(FileType, FileTypeAdmin)
admin.site.register(Level, LevelAdmin)
admin.site.register(DateTime, DateAdmin)"
189,"The presented code seems okay, there aren't any obvious problems with it. CustomizationHelper could probably use a better name though to indicate what's being customized. If this is part of a larger project, putting a comment to indicate which classes are suppose to use CustomizationHelper would be a good idea."
190,"Build menu from MS Word XML. I've recently assembled some jQuery that allows a user to build out a bulleted list in MS Word with hyperlinks and turn that into a HTML unordered list.  Ideas for uses are website menu systems where the user may not have a clue about HTML. You can also extend this with jQuery UI plugins for effects.  Looking for edge cases. /*
    The following will read in a bullet list from in a MS Word XML file and turn it into a 
    unordered list with hyperlinks. Perhaps to use as a menu.
*/
$.ajax({
    type: ""GET"",
    async: false,
    url: ""Menu.xml"",
    dataType: ""xml"",
    success:function(results){
        var currentDepth = 0;
        $(""#menu"").append('<ul class=""menuLvl'+currentDepth+'""></ul>');
        $(results).find(""[nodeName=w:p]"").each(function(){
            if($(this).find(""[nodeName=w:pStyle]"").attr('w:val') == 'ListParagraph'){
                var liValue = $(this).find(""[nodeName=w:t]"").text();
                var hyper = $(this).find(""[nodeName=w:hyperlink]"").attr('r:id');
                var placeAtDepth = parseInt($(this).find(""[nodeName=w:ilvl]"").attr('w:val'), 10);

                if(placeAtDepth > currentDepth){
                    $("".menuLvl""+ currentDepth).append('<ul class=""menuLvl'+ placeAtDepth +'"">');
                }   

                currentDepth = placeAtDepth;

                //Determine if we have an hyperlink
                if(hyper != null){
                    var link = $(results).find('Relationship[Id='+hyper+']').attr('Target');
                    liValue = '<a href=""'+ link +'"">'+ liValue +'</a>';
                }

                $("".menuLvl""+currentDepth).last().append('<li>'+ liValue +'</li>');
            }
        });
    }
});"
191,"I think that'd be fine. Another option would be to create a second constructor for the form and pass the title in: public class MainForm : Form
{
    public MainForm()
    {
        InitializeComponent();
    }

    public MainForm(string schoolName) : this()
    {
        this.Text = String.Format(""Sistema {0} - Pagina Principal"", schoolName);
    }
} This may be just personal preference, though. You could also further extract the hardcoded form title into a config or resource file and instantiate the form like this instead: var titleFormat = ...; // retrieve format from some place
var schoolName = CustomizationHelper.GetSchoolName();
var form = new MainForm() { Text = string.Format(titleFormat, schoolName) }; The payoff from doing that would depend on how likely it is that it'll change in the future or whether or not you're planning to translate the application into other languages."
192,"Is the purpose of CustomizationHelper just to abstract away the ConfigurationManager/AppConfig stuff?  Because otherwise I'd just stick with the straight ConfigurationManager call. The less hoops required to understand what's going on, the better in my book.  Unless you see the need to someday get SchoolName from another source (like say a Database). In any event the class name could probably be improved, maybe something like ""SchoolConfiguration"" and have a ""Name"" property or ""GetName()"" method."
193,"I would consider using a lookup table to find your sines. How precise an angle are you calculating for? This answer on stackoverflow has some interesting information on how to construct one and the benchmarks for using it to two decimal points. If you are using the full precision of a double, then your current method will be faster, but if you have a fixed precision, a lookup table will be benificial. As long as the exception IS exceptional (and it looks to me like it is) it will add very little overhead to your run times. See: https://stackoverflow.com/q/52312/487663 ."
194,No Your code looks pretty messy and that last linq statement is just a killer. To top it off the triple-nested foreach statement looks like serious code smell. I'd suggest breaking your code up into smaller methods that each do one thing which might reduce the perceived complexity of it
195,"you don't necessarily have to call -setNetworkActivityIndicatorVisible: from the main thread. I didn't find anything in the documentation about UIApplication not being thread safe, and since your application's main thread doesn't have anything in common with the system, you are free to call it whenever you like. dispatch_sync: that's fine. you could also call dispatch_async, since i'm not really sure you would want do display the network indicator while the feeds are actually being set on the UI - instead you probably only want the downloading to be indicated. I would probably go for dispatch_async. But to answer your question, that piece of code is perfectly fine ( with the minor addition that maybe you should really use only one exit point from your method ... ) Hope this helps."
196,"Disclaimer: I'm not a Django guru.  Here are my thoughts, for what it's worth. Common fields : user , created , and nodes occur in almost every class.  I'd consider creating an abstract base class with these three fields. Field names : for the sake of readability, I'd change Artist.artist to Artist.name , and *.user to *.creator . File extensions : occasionally have more than 3 chars (e.g.: .jpeg , .java ). Indexing : I'd add db_index=True to the name fields, for the very least. Redundancy : since you have MusicSheet.song and Song.artist , you no longer need MusicSheet.artist .  It's called redundancy and it's generally a bad thing. Primary keys, unique constraints : you probably don't want two FileType s with the same file_type , so that field is a good candidate for primary key ( primary_key=True ).  I'm not sure what Level is supposed to model, but my guess is that its level is a good candidate for primary key as well.  Add unique=True for Country.country , or add a primary key with country code . DateTime : I don't see a need for this class.  Simply replace every occurrence of: created = models.ForeignKey(DateTime) with models.DateTimeField(auto_now_add=True) ."
197,"Administration Elevation. I'm looking into Administration Elevation and I've come up with a solution that seems like it's perfectly sane, but I'm still in the dark about the professional methods to accomplish this. Is there a better way to do this or is this fine? using System;
using System.Diagnostics;
using System.Security.Principal;
using System.Windows.Forms;

namespace MyVendor.Installation
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            if (!IsRunAsAdmin())           
            {
                Elevate();
                Application.Exit();
            }
            else
            {
                try
                {
                    Installer InstallerForm = new Installer();
                    Application.Run(InstallerForm);
                }
                catch (Exception e)
                {
                    //Display Exception message!

                    Logging.Log.Error(""Unrecoverable exception:"", e);
                    Application.Exit();
                }
            }
        }

        internal static bool IsRunAsAdmin()
        {
            var Principle = new WindowsPrincipal(WindowsIdentity.GetCurrent());
            return Principle.IsInRole(WindowsBuiltInRole.Administrator);
        }

        private static bool Elevate()
        {
            var SelfProc = new ProcessStartInfo
                {
                    UseShellExecute = true,
                    WorkingDirectory = Environment.CurrentDirectory,
                    FileName = Application.ExecutablePath,
                    Verb = ""runas""
                };
            try
            {
                Process.Start(SelfProc);
                return true;
            }
            catch
            {
                Logging.Log.Error(""Unable to elevate!"");
                return false;
            }
        }
    }
}"
198,"I decided to work a bit on the second LINQ query and here is what I came up with: //Select the current sub source files             
            sourceFiles = GetNextSourceFileLevel(sourceFiles);
        }
    }

    private IEnumerable<IGrouping<SourceFile, SourceFile>> GetNextSourceFileLevel(IEnumerable<IGrouping<SourceFile, SourceFile>> sourceFiles)
    {
        var previousLevelOfSourceFiles = sourceFiles.SelectMany(current => current.Select(invocation => invocation));

        var previousLevelOfSourceFilesWithInvocations = previousLevelOfSourceFiles
            .SelectMany(newCurrent => newCurrent.getInvocations()
                                          .Select(invocation =>new {newCurrent, invocation}));
        var listOfSourceFiles = previousLevelOfSourceFilesWithInvocations.ToList();

        return listOfSourceFiles.GroupBy(x => x.newCurrent, x => x.invocation);
    } I thought about making each loop in the method into its own method, and broke it up into smaller steps, I could have gone farther but did not want to have to create the annonymous class I was using."
199,"I also decided to try spliting breaking the triple loop as mko into smaller methods, each is needed since i want to go down the hierachy x number of times, loop through the parents and update the grid based on the children so here is what I came up with. I am not sure it made it better though. private void UpdateGridFromSourceHierarchy(int depth, IEnumerable<SourceFile> list)
    {
        //Get the initial set of sourcefiles         
        var sourceFiles = list.SelectMany(current => current.getInvocations()                                 
                                       .Select(invocation => new {current = (SourceFile) null, invocation}))             
                                       .ToList() //This ensures that getInvocations is only called once for each sourcefile             
            .GroupBy(x => x.current, x => x.invocation);          
        for (var currentDepth = 0; currentDepth <= depth; currentDepth++)
        {
            LookThroughParentSourceFilesToUpdateGrid(sourceFiles);
            //Select the current sub source files             
            sourceFiles = GetNextSourceFileLevel(sourceFiles);
        }
    }

    private void LookThroughParentSourceFilesToUpdateGrid(IEnumerable<IGrouping<SourceFile, SourceFile>> sourceFiles)
    {
        foreach (var currentGroup in sourceFiles)
        {
            currentGroup.Count();                 
            LoopThroughSourceFilesToUpdateGrid(currentGroup);
        }
    }

    private void LoopThroughSourceFilesToUpdateGrid(IGrouping<SourceFile, SourceFile> currentGroup)
    {
        int counter = 0;
        foreach (var invocation in currentGroup)
        {
            /*                      
             * * Generalized grid code goes here
             * */                     
            counter++;
            UpdateGridPosition(currentGroup,invocation,counter);
        }
    }"
200,"Database method to query. I have a database class that in __construct() initialize a PDO connection and insert the instance into a $db private var.
Now i'm working on a method that can be used to query in this way: $db = new db;
$db->query(array(
 'select' => 1,
 'from' => 'table',
 'where' => array('id' => 1, 'name' => 'charlie'),
 'limit' => array(1, 5)
)); I did something that works pretty nicely long time ago while PDO was something unknown, but i was wondering: How could i improve this code a bit How can i end it? I mean how to use the PDO then to submit the query? Here's the method query() : # Defining the type
     if (isset($array['select'])) { $type = 'SELECT'; $type_value = (is_int($array['select'])) ? '*' : $array['select']; }
     if (isset($array['update'])) { $type = 'UPDATE'; $type_value = $array['update']; }
     if (isset($array['delete'])) { $type = 'DELETE FROM'; $type_value = $array['delete']; }
     if (isset($array['insert'])) { $type = 'INSERT INTO'; $type_value = $array['insert']; }
     if (!isset($type)) { trigger_error(""Database, 'type' not selected.""); } // Error

     # From
     if (isset($array['from'])) 
     {
      $from = 'FROM'; 
      $from_value = mysql_real_escape_string($array['from']); // table cannot be pdoed
     }
     # Where
     if (isset($array['where'])) 
     { 
      if (!is_array($array['where'])) { trigger_error(""Database, 'where' key must be array.""); }
      $where = 'WHERE'; $where_value = $array['where']; 
      # Fixing the AND problem
      if (count($array['where']) > 1)
      {
       $list = $where_value;
       foreach ($list as $a => $b) { $w[] = ""{$a} = {$b}""; }
       $and = implode(' AND ', $w);
       $where_value = $and;
      }
     }
     # Limit
     if (isset($array['limit'])) 
     {
      if (!is_array($array['limit'])) { trigger_error(""Database, 'limit' key must be array.""); }
      if (count($array['limit']) != 2) { trigger_error(""Database, 'limit' array must be two-keys-long""); }
      $limit_first = $array['limit'][0];
      $limit_second = $array['limit'][1];
      $limit = 'LIMIT';
      $limit_value = ""{$limit_first}, {$limit_second}"";
     }

     # Set
     if (isset($array['set']))
     {
      if (!is_array($array['set'])) { trigger_error(""Database, 'set' key must be array.""); }
      $edits = $array['set'];
      foreach ($edits as $a => $b) { $e[] = ""{$a} = {$b}""; }
      $set = 'SET';
      $set_value = implode(',', $e);
     }

     $vals = array('from', 'from_value', 'set', 'set_value', 'where', 'where_value');
     foreach ($vals as $v) { if (empty($$v)) { $$v = ''; } }

     $sql = ""
      {$type} {$type_value}
      {$from} {$from_value}
      {$set} {$set_value}
      {$where} {$where_value}
     "";

# Here there would be something like mysql_query($sql), but i'd like PDO! PDO get me hornier. And now? How to bind parameters? Is that possible to work it out?"
201,"is_numeric_array() is missing. I found that in PHP (or I probably can't find it) a proper is_numeric_array($array) function is missing. So I created one. The problem is that I don't think it's great and I don't know how to improve it. Any suggestion? My first function function is_numeric_array($array)
{
    $i = 0;
    foreach ($array as $a => $b) { if (is_int($a)) { ++$i; } }
    if (count($array) === $i) { return true; }
    else { return false; }
}

is_numeric_array(array(0,0,0,0,0)); // true
is_numeric_array(array('str' => 1, 'str2' => 2, 'str3' => 3)); // false Example As asked, I provide an example on how this could be any useful. function is_numeric_array($array)
{
    # Code below
}

function someFunction($array)
{
    if (is_numeric_array($array))
    {
        $query = $array[0];
        $param = $array[1];
        $fetch = $array[2];
    }
    else
    {
        $query = $array['query'];
        $param = $array['param'];
        $fetch = $array['fetch'];
    }

    # Do your sql/pdo stuff here
}

# This use is the same of ...
someFunction(array(
    'PDO SQL STATEMENT', 
    array('param1' => 1, 'param2' => 2, 'param3' => 3),
    true
));

# ... this one.
someFunction(array(
    'query' => 'PDO SQL STATEMENT',
    'param' => array('param1' => 1, 'param2' => 2, 'param3' => 3),
    'fetch' => true
));

# To choose one form instead of the other is coder's decision
# Also I know it is useless but I was just wondering why anybody actually looked forward this function"
202,"This will drop out as soon as an element is found that is not an int, making the function more efficient for large arrays. function is_numeric_array($array) {
   foreach ($array as $a=>$b) {
      if (!is_int($a)) {
         return false;
      }
   }
   return true;
}"
204,"Instead of using a counter to count the keys for which the condition is true, you could just return false as soon as you find a key which is not an int and return true if the loop reaches its end without finding such a key: foreach ($array as $a => $b) {
    if (!is_int($a)) {
        return false;
    }
}
return true; This has the benefit that it short-circuits (i.e. it stops iterating once it finds a key that is not an int) and gets rid of the counter."
205,"At first I didn't realise you wanted to check see if the keys are integers. If the reason you're doing this is to make sure the keys are 0,1,2,3,4.. etc as an indexed array and not an associative array, then you could use this: function is_numeric_array($arr)
{
    return array_keys($arr) === range(0,(count($arr)-1));
}

/*
    * Tests
*/
var_dump(is_numeric_array(array('a', 'b', 'c'))); // true
var_dump(is_numeric_array(array(""0"" => 'a', ""1"" => 'b', ""2"" => 'c'))); // true
var_dump(is_numeric_array(array(""1"" => 'a', ""0"" => 'b', ""2"" => 'c'))); // false
var_dump(is_numeric_array(array(""a"" => 'a', ""b"" => 'b', ""c"" => 'c'))); // false Benchmark results as requested: Here's the code used to test the execution: $array = array();
for($i=0;$i<=500000;$i++)
{
    $array[] = ""some_string"";
}

$m_initial = memory_get_usage();
is_numeric_array($array);
$increase = memory_get_usage() - $m_initial; As you can see from the above, I tested with a linear array that had 500K strings: The value of $increase showed 65032 (which is in bytes). If we converted to K B this is around 64 rounded up. The result in KB shows 63.507 , which in my opinion is ok."
206,"Improving a little on @sepp2k answer(+1) (removing the ""unused variable warning"" some tools will spit out): foreach (array_keys($array) as $a)) {
    if (!is_int($a)) {
        return false;
    }
}
return true; If you want to check if it's an linear array: return array_merge($array) === $array; or @RobertPitt's solution :) (Also +1 there) But my main point: Why do you need this, i've never had use for something like this and it might be that the solution is change and API design flaw or data structure flaw somewhere ? Doesn't have too, but might. Response to OPs comment: I'm building a db method for queries that needs of a 3 keys array. In case the array is Numeric the order must be: statement, parameters, fetch. In case it's not, so the coder is specifying the key string, the order can be different and two out of three required parameters could be empty. Ok then let my try to do that specif to your requirements :) my_db_function(
    array(""myquery"", array(""params"", ""...""), ""myfetchmode"")
);
// or 
my_db_function(
    array(""params"" => ""myquery"", ""fetchmode"" => ""myfetchmode, ""params"" => array(""myparams"", ""...) )
); Maybe i misunderstood a little but it should get the point across how one could build that with a different check :) function my_db_fuction($statement) {

    if(isset($statement[""query""])) { // Assoc 'Mode'
        $query = $statement[""query""];
        if(isset($statement[""params""])) { $params = $statement[""params""]; } 
        else { $params = array(); }
        if(isset($statement[""fetchmode""])) { $fetchmode = $statement[""fetchmode""]; }
        else { $fetchmode = ""select""; // optional param, default value here

    } else if(isset($statement[0]) { // Linear Array Mode

        $query = $statement[0];
        if(isset($statement[1])) { $params = $statement[1]; } 
        else { $params = array(); }
        if(isset($statement[2])) { $fetchmode = $statement[2]; }
        else { $fetchmode = ""select""; // optional param, default value here

    } else {
         // Error, misformed format
    }
    // Now we got our 3 variables :)
} That is still a pretty big code block but i didn't want to shorten it and risk worse readabilty. What i would do with that is create a my_db_stuff_param_helper($aParams) that will always return an array containing the 3 keys filled with the real values (or defaults if nothing was passed) function my_db_fuction($statement) {
      $statement = my_db_parse_params($statement);
      // now e.g. $statement[""query""] will always be there
  } something along those lines ""feels"" (subjective, i know) better than building a generic function to do the key checking. (I guess it's isset($statement[""query""]) instead of is_numeric_array what i boilds down to :)"
207,"That query method (and the db class) has a lot of responsibilities: Do the PDO stuff, connection handling Be a query builder be a query executor Handle the params and possibly execute the same statement with different params (it would to that too) Do all the error checking maybe more i don't see Usually that functionality is handled in 2 to 3 classes, sometimes even more and not in one single function. And you are doing some very creepy magic to achieve all the work foreach ($vals as $v) { if (empty($$v)) { $$v = ''; } } and all that so you can write array(""select "" => ""something"" , ... instead of ""select something"" ... Also you are using mysql_real_escape_string so it seems you don't want to use the pdo escaping (not binding parameters) so why try to use PDO if you limit yourself to mysql anyways ? So far everything i spotted thinking about it for 5 minutes. Will improve upon feedback / direction from you if it helped at all :)"
208,"You can create a manifest file and set the app to require administrative privileges. This will trigger the UAC user prompt with the dimmed screen when your application is run without requiring any code on your part. See MSDN for the gory details: This file can be created by using any text editor. The application manifest file should have the same name as the target executable file with a .manifest extension. <?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?>
<assembly xmlns=""urn:schemas-microsoft-com:asm.v1"" manifestVersion=""1.0""> 
  <assemblyIdentity version=""1.0.0.0""
     processorArchitecture=""X86""
     name=""<your exec name minus extension>""
     type=""win32""/> 
  <description>Description of your application</description> 
  <!-- Identify the application security requirements. -->
  <trustInfo xmlns=""urn:schemas-microsoft-com:asm.v2"">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel
          level=""requireAdministrator""
          uiAccess=""false""/>
        </requestedPrivileges>
       </security>
  </trustInfo>
</assembly>"
209,"Ok, here's a shot for consistency and proper naming conventions (Since numeric and int mean different things all together, there's little point calling one the other...): function isNumericArray(array $array) {
    foreach ($array as $a => $b) {
        if (!is_numeric($a)) {
            return false;
        }
    }
    return true;
}

function isIntArray(array $array) {
    foreach ($array as $a => $b) {
        if (!is_int($a)) {
            return false;
        }
    }
    return true;
} Now, for a more OO approach, I'd build a filteriterator: class NumericFilterIterator extends FilterIterator {
    public function accept() {
        return is_numeric(parent::current());
    }
}

class IntFilterIterator extends FilterIterator {
    public function accept() {
        return is_int(parent::current());
    }
} Then, if you just want to iterate over the integer, just do $it = new IntFilterIterator(new ArrayIterator($array)); .  If you want to verify, you can do: $it = new IntFilterIterator(new ArrayIterator($array));
if ($array != iterator_to_array($it)) {
    //Has a non-int element
}"
211,"Maybe you could extract the common massaging before call_user_func_array in _execute and _prepareFetch into a helper? private function _execute($aArgs) {
/// [...]
        $aRefArgs = array();
        foreach(array_keys($aArgs) as $mIndex) {
            $aRefArgs[$mIndex] = &$aArgs[$mIndex];
        }
        array_unshift($aRefArgs, str_repeat(""s"", $iArgs));
        // Needs References
        call_user_func_array(array($this->oStatement, ""bind_param""), $aRefArgs);
///-^ This part...
/// [...]

private function _prepareFetch() {
/// [...]
            $this->aResultRow = array_fill(0, count($this->aFieldnames), null);
            // Ugly but 'bind_result' forces you to pass references
            $aRefs = array();
            foreach ($this->aResultRow as $iIndex => &$rmValue) {
                $aRefs[$iIndex] = &$rmValue;
            }

            call_user_func_array(array($this->oStatement, ""bind_result""), $this->aResultRow);
///-^ ... matches this one loosely. 
/// [...] Probably not worth it, good enough as-is. This is one of the most readable bits of PHP I've ever seen, should be even better with the original comments."
212,"I don't see how to improve the duplication much: you're extending code that unfortunately wasn't meant to be extended. What you could do to help anyone finding your code in the wild is to highlight changes and maybe explain why you're doing the calculations you're doing. How would you generalize your code to alternate between three or more row styles? //set up row striping and row dirtiness CSS classes
    var alt = [];

/// -> Comment about how you're making the stripe interval magic happen here
            if (stripe && (rowIndex % (this.grid.stripeInterval * 2)) > (this.grid.stripeInterval - 1)) {
/// -^ Consider breaking this up into assignment into a var and subsequent if, or 
///    even nesting ifs: it might be more readable by separating logical steps.
///    A helper to be used below would be an option, and if you're going to generalize
///    it could make extending easier.

      alt[0] = 'x-grid3-row-alt';
    }

/// [...]

     if (!skipStripe) {
                    r.className = r.className.replace(this.rowClsRe, ' ');
        if ((i % (stripeInterval * 2)) > (stripeInterval - 1)){
                        r.className += ' x-grid3-row-alt';
/// -^ Same comments apply here, specially about highlighting your changes. You could improve modularity in your version then propose a patch to make upstream easier to work with, so we don't have to suffer the same fate you did ;)"
213,"Looks fine (maybe some stricter formatting could help readibility, but not an issue), so I'll suggest completely optional improvements that might help spotting important improvements. As a general principle, try to be ready for bogus values in your input so you can avoid generating nonsense . Being more robust will also make reusing your code for somewhat different tasks easier. $.ajax({
/// [...]
    success:function(results){
/// [...]
        $(results).find(""[nodeName=w:p]"").each(function(){
            if($(this).find(""[nodeName=w:pStyle]"").attr('w:val') == 'ListParagraph'){
                var liValue = $(this).find(""[nodeName=w:t]"").text();
/// -^ What if the input has an empty value here? Skip? 

                var hyper = $(this).find(""[nodeName=w:hyperlink]"").attr('r:id');
                var placeAtDepth = parseInt($(this).find(""[nodeName=w:ilvl]"").attr('w:val'), 10);
/// -^ parseInt can return a NaN, maybe you want to bail out in that case?
///    Should also handle some bogus results for .find.

                if(placeAtDepth > currentDepth){
                    $("".menuLvl""+ currentDepth).append('<ul class=""menuLvl'+ placeAtDepth +'"">');
                }

                currentDepth = placeAtDepth;

                //Determine if we have an hyperlink
                if(hyper != null){
                    var link = $(results).find('Relationship[Id='+hyper+']').attr('Target');
/// -^ This can result in an invalid link for broken input. But what if
       the input is malicious (JS hrefs)? 

                    liValue = '<a href=""'+ link +'"">'+ liValue +'</a>';"
214,"Avoiding null in variable assignment. I want to get empty string or the string value of the object Which code you will use and why? value = object.to_s or this value = object.nil? ? """" : object"
216,"I've read in here(act_as_good_style) (search for .nil? first occurrence) that you should not check for .nil? unless you really want to check that, while if you want to know if the object is valued you should go for something like that value = object ? object.to_s : '' That by the way fits very well with my policy standard behavior first(exception for very short code first when else statement too long)."
217,"Randomly sampling a population and keeping means: tidy up, generalize, document?. This is part from an answer to a Stack Overflow question . The OP needed a way to perform calculations on samples from a population, but was hitting memory errors due to keeping samples in memory. The function is based on part of random.sample , but only the code branch using a set is present. If we can tidy and comment this well enough, it might be worth publishing as a recipe at the Python Cookbook . import random

def sampling_mean(population, k, times):
    # Part of this is lifted straight from random.py
    _int = int
    _random = random.random

    n = len(population)
    kf = float(k)
    result = []

    if not 0 <= k <= n:
        raise ValueError, ""sample larger than population""

    for t in xrange(times):
        selected = set()
        sum_ = 0
        selected_add = selected.add

        for i in xrange(k):
            j = _int(_random() * n)
            while j in selected:
                j = _int(_random() * n)
            selected_add(j)
            sum_ += population[j]

        # Partial result we're interested in
        mean = sum_/kf
        result.append(mean)
    return result

sampling_mean(x, 1000000, 100) Maybe it'd be interesting to generalize it so you can pass a function that calculates the value you're interested in from the sample?"
218,"If object is either nil or a string, you can just do value = object || """" . If it can be anything and you want to get a string, your second solution doesn't actually do what you want, since it won't turn the object into a string if it's not nil. To fix that your second solution would become value = object.nil? ? object.to_s : """" . Of course since now you're calling to_s in both solutions there is no reason to prefer the second over the first, so I'd go with the first."
219,"Quasi-random sequences: how to improve style and tests?. The requirements for this one were ( original SO question ): Generate a random-ish sequence of items. Sequence should have each item N times. Sequence shouldn't have serial runs longer than a given number (longest below). The solution was actually drafted by another user, this is my implementation (influenced by random.shuffle ). from random import random
from itertools import groupby # For testing the result
try: xrange
except: xrange = range

def generate_quasirandom(values, n, longest=3, debug=False):
  # Sanity check
  if len(values) < 2 or longest < 1:
    raise ValueError

  # Create a list with n * [val]
  source = []
  sourcelen = len(values) * n
  for val in values:
    source += [val] * n

  # For breaking runs
  serial = 0
  latest = None

  for i in xrange(sourcelen):
    # Pick something from source[:i]
    j = int(random() * (sourcelen - i)) + i
    if source[j] == latest:
      serial += 1
      if serial >= longest:
        serial = 0
        guard = 0
        # We got a serial run, break it
        while source[j] == latest:
          j = int(random() * (sourcelen - i)) + i
          guard += 1
          # We just hit an infinit loop: there is no way to avoid a serial run
          if guard > 10:
            print(""Unable to avoid serial run, disabling asserts."")
            debug = False
            break
    else:
      serial = 0
    latest = source[j]
    # Move the picked value to source[i:]
    source[i], source[j] = source[j], source[i]

  # More sanity checks
  check_quasirandom(source, values, n, longest, debug)

  return source


def check_quasirandom(shuffled, values, n, longest, debug):
  counts = []
  # We skip the last entries because breaking runs in them get too hairy
  for val, count in groupby(shuffled):
    counts.append(len(list(count)))
  highest = max(counts)
  print('Longest run: %d\nMax run lenght:%d' % (highest, longest))

  # Invariants
  assert len(shuffled) == len(values) * n
  for val in values:
    assert shuffled.count(val) == n

  if debug:
    # Only checked if we were able to avoid a sequential run >= longest
    assert highest <= longest

for x in xrange(10, 1000):
  generate_quasirandom((0, 1, 2, 3), 1000, x//10, debug=True) I'd like to receive any input you have on improving this code, from style to comments to tests and anything else you can think of."
220,"Calculate a median. I got this as an implementation of ""get me the median of those values"". But it sort of doesn't feel right (too long, too many branch points) so I thought I'll post it here to see what you think. <?php
private function calculateMedian($aValues) {
    $aToCareAbout = array();
    foreach ($aValues as $mValue) {
        if ($mValue >= 0) {
            $aToCareAbout[] = $mValue;
        }
    }
    $iCount = count($aToCareAbout);
    sort($aToCareAbout, SORT_NUMERIC);
    if ($iCount > 2) {
        if ($iCount % 2 == 0) {
            return ($aToCareAbout[floor($iCount / 2) - 1] + $aToCareAbout[floor($iCount / 2)]) / 2;
        } else {
            return $aToCareAbout[$iCount / 2];
        }
    } elseif (isset($aToCareAbout[0])) {
        return $aToCareAbout[0];
    } else {
        return 0;
    }
}"
221,"I'm wondering if you can just compact the above to this: private function calculateMedian($aValues) {
    $aToCareAbout = array();
    foreach ($aValues as $mValue) {
        if ($mValue >= 0) {
            $aToCareAbout[] = $mValue;
        }
    }
    $iCount = count($aToCareAbout);
    if ($iCount == 0) return 0;

    // if we're down here it must mean $aToCareAbout
    // has at least 1 item in the array.
    $middle_index = floor($iCount / 2);
    sort($aToCareAbout, SORT_NUMERIC);
    $median = $aToCareAbout[$middle_index]; // assume an odd # of items

    // Handle the even case by averaging the middle 2 items
    if ($iCount % 2 == 0)
        $median = ($median + $aToCareAbout[$middle_index - 1]) / 2;

    return $median;
} I don't write PHP but from looking at the online manual for count: count() may return 0 for a variable
  that isn't set, but it may also return
  0 for a variable that has been
  initialized with an empty array. Use
  isset() to test if a variable is set. But in your case, the function doesn't seem to care whether the array is empty or the variable isn't set -- 0 is returned in both cases. By checking what count returns we could eliminate some of the if branches."
222,"Php/Doctrine array hydration. According to the Doctrine docs , you should use Array hydration rather than record hydration when retrieving data for read-only purposes. Unfortunately, this means I have to use array syntax (as opposed to object syntax) to reference the data. $q = Doctrine_Query::create()
    ->from('Post p')
    ->leftJoin('p.PostComment pc')
    ->leftJoin('pc.User u')
    ->where('p.post_id = ?', $id);

$p = $q->fetchOne(array(), Doctrine_Core::HYDRATE_ARRAY);

...

foreach ($p['PostComment'] as $comment) {
    $this->Controls->Add(new CommentPanel($comment['text'], 
                         $comment['User']['nickname'], 
                         $comment['last_updated_ts']));
} Maybe it's just me, but all of those string literals as array indexes are kinda scary.  Does anyone have some ideas for cleaning this up?"
223,"The first part of your function filter out negative values. This has nothing to do with calculating the median itself, so should be moved away from this function. Way I would do it. Create array_median() function in a global scope (or a static method) like this: /**
 * Adapted from Victor T.'s answer
 */
function array_median($array) {
  // perhaps all non numeric values should filtered out of $array here?
  $iCount = count($array);
  if ($iCount == 0) {
    throw new DomainException('Median of an empty array is undefined');
  }
  // if we're down here it must mean $array
  // has at least 1 item in the array.
  $middle_index = floor($iCount / 2);
  sort($array, SORT_NUMERIC);
  $median = $array[$middle_index]; // assume an odd # of items
  // Handle the even case by averaging the middle 2 items
  if ($iCount % 2 == 0) {
    $median = ($median + $array[$middle_index - 1]) / 2;
  }
  return $median;
} This way we have generally available all purpose function, with naming consistent with core php functions. And your method would look like /**
 * The name should probably be changed, to reflect more your business intent.
 */
private function calculateMedian($aValues) {
  return array_median(
    array_filter(
      $aValues, 
      function($v) {return (is_numeric($v) && $v >= 0);}
      // You can skip is_numeric() check here, if you know all values in $aValues are actually numeric 
    )
  );
} Either within calculateMedian() or in the code that calls it, you should take care of catching the DomainException that can be thrown if the array is empty)"
224,"Thread-Safe and Lock-Free - Queue Implementation. I was trying to create a lock-free queue implementation in Java, mainly for personal learning. The queue should be a general one, allowing any number of readers and/or writers concurrently. Would you please review it, and suggest any improvements/issues you find? ( Cross-post from StackOverflow ) import java.util.concurrent.atomic.AtomicReference;

public class LockFreeQueue<T> {
    private static class Node<E> {
        final E value;
        volatile Node<E> next;

        Node(E value) {
            this.value = value;
        }
    }

    private AtomicReference<Node<T>> head, tail;

    public LockFreeQueue() {
        // have both head and tail point to a dummy node
        Node<T> dummyNode = new Node<T>(null);
        head = new AtomicReference<Node<T>>(dummyNode);
        tail = new AtomicReference<Node<T>>(dummyNode);
    }

    /**
     * Puts an object at the end of the queue.
     */
    public void putObject(T value) {
        Node<T> newNode = new Node<T>(value);
        Node<T> prevTailNode = tail.getAndSet(newNode);
        prevTailNode.next = newNode;
    }

    /**
     * Gets an object from the beginning of the queue. The object is removed
     * from the queue. If there are no objects in the queue, returns null.
     */
    public T getObject() {
        Node<T> headNode, valueNode;

        // move head node to the next node using atomic semantics
        // as long as next node is not null
        do {
            headNode = head.get();
            valueNode = headNode.next;
            // try until the whole loop executes pseudo-atomically
            // (i.e. unaffected by modifications done by other threads)
        } while (valueNode != null && !head.compareAndSet(headNode, valueNode));

        T value = (valueNode != null ? valueNode.value : null);

        // release the value pointed to by head, keeping the head node dummy
        if (valueNode != null)
            valueNode.value = null;

        return value;
    }
}"
225,"Personally this is the way that I would build the function: function calculateMedian($Values)
{
    //Remove array items less than 1
    $Values = array_filter($Values,array($this,""callback""));

    //Sort the array into descending order 1 - ?
    sort($Values, SORT_NUMERIC);

    //Find out the total amount of elements in the array
    $Count = count($Values);

    //Check the amount of remainders to calculate odd/even
    if($Count % 2 == 0)
    {
        return $Values[$Count / 2];
    }

    return (($Values[($Count / 2)] + $Values[($Count / 2) - 1]) / 2);
} What changes have I made? I have used less variables, overwriting the $Values where needed Reduced the conditional statements to 1* from 2 Made the code look more readable and understandable. I have however added a callback, which in turn removes the foreach and if statements but a logical check would have to be used in the callback.Tthe callback would simply be a method in your class like so: public function callback($value)
  {
      return $value > 0;
  } Unfortunately as the native function empty is actually a language construct it's not a valid callback; you can however use return !empty($value); within your callback method to also remove other entities such as NULL , FALSE etc. This can be removed as stated, and placed outside the function. *Notes: I would advise you to have some kind of linear array check to make sure the arrays are based on an integer index, as our code assumes they are, a linear check can be done like so: if(array_keys($Values) !== range(0,($Count-1)))
{
    return null;
} This would be added after the $Count value has come into play. Example test that I had used to test it was: $values = array(
    0,4,7,5,6,9,5,3,2,7,5,6,4,3,7
);
echo calculateMedian($values); which resulted in the correct answer of 5."
226,"Formatter class. In our production code, we cannot use Boost or C++0x.  Formatting strings using sprintf or stringstream is annoying in this case, and this prompted me to write my own little Formatter class.  I am curious if the implementation of this class or the use of it introduces any Undefined Behavior. In particular, is this line fully-defined: Reject( Formatter() << ""Error Recieved"" << 42 << "" "" << some_code << "" '"" << some_msg << ""'""); My belief is that it is OK, but I wanted peer-review. Three main points of concern: Is there a double-assignment within a single sequence point?  Is it UB? Do I have a problem with the lifetime of temporaries? Does my Formatter class (or the intended use of it) introduce any UB? The Formatter class has both a (templatized) operator<< and an operator std::string .  The intent is to use the Formatter() class as a temporary in place of a std::string parameter for any function taking a const std::string& . Here is the class definition: class Formatter
{
public:
 Formatter() {};
 template<class Field> Formatter& operator<<(Field f)
 {
  ss_ << f;
  return *this;
 }
 operator std::string() const { return ss_.str(); }
private:
 std::stringstream ss_;
}; And here is a complete test harness, including the above definition.  You should be able to compile & run as-is.  Do you see any UB? #include <cstdlib>
#include <string>
#include <sstream>
#include <iostream>

class Formatter
{
public:
 Formatter() {};
 template<class Field> Formatter& operator<<(Field f)
 {
  ss_ << f;
  return *this;
 }
 operator std::string() const { return ss_.str(); }
private:
 std::stringstream ss_;
};

void Reject(const std::string& msg)
{
 std::cout << ""Recieved Message: '"" << msg << ""'"" << std::endl;
}

int main()
{
 const char& some_code = 'A';
 const char* some_msg = ""Something"";

 Reject( Formatter() << ""Error Recieved"" << 42 << "" "" << some_code << "" '"" << some_msg << ""'"");
}"
227,"I would do this, personally: value = object unless onject.nil? This seems a little more expressive to me.  Its something I wish we could do in C++, instead of using the ternary operator."
228,"Looks fine.  Don't worry too much and end up over-engineering a simple solution :) Edit: Actually, I would make the parameters to operator<< into const references."
229,Personally I would have made them static properties rather than static methods. Just seems more natural with C#. But the concept of having a static helper class to retrieve configuration values is a sound one. It becomes even more useful when you are retrieving non-string types since you can abstract away the casting to the helper class. Just one comment - how about some error handling in the helper class to ensure that the configuration values are actually there?
230,"Looks ok. The empty ctor is unnecessary; the compiler generated one will do just fine. ""Recieved"" should be spelled ""Received"" :)"
231,"Here's how I would do it: def find_multiples(min=0, max=1000):
    """"""Finds multiples of 3 or 5 between min and max.""""""

    for i in xrange(min, max):
       if i%3 and i%5:
           continue

       yield i

if __name__ == '__main__':
    print sum(find_multiples()) This makes find_multiples a generator for the multiples it finds. The multiples no longer need to be stored explicitly, and especially not in a global. It's also now takes parameters (with default values) so that the caller can specify the range of numbers to search. And of course, the global ""if"" block now only has to sum on the numbers generated by the function instead of hoping the global variable exists and has remained untouched by anything else that might come up."
232,"I think you might be worried about temporary lifetime issues. (I know I have based on similar code.) The temporary object created as a parameter for Reject will have a lifetime bound to the expression it is created in. (It's in the C++ standard somewhere.) So even with your conversion operators returning values, they will all be destructed after the expression that contains Reject ."
233,"I would do: v = object.to_s nil.to_s returns """". Remember nil is also an object in ruby."
234,"In your specific case, using object.to_s , you don't actually need to check for nil at all since ruby handles this for you. If the object is nil it will return an empty string. Evidence from the irb: object = nil # => nil object.to_s #  => """" object = Object.new # => #<Object:0x10132e220> object.to_s # => ""#<Object:0x10132e220>"""
237,"While somewhat of a tangent from your question but you may find it helpful nonetheless. I would recommend looking at a custom ConfigurationSection which allows you to define more complex configuration hierarchies that are strongly-typed.  I find it much easier to use a custom configuration section than having to remember a bunch of magic strings in the appSettings element and also allows you to specific which values are required, what the defaults values are, etc. Using a custom configuration section you could create a configuration type like: public class UboldiConfigurationSection : System.Configuration.ConfigurationSection {
    [ConfigurationProperty(""schoolName"")]
    public string SchoolName {
        get { return (string)this[""schoolName""]; }
        set { this[""schoolName""] = value; }
    }
} Then to load that configuration type: public static class UboldiApplication {
    public static UboldiConfigurationSection Config { get; internal set; }

    public static void Initialize() {
        Config = ConfigurationManager.GetSection(""uboldi"") as UboldiConfigurationSection;
    }
} The app.config then would look something like this: <configuration>
    <configSections>
        <section name=""uboldi"" type=""Uboldi.UboldiConfigurationSection, Uboldi"" />
    </configSections>
    <uboldi schoolName=""Fillmore Central"" />
</configuration> Lastly, you use the configuration by: public void Test() {    
    //This only needs to be done once, presumably in your Program.Main method
    UboldiApplication.Initialize();

    var name = UboldiApplication.Config.SchoolName;
} A couple of notes: You'll need to reference the System.Configuration assembly as it's not usually referenced in VS by default. The ConfigurationManager.GetSection(""uboldi"") is expecting the name of the section in the app.config file.  You'll note that this matches in the example above. The section element in the app.config file uses the standard .Net type name convention to locate the specified configuration section.  In this example I am assuming that the UboldiConfigurationSection type is the Uboldi namespace and in an Uboldi assembly (dll or exe). You can add hierarchy by creating ConfigurationElement sub classes and using them as properties in your configuration section and elements. The link above is for a Web.config, but the same thing is possible in an app.config file."
238,"The UNIX Man's recommendation of using a generator rather than a list is good one. However I would recommend using a generator expressions over yield : def find_multiples(min=0, max=1000):
    """"""Finds multiples of 3 or 5 between min and max.""""""
    return (i for i in xrange(min, max) if i%3==0 or i%5==0) This has the same benefits as using yield and the added benefit of being more concise. In contrast to UNIX Man's solution it also uses ""positive"" control flow, i.e. it selects the elements to select, not the ones to skip, and the lack of the continue statement simplifies the control flow. On a more general note, I'd recommend renaming the function find_multiples_of_3_and_5 because otherwise the name suggests that you might use it to find multiples of any number. Or even better: you could generalize your function, so that it can find the multiples of any numbers. For this the code could look like this: def find_multiples(factors=[3,5], min=0, max=1000):
    """"""Finds all numbers between min and max which are multiples of any number
       in factors""""""
    return (i for i in xrange(min, max) if any(i%x==0 for x in factors)) However now the generator expression is getting a bit crowded, so we should factor the logic for finding whether a given number is a multiple of any of the factors into its own function: def find_multiples(factors=[3,5], min=0, max=1000):
    """"""Finds all numbers between min and max which are multiples of any number
       in factors""""""
    def is_multiple(i):
        return any(i%x==0 for x in factors)

    return (i for i in xrange(min, max) if is_multiple(i))  Of course the solution using yield could also be written positively and without continue ."
239,"Twitter client portfolio website. I'm creating some sort of ""portfolio"" website for my self (a ton of placeholder content right now...) and I was wondering if I could improve the semantics of the HTML 5 any further, especially the article stuff. I'm not completely sure if I should use section elements inside it. I read through a number of HTML5 ""guides"" and a few of the element specs, but they often have different positions on this. I think using sections would add to the semantics since the slides are a different ""part/section"" of the ""article"". Don't rant about the CSS; it's generated by LESS. The site can be viewed here . Manually formatted HTML <!DOCTYPE html>
<html>
  <head>
    <title>A Python Twitter Client | BonsaiDen</title>
    <link rel=""shortcut icon"" href=""/images/favicon.ico"">
    <link rel=""stylesheet"" href=""http://fonts.googleapis.com/css?family=Ubuntu:regular,bold"">
    <link rel=""stylesheet"" href=""/stylesheets/style.css"">

    // will get copied to a local file sooner or later
    <!--[if lt IE 9]>
      <script src=""http://html5shim.googlecode.com/svn/trunk/html5.js""></script>
    <![endif]-->
  </head>

  <body>

    // the content
    <article>

      // quite some divs here
      <div>
        <div id=""content"">  // maybe use section?

          // gets replaced via ajax

          <header data-page=""/atarashii"">
            <h1 class=""small"">A Python Twitter Client</h1>
            <div class=""external"">
              <a href=""https://github.com/BonsaiDen/Atarashii"">Go to Project &#x27A4;</a>
            </div>
            <div class=""clear""></div> // always hate these clear things...
          </header>

          <div>
            <p>A Twitter Client for GNOME...</p>
          </div>

          // ajax end

        </div>

        <div id=""slideshow"">  // maybe use section?
          <header>
            <h1 id=""slideTitle"">[SlideShowItem Title]</h1>
          </header>

          <div id=""slideContent"">
            <p>[Slideshow Image]</p>
          </div>
        </div>
        <div class=""clear""></div>
      </div>
    </article>


    <header>

      // navigation, surprise!
      <nav>

        // really happy with this
        <ul>
          <li class=""left"">
            <h1>Projects</h1>
            <ul>
              <li><a href=""/garden"">JavaScript Garden</a></li>
              <li><a href=""/shooter"">NodeGame: Shooter</a></li>
              <li><a href=""/atarashii"" class=""active"">Atarashii</a></li>
            </ul>
          </li>

          <li>
            <h1>Code</h1>
            <ul>
              <li><a href=""/neko"">neko.js</a></li>
              <li><a href=""/bison"">BiSON.js</a></li>
            </ul>
          </li>

          <li>
            <h1>Web</h1>
            <ul>
              <li><a href=""/stackoverflow"">Stack Overflow</a></li>
              <li><a href=""/github"">GitHub</a></li>
              <li><a href=""/website"">The Website</a></li>
            </ul>
          </li>

          <li class=""right"">
            <h1>ME</h1>
            <ul class=""info"">
              <li><a href=""/me"">Ivo Wetzel</a></li>
              <li class=""simple"">

                // div div div :/
                <div>
                  <div id=""picture"">
                    <img src=""images/snufkin.png"" alt=""Ivo Wetzel""/>
                    <a href=""/me""></a>
                  </div>

                  <ul>
                    <li class=""first""><a href=""http://twitter.com/BonsaiDen"">Twitter</a></li>
                    <li><a href=""mailto: ivo.wetzel@googlemail.com"">E-Mail</a></li>
                  </ul>

                  <div class=""clear""></div>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
    </header>

    // no real content so far but a background image thingy
    <footer></footer>

    <script src=""http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js""></script>
    <script src=""/javascripts/page.js""></script>
  </body>
</html>"
240,"I second the config section. It has the advantage to set a setting as required, throwing an exception at the GetSection call, instead of passing a null value with AppSettings[nonexistingKey]"
241,"In my opinion A section element is basically an important sub div by this I mean,
A section element is used to designate a notable division in your content. One of the best ways I have found to think about if you should use a certain element in a certain place is: Imagine you are using a screen reader like a blind person.
They cannot see images or color, so the fact that you have a different background for each part of you content makes no difference to them. But,
If suddenly the screen reader starts reading out "" new section "" then that makes a more sense doesn't it? So, in my opinion. You should not replace your content or slideshow div with a section. a section should be used inside of your content div. Although, This may be nit picking,
but does having a content div not take the place of where an article element should be? Does anyone else find that w3schools is full of C***? The <article> tag defines external content. The external content could be a news-article from an external provider, or a text from a web log (blog), or a text from a forum, or any other content from an external source. In reality if this was the case they would have called the tag <external>"
242,"I'll argue the counterpoint ... The LoD would say that this client code is being tied to a particular model of the Document.  In the end, the code is really interested in the lines of a document.  How reasonable is it that we tie that code to the getPage / getParagraph / getLine model? Its perfectly reasonable to believe that pages wills always be made up of paragraphs and paragraphs made up of lines, but I don't think this is the only consideration.  The other question to ask is what other models should Document support? Stated differently: ""Is it reasonable to look at a Document as a series of Lines without regard to what page or paragraph they are in?"" I think it is, so I would give Document a getLines() method and not force our code to go through the Page/Paragraph/Line model. This getLines() method is also a good thing, because: if it its reasonable for our Document 's client to see things this way, it is reasonable that Document may see things this way too .  That is, isn't it possible that the Document may have an efficient structure for moving from line to line (if not now, then perhaps in the future) that may not involve pages and paragraphs?  If so, forcing client code to go through the getPage / getParagraph / getLine is hurting the opportunity to use that efficient structure. I also think its unreasonable ""Forcing the document to handle interactions with subcomponents"" in every conceivable case, so there has to be a happy medium out there. As a counter example, consider: ""is it reasonable to look at a Library as a series of Lines without regard to what document they are in?"" I don't think I'll be providing a getLines() method to my Library class."
243,"A couple of possible code improvements that I noticed: sourcelen = len(values) * n This seems unnecessarily complicated to me. I mean, after a second of thinking the reader of this line will realize that len(values) * n is indeed the length of source , but that's still one step of thinking more than would be required if you just did sourcelen = len(source) (after populating source of course). That being said, I don't see why you need to store the length of source in a variable at all. Doing for i in xrange(len(source)): isn't really less readable or less efficient than doing for i in xrange(sourcelen): , so I'd just get rid of the variable altogether. source = []
for val in values:
  source += [val] * n This can be written as a list comprehension like this: source = [x for val in values for x in [val]*n] Using list comprehensions is usually considered more idiomatic python than building up a list iteratively. It is also often more efficient. As Fred Nurk points out, the list comprehension can also be written as source = [val for val in values for _ in xrange(n)] which avoids the creation of a temporary list and is maybe a bit more readable. j = int(random() * (sourcelen - i)) + i To get a random integer between x (inclusive) and y (exclusive), you can use random.randrange(x,y) , so the above can be written as: j = randrange(i, len(source) - i) (You'll also need to import randrange instead of random from the random module). This makes it more immediately obviously that j is a random number between i and len(source) - i and introduces less room for mistakes."
244,"<div class=""clear""></div> can and should be replaced by the magnificent clearfix solution Add this to the END of your css: /* >> The Magnificent CLEARFIX: http://j.mp/bestclearfix */
.clearfix:before, .clearfix:after { content: ""\0020""; display: block; height: 0; visibility: hidden; }
.clearfix:after { clear: both; }
/* fix clearfix: blueprintcss.lighthouseapp.com/projects/15318/tickets/5-extra-margin-padding-bottom-of-page */
.clearfix { zoom: 1; } Then just add class=""clearfix"" to any container that has floated elements. You should also check out http://html5boilerplate.com/ if you haven't already."
245,"A few thoughts: The name ""CustomizationHelper"" is not very specific. How about CustomerBrandingService? Even though it ""just"" fetches data from a config file, that may not always be the case, and it is still an application service. (Naming classes with ""Helper"" is similar to naming with ""Manager"" - see reference on that below.) Also, while your question is reasonable and simple, it is not clear to me what decisions you will make from this. For example, if this is the basis for a whole app, I suggest some other options to consider: Why are you building a WinForm app in 2011? Consider WPF or Silverlight (possibly Silverlight Out-of-Browser ""SLOOB""). If you choose WPF or Silverlight, the title would be assigned most naturally using Data Binding through the Model-View-ViewModel pattern. Pointers for more information: How to avoid calling every class a ""Manager"" class Data Binding with WPF (Silverlight is very similar) The Model-View-ViewModel Design Pattern for WPF and Silverlight"
246,"Your ""the content"" article tag should probably be an Aside. Mark Pilgrim's Dive Into HTML5 recommends for Article tags: The article element represents a
  component of a page that consists of a
  self-contained composition in a
  document, page, application, or site
  and that is intended to be
  independently distributable or
  reusable, e.g. in syndication. This
  could be a forum post, a magazine or
  newspaper article, a Web log entry, a
  user-submitted comment, an interactive
  widget or gadget, or any other
  independent item of content. and for Aside tags: The aside element represents a section
  of a page that consists of content
  that is tangentially related to the
  content around the aside element, and
  which could be considered separate
  from that content. Such sections are
  often represented as sidebars in
  printed typography. The element can be
  used for typographical effects like
  pull quotes or sidebars, for
  advertising, for groups of nav
  elements, and for other content that
  is considered separate from the main
  content of the page. I believe ID=""content"" should probably be a section as you proposed. In my opinion, he gives the best explanations for when and where each tag should be used."
247,"Scary?  In what way?  I don't really get that. It's just syntax.  If you really care, just cast the arrays as stdClass objects foreach ( $p['PostComment'] as $comment )
{
  $comment = (object) $comment;
  $this->Controls->Add( new CommentPanel(
      $comment->text
    , $comment->User->nickname
    , $comment->last_updated_ts
  ));
}"
248,"Dependency Injection containers like Unity support a singleton concept. Unity is from Microsoft (and is open source), but there are lots of open source DI containers ."
249,"Typically you want to perform UI interactions from the main thread, I would just move it to before the first dispatch_async call to turn it on. Then have it turn off in the later dispatch in the main_queue, so that it also happens on the main thread. This of course assumes that you were calling from the main thread to start with. If not you could just make another call to dispatch_async with the main_queue at the beginning."
250,"Just three comments: I would remove the empty constructor. What about handling std::manipulators? Don't you want to pass field values by const reference? . template<class Field> Formatter& operator<<(Field const& f)
                                                // ^^^^^^ Your concerns: Is there a double-assignment within a single sequence point? Is it UB? Don't see one. Looks good. Do I have a problem with the lifetime of temporaries? No. Don't think so."
251,"If you want to use a regexp in a yaml file you need to use !ruby/regexp #config/settings.yml
defaults: &defaults

  email_regex: !ruby/regexp '/^([\w\.%\+\-]+)@([\w\-]+\.)+([\w]{2,})$/i' Edit :
 The solution proposed by Mike Bethany is very similar to the yaml implementation. You can take a look to what is used in Ruby 1.9.2 here (search for ""!ruby/regexp""): https://github.com/tenderlove/psych/blob/master/lib/psych/visitors/to_ruby.rb PS (and OT): I think, like Mike Bethany, that this basic functionality belong to the Regexp class not yaml, and need to be moved to a Regexp method. What do you think?"
252,I'd use a std::ostringstream because you don't use (seem to need) the formatting capabilities of std::istringstream . What happens when formatting fails? Can you check for failure?
253,"I'd use anonymous subroutines to make the code cleaner: my %output_formats = (
    'text' => sub {
        # print_result_text code goes here
    },
    'xml' => sub {
        # print_result_xml code goes here
    },
    # And so on
);

sub print_result {
    my ($type, $argument1, $argument2) = @_;

    if(exists $output_formats{$type}) {
        return $output_formats{$type}->($argument1, $argument2);
    } else {
        die ""Type '$type' is not a valid output format."";
    }
}"
254,"Check out PostgreSQL's tips on adding a lot of data into a table . In particular, are you sure that you need that index before INSERT ing all that data? It might speed things up if you create the index after all the data has been added to the table."
255,"Yes. The combination of volatile and compare-and-swap operations is enough to make sure that the Node objects are safely published. The compare-and-swap must be before the assignment to a volatile variable in both methods, so you're fine there. They do not need to happen atomically. The queue exhibits odd behavior. Let's say thread 1 stops in putObject() after the CAS but before the last assignment. Next thread 2 executes putObject() in its entirety. Next thread three calls getObject() , and it cannot see either of the first two objects, even though thread 2 is completely done. There's a small chain being built up in-memory. Only after thread 1 completes putObject() are both objects visible on the queue, which is somewhat surprising, and has weaker semantics than most non-blocking data structures. Another way of looking at the odd API is that it's nice to have a non-blocking put() but it's very strange to have a non-blocking get() . It means that the queue must be used with repeated polling and sleeping."
256,"I find that Perl's flexibility can help you eliminate many IF/ELSIF/* code constructs, making code much easier to read. sub print_result {
    my ($stats, $tolerance, $outformat) = @_;

    my $name = ""print_result_$outformat"";

    print ""$outformat is not a valid format"" and return
      if !main->can($name);

    no strict 'refs';
    &$name(@_);
}

sub print_result_xml { ... }
sub print_result_text { ... }
sub print_result_whatever { ... } Walkthrough print ""$outformat is not a valid format"" and return if !main->can($name); This checks the main namespace (I presume you're not using classes, given your code sample) for the $name subroutine.  If it doesn't exist, print an error message and get out.  The sooner you exit from a subroutine, the easier your code will be to maintain. no strict 'refs'; no strict 'refs' turns off warnings & errors that would be generated for creating a subroutine reference on the fly (You're using 'use strict', aren't you? If not, for your own sanity, and for the children, start) .  In this case, since you've already checked for it's existence with main->can, you're safe. &$name(@_); Now you don't need any central registry of valid formatting subroutines - just add a subroutine with the appropriate name, and your program will work as expected. If you want to be super hip (some might say awesome) , you can replace the last 5 lines of the subroutine with: no strict 'refs';
main->can($name) and &$name(@_) or print ""$outformat is not a valid format""; Whether you find that more readable or not is a simple personal preference; just keep in mind the sort of folk that will be maintaining your code in the future, and make sure to code in accordance with what makes the most sense to them. Perl is the ultimate in flexibility, making it inherently the hippest language in existence.  Make sure to follow http://blogs.perl.org and ironman.enlightenedperl.org to keep up with the latest in Modern::Perl. On a separate note, it's Perl, not PERL.  The distinction is important in determining reliable & up-to-date sources of Perl ninja-foo."
257,"Other options: First: there is a mechanism to elevate ""part"" of an application via COM Monikers: run a part of the application out of process via COM, using a correctly formatted name to elevate (this is how Explorer elevates parts of itself). See MSDN http://msdn.microsoft.com/en-us/library/ms679687(v=vs.85).aspx Second: as Anna says: use a manifest . Third: run via runas as in the Q."
258,"If you're actually trying to determine whether it's a sequential integer array rather than associative, i.e. something that json_encode would make an array vs an object, this is probably the fastest way to to do so: function is_normal_array($arr) {
    $c = count($arr);
    for ($i = 0; $i < $c; $i++) {
        if (!isset($arr[$i])) {
            return false;
        }
    }
    return true;
} ...of course the fastest code is code you never run, so consider whether you really, really need to do this, and only use it where you do."
259,"Resolving a link. How can I clean this up? std::wstring LinkResolve::ResolveLink( const std::wstring& source ) const
{
    HRESULT errorCheck;
 wchar_t linkTarget[MAX_PATH];
 wchar_t expandedTarget[MAX_PATH];
 wchar_t arguments[INFOTIPSIZE];
    ATL::CComPtr<IPersistFile> ipf;
    errorCheck = ipf.CoCreateInstance(CLSID_ShellLink, 0, CLSCTX_INPROC_SERVER);
    if (!SUCCEEDED(errorCheck))
    {
        throw _com_error(errorCheck);
    }
    errorCheck = ipf->Load(source.c_str(), 0);
    ATL::CComPtr<IShellLink> shellLink;
    errorCheck = ipf->QueryInterface(&shellLink);
    if (!SUCCEEDED(errorCheck))
    {
        throw _com_error(errorCheck);
    }
    errorCheck = shellLink->Resolve(0, SLR_NO_UI);
    if (!SUCCEEDED(errorCheck))
    {
        throw _com_error(errorCheck);
    }
    errorCheck = shellLink->GetPath(linkTarget, MAX_PATH, 0, SLGP_RAWPATH);
    if (!SUCCEEDED(errorCheck))
    {
        throw _com_error(errorCheck);
    }
    ExpandEnvironmentStringsW(linkTarget, expandedTarget, MAX_PATH);
    errorCheck = shellLink->GetArguments(arguments, INFOTIPSIZE);
    if (SUCCEEDED(errorCheck))
    {
        return std::wstring(expandedTarget) + L"" "" + arguments;
    }
    else
    {
        return expandedTarget;
    }
}"
260,"If I find my self writing the same thing over and over again I usually put it in a function somewhere. Even if that function in your case is as simple as this: void check(HRESULT result) {
    if (FAILED(result)) {
        throw _com_error(result);
    }
} I think the code looks fairly straight forward if you reuse your error check code. I'm not familiar with the API that you are using, so I can't comment on if there is another way to use it that might result in cleaner code."
261,"Personally, I'd write a simple function: void ThrowOnFail( HRESULT hrcode )
{
    if (FAILED(hrcode))
        throw _com_error(hrcode);
} Then the function calls become: ThrowOnFail( ipf.CoCreateInstance(CLSID_ShellLink, 0, CLSCTX_INPROC_SERVER) );
ThrowOnFail( ipf->Load(source.c_str(), 0) );
ATL::CComPtr<IShellLink> shellLink;
ThrowOnFail( ipf->QueryInterface(&shellLink) );
ThrowOnFail( shellLink->Resolve(0, SLR_NO_UI) );
ThrowOnFail( shellLink->GetPath(linkTarget, MAX_PATH, 0, SLGP_RAWPATH) ); Incidentally, you missed a check for errorCheck after Load . This becomes easier to spot with a check function."
262,"At least when using DirectX, I use a macro. #define D3DCALL(a) { auto __ = a; if (FAILED(__)) DXTrace(__FILE__, __LINE__, __, WIDEN(#a), TRUE); } You could get fancier and use a type with an operator=(HRESULT) to make the check."
263,"In addition to what's already been said, I would: Mark the stringstream as public.  This won't affect most uses of your code, and can already be hacked around with a custom manipulator to get at the ""internal"" stream object, but it will enable those that need to access the internal stream (such as to avoid the string copy inherent in the stringstream interface), and know the specifics of their implementation that allow what they want, to do so.  Of course, 0x move semantics allay much of this need, but are still Not Quite Here Yet. Check the stream before returning the string; if it's in a failed state, throw an exception (or at least log the condition somewhere before returning a string).  This is unlikely to occur for most uses, but if it does happen, you'll be glad you found out the stream is failed rather than screw with formatting while wondering why ""it just won't work"". Regarding double-assignment, there's no assignment at all.  The sequence points should be mostly what people expect, but, exactly, it looks like: some_function(((Formatter() << expr_a) << expr_b) << expr_c);
//                          1          2          3 The operators order it as if it was function calls, so that: Formatter() and expr_a both occur before the insertion marked 1. The above, plus insertion 1, plus expr_b happen before insertion 2. The above, plus insertion 2, plus expr_c happen before insertion 3. Note this only limits in one direction: expr_c can happen after expr_a and before Formatter(), for example. Naturally, all of the above plus the string conversion occur before calling some_function. To add to the discussion on temporaries, all of the temporaries created are in the expression: some_function(Formatter() << make_a_temp() << ""etc."")
//            one temp       another temp     and so on They will not be destroyed until the end of the full expression containing that some_function call, which means not only will the string be passed to some_function, but some_function will have already returned by that time.  (Or an exception will be thrown and they will be destroyed while unwinding, etc.) In order to handle all manipulators , such as std::endl, add : struct Formatter {
  Formatter& operator<<(std::ios_base& (*manip)(std::ios_base&)) {
    ss_ << manip;
    return *this;
  }
  Formatter& operator<<(std::ios& (*manip)(std::ios&)) {
    ss_ << manip;
    return *this;
  }
  Formatter& operator<<(std::ostream& (*manip)(std::ostream&)) {
    ss_ << manip;
    return *this;
  }
}; I've used this pattern several times to wrap streams, and it's very handy in that you can use it inline (as you do) or create a Formatter variable for more complex manipulation (think a loop inserting into the stream based on a condition, etc.).  Though the latter case is only important when the wrapper does more than you have it do here. :)"
265,"Error checks are not all the same.
sometimes you act upon special returned HResults. sometimes there is an ELSE.
sometime you want to log the error,sometime you don't.. Also - although highly unlikely to be relevant  in the com/atl world - calling a function has it's performance costs. so I prefer using if after the call, rather than calling a function.
How much do you save ? typing 10 chars ?"
266,"dirname = os.path.dirname
basename = os.path.basename This can be written as: from os.path import dirname, basename The from..import will check that os.path is imported (and import it if not), but is otherwise identical.  I find it more clear than repeating the names  especially when you get to three or more. filenames = [basename(f) for f in files if f and basename(f)] This can be simplified, as basename on an empty string gives an empty string: filenames = filter(None, (basename(f) for f in files))
# or
filenames = [x for x in (basename(f) for f in files) if x]
# or
filenames = [x for x in map(basename, files) if x]"
267,"Regarding the use of a main() function. One important reason for using a construct like this: if __name__ == '__main__':
    main() Is to keep the module importable and in turn much more reusable. I can't really reuse modules that runs all sorts of code when I import them. By having a main() function, as above, I can import the module and reuse relevant parts of it. Perhaps even by running the main() function at my convenience."
269,"You could get rid of the GOTO statements by using labelled loops with EXIT and CYCLE statements.  These allow you to do the sort of flow control that you've used the GOTO s for, but don't permit the less desirable features, such as computed GOTO s.  Using these newer Fortran features also gives you a clearer idea of the flow control at the point at which the branching occurs.  E.g., CYCLE or EXIT statements send you respectively further up or down the source code, and a well chosen label may indicate what the branching is trying to achieve. Another suggestion, although this is more of a personal preference, is to avoid the potentially endless DO WHILE(1 == 1) loop by using a normal DO loop with a large upper limit and adding warning message if that limit is reached before the end of file is encountered.  Plenty of people might find that overly fussy though. Example code showing these two points: PROGRAM so_goto

  IMPLICIT NONE

  INTEGER,PARAMETER :: line_max = 100000

  INTEGER :: i, ios, line_length
  CHARACTER( len=2048 ) :: line

  OPEN(UNIT=10,FILE=""so_goto.txt"",ACTION=""read"")

  fread: DO i=1,line_max
    READ(UNIT=10,FMT='(A)',IOSTAT=ios) line
    IF( ios < 0 ) EXIT fread
    line_length = LEN_TRIM(line)
    IF( line_length == 0 ) CYCLE fread

    IF( i == line_max ) THEN
      print*,""BTW, you've hit your read limit before the end of the file.""
    ENDIF
  ENDDO fread
  CLOSE(10)

END PROGRAM so_goto"
270,"As Sinetris mentioned, YAML has support for loading an instance of Regexp from a string. require 'yaml'
YAML.load('!ruby/regexp /abc/ix')
# => /abc/ix
YAML.load('!ruby/regexp /abc/ix').class
# => Regexp http://apidock.com/ruby/Regexp/yaml_new/class"
271,"Looking through the code, one of the no-brainers for me that jump out immediately is the the separation of the profile anchor and image. The overlay effect is important, obviously, but this can be achieved much more cleanly with a bit of CSS elbow grease: a {
    background: #fff;
    display: block;
    height: 128px;
    width: 128px;
}

a img:hover {
    opacity: 0.9;
} See: http://www.jsfiddle.net/yijiang/Tv7AP/ Looking at the code, it seems like the only reason why you have a div#navigation > a structure is for the background 'shadow'. If that is the case, you can easily get rid of the outer div by using either box-shadow or a 1px wide background image repeated along the y axis with some padding: nav {
    -moz-box-shadow: 0 3px 0 rgba(0, 0, 0, 0.3), 0 -3px 0 rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 3px 0 rgba(0, 0, 0, 0.3), 0 -3px 0 rgba(0, 0, 0, 0.3);
    box-shadow: 0 3px 0 rgba(0, 0, 0, 0.3), 0 -3px 0 rgba(0, 0, 0, 0.3);
} Additionally, seeing li class=""right"" makes me slightly sad, but seeing li class=""left"" makes me sadder still - since the only reason you're using the left class is to avoid double borders (the right class is to give the profile section a bit more space, apparently), you can really using only one class: nav ul li {
    border-right: 4px solid #052C4F;
}

nav ul li.right {
    border-right: 0;
}"
272,"I think you can do much of the same by using Compiler com support here is an example. #import ""CLSID:lnkfile"" //use the clsid of the ShellLink class.

IPersistFilePtr ptr = IPersistFilePtr.CreateInstance(...); _com_ptr_t::CreateInstance() will throw an exception (of type _com_error if the call fails) All other ifs in your code can be replaced by using the smart pointers generated by #import. I know I am a little skimpy on details but it has been a long time since I have touched COM."
273,"WHERE NOT EXISTS is not fast SQL.  How about a union of the two selects, inside a select distinct?  I haven't got a postgresql instance to test this on, but maybe something like this:
INSERT INTO nodes (node, geom, geom)
SELECT DISTINCT ON (node), geom1, geom2
FROM
  (SELECT source AS node,
          geography( ST_Transform(geom_source,4326)) AS geom1,
          geom_source AS geom2
     FROM view_topo
UNION
  SELECT target AS node,
         geography( ST_Transform(geom_target,4326)) AS geom1,
         geom_target AS geom2
    FROM view_topo)"
274,"This looks really weird: var sourceFiles = list
        .SelectMany(current => current.getInvocations()
                            .Select(invocation => new {current = (SourceFile) null, invocation}))
        .ToList() //This ensures that getInvocations is only called once for each sourcefile
        .GroupBy(x => x.current, x => x.invocation); Why do you need to create a property current with null value and then group by it? Am I missing something? Also if you do not use current variable from SelectMany lambda in Select statement then I think it is better to reduce nesting and pull Select out from SelectMany : var sourceFiles = list
        .SelectMany(current => current.getInvocations())
        .Select(invocation => new {current = (SourceFile) null, invocation})
        .ToList() //This ensures that getInvocations is only called once for each sourcefile
        .GroupBy(x => x.current, x => x.invocation); Your code looks wrong to me (regarding grouping by null value). And if it wrong how can we improve it's readability?"
275,"Using a generator is also possible : print sum(n for n in range(1000) if n % 3 == 0 or n % 5 == 0) Note that intent is not really clear here. For shared code, I would prefer something like def euler001(limit):
    return sum(n for n in range(limit) if n % 3 == 0 or n % 5 == 0)

print euler001(1000)"
276,"Interface for unit of work pattern and repository pattern. I'm trying to design a well defined yet simple interface for the unit of work and repository patterns. My UoW's are exposed to services and services then ""get repositories"" that it needs to query. I know returning IQueryable<T> for repositories is a religious war. Because repositories are only exposed to the service, all queries are performed inside the service and therefore I can test the queries. Is there anything I should change for these interfaces? All criticisms are greatly appreciated! public interface IUnitOfWork : IDisposable
{
    bool IsActive { get; }

    bool WasCommitted { get; }

    /// <summary>
    /// Commits all changes made on the unit of work.
    /// </summary>
    void Commit();

    bool WasRolledBack { get; }

    /// <summary>
    /// Rolls back all changes made on the unit of work.
    /// </summary>
    void Rollback();

    /// <summary>
    /// Returns an instance of an entity with the specified key that is attached to the unit of work without
    /// loading the entity from a repository.
    /// </summary>
    /// <param name=""id""></param>
    /// <returns></returns>
    T Load<T>(int id)
        where T : class;

    void Attach<T>(T entity)
        where T : class, IIdentifiable;

    void Detach<T>(T entity)
        where T : class;

    IRepository<T> GetRepository<T>()
        where T : class;
}

public interface IRepository<T>
    where T : class
{

    IUnitOfWork UnitOfWork { get; }

    void Add(T entity);

    void Remove(T entity);

    /// <summary>
    /// Returns an instance of an entity with the specified key that is attached to the unit of work by loading
    /// the entity from the repository.
    /// </summary>
    /// <param name=""id""></param>
    /// <returns></returns>
    T Get(int id);

    IQueryable<T> All();
}"
277,"Personally I think your going the wrong way about things, you can easily pass in a query string into the select method and set the 2nd param to true to bypass backticks. So the output would place the sub query string within the main query select. I would do something along the lines of: class MyModel extends Model
{
    public function getRows()
    {
        //Create a subquery and render it to a stirng
        $sub = $this->db->select('number')->from('numbers')->where('numberID', 2)->_compile_select();

        //Clear the data from the CI Arrays
        $this->db->_reset_select();

        //Build the main query passing in the sub-query and disabling backticks
        $this->db->select(""word,("" . $sub . "")"", false)->where('wordID', 3);

        //Get the results
        $result = $this->get(""words"");
    }
} Sources: @ _compile_select() @ _reset_select() Firstly let me just state that the code above may not be fully working as i have not test machine a.t.m, but I do know that this is possible and you do not need all the extra logic specified. It seems pretty simple to me without creating new $db 's. I also would recommend you encapsulate the logic above into a class so you can pass the object's around and make life simpler as the above is a POC Concept: class InnerQuery extends CI_DB_active_record
{
    public function __construct()
    {   
    }

    public function __call($method,$params = array())
    {
        //Remove methods that modify the database
        switch(strtolower($method))
        {
             case 'get':
             case 'count_all_results':
             case 'get_where':
                 trigger_error(""Cannot use {$method} in InnerQuery"");
             break;
        }
        return $this;
    }
    
    public function compile()
    {
        return ""("" . $this->_compile_select() . "")"";
    }

    public function __tostring()
    {
        return $this->compile();
    }
} Ok so the above class extends the same object as $this->db in your controller, so you can use all the methods to build a query such as $this->InnerQuery->select(""item as item_key"")->from(""inner_table"")->where(""foo"",""zed""); You should disable the parent methods that change the database or run any queries as this is only used to build a select string. so you should in thoery be able to do: $this->db->select(""word"")->where('wordID', 3);
$this->db->select($this->InnerQuery,false); which would use the DB class to build your query and can just be passed into the outer select and the __tostring will return the (SELECT ...) with braces and pass it into the main query."
278,"Finding subtuple in larger collection?. I've got a flat array of < 1000 items and I need to find the indices of a smaller tuple/array within the array.  The tuple to find can be a varying length (generally between 2 and 5 items, order is important). This is my initial naive implementation.  My main concerns are: This seems like a CS 101 problem, so I'm pretty sure I'm overdoing it. Readability.  I can break this down into smaller methods, but it's essentially a utility function in a much larger class.  I guess I could extract it into its own class, but that feels like overkill as well.  As-is, it's just too long for me to grok the whole thing in one pass. public int[] findIndices(final Object[] toSearch, final Object[] toFind) 
{
    Object first = toFind[0];

    List<Integer> possibleStartIndices = new ArrayList<Integer>();
    int keyListSize = toFind.length;
    for (int i = 0; i <= toSearch.length - keyListSize; i++) 
    {
        if (first.equals(toSearch[i])) 
        {
            possibleStartIndices.add(i);
        }
    }

    int[] indices = new int[0];
    for (int startIndex : possibleStartIndices) 
    {
        int endIndex = startIndex + keyListSize;
        Object[] possibleMatch = Arrays.copyOfRange(toSearch, startIndex, endIndex);
        if (Arrays.equals(toFind, possibleMatch)) {
            indices = toIndexArray(startIndex, endIndex);
            break;
        }
    }
    return indices;
}

private int[] toIndexArray(final int startIndex, final int endIndex) 
{
    int[] indices = new int[endIndex - startIndex];
    for (int i = 0; i < indices.length; i++)
        indices[i] = startIndex + i;

    return indices;
}"
279,"As a quick tip, I would suggest you skip the step of finding possible start indexes. Instead, as you are already iterating over the whole list to find possible start indexes, then why don't you check that index right away when you find it? Would be something like: public int[] findIndices(final Object[] toSearch, final Object[] toFind) 
{
    Object first = toFind[0];

    int keyListSize = toFind.length;
    for (int startIndex = 0; startIndex <= toSearch.length - keyListSize; startIndex++) 
    {
        if (first.equals(toSearch[startIndex])) 
        {
            int endIndex = startIndex + keyListSize;
            Object[] possibleMatch = Arrays.copyOfRange(toSearch, startIndex, endIndex);
            if (Arrays.equals(toFind, possibleMatch)) {
                return toIndexArray(startIndex, endIndex);
            }
        }
    }

    return new int[0];
}"
280,"The sum 3+6+9+12+...+999 = 3(1+2+3+...+333) = 3 (n(n+1))/2 for n = 333. And 333 = 1000/3, where ""/"" is integral arithmetic. Also, note that multiples of 15 are counted twice. So def sum_factors_of_n_below_k(k, n):
    m = (k-1) // n
    return n * m * (m+1) // 2

def solution_01():
    return (sum_factors_of_n_below_k(1000, 3) + 
            sum_factors_of_n_below_k(1000, 5) - 
            sum_factors_of_n_below_k(1000, 15))"
281,"Resolving a link - follow-up. Similar piece of code to that I recently posted as: Resolving a link I have another piece of code which cannot be as easily extracted out into a method: #define THROW_LAST_WINDOWS_ERROR()\
    WindowsApi::Exception::Throw(::GetLastError(), __FILE__,  __LINE__)

#define THROW_MANUAL_WINDOWS_ERROR(x)\
    WindowsApi::Exception::Throw(x, __FILE__,  __LINE__)

Process CreateNormalProcess(
    ProcessSnapshot *parent,
    const UNICODE_STRING& name, 
    const unsigned __int32 pid,
    const std::vector<ToolHelpThread>& threads
    )
{
    std::wstring nameStr(name.Buffer, name.Length/sizeof(wchar_t));
    std::wstring commandLine;
    std::wstring mainModulePath;
    std::wstring error;
    std::vector<Module> modules;
    try
    {
        using WindowsApi::Dll::NtDll;
        using WindowsApi::AutoArray;
        HANDLE hProc = OpenProcess(
            PROCESS_VM_READ | PROCESS_QUERY_INFORMATION, FALSE,
            pid);
        if (hProc == 0)
        {
            THROW_LAST_WINDOWS_ERROR();
        }

        //Populate the process environment block
        NtDll ntDll;
        PEB peb;
        AutoArray procInfoBuf = ntDll.NtQueryInformationProcess(
            ProcessBasicInformation,
            hProc,
            sizeof(PROCESS_BASIC_INFORMATION)
            );
        BOOL rpmError = ReadProcessMemory(
            hProc,
            procInfoBuf.GetAs<PROCESS_BASIC_INFORMATION>()->PebBaseAddress,
            &peb,
            sizeof(peb),
            0);
        if (rpmError == 0)
        {
            THROW_LAST_WINDOWS_ERROR();
        }

        RTL_USER_PROCESS_PARAMETERS procParameters;
        rpmError = ReadProcessMemory(hProc,
            peb.ProcessParameters,
            &procParameters,
            sizeof(procParameters),
            0);
        if (rpmError == 0)
        {
            THROW_LAST_WINDOWS_ERROR();
        }

        commandLine.assign(ReadRemoteUnicodeString(hProc,
            procParameters.CommandLine));
        mainModulePath.assign(ReadRemoteUnicodeString(hProc,
            procParameters.ImagePathName));

        PEB_LDR_DATA ldrData;
        rpmError = ReadProcessMemory(hProc,
            peb.Ldr,
            static_cast<void *>(&ldrData),
            sizeof(PEB_LDR_DATA),
            0);
        if (rpmError == 0)
        {
            THROW_LAST_WINDOWS_ERROR();
        }

        void * endPointer = static_cast<void *>
            (reinterpret_cast<char *>(peb.Ldr) + (reinterpret_cast<char *>(&ldrData.InLoadOrderModuleList) - reinterpret_cast<char *>(&ldrData)));
        void * currentListEntry = ldrData.InLoadOrderModuleList.Flink;
        while (currentListEntry != endPointer)
        {
            LDR_MODULE loaderModule;
            rpmError = ReadProcessMemory(
                hProc,
                currentListEntry,
                &loaderModule,
                sizeof(loaderModule),
                0);
            if (rpmError == 0)
            {
                THROW_LAST_WINDOWS_ERROR();
            }
            std::wstring moduleName = ReadRemoteUnicodeString(hProc, loaderModule.FullDllName);
            modules.push_back(Module(
                moduleName,
                loaderModule.BaseAddress,
                loaderModule.SizeOfImage
                ));
            currentListEntry = loaderModule.InLoadOrderModuleList.Flink;
        }

        CloseHandle(hProc);
    }
    catch (const ErrorAccessDeniedException&)
    {
        error.assign(L""ERROR: Could not access additional information because access ""
            L""was denied while attempting to open the process. Are you admin? Do you ""
            L""have SeDebugPrivilege?"");
    }
    catch (const ErrorInvalidParameterException&)
    {
        error.assign(L""ERROR: The process terminated before additional information ""
            L""could be extracted"");
    }
    catch (const ErrorPartialCopyException&)
    {
        error.assign(L""ERROR: Couldn't copy a data structure from this process. Either ""
            L""the process terminated before information extraction, or you are running ""
            L""the 32 bit version of pevFind on a 64 bit machine."");
    }

    if (!error.empty())
    {
        if (nameStr.empty())
        {
            nameStr = error;
        }
        if (commandLine.empty())
        {
            commandLine = error;
        }
        if (mainModulePath.empty())
        {
            mainModulePath = error;
        }
    }

    return Process(
        parent,
        pid,
        nameStr, 
        commandLine,
        mainModulePath,
        threads,
        modules);
} The problem here is twofold: I can't extract out the duplicated if blocks into a method, because it's necessary that they embed the __FILE__ and __LINE__ . I can't put the conditional check into a macro, because the controlled method spans multiple lines: MYMACRO(
    Function(
    Call,
    Spanning,
    Multiple,
    Lines)); doesn't seem to expand correctly."
282,"If you are using .NET 4.0, you can take advantage of the System.Lazy class. It ensures the instance is created only once."
283,"Function for removing forbidden characters. void removeForbiddenChar(string* s)
{
    string::iterator it;

    for (it = s->begin() ; it < s->end() ; ++it){
        switch(*it){
        case '/':case '\\':case ':':case '?':case '""':case '<':case '>':case '|':
            *it = ' ';
        }
    }
} I used this function to remove a string that has any of the following character: \, /, :, ?, "", <, >, |. This is for a file's name. This program runs fine. It simply change a character of the string to a blank when the respective character is the forbidden character. However, I have a feeling against this use of switch statement. I simply exploit the case syntax here, but this, somehow nags me. I just don't like it. Anybody else got a better suggestion of a better implementation in this case?"
284,"idealmachine's advice is pretty sound.
One more minor criticism, using if's to set boolean values is a bit redundant. if(e.which == 17) { isCtrl = false; } You can rewrite that a bit more elegantly as isCtrl = e.which != 17;"
285,"Declare a string containing the illegal characters: ""\\/:?""<>|"" . All you need to do is check if the char is in the array, so use a native function for that, or write a method CharInString(char* needle, string* haystack) which loops through the contents of the provided haystack to check if the needle is inside it. Your loop should end up looking like this: string illegalChars = ""\\/:?\""<>|""
for (it = s->begin() ; it < s->end() ; ++it){
    bool found = illegalChars.find(*it) != string::npos;
    if(found){
        *it = ' ';
    }
} It's more maintainable and readable. You can tell if you've duplicated a character quite easily and since you can do it with any target string and any string of illegalChars you've just created for yourself a generic RemoveIllegalChars(string* targetString, string* illegalChars) method usable anywhere in your program. I may be using those pointers wrong. My C++fu is weak... for now."
286,"Initializing a window in Cocoa. This is some of the code I have: [window setLevel:kCGScreenSaverWindowLevel];
[window setOpaque:NO];
[window setStyleMask:0];
[window setBackgroundColor:[NSColor colorWithCalibratedWhite:0.0 alpha:0.3]];
[window setAlphaValue:0];

[window setFrame:[window frameRectForContentRect:[[window screen] frame]] display:YES animate:YES];

[window makeKeyAndOrderFront:self];
[[window animator] setAlphaValue:1.0]; I was just wondering if there was any way to compact it, all of those commands to my window. Any ways to improve it too?"
287,"you could always use transform #include <algorithm>
#include <string>
#include <iostream>

const std::string forbiddenChars = ""\\/:?\""<>|"";
static char ClearForbidden(char toCheck)
{
    if(forbiddenChars.find(toCheck) != string::npos)
    {
         return ' ';
    }

    return toCheck;
}

int main()
{
    std::string str = ""EXAMPLE:"";
    std::transform(str.begin(), str.end(), str.begin(), ClearForbidden);
    std::cout << str << std::endl;
    return 0;
}"
288,"One thing that I would change about your function (in addition to Jonathan's recommendation of using a string to store the forbidden characters), is the argument type of removeForbiddenChar to string& instead of string* . It is generally considered good practice in C++ to use references over pointers where possible (see for example this entry in the C++ faq-lite). One further, minor cosmetic change I'd recommend is renaming the function to removeForbiddenChars (plural) as that is more descriptive of what it does."
289,"aaaah, a CodeIgniter fella :-) I'm just working on a CI project myself and already implemented some of the optimization you could use for your CMS as well... so let's have a look: for as little overhead as possible, try implementing lazy-loading of your files (libraries, models...) for caching purposes, you can use KHCache - a library that allows you to cache parts of the website instead of full page instead of always doing $this->db->..., you can create a helper function , for instance ""function _db()"" and then simply do _db()->where... also, you can optionally create a helper function to give you the results array automatically, so ->result_array() will not be neccessary anymore: function res() {} ... $query = res(_db()->where...); now, for the code :-) $query = 
    $db
      ->where('page_status', 1)
      ->where('page_slug', strtolower($page_slug))
      ->get('pages')
      ->result_array();

$page_id = $query[0]['id']; here, you seem to be selecting all values from DB , while in need of a single first ID - try limiting number of results or this will create overhead in your database $db->where...->limit(1); the second query could probably use a LEFT JOIN instead of a regular JOIN, although I leave it to you to decide (the JOIN approach might not list everything you need) $db-select...->join('pages_modules lpm', 'moduleid = lpm.module_id', 'left') I guess that's all... just remember to put correct indexes on your SQL fields and use the EXPLAIN statement to check for bottlenecks good luck!"
292,"I also agree that this code violates LoD. The caller is tying the implementation down to a model of nested objects. Adding a bunch of filter methods also doesn't seem like the right idea, but this is an opportunity in disguise. You really want a general filtering method that can take a ""verb"" to apply to the matching elements. Or, alternatively, a filter method that takes a predicate and returns just the collection of matching elements. This is one of the useful things about LoD. It helps you uncover places where you are operating at a low level of abstraction, and raise the level. In this case, once you introduce general predicates or verbs, you'll be very likely to find other places to use the same idiom. What begins as a local cleanup can uncover a very general mode of expression."
293,"You have basically created a procedural implementation of your own mechanism to serialize a game object to and from a file wich is ok if you want to be in full controll of the file format. Have you looked at the concept of dotnet-serialisation ? There you can see how declarative style could minimize the code to write by attaching Attributes to the Game-Class and/or its properties. There are implementatins for binary, xml and json"
294,"User error logging. I have created this code for user error logging, and I am wondering if there is anything that can be improved. The point is that this error handler would ONLY catch user errors created in-code by trigger_error(), and would display, log, and/or email the error, depending on the config settings. The error logging class is loaded by an autoloader function. For production, all error levels would be set to 0, and the user error handler would never be set, and the class would never be loaded. Config file: // user error display level (change for production)
 define('LEV_USER_ERROR_DISPLAY_LEVEL', E_USER_ERROR);

 // user error logging level (change for production)
 define('LEV_USER_ERROR_LOG_LEVEL', E_USER_ERROR | E_USER_WARNING | E_USER_NOTICE);

 // user error email alert level
 define('LEV_USER_ERROR_EMAIL_LEVEL', 0);

 // user error email address list (e.g. 'someone1@somewhere.com, someone2@somewhere.com')
 define('LEV_USER_ERROR_EMAIL_ADDRESSES', ''); Init file: // set user error handler
   if (LEV_USER_ERROR_LOG_LEVEL | LEV_USER_ERROR_DISPLAY_LEVEL | LEV_USER_ERROR_EMAIL_LEVEL) {
    set_error_handler('lev_user_error_handler::user_error_handler', LEV_USER_ERROR_LOG_LEVEL | LEV_USER_ERROR_DISPLAY_LEVEL | LEV_USER_ERROR_EMAIL_LEVEL);
   } Error logging class file: <?php

 // user error handler
 class lev_user_error_handler {

  // user error handler
  public static function user_error_handler($error_level, $message, $file_name, $line_number) {
   if ((LEV_USER_ERROR_LOG_LEVEL | LEV_USER_ERROR_DISPLAY_LEVEL) == 0) return true;
   switch ($error_level) {
    case E_USER_ERROR:
     if (LEV_USER_ERROR_DISPLAY_LEVEL & E_USER_ERROR) {
      echo '[' . date('Y-m-d h:i:s') . '] User Level Error: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.'<br />';
     }
     if (LEV_USER_ERROR_LOG_LEVEL & E_USER_ERROR) {
      error_log('[' . date('Y-m-d h:i:s') . '] User Error: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.', Request: ""' . $_SERVER['ORIG_PATH_INFO'] . ""\""\n"", 3, 'application/logs/user_error_log.txt');
     }
     if (LEV_USER_ERROR_EMAIL_LEVEL & E_USER_ERROR) {
      error_log('[' . date('Y-m-d h:i:s') . '] User Error: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.', Request: ""' . $_SERVER['ORIG_PATH_INFO'] . '""', 1, LEV_USER_ERROR_EMAIL_ADDRESSES, 'From: no-reply@' . preg_replace('/^.+?\./i', '', $_SERVER['SERVER_NAME']));
     }
     die;
     break;
    case E_USER_WARNING:
     if (LEV_USER_ERROR_DISPLAY_LEVEL & E_USER_WARNING) {
      echo '[' . date('Y-m-d h:i:s') . '] User Level Warning: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.'<br />';
     }
     if (LEV_USER_ERROR_LOG_LEVEL & E_USER_WARNING) {
      error_log('[' . date('Y-m-d h:i:s') . '] User Warning: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.', Request: ""' . $_SERVER['ORIG_PATH_INFO'] . ""\""\n"", 3, 'application/logs/user_error_log.txt');
     }
     if (LEV_USER_ERROR_EMAIL_LEVEL & E_USER_WARNING) {
      error_log('[' . date('Y-m-d h:i:s') . '] User Error: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.', Request: ""' . $_SERVER['ORIG_PATH_INFO'] . '""', 1, LEV_USER_ERROR_EMAIL_ADDRESSES, 'From: no-reply@' . preg_replace('/^.+?\./i', '', $_SERVER['SERVER_NAME']));
     }
     break;
    case E_USER_NOTICE:
     if (LEV_USER_ERROR_DISPLAY_LEVEL & E_USER_NOTICE) {
      echo '[' . date('Y-m-d h:i:s') . '] User Level Notice: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.'<br />';
     }
     if (LEV_USER_ERROR_LOG_LEVEL & E_USER_NOTICE) {
      error_log('[' . date('Y-m-d h:i:s') . '] User Notice: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.', Request: ""' . $_SERVER['ORIG_PATH_INFO'] . ""\""\n"", 3, 'application/logs/user_error_log.txt');
     }
     if (LEV_USER_ERROR_EMAIL_LEVEL & E_USER_NOTICE) {
      error_log('[' . date('Y-m-d h:i:s') . '] User Error: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.', Request: ""' . $_SERVER['ORIG_PATH_INFO'] . '""', 1, LEV_USER_ERROR_EMAIL_ADDRESSES, 'From: no-reply@' . preg_replace('/^.+?\./i', '', $_SERVER['SERVER_NAME']));
     }
     break;
    default:
     // call PHP internal error handler
     return false;
   }
   // do not call PHP internal error handler
   return true;
  }
 }
?>"
295,"For <1000 items, unless checking each item is prohibitively expensive, I'd say Pablo has the right idea of just checking on the first pass. This eliminates O(n) from the algorithm. For a larger list, or where checking each item is expensive, something more complicated like a Boyer-Moore style algorithm like mtnygard suggests might be appropriate."
296,"Personal website, done after one week of learning HTML and CSS. I've just started learning CSS/HTML a week ago and I made a quick site today. It looks pretty good, but I think that I reused/wrote some really messy CSS. This is because I haven't used the float property in CSS too well, so I keep using position:relative and top to offset the float . /* General Elements* /
body {
    background: #53777a;
    font-family: Garamond, Baskerville, ""Baskerville Old Face"", ""Hoefler Text"", ""Times New Roman"", serif;      
}

h1 {
    font-size: 28pt;       
}

h2 {}

p {}

a:link {
    color: black;
    text-decoration: none;
}

a:visited {
    color: purple;
    text-decoration: none;
}
a:hover {
    color: green;
    text-decoration: underline;
}
a:active {
    color:yellow;
    text-decoration: none;
}

/* Curvy Shapes */
 #wrapper, #footer {
    -moz-border-radius-bottomright: 50px;
        -moz-border-radius-topleft: 50px;
       -moz-border-radius-topright: 50px;
     -moz-border-radius-bottomleft: 50px;
        border-bottom-right-radius: 50px;
            border-top-left-radius: 50px;
           border-top-right-radius: 50px;
         border-bottom-left-radius: 50px;
}

#links {
    -moz-border-radius-bottomright: 50px;
     -moz-border-radius-bottomleft: 50px;
        border-bottom-right-radius: 50px;
         border-bottom-left-radius: 50px;
}

#header {    
     -moz-border-radius-topleft: 50px;
    -moz-border-radius-topright: 50px;
         border-top-left-radius: 50px;
        border-top-right-radius: 50px;    
}

/* Structure */
#wrapper {
    width: 900px;
    margin: 0 auto;
    margin-top: 30px;
    overflow: auto;
    background: #E0E4CC;
    padding: 20px;
    -moz-border-radius-bottomright: 50px;
        -moz-border-radius-topleft: 50px;
       -moz-border-radius-topright: 50px;
     -moz-border-radius-bottomleft: 50px;
        border-bottom-right-radius: 50px;
            border-top-left-radius: 50px;
           border-top-right-radius: 50px;
         border-bottom-left-radius: 50px;       
}

#header {
    text-align: center;
    background: #ECD078;
    padding: 4px;
}

#links {
    width: 900px;
    background-color: #A7DBD8;
    position: relative;
    top: -20px;
    text-align: center;
}

#links ul {
    list-style-type: none;
    padding: 5px;
}

#links li{
    display: inline;
    font-size: 14pt;
    padding: 20px;
}

.sidebar_left {
    float: left;
    width: 180px;
    margin-left: 10px;
    position: relative;
    top: -10px;
    text-align: justify;
    line-height: 150%;
}

#post {
    float: right;
    width: 680px;
    margin-left: 0px;
    margin-right: 10px;
    position: relative;
    top: -25px;
    text-align: justify;
    line-height: 150%;      
}

#post b {
    font-size: 18pt;
    text-decoration: underline;
}

#content {
    float: right;
    width: 680px;
    margin-left: 0px;
    margin-right: 10px;
    position: relative;
    top: -25px;
    text-align: justify;
    text-indent: 25px;
    line-height: 150%;
}

#social {
    float: right;
}

#footer {
    width: 890px;
    background: #A7DBD8;
    float: left;
    padding: 5px;
    text-align: right;
}

#footer b {
    margin-left: 10px;
}

/* End Structure */

/*images*/
.navimg {
    width: 2px;
    height: 20px;
}

#tree {
    width: 175px;
    height: 200px;
    float: right;
    margin-left: 20px;
    margin-top: 24px;
}

#blackwhite {
    width: 200px;
    height: 125px;
    float: left;
    margin-right: 20px;
    margin-top: 10px;       
}

#quickshot {
    width: 125px;
    height: 100px;
    display: block;
    margin-left: auto;
    margin-right: auto;        
} <?xml version=""1.0"" encoding=""utf-8""?>
<!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.1//EN"" ""http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"">
<html xmlns=""http://www.w3.org/1999/xhtml"" xml:lang=""en"">
<head>    
    <title>Kevin Li</title>
    <link rel=""stylesheet"" type=""text/css"" href=""css/style.css"" />
</head>

<body>
    <div id=""wrapper"">
        <div id=""header"">
            <h1>Kevin Li</h1>
        </div>

        <div id=""links"">
            <ul>
                <li><a href=""#"">Home</a></li>    
                <li><a href=""#"">Biography</a></li>    
                <li><a href=""#"">Portfolio</a></li>    
                <li><a href=""#"">Blog</a></li>    
                <li><a href=""#"">Images</a></li>    
                <li><a href=""#"">Contact Me</a></li>
            </ul>
        </div>

        <div class=""sidebar_left"">
            Lorem ipsum dolor sit amet...<br />
        </div>

        <div id=""post"">
            <b>Introduction</b><br />
            <i>Thursday, January 27, 2011</i>
        </div>

        <br />

        <div id=""content"">
            <img id=""tree"" src=""images/c2_i6.png"" />   
            <p>
                Lorem ipsum dolor sit amet...<br />
                <br />
                <img id=""blackwhite"" src=""images/c3_i7.png"" /> Ut venenatis diam nunc...<br />
                <br />
            </p>
        </div>

        <div id=""footer"">
            <b>Copyright 2010 Kevin Li</b>
        </div>
    </div>
</body>
</html> By the way, I know it doesn't validate. I am working on that now."
299,"Just in case you're not familiar with the generator technique being used above, here's the same function done in 3 ways, starting with something close to your original, then using a list comprehension , and then using a generator expression : # Finds sum of all multiples of 3 and 5 from 0 to 999 in various ways

def find_multiples():
    numbers = []
    for i in range(0,1000):
        if  i%3 == 0 or i%5 == 0: numbers.append(i)
    return numbers

def find_multiples_with_list_comprehension():
    return [i for i in range(0,1000) if  i%3 == 0 or i%5 == 0]

def find_multiples_with_generator():
    return (i for i in range(0,1000) if  i%3 == 0 or i%5 == 0)

if __name__ == '__main__':
    numbers1 = find_multiples()
    numbers2 = find_multiples_with_list_comprehension()
    numbers3 = list(find_multiples_with_generator())
    print numbers1 == numbers2 == numbers3
    print sum(numbers1) find_multiples() is pretty close to what you were doing, but slightly more Pythonic. It avoids the global (icky!) and returns a list. Generator expressions (contained in parentheses, like a tuple) are more efficient than list comprehensions (contained in square brackets, like a list), but don't actually return a list of values -- they return an object that can be iterated through. So that's why I called list() on find_multiples_with_generator() , which is actually sort of pointless, since you could also simply do sum(find_multiples_with_generator() , which is your ultimate goal here. I'm just trying to show you that generator expressions and list comprehensions look similar but behave differently. (Something that tripped me up early on.) The other answers here really solve the problem, I just thought it might be worth seeing these three approaches compared."
300,"Project Euler Problem 2 in Clojure. I am in the process of learning Clojure. I am fairly new to functional programming and would like to know if my code smells or if there are any performance implications with my approach. ; Returns the the given sequence with the given item appended to it.
(defn snoc [xs x] (concat xs [x]))

; Returns the Fibonacci sequence up to the highest number less than max.
(defn fib [max] 
  (loop [a 1, b 1, acc [1]] 
    (if (> b max) 
      acc
      (recur b (+ a b) (snoc acc b)))))

; Project Euler Problem 2: Attempt A
(defn pe2a []
  (reduce +
    (filter even? (fib 4000000)))) For reference : Each new term in the Fibonacci
  sequence is generated by adding the
  previous two terms. By starting with 1
  and 2, the first 10 terms will be: 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ... By considering the terms in the
  Fibonacci sequence whose values do not
  exceed four million, find the sum of
  the even-valued terms."
302,"Your interface breaks the Law of Demeter .  Or said simply I cannot use IUnitOfWork UnitOfWork { get; } on IRespository without understanding IUnitOfWork . I would change IRespository too public interface IRepository<T>
    where T : class
{

    bool IsActive { get; }

    bool WasCommitted { get; }

    /// <summary>
    /// Commits all changes made on the unit of work.
    /// </summary>
    void Commit();

    bool WasRolledBack { get; }

    /// <summary>
    /// Rolls back all changes made on the unit of work.
    /// </summary>
    void Rollback();

    /// <summary>
    /// Returns an instance of an entity with the specified key that is attached to the unit of work without
    /// loading the entity from a repository.
    /// </summary>
    /// <param name=""id""></param>
    /// <returns></returns>
    T Load<T>(int id)
        where T : class;

    void Attach<T>(T entity)
        where T : class, IIdentifiable;

    void Detach<T>(T entity)
        where T : class;

    IRepository<T> GetRepository<T>()
        where T : class;

    void Add(T entity);

    void Remove(T entity);

    /// <summary>
    /// Returns an instance of an entity with the specified key that is attached to the unit of work by loading
    /// the entity from the repository.
    /// </summary>
    /// <param name=""id""></param>
    /// <returns></returns>
    T Get(int id);

    IQueryable<T> All();
} Notice how it is a copy of IUnitOfWork, is UnitOfWork really needed. How did you create the interface? This is where you should do TDD.  Write the test first about what you want the code to do.  Then your interface should be created in order to accomplish the test. For example if you call the method Rollback(); and cannot write a test were WasRollbacked property was used, they you might not need the property. Do not put in more than needed to any interface.  They interface becomes noise.  I would recommend reading Clean Code by Robert Martin to understand more of these ideas in a in depth way."
303,"Your CSS doesn't handle what happens if the reader closes down the window to smaller than your planned size. Test: resize window to less than 900px.
Results: Window is cut off. This is a design issue, more than a coding issue."
304,"This is a highly readable style, and simple. You might be able to make a loop and run through the list in some fashion, but it's unlikely to actually lower complexity, just shift it around a bit."
305,"I didn't look at your site, as I can't afford to click on random links right now. However, I add overflow: hidden; to the parent element to make sure it wraps its immediate floated child elements. Take my example and try it with and with out the overflow. HTML: <div id=""page"">
    <div id=""main"">main content</div>
    <div id=""side"">side content</div>
</div> CSS: div#page{
  overflow: hidden;
  background-color: #ccc;
}

div#main{
  float: left;
}

div#side{
  float: right;
}"
307,"Edit Original code is wrong. Added better below. Something like this could do it in one pass (I think - I haven't checked it to death). Note that I only return the first index as the next ones can be calculated easily by just doing a new array i, i+1, ..., i+n-1 etc. Simpler (and slower) than Boyer Moore but still O (n): public static <T> int indexOf(final T[] target, final T[] candidate) {

    for (int t = 0, i = 0; i < target.length; i++) {
        if (target[i].equals(candidate[t])) {
            t++;
            if (t == candidate.length) {
                return i-t+1;
            }
        } else {
            t = 0;
        }
    }

    return -1;
} Edit: This should work better, no? It's not as clean and simple, but now I'm more confident that it's actually correct. What happens is that when we fail, we backtrack and restart. public static <T> int indexOf(final T[] target, final T[] candidate) {
    int t = 0, i = 0;    
    while (i < target.length)
    {
        if (target[i].equals(candidate[t])) {
            t++;
            if (t == candidate.length) {
                return i-t+1;
            }
        } else {
            i -= t;
            t = 0;
        }
        i++;
    }    
    return -1;
}"
308,"You could also replace: StreamReader reader = new StreamReader(@""D:\Games\Riot Games\League of Legends\air\logs\LolClient.20110121.213758.log"");
var content = reader.ReadToEnd(); with: var content = File.ReadAllText(@""D:\Games...log""); ReadAllText method, as MSDN says: Opens a text file, reads all lines of the file into a string, and then closes the file. Which is even shorter than using block."
311,"How does this Binary Search Tree look?. I wrote a BST in C a while back and may use it at some point. search_tree tree_make_empty( search_tree tree )
 {
   if ( tree != NULL )
   {
       tree_make_empty( tree->left );
       tree_make_empty( tree->right );
       free( tree );
   }
   return NULL;
 }

 tree_position tree_find( CHAR_DATA *target, search_tree tree )
 {
     if ( tree == NULL )
       return NULL;

     if ( target < tree->hatedata->target_char )
       return tree_find( target, tree->left );
     else if ( target > tree->hatedata->target_char )
       return tree_find( target, tree->right );
     else
       return tree;
 }

 search_tree tree_insert( HATE_DATA *hatedata, search_tree tree )
 {
     if ( tree == NULL )
     {
       tree = (HATE_NODE * ) malloc( sizeof( HATE_NODE ) );

       if ( tree == NULL )
          bug( ""tree_insert: out of space!"" );
       else
       {
          tree->hatedata = hatedata;
          tree->left = tree->right = NULL;
       }
     }
     else if ( hatedata->target_char < tree->hatedata->target_char )
       tree->left = tree_insert( hatedata, tree->left );
     else if ( hatedata->target_char > tree->hatedata->target_char )
          tree->right = tree_insert( hatedata, tree->right );

     return tree;
 }

 tree_position tree_find_min( search_tree tree )
 {
    if ( tree == NULL )
       return NULL;
    else if ( tree->left == NULL )
       return tree;
    else
       return tree_find_min( tree->left );
 }

 search_tree tree_delete( HATE_DATA *hatedata, search_tree tree )
 {
    tree_position pos;

    if ( tree == NULL )
       bug( ""tree_delete: not found"" );
    else if ( hatedata->target_char < tree->hatedata->target_char )
       tree->left = tree_delete( hatedata, tree->left );
    else if ( hatedata->target_char > tree->hatedata->target_char )
         tree->right = tree_delete( hatedata, tree->right );
    else if ( tree->left && tree->right )
    {
       pos = tree_find_min( tree->right );
       tree->hatedata = pos->hatedata;
       tree->right = tree_delete( tree->hatedata, tree->right );
    }
    else
    {
       pos = tree;
       if ( tree->left == NULL )
         tree = tree->right;
       else if ( tree->right == NULL )
         tree = tree->left;
       free( pos );
    }

    return tree;
 }

 HATE_DATA *tree_retrieve( tree_position pos )
 {
    return pos->hatedata;
 } ... struct hate_data
 {
    CHAR_DATA *target_char;
    int hate_amount;
 };

 struct hate_node
 {
    HATE_DATA *hatedata;
    search_tree left;
    search_tree right;
 }; ... mob->hatedata = tree_make_empty( NULL ); Example use: if ( IS_NPC(victim) )
{
     HATE_DATA *hatedata;
   tree_position P;

   if( ( P = tree_find( ch, victim->hatedata )) == NULL || tree_retrieve( P )->target_char != ch )
   {
     int test;
     hatedata = (HATE_DATA * ) malloc( sizeof( HATE_DATA ) );
     hatedata->target_char = ch;
     test = number_range( 1, 50 );
     hatedata->hate_amount = test;
     victim->hatedata = tree_insert( hatedata, victim->hatedata );
     ch_printf( ch, ""It should now hate you for %d.\n\r"", test );
   }
   else
   {
     hatedata = tree_retrieve(tree_find( ch, victim->hatedata ));
     ch_printf(ch, ""You are already hated for %d!\n\r"", hatedata->hate_amount );
   }

} Do you have any suggestions? Does it look okay? Are there any ways to optimize it?"
312,"Personally I think that working with 50% native and 50% your code does not work very well, because of things such as trigger_error does not allow custom bits to be sent. That being said if you named your class Error and created it to be abstract that implements a logger interface (optional) you would be able to do more with it. Creating custom constants such as LOG , SHOW_ERROR , SEND_MAIL combined with a custom static function would be a better option, as doing things such as: Error::Trigger(""Cannot divide by 0"", Error::LOG | Error::SHOW_ERROR); makes more sense to have specific control over errors. Here's a small example how I would improve the above abstract class Error
{
    public const LOG = 0;
    public const SEND_MAIL = 1;
    public const SHOW_ERROR = 2;
    /*...*/

    public static function Monitor(){}; /*Used for set_error_handler*/

    public static function Trigger($Message,$bits = Error::LOG | Error::SEND_MAIL,$Context = false)
    {
        if($bits & Error:LOG)
        {
             //Log it
        }

        if($bits & Error:SEND_MAIL)
        {
             //Send it
        }

        /*Lastly*/
        if($bits & Error:LOG)
        {
             //Show it
        }
    }
} you would then bind the Monitor to the error_reportng and call the Error::Trigger depending on what type of error has been triggered, or you could extend the class and run the parent static method class ErrorHandler extends Error
{
    public fucntion Monitor(/*...*/)
    {
        parent::Trigger(/*...*/);
    }
} And allow your class to handle all errors as you then have more control over the decision on what to do. you can then set the default error handling to a combination of options such as: define(""DEFAULT_ERROR_HANDLING"",Error:log | Error::SEND_MAIL); and change $bits in the parameter section of trigger to $bits = DEFAULT_ERROR_HANDLING"
313,"Preface: I'm not going to talk about alternatives to trigger_error for now. Edit: Someone else did, perfect ! :) About the config: I assume those settings are what you are using in development ? If so: I'd like to advice against that. You should always produce at least E_NOTICE free code and only logging those errors to a file isn't going to help you achieve that. Why ? The E_NOTICE error you are going to see mostly is $asd is an undefined variable . That will point you to errors in your code very quickly and you don't have to think about (""why doesn't it work, i put the value into the function"") or similar problems coming from typos. Maybe your IDE warns you about those but let php do it too. Init: Usually an error handler isn't a static function. I'm not sure what php version will throw an E_STRICT warning. Also ""class::function"" is not the best way to pass a callback. (See here for php callbacks) You might want to use set_error_handler(""class"", ""function""); . That help if you decide you don't want to use a static function but an object because it works the same way set_error_handler($obj, ""function""); The handler: You are repeating '[' . date('Y-m-d h:i:s') . '] User Error: ""' . $message . '"", File: ""'.$file_name.'"", Line: '.$line_number.' many times there. Put that into an extra method. It will help you if you want to change the logfile name or the date or something like that. Also it helps with the distinction you are already makeing betten the 2 log files. Displaying errors ? You should never display errors in production. I'd use ini_get(""display_errors"") to figure out how the server is configure and honor that at all costs. If you don't want the errors displayed in development (maybe many ajax calls ?) Look into firebug. It lets you see the errors if you got the firefox plugin installed without cluttering the pages output."
314,"This answer is not the best one, but you could create a new variable for each time you're assigning a value to rpmError and have one if statement where the last one is to check if any of them are equal to 0. Note: This will not work if it is absolutely necessary that those errors are thrown before the next check."
315,"I refactored it for you. I did all of this without testing, so there's likely a bunch of bugs and off-by-one errors. I also made some assumptions about the code that you didn't include. Now that the code's a lot smaller, it should be easier for you to find those bugs. A couple of important points: Recursion is a fundamental concept in programming. If you are a professional programmer, you absolutely must be comfortable with it, or you will never be able to deal with nested structures effectively. If you copy and paste, you're doing it wrong. Every time you hit Ctrl+C, a kitten dies. No no no. If you have variables named something1 , something2 , something3 , etc. you're doing it wrong . At the very least, those should be an array. You had depth as a double but were comparing it to literal values other than zero. That's bad. Here you go: private void update(int depth)
{
    Console.WriteLine(""update with level "" + depth);

    Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal, new Action(delegate()
    {
        List<Grid> grids = new List<Grid>();

        Dependencies.Children.Clear();

        Grid grid = MakeOuterGrid(grids, focus, e.Width, e.Height, depth);

        List<SourceFile> list = focus.getInvocations();

        for (int i = 1; i <= depth; i++)
        {
            int invocCount = CountInvocations(focus, i + 1);
            int counter = 0;
            MakeRecursiveGrids(grids, null, focus, i, invocCount, i, ref counter);
        }

        foreach (Grid grid in grids)
        {
            Dependencies.Children.Add(grid);
            Contacts.AddPreviewContactDownHandler(grid, DownOnSourceFile);
        }
    }));
}

void AdjustTop(int depth, int table) {
    int[][] depthTable = new int[][] {
        new int[] { 163, 108,  81,  65,  54,  46 },
        new int[] { 488, 324, 244, 195, 163, 139 },
        new int[] {  -1, 540, 406, 325, 271, 232 },
        new int[] {  -1,  -1, 569, 455, 379, 325 },
        new int[] {  -1,  -1,  -1, 585, 488, 418 },
        new int[] {  -1,  -1,  -1,  -1, 596, 511 },
    }

    int[] depths = depthTable[table];
    if ((depth < depths.Length) && (depths[depth - 1] != -1)) {
        Canvas.SetTop(depths[depth - 1]);
    }
}

SizeChangedEventHandler UpdateBindings(Line line) {
    SizeChangedEventHandler act = (Object o, SizeChangedEventArgs args) =>
    {
        BindingOperations.GetBindingExpressionBase(line, Line.X1Property).UpdateTarget();
        BindingOperations.GetBindingExpressionBase(line, Line.Y1Property).UpdateTarget();
        BindingOperations.GetBindingExpressionBase(line, Line.X2Property).UpdateTarget();
        BindingOperations.GetBindingExpressionBase(line, Line.Y2Property).UpdateTarget();
    };

    return act;
}

int CountInvocations(SourceFile source, int depth)
{
    int count = 0;

    if (depth > 0)
    {
        foreach (SourceFile inner in source.getInvocations())
        {
            count = count + CountInvocations(inner, depth - 1);
        }
    }
    else
    {
        count = source.Count;
    }

    return count;
}

Grid MakeGrid(List<Grid> grids, SourceFile source)
{
    Grid grid = new Grid();
    grid.Width = 50;
    grid.Height = 50;
    grid.Tag = source;
    source.setGrid(grid);
    grids.Add(grid);

    Ellipse ellipse = new Ellipse();
    ellipse.Width = 50;
    ellipse.Height = 50;
    ellipse.Fill = Brushes.Red;

    grid.Children.Add(ellipse);

    return grids;
}

void MakeRecursiveGrids(List<Grid> grids, SourceFile outer, SourceFile source,
    int maxDepth, int invocCount, int recurseDepth, ref int counter)
{
    if (recurseDepth > 0)
    {
        foreach (SourceFile inner in source)
        {
            MakeRecursiveGrids(grids, source, inner, maxDepth, invocCount,
                recurseDepth - 1, ref counter);
        }
    }
    else
    {
        MakeGrid(grids, outer, inner, depth, maxDepth, invocCount, counter);
        counter++;
    }
}

Grid MakeGrid(List<Grid> grids, SourceFile outer, SourceFile inner,
    int depth, int[] depths, int invocCount, int counter)
{
    Grid grid = MakeGrid(grids, inner);

    MakeViewbox(grid, grid.Width, grid.Height, inner.getName());

    AdjustTop(depth, depths);
    Canvas.SetLeft(grid, counter * (1000 / (invocCount + 1)));

    MakeLine(grids, grid, outer, inner);

    return grid;
}

Grid MakeOuterGrid(List<Grid> grids, SourceFile inner, int width, int height,
    int depth)
{
    Grid grid = MakeGrid(grids, inner);

    MakeViewbox(grid, width, height, inner.getName());

    AdjustTop(depth, 0);
    Canvas.SetLeft(grid, 500);

    return grid;
}

Binding MakeBinding(Object parameter, Grid grid)
{
    Binding binding = new Binding();
    binding.Path = new PropertyPath(parameter);
    binding.Converter = new MyConverter();
    binding.ConverterParameter = grid;
}

void MakeLine(List<Grid> grids, Grid grid, SourceFile outer, SourceFile inner)
{
    Grid g2 = outer.getGrid();

    Line line = new Line();
    line.Stroke = Brushes.Green;
    line.StrokeThickness = 10;

    Binding x1 = MakeBinding(Canvas.LeftProperty, g2);
    Binding y1 = MakeBinding(Canvas.TopProperty, g2);
    Binding x2 = MakeBinding(Canvas.LeftProperty, grid);
    Binding y2 = MakeBinding(Canvas.TopProperty, grid);

    Grid g = findGrid(grids, outer, inner);
    x1.Source = g;
    y1.Source = g;
    x2.Source = grid;
    y2.Source = grid;

    line.SetBinding(Line.X1Property, x1);
    line.SetBinding(Line.Y1Property, y1);
    line.SetBinding(Line.X2Property, x2);
    line.SetBinding(Line.Y2Property, y2);

    Dependencies.Children.Add(line);

    Contacts.AddPreviewContactDownHandler(line, OnLineDown);

    line.Tag = new Call(outer, inner);

    SizeChangedEventHandler act = UpdateBindings(line);
    inner.getGrid().SizeChanged += act;
    g1.SizeChanged += act;
}

void MakeViewBox(Grid grid, int width, int height, string text)
{
    Viewbox box = new Viewbox();
    box.Width = width;
    box.Height = height;

    TextBox textBox = new TextBox();
    textBox.Text = text;

    box.Child = textBox;

    grid.Children.Add(box);
}"
316,"(defn snoc [xs x] (concat xs [x])) There is a reason snoc is not defined by default in clojure: Since appending at the end of a singly linked list takes O(n) time, this is actually quite expensive. When building up non-lazy lists tail-recursively in a functional language, you often build the list the wrong way around (using cons instead of snoc ) and then reverse it at the end to avoid that cost. However in this case there is actually a nicer way: by using a lazy sequence rather than a strict list, we can avoid the need for loop / recur and save the cost of building up the list. We can also separate the logic of creating the Fibonacci numbers from the logic which decides how many numbers we want by first creating a lazy sequence containing all Fibonacci numbers and then using take-while to take those less than the given maximum. This will lead to the following code: ;; A lazy sequence containing all fibonacci numbers
(def fibs
  (letfn
    [(fibsrec [a b]
      (lazy-seq (cons a (fibsrec b (+ a b)))))]
    (fibsrec 1 1)))

;; A function which returns all fibonacci numbers which are less than max
(defn fibs-until [max]
  (take-while #(<= % max) fibs))"
317,"In tree_find and tree_find_min [edit: and even in tree_insert ] you're not really gaining anything from using recursion. For example, I think tree_find_min would probably be clearer something like: tree_position tree_find_min( search_tree tree )
{
   if ( tree == NULL )
      return NULL;
   while (tree->left != NULL)
       tree = tree->left;
   return tree;
} As a side-benefit, this may also be faster with some compilers. In code like: HATE_DATA *hatedata;

 /* ... */

 hatedata = (HATE_DATA * ) malloc( sizeof( HATE_DATA ) ); I'd change it to look more like: hatedata = malloc(sizeof(*hatedata)); The cast accomplishes nothing useful in C, and can cover up the bug of forgetting to #include <stdlib.h> to get the proper prototype for malloc . Using sizeof(*hatedata) instead of sizeof(HATE_DATA) means that changing the type only requires changing it in one place (where you've defined the variable), instead of everywhere you've done an allocation."
318,"Here's an example from Wikipedia's Double-checked locking page: public class MySingleton
{
    private static object myLock = new object();
    private static MySingleton mySingleton = null;

    private MySingleton()
    { }

    public static MySingleton GetInstance()
    {
        if (mySingleton == null)    // check
        {
            lock (myLock)
            {
                if (mySingleton == null)    // double check
                {
                    MySingleton newSingleton = new MySingleton();
                    System.Threading.Thread.MemoryBarrier();
                    mySingleton = newSingleton;
                }
            }
        }

        return mySingleton;
    }
} Notice the use of System.Threading.Thread.MemoryBarrier(); , unlike GWLlosa's answer. See The ""Double-checked locking is broken"" declaration for an explanation. (It is written for Java, but the same principles apply.)"
319,"A few things come to mind: Lose the DateTime model and instead add a DateTimeField directly to the models that need it. The ForeignKey buys you nothing except incuring an additional database join for even the simplest of operations. You probably did this only so you could paste this code in one piece, but if not: You should put your admin code in a file called admin.py inside your application. That way you can use the admin autodiscover feature In DateAdmin you overwrite the response_add method to (as far as I can see) set the user/creator field. This can be acomplished much easier by overwriting the save_model method ."
320,"Instead of Grid g and Ellipse e , use Grid grid and Ellipse ellipse . A loc with e.size= says less than ellipse.Size= ."
321,"As a completely untested micro-optimisation, I would suspect (Int32)(radius * cosTheta + 0.5) is going to be marginally quicker than (Int32)Math.Round(radius * cosTheta) . It does, however, round up on 0.5 instead of rounding down, which may not be what you want."
322,Using the comparison than operators < and > on pointers seems a bit redundant. Depending on how the heap is working you may end up with a tree that looks like a list. Without understand the properties of HATE_DATA it is imposable to know if this is a good or even valuable usage of theses operators. If the data inside the pointer target_char has some intrinsic property that would allow you to do a more meaningful comparison then you can define/use a function to do the comparison or you can document the properties of HATE_DATA that make using these operators meaningful in this context.
324,"I tweaked your code a little but I think your approach is good. As I alluded to in the comment, there's no guarantee of fairness between threads compareAndSetting the head, so a really unlucky thread could be stuck for a while if there are a lot of consumers. I don't think this data structure should hold nulls, since there's no way to distinguish between getting a null or getting from an empty queue, so I throw the NPE. I refactored the logic a bit in getObject to remove redundant null checks. And I renamed some vars to be hungarianlike. import java.util.concurrent.atomic.AtomicReference;

public class LockFreeQueue<T> {
private static class Node<E> {
    E value;
    volatile Node<E> next;

    Node(E value) {
        this.value = value;
    }
}

private final AtomicReference<Node<T>> refHead, refTail;
public LockFreeQueue() {
    // have both head and tail point to a dummy node
    Node<T> dummy = new Node<T>(null);
    refHead = new AtomicReference<Node<T>>(dummy);
    refTail = new AtomicReference<Node<T>>(dummy);
}

/**
 * Puts an object at the end of the queue.
 */
public void putObject(T value) {
    if (value == null) throw new NullPointerException();

    Node<T> node = new Node<T>(value);
    Node<T> prevTail = refTail.getAndSet(node);
    prevTail.next = node;
}

/**
 * Gets an object from the beginning of the queue. The object is removed
 * from the queue. If there are no objects in the queue, returns null.
 */
public T getObject() {
    Node<T> head, next;

    // move head node to the next node using atomic semantics
    // as long as next node is not null
    do {
        head = refHead.get();
        next = head.next;
        if (next == null) {
            // empty list
            return null;
        }
        // try until the whole loop executes pseudo-atomically
        // (i.e. unaffected by modifications done by other threads)
    } while (!refHead.compareAndSet(head, next));

    T value = next.value;

    // release the value pointed to by head, keeping the head node dummy
    next.value = null;

    return value;
}
}"
325,"A few quick comments looking through the source: You did very well in structuring things semantically.  I only see a few <br /> or <b> tags.  That said, you probably want to include more semantic markup for some things, e.g., <div id=""post"">
    <b>Introduction</b><br />
    <i>Thursday, January 27, 2011</i>
</div>
<br />
<div id=""content""> If I were to rework it, I would do: <div id=""post"">
 <h1>Introduction</h1>
 <h2>Thursday, blah blah</h2>
</div>
<div id=""content""> Then your CSS will style those elements: div#post h1 { ... }
div#post h2 { ... } For your images, unless you need a javascript id selector, I'd probably make them a class, rather than unique ID's.  It looks like your images will all be styled similarly, so why not group them using a class?  Or just override the CSS defaults for the image tag. Finally, you should probably use a CSS reset.  Browsers all use different defaults, so the only sensible thing is to use a reset so that all styling attributes start out the same across all browsers.  Eric Meyer is the CSS guru, he has his reset at http://meyerweb.com/eric/tools/css/reset/ (along with more explanation about why to use it)."
326,"Returning total number of rows in query. Oftentimes I find myself wanting the total number of rows returned by a query even though I only may display 50 or so per page. Instead of doing this in multiple queries like so: SELECT first_name, 
       last_name, 
       (SELECT count(1) FROM  sandbox.PEOPLE WHERE trunc(birthday) = trunc(sysdate) ) as totalRows
FROM  sandbox.PEOPLE 
WHERE trunc(birthday) = trunc(sysdate); It has been recommended to me to do this: SELECT first_name, 
            last_name, 
            count(*) over () totalRows
FROM  sandbox.PEOPLE
WHERE trunc(birthday) = trunc(sysdate); I am just looking for what is better as far as performance and if performance is a wash. Does this really improve readability of SQL? It is certainly cleaner/easier to write."
327,"That's a large piece of code. I highly recommended to use lower camel case for variables. Here are some hints from me, just only micro-refactoring. if(term.length >= 3) {
  if(replaced)
    load_data(1, term, true, false);
  else
    load_data(1, term, true, true);
} into: if(term.length >= 3) {
  load_data(1, term, true, !replaced);                        
} function load_data(page, search, action, save) {
   if(save == null)
     save = false;
   else
     save = true;
 ... into: function load_data(page, search, action, save) {
  save = save == null ? false : true;
... for(var j in rows[i]) {
   if(j != 'id' && j != 'actions')
     row.append('<td class=""'+j+'td"">'+(rows[i][j] == null ? '' : rows[i][j])+'</td>');
   if(j == 'actions' && rows[i][j] != null && options.actions)
     row.append(rows[i][j]);
 } into: for(var j in rows[i]) {
  var rowsIJ = rows[i][j];

  if(j != 'id' && j != 'actions')
    row.append('<td class=""'+j+'td"">'+(rowsIJ == null ? '' : rowsIJ)+'</td>');
  if(j == 'actions' && rowsIJ != null && options.actions)
    row.append(rowsIJ);
}"
328,"I don't remember exactly where I got my implementation, but a lot of it is borrowed from the Spring Framework... The only three methods that my IUnitOfWork interface exposes are Initialize(), Commit(), and Rollback(). Then I inherit from that for an INhibernateUnitOfWork, which simply exposes the NHibernate Session via a property as well... I guess this part may depend on what you are using for the persistence storage mechanism... But what it allows me to do in my repository class then is to simply take in the unit of work as an injectable dependency. Essentially, each of my Get(id), Load(id), Find(), Save(), Update(), etc. methods just make a call against the Repository.UnitOfWork.Session property. In essence, it's really close to what you've already implemented... Not sure why you want the GetRepository method, but you may have some use case for that which I do not. For me, my UnitOfWork is Request lifetime object whose Initialize() and Commit() / Rollback() functionality is handled by an HTTP module hooking the BeginRequest and EndRequest events. That is, the UnitOfWork instance is only ever touched by said HTTP Module, and by the repositories that simply use it to get a reference to the current Session object."
329,"Leaving aside the problem of deeply nested code for now, I think readability is greatly improved by the use of LINQ syntax: var sourceFiles = from file in list
                  from invocation in file.getInvocations()
                  group invocation by (SourceFile)null into groupedByInvoker
                  select groupedByInvoker;

for (var currentDepth = 0; currentDepth < depth; currentDepth++)
{
    foreach (var invokerGroup in sourceFiles)
    {
        int sourceFileCount = currentGroup.Count();
        int counter = 0;

        foreach (var invocation in invokerGroup) {
            // Do stuff
            counter++;
        }
    }

    sourceFiles = from invokerGroup in sourceFiles
                  from file in invokerGroup
                  from invocation in file.getInvocations()
                  group invocation by file into groupedByInvoker
                  select groupedByInvoker;
} For me, this makes the SelectMany a lot easier to follow. There are some other tweaks to the queries too: You can just group by null directly, rather than projecting to an anonymous type and selecting that back out as the key. You don't need to convert to a list if you follow it by a groupby. The groupby traverses and stores the result of the enumerable anyway. You can test this by removing the ToList and adding a break point/debug output inside getInvocations. By forcing it to evaluate to to a list instead of allowing deferred execution you are actually calling getInvocation too many times. When currentDepth == depth - 1 , you don't need to evaluate sourceFiles again and so you don't need to call getInvocations. With deferred execution, because the final sourceFiles is never read getInvocations is never called and everything is fine and dandy."
330,"Here is an O(mn) solution.  Given that haystack is about 1000 in length and needle is 5 or smaller, the simplest code to do the search is probably the best.  But if testing for equality is expensive, there are things we can do to mitigate that, although I'm not sure switching to KMP or BM will help so much given that we're dealing with Object here. // assumes no null entries
// returns starting index of first occurrence of needle within haystack or -1
public int indexOf(final Object[] haystack, final Object[] needle) 
{
    foo: for (int a = 0; a < haystack.length - needle.length; a++) {
        for (int b = 0; b < needle.length; b++) {
            if (!haystack[a+b].equals(needle[b])) continue foo;
        }
        return a;
    }
    return -1;
}"
331,"The MYMACRO call should be fine. #define D3DCALL(a) { auto __ = a; if (FAILED(__)) DXTrace(__FILE__, __LINE__, __, WIDEN(#a), TRUE); }
D3DCALL(D3DXCreateSphere(
    D3DDev.get(),
    radius,
    slices,
    slices,
    &retval->Mesh._Myptr,
    &retval->Adjacency._Myptr
)); I use this in my own source code all the time. The main way you get problems is if you try to conditionally compile within the macro call."
333,"If the question is how to take something like this: HANDLE hProc = OpenProcess(
            PROCESS_VM_READ | PROCESS_QUERY_INFORMATION, FALSE,
            pid);
        if (hProc == 0)
        {
            THROW_LAST_WINDOWS_ERROR();
        } And reduce it to a one-liner, I usually use a verify macro: template<class Eval> RetVal Verify(Eval eval, static const string& file, unsigned line)
{
  if( !eval )
    throw MyException(error_string, file, line);
  else 
    return eval;
}

#define verify(EVAL) (Verify(EVAL, __FILE__, __LINE__))

// ...

HANDLE hProc = verify( OpenProcess(PROCESS_VM_READ | PROCESS_QUERY_INFORMATION, FALSE, pid ));"
334,"Adapted from Charles' answer from your original post, would something like this work? #define THROW_LAST_WINDOWS_ERROR(condition) ThrowOnFail(condition, __FILE__, __LINE__)

void ThrowOnFail(const BOOL condition, LPCSTR file_name, const int file_line)
{
  if (!condition)
    WindowsApi::Exception::Throw(::GetLastError(), file_name, file_line);
} Then error handling would look something like this: THROW_LAST_WINDOWS_ERROR(ReadProcessMemory(hProc,
                                           procInfoBuf.GetAs<PROCESS_BASIC_INFORMATION>()->PebBaseAddress,
                                           &peb,
                                           sizeof(peb),
                                           0));
THROW_LAST_WINDOWS_ERROR(ReadProcessMemory(hProc,
                                           peb.Ldr,
                                           static_cast<void *>(&ldrData),
                                           sizeof(PEB_LDR_DATA),
                                           0));
// ...
    while (currentListEntry != endPointer)
    {
        LDR_MODULE loaderModule;

        THROW_LAST_WINDOWS_ERROR(ReadProcessMemory(
            hProc,
            currentListEntry,
            &loaderModule,
            sizeof(loaderModule),
            0));

    // ...
    }"
335,"C comes with a helpful function size_t strcspn(const char *string, const char *delimiters) that you can implement this on top of. The ASCII version is pretty fast; it uses a bit vector to test for the delimiter characters."
336,"An even better way to do the malloc is with this macro (simplified version of g_new in GLib): #define my_new(type, count)  ((type*)malloc (sizeof (type) * (count))) The advantages of this are: less typing, more clarity assignment to the wrong type will be a compiler warning you can't accidentally sizeof() the wrong thing Also, of course, malloc can return NULL. The easiest way to deal with that is to make a wrapper function that handles it."
339,"You don't need to wrap toggleMenu in a function, you can just use $('#tab').click(toggleMenu); If you don't include the parenthesis, it's taken to mean a reference to the function rather than a function invocation. It's a bad idea to try and manually keep track of keyboard modifiers. For instance, if your website looses focus while the key is held down, it will think it's still down when you return focus, even if it isn't. The keyboard event has a ctrlKey property which will be true if the control key is being held down. It's also probably a good idea to put the key code into a variable which describes which key it is, as having to remember what 97 maps to can be tricky. $(document).keydown(function (e) {
    if (e.ctrlKey && e.which === aKey) {
        toggleMenu();
        return false;
    }
}); Lastly, it might be a good idea to extract the offset into variable. var menuSize = '210px';
var $main = $(""#main""); 

function toggleMenu() {
    if(!$main.hasClass('out')) {
        $main.animate({'margin-left': '+=' + menuSize}, 500).addClass('out');                         
    } else {
        $main.animate({'margin-left': '-=' + menuSize}, 500).removeClass('out');
    }
}"
340,"Javascript Object Placement / String Parsing Method. This JS function is intended to retrieve or place a value into an object with the nested keys as a string. For example var obj = {a: {b: [4]}};
parse_obj_key(obj, ""a.b.0"") should equal 4.
parse_obj_key(obj, ""a.c"", 2) should add another element to ""a"" named ""c"" with value 2. The method works, but I'd like to clean it up if possible (or a more polished implementation which is publicly available).  I'd also love to know of any edge-case failures which can be found. function parse_obj_key(obj, loc, val){
    var _o = obj;
    while (true){ 
        var pos = loc.indexOf('.');                        

        if (!_o || typeof _o != 'object'){
            $.log(""Invalid obj path: "" + loc + ""\n"" + JSON.stringify(obj));
            return null;      
        }                                                    

        if (pos === -1){
            if (val){
                _o[loc] = val;                 
                return obj;                                           
            } else {
                if (!isNaN(parseInt(loc)))
                    loc = parseInt(loc);

                return _o[loc];
            }
        }
        var part = loc.substring(0, pos);                    
        var loc = loc.substring(pos + 1);                     

        if (!isNaN(parseInt(part)))
            part = parseInt(part);   

        if (!(part in _o)){
            if (val)
                _o[part] = new object;                                        
            else
                return null;                                           
        }
        _o = _o[part];                      
    }                                                                         
}"
341,Better way of setting input scope on text box in WP7. This works but there must be a better way: txtBox.InputScope = new InputScope { Names = { new InputScopeName { NameValue = InputScopeNameValue.Text } } };
342,"Or, here's yet another way you could do it by using all stuff from the STL: #include <algorithm>
#include <string>
#include <iostream>

bool isForbidden( char c )
{
    static std::string forbiddenChars( ""\\/:?\""<>|"" );

    return std::string::npos != forbiddenChars.find( c );
}

int main()
{
    std::string myString( ""hell?o"" );

    std::replace_if( myString.begin(), myString.end(), isForbidden, ' ' );

    std::cout << ""Now: "" << myString << std::endl;
}"
343,"Form to create new students or view existing student information. I started out with the best of intentions, but this form got hacky real fast. It's purpose is to serve as a create new Student form. Also, if you want to view an existing Students information. Think of it as the CRU of CRUD. Here it is: using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Tutomentor.Branding;
using Tutomentor.Data.Repositories;

namespace Tutomentor.UI.Students
{
    public partial class StudentInformation : Form
    {
        StudentRepository repo = new StudentRepository();
        bool IsCreating = false;
        Student student;

        public StudentInformation()
        {
            InitializeComponent();
            LoadComboBoxes();
            LoadBranding();
            IsCreating = true;
        }

        public StudentInformation(int studentID)
        {
            InitializeComponent();
            LoadComboBoxes();
            LoadBranding();

            student = repo.FindStudent(studentID);
            LoadStudentInformation(student);

        }

        private void LoadComboBoxes()
        {
            cmbGrade.DisplayMember = ""Name"";
            cmbGrade.ValueMember = ""ID"";
            cmbGradeParalelo.DisplayMember = ""Name"";
            cmbGradeParalelo.ValueMember = ""ID"";
            GradeRepository repo = new GradeRepository();
            cmbGrade.DataSource = repo.FindAllGrades();
        }      

        private void LoadStudentInformation(Student student)
        {
            cmbGrade.SelectedValue = student.GradeParalelo.Grade.ID;
            cmbGradeParalelo.SelectedValue = student.IDGrade;
            txtRude.Text = student.RUDE.ToString();
            txtNombrePadre.Text = student.FatherName;
            txtProfesionPadre.Text = student.FatherProfession;
            txtCelularPadre.Text = student.MobilePhoneFather;
            txtLugarDeTrabajoPadre.Text = student.PlaceofWorkFather;

            txtNombreMadre.Text = student.MotherName;
            txtProfesionMadre.Text = student.MotherProfession;
            txtCelularMadre.Text = student.MobilePhoneMother;
            txtLugarDeTrabajoMadre.Text = student.PlaceofWorkMother;

            txtObservaciones.Text = student.Observations;

            txtNombre.Text = student.Name;
            txtApellidoPaterno.Text = student.FatherLastName;
            txtApellidoMaterno.Text = student.MotherLasteName;
            dtpFechaNacimiento.Value = Convert.ToDateTime(student.DateOfBirth);
            txtLugarNacimiento.Text = student.PlaceOfBirth;
            SetSex(student.Sex);
            txtCarnet.Text = student.Carnet;
            txtTelefono.Text = student.Telephone;
            txtCelular.Text = student.MobilePhone;
            txtDireccion.Text = student.Address;
        }

        private void SetSex(string p)
        {
            if (p == ""M"")
            {
                sexoMasculino.Checked = true;
                sexoFemenino.Checked = false;
            }
            else
            {
                sexoMasculino.Checked = false;
                sexoFemenino.Checked = true;
            }
        }

        private void LoadBranding()
        {
            this.Text = ""Tutomentor - Agregando nuevo alumnos."";
            this.BackColor = Brand.PrimaryColor;
            panelBorderLeft.BackColor = Brand.HeaderColor;
            panelBorderRight.BackColor = Brand.HeaderColor;
            panelSeparator1.BackColor = Brand.SeparatorColor;
        }

        private void cmbGrade_SelectedIndexChanged(object sender, EventArgs e)
        {
            LoadGradeParalelos();
        }

        private void LoadGradeParalelos()
        {
            GradeParaleloRepository repo = new GradeParaleloRepository();
            Int64 gradeID = Convert.ToInt64(cmbGrade.SelectedValue);
            cmbGradeParalelo.DataSource = repo.FindAllGradeParalelos().Where(g => g.IDGrade == gradeID);
        }

        private void btnSave_Click(object sender, EventArgs e)
        {
            SaveInformation();
        }

        private void SaveInformation()
        {
            if (IsCreating)
            {
                Student newStudent = new Student();
                Int64 gradeId = Convert.ToInt64(cmbGradeParalelo.SelectedValue);
                newStudent.IDGrade = gradeId;
                newStudent.RUDE = Convert.ToInt64(txtRude.Text);

                /*Parents information.*/
                newStudent.FatherName = txtNombrePadre.Text;
                newStudent.FatherProfession = txtProfesionPadre.Text;
                newStudent.MobilePhoneFather = FormatPhoneNumber(txtCelularPadre.Text);
                newStudent.PlaceofWorkFather = txtLugarDeTrabajoPadre.Text;

                newStudent.MotherName = txtNombreMadre.Text;
                newStudent.MotherProfession = txtProfesionMadre.Text;
                newStudent.MobilePhoneMother = FormatPhoneNumber(txtCelularMadre.Text);
                newStudent.PlaceofWorkMother = txtLugarDeTrabajoMadre.Text;

                /*newStudent information*/
                newStudent.Name = txtNombre.Text;
                newStudent.FatherLastName = txtApellidoPaterno.Text;
                newStudent.MotherLasteName = txtApellidoMaterno.Text;
                newStudent.DateOfBirth = dtpFechaNacimiento.Value.ToShortDateString();
                newStudent.PlaceOfBirth = txtLugarNacimiento.Text;
                newStudent.Sex = sexoMasculino.Checked ? sexoMasculino.Text : sexoFemenino.Text;
                newStudent.Telephone = FormatPhoneNumber(txtTelefono.Text);
                newStudent.MobilePhone = FormatPhoneNumber(txtCelular.Text);
                newStudent.Address = txtDireccion.Text;
                newStudent.Carnet = FormatPhoneNumber(txtCarnet.Text);
                newStudent.Observations = txtObservaciones.Text;

                repo.Add(newStudent);
                repo.Save();
                MessageBox.Show(""Se guardo el registro exitosamente."",
                    ""Exito!"",
                    MessageBoxButtons.OK,
                    MessageBoxIcon.Information,
                    MessageBoxDefaultButton.Button1);
                ClearForm();
            }
            else
            {
                Int64 gradeId = Convert.ToInt64(cmbGradeParalelo.SelectedValue);
                student.IDGrade = gradeId;
                student.RUDE = Convert.ToInt64(txtRude.Text);

                /*Parents information.*/
                student.FatherName = txtNombrePadre.Text;
                student.FatherProfession = txtProfesionPadre.Text;
                student.MobilePhoneFather = FormatPhoneNumber(txtCelularPadre.Text);
                student.PlaceofWorkFather = txtLugarDeTrabajoPadre.Text;

                student.MotherName = txtNombreMadre.Text;
                student.MotherProfession = txtProfesionMadre.Text;
                student.MobilePhoneMother = FormatPhoneNumber(txtCelularMadre.Text);
                student.PlaceofWorkMother = txtLugarDeTrabajoMadre.Text;

                /*student information*/
                student.Name = txtNombre.Text;
                student.FatherLastName = txtApellidoPaterno.Text;
                student.MotherLasteName = txtApellidoMaterno.Text;
                student.DateOfBirth = dtpFechaNacimiento.Value.ToShortDateString();
                student.PlaceOfBirth = txtLugarNacimiento.Text;
                student.Sex = sexoMasculino.Checked ? sexoMasculino.Text : sexoFemenino.Text;
                student.Telephone = FormatPhoneNumber(txtTelefono.Text);
                student.MobilePhone = FormatPhoneNumber(txtCelular.Text);
                student.Address = txtDireccion.Text;
                student.Carnet = FormatPhoneNumber(txtCarnet.Text);
                student.Observations = txtObservaciones.Text;

                repo.Save();
                MessageBox.Show(""Se guardo el registro exitosamente."",
                    ""Exito!"",
                    MessageBoxButtons.OK,
                    MessageBoxIcon.Information,
                    MessageBoxDefaultButton.Button1);                
                this.Close();
            }

        }

        private string FormatPhoneNumber(string p)
        {
            return p.Insert(3, ""-"");
        }

        private void btnClear_Click(object sender, EventArgs e)
        {
            ClearForm();
        }

        private void ClearForm()
        {
            Action<Control.ControlCollection> func = null;

            func = (controls) =>
            {
                foreach (Control control in controls)
                    if (control is TextBox)
                        (control as TextBox).Clear();
                    else
                        func(control.Controls);
            };

            func(Controls);
        }
    }
} I don't know how to improve this class because every line of code is needed."
344,"Look at your code within this block inside the SaveInformation method. if (IsCreating) 
{
   // code here
}
else
{
   // and here
} Start refactoring with this. How many lines of code are actually different here? Outside of a different object name ( newStudent vs. student ), there are not very many. Looks to me like you can create a method with the Student object as a parameter so that you can populate each of the relevant attributes."
345,"You can simplify SaveInformation: private void SaveInformation()
{
    if (IsCreating)
    {
        Student newStudent = new Student();
        repo.Add(newStudent);
    }

    Int64 gradeId = Convert.ToInt64(cmbGradeParalelo.SelectedValue);
    newStudent.IDGrade = gradeId;
    newStudent.RUDE = Convert.ToInt64(txtRude.Text);

    /*Parents information.*/
    newStudent.FatherName = txtNombrePadre.Text;
    newStudent.FatherProfession = txtProfesionPadre.Text;
    newStudent.MobilePhoneFather = FormatPhoneNumber(txtCelularPadre.Text);
    newStudent.PlaceofWorkFather = txtLugarDeTrabajoPadre.Text;

    newStudent.MotherName = txtNombreMadre.Text;
    newStudent.MotherProfession = txtProfesionMadre.Text;
    newStudent.MobilePhoneMother = FormatPhoneNumber(txtCelularMadre.Text);
    newStudent.PlaceofWorkMother = txtLugarDeTrabajoMadre.Text;

    /*newStudent information*/
    newStudent.Name = txtNombre.Text;
    newStudent.FatherLastName = txtApellidoPaterno.Text;
    newStudent.MotherLasteName = txtApellidoMaterno.Text;
    newStudent.DateOfBirth = dtpFechaNacimiento.Value.ToShortDateString();
    newStudent.PlaceOfBirth = txtLugarNacimiento.Text;
    newStudent.Sex = sexoMasculino.Checked ? sexoMasculino.Text : sexoFemenino.Text;
    newStudent.Telephone = FormatPhoneNumber(txtTelefono.Text);
    newStudent.MobilePhone = FormatPhoneNumber(txtCelular.Text);
    newStudent.Address = txtDireccion.Text;
    newStudent.Carnet = FormatPhoneNumber(txtCarnet.Text);
    newStudent.Observations = txtObservaciones.Text;

    repo.Save();
    MessageBox.Show(""Se guardo el registro exitosamente."",
            ""Exito!"",
            MessageBoxButtons.OK,
            MessageBoxIcon.Information,
            MessageBoxDefaultButton.Button1);

    if (IsCreating)
    {
        ClearForm();
    }
    else
    {
        this.Close();
    }
} The second one is a style thing. Some people like this others hate it. private void SetSex(string p)
    {
        sexoMasculino.Checked = (p == ""M"");
        sexoFemenino.Checked  = !sexoMasculino.Checked;
    } Additional note: It is unclear from the given text if p will have already been sanitized. As a result (and depending on expected usage) you want to also check for ""m"" (if this is a possibility)."
346,"Generating filesystem paths from a fixed string. It's clever, but makes me vomit a little: file = '0123456789abcdef123'

path = os.sep.join([ file[ x:(x+2) ] for x in range(0,5,2) ])"
347,"Is there are reason you're not just doing: path = os.sep.join([file[0:2], file[2:4], file[4:6]]) I think that my version is a little easier to parse (as a human), but if you need to extend the number of groups, your code is more extensible. Edit: and if we're looking for things that are easy to read but not necessarily the best way to do it... slash = os.sep
path = file[0:2] + slash + file[2:4] + slash + file[4:6]"
348,"Solution with no conditional branching. Swapping space for time optimization. Simplified algorithm: void removeForbiddenChar(string* s)
{
    for (string::iterator it = s->begin() ; it < s->end() ; ++it)
    {
        // replace element with their counterpart in the map
        // This replaces forbidden characters with space.
        (*it) = charMap[*it];
    }
} Or the C++0x version: void removeForbiddenChar(std::string* s)
{
    std::transform(s->begin(), s->end(), [](char c) => {return charMap[c];});
} Just need the data: char    charMap[] =
                            // The majority of characters in this array
                            // map the poistion to the same character code.
                            //  charMap['A']  == 'A'
                            // For forbidden characters a space is in the position
                            //  charMap['<']  == ' '
                            //  Note: \xxx is an octal escape sequence
                            ""\000\001\002\003\004\005\006\007""
                            ""\010\011\012\013\014\015\016\017""
                            ""\020\021\022\023\024\025\026\027""
                            ""\030\031\032\033\034\035\036\037""
                            ""\040\041 \043\044\045\046\047"" // replaced \042("") with space
                            ""\050\051\052\053\054\055\056 "" // replaced \057(/) with space
                            ""\060\061\062\063\064\065\066\067""
                            ""\070\071 \073 \075  "" // replaced \072(:)\074(<)\076(>)\077(?) with space
                            ""\100\101\102\103\104\105\106\107""
                            ""\110\111\112\113\114\115\116\117""
                            ""\120\121\122\123\124\125\126\127""
                            ""\130\131\132\133 \135\136\137"" // replaced \134(\)
                            ""\140\141\142\143\144\145\146\147""
                            ""\150\151\152\153\154\155\156\157""
                            ""\160\161\162\163\164\165\166\167""
                            ""\170\171\172\173\174\175\176\177""
                            ""\200\201\202\203\204\205\206\207""
                            ""\210\211\212\213\214\215\216\217""
                            ""\220\221\222\223\224\225\226\227""
                            ""\230\231\232\233\234\235\236\237""
                            ""\240\241\242\243\244\245\246\247""
                            ""\250\251\252\253\254\255\256\257""
                            ""\260\261\262\263\264\265\266\267""
                            ""\270\271\272\273\274\275\276\277""
                            ""\300\301\302\303\304\305\306\307""
                            ""\310\311\312\313\314\315\316\317""
                            ""\320\321\322\323\324\325\326\327""
                            ""\330\331\332\333\334\335\336\337""
                            ""\340\341\342\343\344\345\346\347""
                            ""\350\351\352\353\354\355\356\357""
                            ""\360\361\362\363\364\365\366\367""
                            ""\370\371\372\373\374\375\376\377"";"
349,"I have no idea what you're trying to do here, but it looks like you're splitting a string into groups of two a specified number of times? Despite the magic constants, etc. there's really no better way to do it, but I think there's certainly a better way to format it (I'm assuming these are directories since you're using os.sep): The below is I think a more clear way to write it: file = '0123456789abcdef123'
dir_len = 2
path_len = 3

path = os.sep.join(file[ x:(x+2) ] for x in range(0, dir_len * path_len-1, dir_len)) Note that the [] around the list comprehension is gone - it's now a generator . For this example it really doesn't matter which one you use, but since this is Code Review generators are another Python concept you should look at."
350,"A few semantic issues: Do not use <b> tags. If you must, you can use <strong> , or even better, <span class=""bold""></span> , and then style the class in your CSS. Do not use <i> tags. If you must, you can use <em> , or even better, <span class=""italic""></span> , and then style the class in your CSS. Do not use <br /> tags for spacing. If you require spacing, use margin-bottom or padding-bottom ."
352,"Sorry folks, I cannot comment on anyone's reply because of my points. But I would refactor Martin York's SetSex() method to look like this: private void SetSex(string p)
{
      sexoMasculino.Checked = p.Equals(""m"", StringComparison.OrdinalIgnoreCase);
      sexoFemenino.Checked = !sexoMasculino.Checked;            
}"
353,"Here is what's wrong with your code: Do not use variable names like _o . Get an editor with good auto-completion. typeof _o != 'object' does not do what you think it does: typeof([1,2]) // ""object"" .
In general, doing those kinds of checks is a code smell. if (!isNaN(parseInt(loc))) loc = parseInt(loc); . Confusing and not needed. JavaScript: ['a', 'b'][""1""] // 'b' . Same goes for the other isNaN in . Do not do that check. null is a value, but what you want to return is the lack of value. It is undefined in JavaScript, and it is what will be returned if there is no value. Consider using split instead of indexOf and substring . It is much faster and makes the code more readable. So, here is a neat version for you: function chained(obj, chain, value){
    var assigning = (value !== undefined);
    // split chain on array and property accessors
    chain = chain.split(/[.\[\]]+/);       
    // remove trailing ']' from split   
    if (!chain[chain.length - 1]) chain.pop();
    // traverse 1 level less when assigning
    var n = chain.length - assigning; 
    for (var i = 0, data = obj; i < n; i++) {
        data = data[chain[i]];
        // if (data === undefined) return; // uncomment to handle bad chain keys      
    }

    if (assigning) {
        data[chain[n]] = value;
        return obj;
    } else {
        return data;       
    }
} Blogged: http://glebm.blogspot.com/2011/01/javascript-chained-nested-assignment.html Please come up with further improvements :)"
354,"Genetic algorithm for Clever Algorithms project. I wrote a bunch of Ruby code for a book project I've just finished. One criticism is that it is fine code but not very ""ruby like"". I agree my style was simplified for communication reasons, and although it's procedural code, it still feels ""ruby-like"" to me. For the representative example below, any ideas on making it more ""Ruby like""? # Genetic Algorithm in the Ruby Programming Language

# The Clever Algorithms Project: http://www.CleverAlgorithms.com
# (c) Copyright 2010 Jason Brownlee. Some Rights Reserved. 
# This work is licensed under a Creative Commons Attribution-Noncommercial-Share Alike 2.5 Australia License.

def onemax(bitstring)
  sum = 0
  bitstring.size.times {|i| sum+=1 if bitstring[i].chr=='1'}
  return sum
end

def random_bitstring(num_bits)
  return (0...num_bits).inject(""""){|s,i| s<<((rand<0.5) ? ""1"" : ""0"")}
end

def binary_tournament(pop)
  i, j = rand(pop.size), rand(pop.size)
  j = rand(pop.size) while j==i
  return (pop[i][:fitness] > pop[j][:fitness]) ? pop[i] : pop[j]
end

def point_mutation(bitstring, rate=1.0/bitstring.size)
  child = """"
   bitstring.size.times do |i|
     bit = bitstring[i].chr
     child << ((rand()<rate) ? ((bit=='1') ? ""0"" : ""1"") : bit)
  end
  return child
end

def crossover(parent1, parent2, rate)
  return """"+parent1 if rand()>=rate
  point = 1 + rand(parent1.size-2)
  return parent1[0...point]+parent2[point...(parent1.size)]
end

def reproduce(selected, pop_size, p_cross, p_mutation)
  children = []  
  selected.each_with_index do |p1, i|
    p2 = (i.modulo(2)==0) ? selected[i+1] : selected[i-1]
    p2 = selected[0] if i == selected.size-1
    child = {}
    child[:bitstring] = crossover(p1[:bitstring], p2[:bitstring], p_cross)
    child[:bitstring] = point_mutation(child[:bitstring], p_mutation)
    children << child
    break if children.size >= pop_size
  end
  return children
end

def search(max_gens, num_bits, pop_size, p_crossover, p_mutation)
  population = Array.new(pop_size) do |i|
    {:bitstring=>random_bitstring(num_bits)}
  end
  population.each{|c| c[:fitness] = onemax(c[:bitstring])}
  best = population.sort{|x,y| y[:fitness] <=> x[:fitness]}.first  
  max_gens.times do |gen|
    selected = Array.new(pop_size){|i| binary_tournament(population)}
    children = reproduce(selected, pop_size, p_crossover, p_mutation)    
    children.each{|c| c[:fitness] = onemax(c[:bitstring])}
    children.sort!{|x,y| y[:fitness] <=> x[:fitness]}
    best = children.first if children.first[:fitness] >= best[:fitness]
    population = children
    puts "" > gen #{gen}, best: #{best[:fitness]}, #{best[:bitstring]}""
    break if best[:fitness] == num_bits
  end
  return best
end

if __FILE__ == $0
  # problem configuration
  num_bits = 64
  # algorithm configuration
  max_gens = 100
  pop_size = 100
  p_crossover = 0.98
  p_mutation = 1.0/num_bits
  # execute the algorithm
  best = search(max_gens, num_bits, pop_size, p_crossover, p_mutation)
  puts ""done! Solution: f=#{best[:fitness]}, s=#{best[:bitstring]}""
end"
355,"An easy one is to remove the return at the end of each method. Ruby automatically does a return of the last value. It's actually an extra method call to use return . The only time you specifically need to use return is You don't even need to use return if you are returning multiple values: def f
  [1,2]
end

a,b = f Again, using return costs an extra method call and those add up. If you can optimize your code by not using them you've just given yourself some free optimization."
356,"Hibernate transaction advice. I'm new to Hibernate so I need some advice/direction on doing Transactions. I have a DAO like public class MyDao extends HibernateDaoSupport implements IMyDao {

 @Override
 public Foo getFoo(int id) {

  return (Foo)getHibernateTemplate().load(Foo.class, id);

 }
} With this setup (using HibernateDaoSupport), will Hibernate/Spring handle transactions for me? Some of the examples I see say yes, others show using Transaction tx = getHibernateTemplate().getSessionFactory().getCurrentSession().beginTransaction(); to get a Transaction in every DAO method. Right now I'm assuming my minimal DAO is correct but I want to do a ""larger"" transaction that includes a couple of Hibernate calls in one method. Would I use the manual Transaction method there? Do I have to use it everywhere? Thanks."
357,Ruby library is quite powerful: onemax(bitstring) can be simply bitstring.count('1') random_bitstring(num_bits) is probably better off implemented as rand(2**num_bits).to_s(2) The first thing to check out is this http://ruby-doc.org/core-2.0/Enumerable.html
358,"I know little about javascript, and thought yours solution is fine.
glebm's code seems not working for parse_obj_key(obj, ""a.c.c.c"", 2) I trying to modify your code to a recursion style, and it works, the ""new object"" goes wrong on my firefox, so I change it to = {} function parse_obj_key(obj, loc, val) {
    if(!obj || typeof obj != 'object') {
        alert(""error"")
        return null
    }
    var pos = loc.indexOf('.');
    var part = loc.substring(0, pos);
    var endpart = loc.substring(pos+1);

    if (!isNaN(parseInt(part)))
        part = parseInt(part);

    if (pos === -1) {
        if (val) {
            obj[loc] = val
            return obj
        }
        else
            return obj[loc]
    }

    if (val) {
        if (!(part in obj)) 
            obj[part] = {}

        parse_obj_key(obj[part], endpart, val)
        return obj
    }
    else {
        return parse_obj_key(obj[part], endpart, val)
    }
}"
359,"Android ListAdapter design advice. I want to write an Android ListAdapter to serve data from a database that look like this: CREATE TABLE note (_id integer primary key autoincrement,
                   content text not null)
CREATE TABLE tag (_id integer primary key autoincrement,
                  name text not null);
CREATE TABLE relation (_id integer primary key autoincrement,
                       noteid integer not null,
                       tagid integer not null,
                       idx integer not null); I use this database to store notes and their associated tags as an ordered list. One requirement of the ListAdapter is that it must be able to update the ListView contents if the underlying data changes. I can query all the notes in the database with this query: SELECT note._id AS noteid, 
       note.content, 
       relation.idx AS tagidx,
       tag.name
FROM note
LEFT JOIN relation ON (relation.noteid = note._id)
LEFT JOIN tag ON (tag._id = relation.tagid)
ORDER BY noteid, tagidx; Which will give me results looking like this (null values shown for clarity): 0|foo bar baz|0|x
1|hello world|null|null
2|one more nn|0|yy
2|one more nn|1|y As you can see, a note with more than one tag will be located on more than one row in the result. This means that I can't look at the cursor size to determine the number of notes, I need to traverse the entire Cursor to get a count. I don't want to do that. The solution I have come up with so far is to use two cursors: one with the query mentioned above and one with a query containing the number of rows in the notes table ( select count(*) from notes ). In the constructor I call intializeCursors() : private void initializeCursors() {
    notesCursor.moveToFirst();
    countCursor.moveToFirst();
    count = countCursor.getInt(0);
} I have implemented getItem() like this: public Note getItem(int position) {
    // notes is a List of notes that we have already read.
    if (position < notes.size()) { 
        return notes.get(position);
    }

    int cursorPosition = notes.size();
    while (cursorPosition <= position) {
        // Creates a note by reading the correct number of rows.
        Note note = NotesDb.noteFrom(notesCursor); 
        notes.add(note);
        ++cursorPosition;
    }
    return notes.get(position);
} The adapter assumes that the cursors are being managed by some Activity that has called startManagingCursor() on them. So far so good, I guess. The problem is now how to handle the cursor being requeried . Since I have two cursors I need to register listeners for both of them and when I have received onChange() for both of them I can initializeCursors() and notify any listeners registered to my ListAdapter of a change in the its data. The requery scenario is the actual reason that I needed two cursors in the first place. I have not figured out a way to count the number of notes in a required cursor other than asking the database using another cursor. This is the best I have so far. I want to check the sanity of this approach with this group. :-) Is this two cursor approach too complicated? Perhaps I have missed some part of the API that solves this nicely for me?"
361,"public StudentInformation()
    {
        InitializeComponent();
        LoadComboBoxes();
        LoadBranding();
        IsCreating = true;
    }

    public StudentInformation(int studentID)
    {
        InitializeComponent();
        LoadComboBoxes();
        LoadBranding();

        student = repo.FindStudent(studentID);
        LoadStudentInformation(student);

    } can be refactored to, // default IsCreating to true
bool IsCreating = true;

public StudentInformation()
    {
        InitializeComponent();
        LoadComboBoxes();
        LoadBranding();
    }

    public StudentInformation(int studentID) : this()
    {
        IsCreating = false;
        student = repo.FindStudent(studentID);
        LoadStudentInformation(student);
    } Also there is lot of code in your Form control class which should be part of controller (MVC) / presenter (MVP) like using those repositories also save information should be with controller part to notify the model to save data."
362,"""Do you owe the government?"" classes. Should my class pass parameters internally or reference class level scoped variables? I'm not sure on the best approach or style for procedure calls that have parameters. Should I go with the class level scoped variables? public class YouOweTheGovernment
{
    public float AmountToPay { get; private set; }
    public float ArbitraryTaxRate { get; private set; }
    public float Salary { get; private set; }

    public YouOweTheGovernment(float taxRate, float salary)
    {
        this.ArbitraryTaxRate = taxRate;
        this.Salary = salary;

        CalculateAmount();
    }

    private void CalculateAmount()
    {
        this.AmountToPay = (this.Salary * (this.ArbitraryTaxRate / 100));
    }
} Or explicitly pass parameters into a procedure? public class YouOweTheGovernment
{
    public float AmountToPay { get; private set; }
    public float ArbitraryTaxRate { get; private set; }
    public float Salary { get; private set; }

    public YouOweTheGovernment(float taxRate, float salary)
    {
        this.ArbitraryTaxRate = taxRate;
        this.Salary = salary;

        CalculateAmount(this.Salary, this.ArbitraryTaxRate);
    }

    private void CalculateAmount(float salary, float taxRate)
    {
        this.AmountToPay = (salary * (taxRate / 100));
    }
} In my contrived example I think the first is clearer, but as a class grows in size and complexity it would make it harder to track what is coming from where."
363,"Since this is Code Review, I will first start with mentioning that you are not validating the logical correctness of your numbers, salary can't be negative, for example (Unless you're an evil employer). You may have left it out to shorten the question, but consider it a reminder. If the Calculate amount function does just this single line, then a better approach for you is to take its line this.AmountToPay = (salary * (taxRate / 100)); and put it in the constructor as well. If it is one line, why call a function, load a stack frame and store registers? Just inline that line of logic in the constructor itself, this way AmountToPay will be initialized with the values from the constructor's arguments, so its access will be faster because it's a local variable (beating the first example), and the logic that updates the AmountToPay will not need a function call including stacking up arguments (beating the second example). If, however, you plan on creating more than one constructor, then keep all the shared code in one place (An init() function).
For example suppose we wanted another constructor which also took your loans, then you might do this. YouOweTheGov(float taxRate, float salary, float loans)
{
... Process logic relating to loans..
init(taxRate,salary); // this function updates ArbitraryTaxRate,Salary,AmountToPay
} Keep the shared logic in one place, don't call a function if it does a very small piece of code at the constructor because of function preparation overhead (and construction will happen a lot, especially when passing or returning objects!), but rather add the code in the constructor itself. If you have more than one constructor then keep all shared code in a function (don't repeat code!)"
364,"ASP.net custom user control design. I've built a custom control that generates a tab style navigation.  Each page might have different tabs to display, the aim was to modularise it so I can make global changes to all the tabs. TabMenu.ascx <%@ Control Language=""C#"" AutoEventWireup=""true"" CodeFile=""TabMenu.ascx.cs"" Inherits=""TabMenu"" %>

<asp:Panel runat=""server"" ID=""TabMenuWrapper"" CssClass=""tabWrapper"">

</asp:Panel> TabMenu.ascx.cs using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Collections;

public partial class TabMenu : System.Web.UI.UserControl
{
    public string TabGroup { get; set; }    // The tab group this control belongs to
    public int SelectedTab { get; set; }    // Index of selected tab

    protected void Page_Load(object sender, EventArgs e)
    {
        ArrayList tabCollection = new ArrayList();
        MenuTab myTab;

        // Artorking tab group
        if (this.TabGroup.ToLower() == ""artwork"")
        {
            myTab = new MenuTab() { linkURL = ""artworkHome.aspx"", linkText = ""First!"" };
            tabCollection.Add(myTab);

            myTab = new MenuTab() { linkURL = ""artworkHome.aspx"", linkText = ""Second!"" };
            tabCollection.Add(myTab);

            myTab = new MenuTab() { linkURL = ""artworkHome.aspx"", linkText = ""3rd!"" };
            tabCollection.Add(myTab);

            myTab = new MenuTab() { linkURL = ""artworkHome.aspx"", linkText = ""Fourth!"" };
            tabCollection.Add(myTab);            
        }

        // Add tabs to the page
        for (int i = 0; i < tabCollection.Count; i++)
        {
            MenuTab thisTab = ((MenuTab)(tabCollection[i]));
            thisTab.CreateTab();

            if (i == this.SelectedTab)
            {
                thisTab.tabPanel.CssClass = ""tab tabSelected"";
            }

            TabMenuWrapper.Controls.Add(thisTab.tabPanel);
        }
        TabMenuWrapper.Controls.Add(new Panel(){CssClass = ""clear""});

    }
}

// A menu tab
public class MenuTab
{
    public string linkURL;
    public string linkText;
    public HyperLink tabLink;
    public Panel tabPanel;

    // Create internal controls
    public void CreateTab()
    {
        this.tabLink = new HyperLink() { NavigateUrl = this.linkURL, Text = this.linkText };
        this.tabPanel = new Panel() { CssClass = ""tab"" };
        this.tabPanel.Controls.Add(this.tabLink);
    }
} Used as follows: <CrystalControls:TabMenu runat=""server"" ID=""TopMenu"" TabGroup=""Artwork"" SelectedTab=""1"" /> And renders like: <div class=""tab"">

  <a href=""Controls/artworkHome.aspx"">First!</a>

 </div><div class=""tab tabSelected"">

  <a href=""Controls/artworkHome.aspx"">Second!</a>

 </div><div class=""tab"">

  <a href=""Controls/artworkHome.aspx"">3rd!</a>

 </div><div class=""tab"">

  <a href=""Controls/artworkHome.aspx"">Fourth!</a>

 </div><div class=""clear"">



 </div>

</div> Is this a good design?"
365,"Struct to web style string. I've had to make several functions to turn some structures into strings. I am a still green when it comes C so I am unsure if I am doing this a very awkward way. The system I am coding for does not have snprintf, I know that would be far more elegant, however I cannot use it.
Any advice? int device_to_string(char* const asString, pDevice dev, size_t maxLength)
{
  char* ipAsString;
  size_t actualLength;
  struct in_addr addr;

  if (dev == NULL)
  {
    return NULL_ERROR;
  }

  addr.s_addr = dev->ip;
  ipAsString = inet_ntoa(addr);

  actualLength = strlen(""name="")  + strlen(dev->name) +
                 strlen(""&ip="")   + strlen(ipAsString) +
                 strlen(""&mac="")  + strlen(dev->mac)  +
                 strlen(""&type="") + strlen(dev->type) + 1;

  if (actualLength > maxLength)
  {
    return SIZE_ERROR;
  }

  strncat(asString, ""name="",    strlen(""name=""));
  strncat(asString, dev->name,  strlen(dev->name));
  strncat(asString, ""&ip="",     strlen(""&ip=""));
  strncat(asString, ipAsString, strlen(ipAsString));
  strncat(asString, ""&mac="",    strlen(""&mac=""));
  strncat(asString, dev->mac,   strlen(dev->mac));
  strncat(asString, ""&type="",   strlen(""&type=""));
  strncat(asString, dev->type,  strlen(dev->type));

  asString[actualLength] = '\0';

  return NO_ERROR;
}"
366,"Simple Tic-Tac-Toe PHP/Pure HTML. I've been doing a simple Tic-Tac-Toe with PHP, generating only HTML code. A few notes: I didn't bother yet to give an AI to the opponents (the Os), and it is intentional. There is no CSS style to it, I intend to append it with a css file. tictactoe.php is naturally the name of the script itself, so each links are refering to the page itself. Now I don't know if I did everything correctly, here are my concern: If I want to expand the functionalities of the game in the future (adding javascript, opponent AIs, new game features), I fear that the structure of the code is not adapted for it. Should I change my code so it is Object Oriented? EDIT I have in mind to add new feature to the game, like powers who would change the state of the board, like rewind to a previous state and; some css and javascript in a non-intrusive way and add some way to check if options are disabled (like javascript/flash), or check for the version of the browser for html5/css3 features. As for now, it is easy to ""cheat"" and directly introduce the wished board state. I would like to prevent that, and if possible without using javascript, as I want the game to be playable also without it. <table>
<?php
//Determine if a player as aligned three of its symbols and return the id of the player (1
//for X Player, -1 for O Player(Computer)). Otherwise return 0;
function isWinState($board){
    $winning_sequences = '012345678036147258048642';
    for($i=0;$i<=21;$i+=3){
        $player = $board[$winning_sequences[$i]];
        if($player == $board[$winning_sequences[$i+1]]){
            if($player == $board[$winning_sequences[$i+2]]){
                if($player!=0){
                    return $player;
                }
            } 
        }   
    }
    return 0;
}

//Player O plays its turn at random
function OsTurn($board){
    if(in_array(0,$board)){
        $i = mt_rand(0,8);
        while($board[$i]!=0){
            $i = mt_rand(0,8);
        }
        $board[$i]=-1;
    }
    return $board;
}

$winstate = 0;
$values = array();

if(empty($_GET['values'])){
    //initializing the board
    $values = array_fill(0,9,0);
    //determine who begins at random
    if(mt_rand(0,1)){
        $values = OsTurn($values);
    }
}else{
    //get the board
    $values = explode(',',$_GET['values']);
    //Check if a player X won, if not, player 0 plays its turn.
    $winstate = isWinState($values);
    if($winstate==0){
        $values = OsTurn($values);
    }
    //Check if a player 0 won
    $winstate = isWinState($values);    
}
//Display the board as a table
for($i=0;$i<9;$i++){
    //begin of a row
    if(fmod($i,3)==0){echo '<tr>';}
    echo '<td>';
    //representation of the player token, depending on the ID
    if($values[$i]==1){
        echo 'X';
    }else if($values[$i]==-1){
        echo 'O';
    }else{
        //If noone put a token on this, and if noone won, make a link to allow player X to
        //put its token here. Otherwise, empty space.
        if($winstate==0){
            $values_link = $values;
            $values_link[$i]=1;
            echo '<a href=""tictactoe.php?values='.implode(',',$values_link).'"">&nbsp;</a>';
        }else{
            echo '&nbsp;';
        }
    }
    echo '</td>';
    //end of a row
    if(fmod($i,3)==2){echo '</tr>';}
}
?>
</table>
<?php
//If someone won, display the message
if($winstate!=0){
    echo '<p><b>Player '.(($winstate==1)?'X':'O').' won!</b></p>';
}
?>"
367,"Yeah, without snprintf and sprintf it gets a bit tedious, but I think this code is actually quite clear. You use your horizontal and vertical whitespace very well, and it's clear what you're doing with each block of code. You have also controlled for any possible issues that might come up (null pointer, insufficient buffer length, etc). Maybe there's a more concise way to do it, but in terms of clarity and maintainability I think this code will suffice."
368,"Depending on how you feel about the use of Objective-C 2.0 properties you can you can: window.level = kCGScreenSaverWindowLevel;
[window setOpaque:NO];
window.styleMask = 0;
window.backgroundColor = [NSColor colorWithCalibratedWhite:0.0 alpha:0.3];
window.alphaValue = 0;

[window setFrame:[window frameRectForContentRect:window.screen.frame] display:YES animate:YES];

[window makeKeyAndOrderFront:self];
[window.animator setAlphaValue:1.0]; I had programmed in C# for many years before taking up Objective-C and I still find the bracket notation hard to read at times. For my own readability I would would also introduce a variable for the new frame. NSRect newFrame = [window frameRectForContentRect:window.screen.frame];
[window setFrame:newFrame display:YES animate:YES];"
369,"Parsing console application arguments. In our console app, the parsing of application arguments is done like so: using System.Linq;

namespace Generator
{
    internal class Program
    {
        public static void Main(string[] args)
        {
            var param1 = args.SingleOrDefault(arg => arg.StartsWith(""p1:""));
            if (!string.IsNullOrEmpty(param1))
            {
                param1  = param1.Replace(""p1:"", """");
            }
            //...
        }
    }
} It's supposed to be called like this: `Generator.exe p1:somevalue` Is there a better/simpler way to parse arguments?"
370,You could use foreach for iterating through the agruments and then for your argument with index 1 you could use regular expression to retrieve parsed text after p1:
371,"With such an implementation you will have to repeat yourself for each param. Alternative: var parsedArgs = args
    .Select(s => s.Split(new[] {':'}, 1))
    .ToDictionary(s => s[0], s => s[1]);
string p1 = parsedArgs[""p1""];"
372,"First a note on your general design: You use hashmaps to represent members of the population. I'd rather recommend you create a little class to represent them: class Individual
  include Comparable

  attr_reader :bitstring, :fitness

  def initialize(bitstring)
    @bit_string = bitstring
    @fitness = onemax(bitstring)
  end

  def <=>(other)
    fitness <=> other.fitness
  end
end You'll now use Individual.new(bitstring) to create a new individual (which will automatically calculate its own fittness) and individual.bitstring and individual.fitness to get an individual's bitstring or fitness respectively. This has the benefit that now the logic of how to calculate an individuals fitness lives in the Individual class instead of in multiple place in the search method. This is a more natural place for it and makes it easier to find and change should you ever decide to use a different fitness function. Also note that I included Comparable, implementing <=> based on fitness. This means that you can now compare individuals to each other such that an individual is greater than another if and only if its fitness is greater. This allows you to use > on two individuals as well as methods like max to get the individual with the greatest fitness out of an array of individuals. It also allows you to call sort on array of individuals without passing a block. This will simplify your code in some places. In a comment you mentioned that you don't want to use classes. However I still think that it would greatly improve your design to have the logic for creating new individuals and calculating their fitness in one single place, so you should at least factor it out into a method like this: def create_individual(bitstring)
    {:bitstring => bitstring, :fitness => onemax(bitstring)}
end Now some notes on particular pieces of code: bitstring.size.times {|i| sum+=1 if bitstring[i].chr=='1'} As has already been mentioned, this can easily be replaced with a call to count . However as a general note I want to point out that it's good practice to avoid index-based loops wherever possible, so if count did not exist, I'd write the above like this: bitstring.each_char {|c| sum+=1 if c == '1'} Or for 1.8.6 compability: bitstring.each_byte {|b| sum+=1 if b.chr == '1'} (0...num_bits).inject(""""){|s,i| s<<((rand<0.5) ? ""1"" : ""0"")} When dealing with inject , it's usually a good idea to keep the function simple, so it's more easily understandable. Often you can separate the logic of generating the elements from the logic of combining them, by using map before inject . This would make your code look like this: (0...num_bits).map {|i| (rand<0.5) ? ""1"" : ""0""}.inject("""") {|s,i| s<<i} Now there's two things to notice here: Whenever you call map on a range from 0 to some size, you might rather want to use Array.new(size) {block} which creates an array of the given size by calling the block size times. The smaller inject is now much easier to understand, but happens to be equivalent to calling join , so let's just do that. So your code becomes: Array.new(num_bits) { (rand<0.5) ? ""1"" : ""0"" }.join This way you create a temporary array, which you didn't before, but on the other hand your code became much more understandable, so that little inefficiency should be worth it. (pop[i][:fitness] > pop[j][:fitness]) ? pop[i] : pop[j] Thanks to the Individual class this now looks like this: (pop[i] > pop[j]) ? pop[i] : pop[j] This isn't much different, but note that it now has the form (x > y) ? x : y , which incidentally means ""the maximum of two objects"". In other words we can simplify this code by using the max method: [ pop[i], pop[j] ].max bitstring.size.times do |i|
  bit = bitstring[i].chr Again this should be bitstring.each_char do |bit| or bitstring.each_byte do |b| bit = b.chr . """"+parent1 if rand()>=rate I'm not sure what the """"+ is supposed to do here. Remove it. Note that """"+x is not a way to turn x into a string in ruby (like it would be in e.g. Java). Calling """"+x when x is not a string (or ""duck-string""), will cause a type error. The fact that you're using """"+ to create a copy is less than obvious (thus the above paragraph). If you use the dup method, whose sole purpose it is to create a copy, instead, it will be much more understandable. I'd also change the crossover method to return an individual rather than a string, which makes the code a bit simpler."
373,"There isn't really a reason to make this ""more object-oriented"" if you don't need to. To add more AI constructs, for example, you can do: switch ($aiLevel) {
   case 1: $values = $OsTurn($values);
   case 2: $values = $betterAi($values);
   case 3: $values = $unbeatableAi($values);
} Adding more features could be done in a similiar manner. I'm not sure exacly wht you have in mind, so I can only make some general comments. Break down everything into functions, and make sure that it's easy to see the flow of the program. The way you've structured your code is good. It should not be difficult to add more features if you use similiar style. CSS won't affect your script; it just changes how the page looks. You'll just need to be sure you use the right elements when outputting html. Javascript may be trickier, but there are many ways of doing that including form elements (possibly hidden) and page submits. There may be other ways that I'm not aware of as I'm not primarily a web programmer. I believe when you are talking about cheating, you're saying that you can send a winning board value set to the script by typing the URL yourself. To prevent this you need a way to preserve state. A cookie would be an easy way to start; store the current state of the board in it after every page call, and check that the only change was the placing of another piece. A more robust, but somewhat more involved, solution would be to use session variables to store the state. This would avoid the ""cookys are bad"" problem and the possibility that someone might fake the cooky!"
374,"An idiom to use the same view function to create or edit an object?. Here is the skeleton of my (first!) Django app: # models.py
class Task(models.Model):
    description = models.CharField(max_length = 200)
    ...

# forms.py
class AddTaskForm(forms.ModelForm):
    class Meta:
        model = Task I then created two views using AddTaskForm : one to create a new instance, the other to edit an existing one.  I was able to refactor those two views (and the function they call) into one, but I'm not sure I got the best possible result... # urls.py:
(r'^yata/add_task/$',              'yata.views.edit'),
(r'^yata/(?P<task_id>\d+)/edit/$', 'yata.views.edit'),

# views.py
def edit(request, task_id = None):
    t = get_object_or_404(Task, pk=task_id) if task_id else None
    if request.method == 'POST':
        form = AddTaskForm(request.POST, instance=t)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/yata/')
    else:
        form = AddTaskForm(instance = t)

    # Either the form was not valid, or we've just created it
    d = {'form': form}
    if task_id:
        # The template needs the id to decide if the form's action
        # is .../add_task or .../{{id}}/edit
        d['id'] = t.id
    return render_to_response('yata/edit.html', d, 
        context_instance=RequestContext(request)) And here is the corresponding part of the template: # edit.html
{% if id %}
    <form action=""/yata/{{ id }}/edit/"" method=""post"">
{% else %}
    <form action=""/yata/add_task/"" method=""post"">
{% endif %}
{{ form.as_p }}
<input type=""submit"" value=""Save!"" />
</form> Is there a better Django idiom to handle this 'add or create' issue? 
Or can this be considered a correct way?"
375,"I try to use class level scoped variables unless there is a specific reason not to.  My reasoning for this is that it feels cleaner from an API standpoint. Some of the reasons I would pass explicit parameters: Increase the re-usability of the method. Make it clear to sub-types what variables are required for the method. Decouple the method from the specifics of the containing type. I would guess (hope) that there is much more reasoned and academic writing on this topic but I'm far enough removed from my collegiate days to have no idea what the name of that topic would be.  As such, I tend to choose based on what ""feels"" right.  If a method exists simply to clean up another method and/or encapsulate some bit of logic I tend to use a class-level scoped variable."
376,"In addition to the suggestions posted already, I'd recommend going a step farther with your CalculateAmount method: public class YouOweTheGovernment
{
    public float AmountToPay { get; private set; }
    public float ArbitraryTaxRate { get; private set; }
    public float Salary { get; private set; }

    public YouOweTheGovernment(float taxRate, float salary)
    {
        this.ArbitraryTaxRate = taxRate;
        this.Salary = salary;

        this.AmountToPay = CalculateAmount(this.Salary, this.ArbitraryTaxRate);
    }

    private float CalculateAmount(float salary, float taxRate)
    { 
       return (salary * (taxRate / 100));
    }
} Since this removes the side effect assignment, the constructor reads cleaner and that method can be reused more easily. If you don't want an immutable object, you'll have to recalculate every time the salary and taxRate change. But it looks like you do since you have the setters private."
377,"One thing I would personally do would be to move the string concatenation into its own function since I see you have repeated the same 2 lines multiple times: strncat(asString, ""name="",    strlen(""name=""));
strncat(asString, dev->name,  strlen(dev->name)); I'd have something like: void addParam( char *paramString, const char *paramName, const char *paramValue )
{
    strncat( paramString, paramName, strlen( paramName );
    strncat( paramString, paramValue, strlen( paramValue );
} Reduces the length of your function and makes it slightly cleaner, imho."
379,Yes the design looks good but it would be really better if you could replace that ArrayList with a Generic Collection.
380,"I think the appSettings section is a pretty neat solution for something as simple as your example, and I use this frequently over creating config sections, when no hierarchy is required. I do however find the following pattern useful to add consistency to the way appSettings are used, adding some typing, building in the idea of whether the setting is expected to be found in the .config file, and providing the ability to specify a default value. public static class AppSettingsHelper
{
    private static TReturnType LoadAppSetting<TReturnType>(string name, bool required, TReturnType defaultValue)
    {
        // Check for missing settings
        if (!ArrayExt.Contains<string>(ConfigurationManager.AppSettings.AllKeys, name))
        {
            if (required)
                throw new ConfigurationErrorsException(string.Format(""Required setting missing: {0}"", name));
            else
                return defaultValue;
        }

        // Read the setting and return it
        AppSettingsReader reader = new AppSettingsReader();
        return (TReturnType)reader.GetValue(name, typeof(TReturnType));
    }

    //example boolean property
    public static bool IsSomethingSet
    {
        get
        {
            return ApplicationSettingsHelper.LoadAppSetting<bool>(
                ""settingName"",
                true,
                false);
        }
    }

    //int property
    public static int SomeCount
    {
        get
        {
            return ApplicationSettingsHelper.LoadAppSetting<int>(
                ""someCount"",
                true,
                0);
        }
    }
} Use like this: if (AppSettingsHelper.IsSomethingSet)
{
    Console.WriteLine(AppSettingsHelper.SomeCount);
}"
381,"You should also have a variant for explicitly testing return values. For example, CreateFile will return INVALID_HANDLE_VALUE which is !=0 . EDIT: Ah, I think I understand the question now. You want to know how to accomplish this: int x= foo();
if (x==error) { blah(); } in a macro. The easiest way is to split the variable declaration and variable setting: int x;
if ((x= foo())==error) { blah(); } which you can then wrap in a macro: #define MYMACRO(x) if ((x)==error) { blah(); } which you can then use as: int x;
MYMACRO(x= foo());"
382,"Don't store what you can calculate: public class YouOweTheGovernment
{
    public float AmountToPay
    {
        get { return Salary * (ArbitraryTaxRate / 100); }
    }
    public float ArbitraryTaxRate { get; private set; }
    public float Salary { get; private set; }

    public YouOweTheGovernment(float taxRate, float salary)
    {
        this.ArbitraryTaxRate = taxRate;
        this.Salary = salary;
    }
} Your AmountToPay field is basically a cache, and caching is notoriously problematic. Case in point: even your tiny code here has a cache invalidation bug. If you change the tax rate or salary, you aren't recalculating the amount to pay. Every time you add a field, ask yourself ""does this field store unique information that no other field stores?"" If the answer is no, don't create the field. The less state you have, the easier it is to understand your code."
383,"Checking date & time in PHP. Goal: To create a countdown to our next available live stream. Details: We live stream six times a week all (PST).
1. Sunday at 8:00 a.m.
2. Sunday at 10:00 a.m.
3. Sunday at 12:00 p.m.
4. Sunday at 6:30 p.m.
5. Wednesday at 7:00 p.m.
6. Saturday at 10:00 a.m. My approach: I check what day it is and what time it is then create the countdown to the next stream. I'm sure what I have done can be cleaned up and improved, so tell me how. <?php
// Countdown Stuff
$year = date(Y);
$month = date(m);
$month_day = date(d);
$day = date(w);
$hour = date(G);
$min = date(i);
$addDay = 0;

// It's Sunday
if ( $day == 0 ) {
    if ( $hour < 8 ) {
       $hour = 8;
       $min = 0;
    } 
    else if ( $hour < 10 ) {
       $hour = 10;
       $min = 0;
    } 
    else if ( $hour < 12 ) {
       $hour = 12;
       $min = 0;
    }
    else if ( $hour <= 18 && $min < 30 ) {
       $hour = 18;
        $min = 30;
    } 
    else {
     $addDay = 3;
       $hour = 19;
       $min = 0;
    }
} 
// It's Monday
else if ( $day == 1 ) {
    $addDay = 2;
      $hour = 19;
      $min = 0;
} 
// It's Tuesday
else if ( $day == 2 ) {
    $addDay = 1;
      $hour = 19;
      $min = 0;
} 
// It's Wednesday
else if ( $day == 3) {

    if ( $hour < 19 ) {
       $hour = 19;
       $min = 0;
    } else {
     $addDay = 3;
       $hour = 10;
       $min = 0;
    }
} 
// It's Thursday
else if ( $day == 4 ) {
    $addDay = 2;
      $hour = 10;
      $min = 0;
} 
// It's Friday
else if ( $day == 5 ) {
    $addDay = 1;
      $hour = 10;
      $min = 0;
} 
// All that's left is Saturday
else {

    if ( $hour < 10 ) {
       $hour = 10;
       $min = 0;
    } else {
     $addDay = 1;
       $hour = 8;
       $min = 0;
    }
}


$build_date = $year . '-' . $month . '-' . $month_day . ' ' . $hour . ':' . $min . ':00';
$date = new DateTime($build_date);

if ( $addDay ) {
    $date->modify(""+$addDay day"");
}

$date = strtotime($date->format(""Y-m-d G:i:s""));
$now = strtotime(""now"");
$count = $date - $now;
?>

<script type=""text/javascript"">
var myTime = <?=$count?>;
$('#countdown').countdown({ until: myTime}); 
</script>"
384,"It might be better to render the control as an unordered list.  This is more semantically correct and normal practice for menu-type controls (which tabs are, if you think about it)."
385,"Where are CollectionB and CollectionC coming from?  The approach I'd shoot for is to have a variety of factories that all accept the same type of input, and then store them in some type of collection.  For example, if one has a list of objects to be created, one object per line, and the portion of each line before the first blank defines the type of each item, one could have a factories that take a string and yield an appropriately-configured object.  For example, if the input looked like: square 0,5,5,29
line 5,2 19,23 6,8
text 0,29,Hello there! one could have a SquareFactory, LineFactory, and TextFactory all of which inherit from GraphicObjectFactory, which accept a string and return GraphicObject.  One could then have a Dictionary that maps String to GraphicsObjectFactory, and put in it an instance of each of the above mentioned factories.  To allow the file reader to handle more types of graphics objects, just add more factories into the Dictionary."
386,"Having a time parameter for each iteration of a PID loop would imply that it may safely be run at a variable frequency; while there are occasions when that may be unavoidable, and there are ways of handling such variations safely, I would expect most conditions that would cause the sampling loop time to vary would also create considerable 'noise' in the D term, limiting its usefulness. One approach I've not seen discussed is replacing the PID loop with an IIR filter.  A PID loop is a special case of an IIR filter, but with the second tap's time constant being infinitesimal, and the third tap's time constant being nearly infinite.  The difference between the first two taps represents the delta, and the third tap represents the integral.  Using more ""realistic"" time constants for the filter taps yields results which differ from a ""pure"" IIR filter, but in ways that are apt to be beneficial.  Using a short-but-not-infinitesimal time constant on the second stage allows one to reduce the amount of high-frequency noise.  Using a finite time constant on the third term allows one to effectively limit the ""wind-up"".  Although going beyond three stages would make it harder to analyze system behavior, it may allow the PID system to better deal with various delay factors in the real-world system being controlled."
387,"I'd recommend taking advantage of the excellent Mono.Options module.  It's a single .cs file you can drop in to your solution and get full-featured parsing of GNU getopt-style command lines.  (Things like -x -y -z , which is equivalent to -xyz , or -k value , or --long-opt , and so forth.)"
388,"I don't like your 'put' routine.  The 'odd behavior' others have noticed means the algorithm loses one of the main advantages of being 'lock-free': immunity from priority inversion or asynchronously-terminated threads.  If a thread gets waylaid in the middle of a queue-write operation, the queue will be completely broken unless or until the queue finishes its work. The solution is to CompareAndSet the last node's ""next"" pointer before updating the ""tail"" pointer; if the ""last node""'s ""next"" pointer is non-null, that means it's not the last node anymore and one must traverse links to find the real last node, repeat the CompareAndSet on it, and hope it's still the last node."
389,"I don't have time to look over everything, but I noticed you only set $min to something other than 0 once. You could add the following above $build_date , and then remove all the $min = 0; s, and you'd clear up a few lines: if($min == date('i')) {
  $min = 0;
} If it didn't change, which would only happen when you set it to 30 in that one instance, then set it to 0 ."
390,"The second CalculateAmount method is evil.  If a class invariant is supposed to be that AmountToPay is the amount of tax due for Salary and ArbitraryTaxRate , calling CalculateAmount with anything other than those parameters would break the class invariant.  If you want to pass Salary and ArbitraryTaxRate to a method, then that method should either: Be a function which returns the calculated amount but does not disturb anything in the class, or Set the backing fields for Salary and ArbitraryTaxRate to the indicated values, and update AmountToPay appropriately. If you use the first approach, you could opt to make the function static.  It's possible that changes in tax rules might require the function to make use of instance variables that weren't in the original parameter list.  Such a change could be problematic if the function were public (suggesting that perhaps it shouldn't be static) but shouldn't pose any difficulty if it's private."
391,"There's a related question on Stack Overflow . There, the consensus seems to be Mono.Options as already suggested here by josh3736 ."
392,"I have looked at your code and I think that it actually looks pretty clean and straight forward. However, I would suggest that you make it more DRY by using reverse() to figure out what action to assign to the form. views.py: if task_id:
    action = reverse(edit, args=[task_id])
else:
    action = reverse(edit)
d['action'] = action edit.html: <form action=""{{ action }}"" method=""post"">
    {{ form.as_p }}
    <input type=""submit"" value=""Save!"" />
</form>"
393,"A few things that jumped out. In your date() calls you are passing constants instead of strings e.g. you use date(Y) as opposed to date('Y'), this issues a notice error. PHP will assume that you meant a string, but it is best to be explicit. The getdate() function will gives you all that information instead of calling date() 6 times. For what you are wanting to do, I would recommend taking a look at the mktime() function. Once you calculate the next live stream time from your current time, simply pass those values to mktime() and do a time() - mktime() and thats how many seconds you have until the event. mktime produces a UNIX timestamp, so you can pass that to the date() function or into a DateTime object to format, change timezone, etc. If you are going to have a lot of if/elseif statements like that, it would be cleaner to use a switch statement."
394,"I don't like writing a statement that combines both ""fluent"" and ""expression"" syntax for LINQ. (See SO: Which LINQ syntax do you prefer? Fluent or Query Expression ) I also would choose multiple where clauses over a single where with && . So, either: var points = from type in ValidTypes()
    from point in GetData(type)
    where point.Theta > referencePoint.Theta
    where point.Radius > referencePoint.Radius
    select point;

var count = points.Count(); or var count = ValidTypes
    .Select(type => type.GetData())
    .Where(point.Theta > referencePoint.Theta)
    .Where(point.Radius > referencePoint.Radius)
    .Count(); I'd look at the code before & after, and see if one of these lends itself to further refactoring."
395,"Pattern Against Anemic Domain Model. I would like to solicit advice on everyone's thoughts on how best to combat the Anemic Domain Model anti-pattern when building out a system based on web services. One of our goals is to build a set of core web services that expose the most basic services we reuse repeatedly in our organization, which is the creating of domain models.  Right now we have a small library that we share and reuse but as we grow our team it would be much nicer to centralize these basic services.  Over time our systems are going to change as some of the data may come from the cloud (Salesforce.com or AWS) so we're not just isolating basic DAO code in a web service but also application integration . For example, our customer data comes from the accounting, CRM, and order processing systems.  Configuration is a real pain because every app that ships needs to be bundled with the core library and configuration on each system.  I would like to centralize the creation of models, ala, SOA, but retain a rich model higher up in the Service Layer / Facade. If you think in general that this is a bad I'd be interested in hearing why! My thought is to define a domain object Employee that has an EmployeeService injected.  At runtime the EmployeeService implementation is an EmployeeWebServiceClientImpl that implements said interface. EmployeeWebServiceClientImpl uses a web service proxy to the server. On the server-side of the web service we have EmployeeWebService invoking EmployeeDao to query the database.  Could just as easily be a class calling out to Salesforce.com to get data.  We would share a library that contained the domain model and interface so you would deserialize the web service response directly into a class that contained the needed business logic. Below is some example code in order from client to server: //Example of client
public static void main(String[] args) {
    try {
        Employee employee = Employee.getEmployee(""james"");
        if (employee.isEligibleForRaise()) {
            System.out.println(""Give that man a raise!"");
        }
    } catch (RuntimeException e) {
        System.out.println(""Oh no!"");
    }
}


//Employee Domain Object
public class Employee {

  private String name;

  private String username;

  private static EmployeeService service;

  public static Employee getEmployee(String username) {
    return service.getEmployee(username);
  }

  public static List<Employee> getAllEmployees() {
    return service.getAllEmployees();
  }

  public boolean isEmployeeEligibleForRaise() {
    //business logic here
    return true;
  }


//Getters & Setters

 ...
}

//EmployeeWebServiceClientImpl
public class EmployeeWebServiceClientImpl implements EmployeeService {

  //A client web service proxy to our core basic services
  BaseWebServiceProxy proxy;

  @Override
  public Employee getEmployee(String username) {
    return proxy.getEmployee(username);
  }

  @Override
  public List<Employee> getAllEmployees() {
    return proxy.getAllEmployees();
  }
}


//On the server-side we have EmployeeWebService
public class EmployeeWebService implements EmployeeService {

  EmployeeDao employeeDao;

  @Override
  public List<Employee> getAllEmployees() {
    return employeeDao.getAllEmployees();
  }

  @Override
  public Employee getEmployee(String username) {
    return employeeDao.getEmployee(username);
  }
} Is that making sense?  Basically the plan is to keep core business logic in the Employee domain object but isolate the data access logic in a web service. Thoughts?"
397,"Of course, now if your company decides to change streams from Sunday at 8:00am to Tuesday at 2, you're going to have to go in and hack this code. And if you mess up a ';' or '?php' or junior developer passes ""NO WAY"" to strtotime()? Evolve your approach. You should be storing the stream times externally; either in a file or a database. You should be querying those times, doing a strtotime() difference between them and now, then taking the minimum positive element and displaying that."
398,"You're adding a lot of complexity here. Plus, you're going against the point of a Service Layer and Domain Model. Your Domain Model should probably use either Active Record or Data Mapper . The point of a Service Layer is to act as an end point (API) that holds common business logic that deals with integration of domain model objects. Your service layer should just query repositories and delegate calls to process business logic to your domain model (which should hold as much business logic as possible). Injecting it into your domain model adds persistence concerns, which it should not care about."
399,"One could also argue that you're mixing a lot of presentation code with business logic (creation/modification of data). Don't do that. Separate presentation from content . Have the form call a ViewModel/Controller style of object that handles saving student information and contains the repository. Then the form code can focus purely on presentational elements, and the other object can handle validation, modification, etc. Separation of concerns is good, young padawan."
401,"MySQLi_Recordset: blending SPL and Statement/Query results. I've made a SPL-based class named ""Recordset"" that wraps both MySQLi_STMT and MySQLi_Result objects and allows treating either as a 3-dimensional array.  It requires PHP5.3+. I'm pretty bummed about the slow foreach loop over my Recordset object, by the slower internal seek and fetch speeds within Recordset, and by the fact that nothing can even compare to the old while ($MySQLI_STMT->fetch()) {} . I've already cached certain result information, such as num_rows and class name, and try to avoid chaining internal function calls, which speeds things up considerably.  Unfortunately, this cuts down on proper internal data validation checks.  The constant data_seek calls do slow things a little.  I'd like for this to work better.  Any suggestions or insight how to speed up foreach loops and internal row fetching? Here's excerpts of the important parts... class Recordset implements Iterator, ArrayAccess, Countable {

    private $MySQLi_set; // MySQLi_STMT or MySQLi_Result object
    private $MySQLi_set_type; // cache of MySQLi_STMT or MySQLi_Result object type to avoid repeat instanceof calls
    private $field_metadata; // array of field info objects returned by query
    private $num_rows; // cache row count to avoid repeat mysqli_x->num_rows call
    private $bind_row; // binding array for MySQLi_STMT results
    private $pointer; // for tracking iterations over records in query


    function __construct($sql) {
        $bind_params = func_get_args();
        array_shift($bind_params);
        try {
            if (count($bind_params) === 0) {
                // expecting MYSQLI_Result obj returned, replace code as necessary
                $this->MySQLi_set = DB_Main::query($sql);  
                }
            else {
                // expecting MySQLi_STMT obj returned, replace code as necessary
                $this->MySQLi_set = DB_Main::statement($sql, $bind_params);  
                }
            }
        catch (Exception $e) {
            throw new RuntimeException(((count($bind_params)) ? 'Statement' : 'Query') . ' failed:  ' . $e->getMessage(), $e->getCode(), $e);
            }
        // cache name of object to avoid repeat instanceof calls
        $this->MySQLi_set_type = get_class($this->MySQLi_set);
        if ($this->MySQLi_set_type === 'mysqli_result') {
            // set $this->field_metadata to array of field info objects
            $this->field_metadata = $this->MySQLi_set->fetch_fields();
            }
        else if ($this->MySQLi_set_type === 'mysqli_stmt') {
            // Set up special handling for MySQLi_STMT objects
            // set $this->field_metadata to array of field info objects used later for result bindings for MySQLi_STMT object
            $result_metadata = $this->MySQLi_set->result_metadata();
            $this->field_metadata = $result_metadata->fetch_fields();   
            $result_metadata->free_result();
            unset($result_metadata);
            // store results to allow object to act as a countable, seekable array
            if (!$this->MySQLi_set->store_result())
                throw new RuntimeException('MySQLi_STMT Result failed to store.  Error: ' . $this->MySQLi_set->error);
            // because bind_result() cannot bind to an object or array, use the 'call_user_func_array()' technique instead
            $this->bind_row = array();
            $bind_row2 = array();
            foreach($this->field_metadata as $field)
                 $bind_row2[$field->name] =& $this->bind_row[$field->name];
            if (!call_user_func_array(array($this->MySQLi_set, 'bind_result'), $this->bind_row))
                throw new RuntimeException($this->MySQLi_set->error);
            if ($this->MySQLi_set->error)
                throw new RuntimeException($this->MySQLi_set->error);
            }
        else {
            throw new RuntimeException('No MySQLi_STMT or MySQLi_Result object to work with.  Class: ' . $this->MySQLi_set_type . ' attempted.');
            }
        // cache row count to avoid constant calls to MySQLi_x->num_rows
        $this->num_rows = $this->MySQLi_set->num_rows;
        // if rows were returned, set internal pointer to 0
        if ($this->num_rows > 0) $this->pointer = 0;
        }


    function fetchRow($offset = null) {
        // private function internally using regular fetch() methods to progress through records
        // sets $this->bind_row to an associative array of the next record for MySQLi_STMT wrapped objects
        $this->MySQLi_set->data_seek((($offset !== null) ? (int) $offset : $this->pointer));
        if ($this->MySQLi_set_type === 'mysqli_result')
            return $this->MySQLi_set->fetch_assoc();
        // else this is a MySQLi_STMT object
        $fetch_status = $this->MySQLi_set->fetch();
        if ($fetch_status === true) return $this->bind_row;
        else if ($fetch_status === null) return null; // no more rows
        // MySQLi_STMT row fetch failed
        throw new RuntimeException('Error fetching row: . ' . $this->MySQLi_set->error);
        }


    function count() {return $this->num_rows;}

    function current() {return $this->fetchRow();}

    function key() {return $this->pointer;}

    function next() {$this->pointer++;}

    function rewind() {$this->pointer = 0;}

    function valid() {return $this->offsetExists($this->pointer);}


    function offsetExists($offset) {
        // Part of the ArrayAccess interface.  Used to determine if the selected record in the set actually exists or is out of bounds.
        // Example: 'isset($Recordset[22])' returns true if there were 23 or more records returned from the query.
        return ((int) $offset < $this->num_rows AND (int) $offset >= 0);
        }


    function offsetGet($offset) {
        // Part of the ArrayAccess interface.  Used to retrieve the assoc array of the chosen record in line.
        // allow index referencing without altering ""internal array pointer""
        // Example: 'print_r($Recordset[22])' prints the 23rd record returned by the query.
        if (!((int) $offset < $this->num_rows AND (int) $offset >= 0))
            throw new OutOfBoundsException('Out of range of result set.');
        return $this->fetchRow($offset);
        }

    } The code is roughly 200 lines long, so instead of making a giant post, here's a pastebin link... http://pastebin.com/n17MuEzf Use... Objects are created by passing in an sql query string.  For handling prepared statements, simply pass in additional arguments as the prepared binding parameters.  In those cases, there is a behind-the-scenes bind_param going on generating the MySQLi_STMT object to be wrapped.  That part isn't included here, so for the purposes of this post, pretend it's magic. For example to automatically handle the query as a prepared statement and output rows: $recordset = new Recordset(""SELECT * FROM tblComments WHERE(parentBlogID = ?)"", 2);
if (count($recordset) > 0) {
    foreach ($recordset as $record)
        echo $record['commentText'] . '<br>';
    }
else echo ""No records returned.""; Advantages... Allows accessing result rows by array key ( echo $Recordset[295]['title']; ) or by foreach loops ( foreach ($Recordsetas $rec) {echo $rec['title'];} ). Allows you to get a row by index number without interfering with the internal result pointer.  In other words, right in the middle of a foreach loop, you can do $x = $Recordset[259]['ID']; without causing the internal result row pointer to jump out of order. Allows exchanging this class out for regular 3-dimensional arrays of result dumps. Avoids duplication of result binding code for every statement throughout an application. Lets you still access functions and properties of the wrapped MySQLi object directly ( $Recordset->attr_get(1) ). Would allow plugging in automatic output filters or template handling. Tests... Here's some speed tests iterating over 10000 records from a localhost table with 6 columns.  This test was done with prepared statement results either wrapped in Recordset or not.  Timing is measured starting before and ending after each entire loop call.. With Recordset... foreach($Recordset as $rec) {$x = $rec;} ... 0.1033s for ($i = 0, $count = count($Recordset); $i < $count; $i++) {$x = $Recordset[$i];} ... 0.0445s for ($i = 0, $count = count($Recordset); $i < $count; $i++) {$x = $Recordset->fetchRow($i);} ... 0.0344 s while ($x = $Recordset[$i]) {$i++; if (!isset($Recordset[$i])) break;} ... 0.0542 s Without Recordset, but still using the ""bind to array"" technique and pre-storing results... for ($i=0, $count=MySQLI_STMT->num_rows; $i < $count; $i++)) {$MySQLI_STMT->fetch(); $x = $bind_row;} ... 0.0414 s while ($MySQLI_STMT->fetch()) {$x = $bind_row;} ... 0.009 s"
402,"To add to Andrew's answer about taking advantage of what type of timestamps can be creating using strtotime(), your code can be reduced to around 25 lines... <?php

$schedule = array(
    'this Sunday 8am',
    'this Sunday 10am',
    'this Sunday 12pm',
    'this Sunday 6:30pm',
    'this Wednesday 7pm',
    'this Saturday 10am'
    );

$current_time = strtotime('now');
foreach ($schedule as &$val) {
    $val = strtotime($val);
    // fix schedule to next week if time resolved to the past
    if ($val - $current_time < 0) $val += 604800; 
    }
sort($schedule);
$countdown = $schedule[0] - $current_time;

?>

<script type=""text/javascript"">
    var myTime = <?php echo $countdown; // just personally prefer full tags ?>;
    $('#countdown').countdown({ until: myTime}); 
</script> To add to visionary-software-solutions' answer, it would be best to store the schedule in a database or a separate xml/text/json/etc type file.  This way, you can have staff simply use an internal webform to change schedules instead of having the PHP dev hard-code the changes every time.  In that webpage, you can allow staff to only select a weekday and time, and have the page translate that into a string usable by strtotime() in this countdown script. Edit: fixed strtotime() values.  Careful with ""this day"" vs ""next"".  For some insight into what type of strings strtotime() can take, see: http://www.gnu.org/software/tar/manual/html_node/Date-input-formats.html"
403,"Skin/theme swap. Theme-swap functionality will be done via a better-looking <div> at the top of the page, but for right now, it's just thrown on the button. The theme preference should persist through page refreshes through the use of cookies. I'm going to do five different themes, each in two different sizes, since the site is very bad in 800x600 and still quite bad in 1024x768 . Let me know if it breaks or simply doesn't work. I've noticed a bug that happens once in a blue moon, but I think that's because the browser might be doing parallel work and one script gets too far ahead of the other.  I'll have to research it more, but I think it's good enough right now to ask for opinions. The page will eventually display via <noscript> for those that don't have JavaScript turned on but for right now, it'll just display a message that says: Please turn JavaScript on! How it works: Non-JavaScript page is displayed with <noscript> If JavaScript is enabled, it loads the theme-preference from cookies. JavaScript then applies the preferred theme via AJAX fetching the appropriate theme ( skin[x].html ) and the content of the page ( [page_name.html] ). The code isn't perfect yet, and I'll definitely have to remove the use of another person's image as the background for the second skin, but it's almost done.  About half of the code deals with merely re-positioning the elements when the window is resized.  For the sake of brevity, some code is not shown.  I apologize for its length. index.html: <script type=""text/javascript""> 
window.onresize = function() { setContentPositions(); setJSMenuPositions(); }
$('html').addClass('js');
</script> 



<script type=""text/javascript""> 
$().ready(function() {

getThemeInfo();

AJAX_LoadResponseIntoElement(""mybody"", ""skin1.txt"", function() {
  AJAX_LoadResponseIntoElement(""contentdiv"", ""index.txt"", initPage);
  });


if (themeSelect>1) { themeSwapNoInc();}

});
</script> funcs.js: function getThemeInfo()
{
themeSelect=checkCookie();
}

function themeSwap()
{
  themeSelect++;
  if (themeSelect>2 || themeSelect<1) {themeSelect=1;}
  $('html').addClass('js');

  switch(themeSelect) {
    case 1:
      AJAX_LoadResponseIntoElement(""mybody"", ""skin1.txt"", function() {
        AJAX_LoadResponseIntoElement(""contentdiv"", ""index.txt"", initPage);
        });

      document.body.style.backgroundImage=""url(http://www.solarcoordinates.com/images/bg2b.png)"";
      document.body.style.backgroundRepeat=""repeat-x"";

      break;

    case 2:
      AJAX_LoadResponseIntoElement(""mybody"", ""skin2.txt"", function() {
        AJAX_LoadResponseIntoElement(""contentdiv"", ""index.txt"", initPage);
        });

      document.body.style.backgroundImage=""url(http://www.constantcollide.com/wp-content/themes/killerbrown/images/texture.jpg)"";
      document.body.style.backgroundRepeat=""repeat"";

      break;
  }

  setCookie(""themeSelection"",themeSelect,365);

}



function themeSwapNoInc()
{  
  themeSelect--;
  themeSwap();
}



function initPage()
{
    $('#vertnav .kwicks').kwicks({
        defaultKwick:0,
        max : 205,
        spacing : 3,
        isVertical : true
    });

setContentPositions();
replaceCSSMenu();
showContainer();
setJSMenuPositions();

}



function showContainer()
{
    $('html').removeClass('js');
}


function AJAX_LoadResponseIntoElement (elementId, fetchFileName, cfunc) {
  var XMLHRObj;
  if (window.XMLHttpRequest) { XMLHRObj=new XMLHttpRequest(); }
    else { XMLHRObj=new ActiveXObject(""Microsoft.XMLHTTP""); }

  XMLHRObj.onreadystatechange=function()
    {
    if (XMLHRObj.readyState==4 && XMLHRObj.status==200)
      {
      document.getElementById(elementId).innerHTML=XMLHRObj.responseText;
      cfunc();
      }
    }
  XMLHRObj.open(""GET"",fetchFileName,true);
  XMLHRObj.send();
}


function findLeft(obj) {
  var curleft = 0;

  if (obj.offsetParent) { do {curleft += obj.offsetLeft;} while (obj = obj.offsetParent);} 
  else { curleft += obj.offsetLeft; }

  return curleft;
}


function findTop(obj) {
   var curtop = 0;

  if (obj.offsetParent) { do {curtop += obj.offsetTop;} while (obj = obj.offsetParent);}
  else { curtop += obj.offsetTop; }

  return curtop;
}


function findmyparent(e) {
    var srcElement = e.srcElement ? e.srcElement : e.target;

    if (srcElement.className.search(""jsmenu"")==-1 && srcElement.className.search(""kwick"")==-1 && srcElement.className!=""vertnav"" && srcElement.className!=""active"") 
    { 
        document.getElementById(""jsmenu"" + lastindex).style.display=""none"";
        submenuvisible=false;
    } 
}


function getContentHeight() { return window.innerHeight; }

function getContentWidth() { return window.innerWidth; }

function setContentPositions() {


  var DOMheight = getContentHeight()? getContentHeight(): window.document.body.parentElement.clientHeight;
  var DOMwidth = getContentWidth()? getContentWidth(): window.document.body.parentElement.clientWidth;

  var y_lbound, x_lbound, x_ubound;
  var container_ymod, container_ymin;
  var container_xmod, container_xmax, container_xmin;
  var content_xmod, content_xmax, content_xmin;


switch (themeSelect) {

  case 1:

    y_lbound=727;
    x_lbound=910;
    x_ubound=1400;

    container_ymod=-240;
    container_ymin=487;

    container_xmod=-240;
    container_xmax=1160;
    container_xmin=670;

    content_xmod=-490;
    content_xmax=910;
    content_xmin=420;


    break;

  case 2:

    y_lbound=710;
    x_lbound=910;
    x_ubound=1400;

    container_ymod=-178;
    container_ymin=532;

    container_xmod=-300;
    container_xmax=1100;
    container_xmin=610;

    content_xmod=-350;
    content_xmax=1050;
    content_xmin=560;



    break;

  default:


} // end switch



    if (DOMheight > y_lbound) {  document.getElementById('containerdiv').style.height = (DOMheight+container_ymod) + 'px';   }
      else { document.getElementById('containerdiv').style.height = container_ymin + 'px'; }

    if (DOMwidth > x_lbound) {
        if (DOMwidth < x_ubound) {
            document.getElementById('containerdiv').style.width = (DOMwidth+container_xmod) + 'px';
            document.getElementById('contentdiv').style.width = (DOMwidth+content_xmod) + 'px'; 
        } else {
            document.getElementById('containerdiv').style.width = container_xmax +'px';
            document.getElementById('contentdiv').style.width = content_xmax + 'px'; 
        }
    } else {
        document.getElementById('containerdiv').style.width = container_xmin + 'px';
        document.getElementById('contentdiv').style.width = content_xmin + 'px'; 
    }



} jsmenucontent.js: function setJSMenuPositions()
{
    var popupleft = findLeft(document.getElementById('kwick1'))+168;
    var popuptop = findTop(document.getElementById('kwick1'));

    document.getElementById('jsmenu0').style.left = popupleft + ""px"";
    document.getElementById('jsmenu0').style.top = popuptop -12+ ""px"";

    document.getElementById('jsmenu1').style.left = popupleft + ""px"";
    document.getElementById('jsmenu1').style.top = popuptop +33+ ""px"";

    document.getElementById('jsmenu2').style.left = popupleft + ""px"";
    document.getElementById('jsmenu2').style.top = popuptop +77+ ""px"";

}"
404,"Animating the color of a line in WPF. I'm thinking about how to do a color transition for a line in WPF. I'm looking for this to be as simple and succinct as possible, and also the ""correct"" way in the WPF world. This is what I have, taking the line from it's previous color to Colors.LightGreen in 0.1 seconds. Line TargetLine = GetMyTargetLine();

var s = new Storyboard(){ Duration = new Duration(TimeSpan.FromSeconds(0.1f)) };
s.Children.Add(new ColorAnimation(Colors.LightGreen, s.Duration));
Storyboard.SetTarget(s.Children[0], TargetLine);
Storyboard.SetTargetProperty(s.Children[0], new PropertyPath(""Stroke.Color""));
s.Begin(); And it is functional. Is this the proper way to do it in the WPF mindset? It just seems very clunky and verbose way to express what I want to do. Thoughts? Edit: With Snowbear's advice I can at least get it to 4 lines. The entire context of the storyboard is right here so I don't think it's a big deal to reference the only child by index. If it were any more complex than this I'd agree that it should be a named variable. Line TargetLine = GetMyTargetLine();        

    var story = new Storyboard() { Children = { new ColorAnimation(color, new Duration(TimeSpan.FromSeconds(0.1))) } };
    Storyboard.SetTarget(story.Children[0], TargetLine);
    Storyboard.SetTargetProperty(story.Children[0], new PropertyPath(""Stroke.Color""));
    story.Begin();"
410,"I believe you are using them correctly as-is, but if I was working on your team, I would deny you a commit on basic principal: Monitor.Wait and Monitor.Pulse are amazingly low-level constructs with very difficult semantics to try to figure out after you've written them.  Assuming this is used in a large application, I'm going to have to search for every possible reference to the object contained by _connectLock and see how its used, just to make sure that the only thing that Pulse s it is the connection code. It doesn't look like you're doing anything here that you couldn't just use System.Threading.ManualResetEvent for instead, which has a much simpler API for your application's future maintenance developers to figure out. P.S. Remember that your application's future maintenance developer might be you.  Also remember that in the future you will be older, and thus crankier and more forgetful than you are now."
411,"I think your interfaces are mostly well-defined, with a couple exceptions: I don't think Load, Attach and Detach should be members of IUnitOfWork, but rather IRepository.  It seems that the repository that manages objects of type T would be the best place to place methods that acts on that type. The UnitOfWork property on IRepository does not belong there. Things that modify one repository shouldn't be allowed to go and get other repositories to modify on their own.  If they need them, pass them in explicitly.  Otherwise, you're hiding from potential callers the fact that your implementation actually depends on more than just the one repository, and hiding your dependencies like you're ashamed of them is one of my least favorite code smells."
412,"My code is based off glebm's, but I've changed it so that array lookups must always use the . syntax. I made a few other tweaks such as creating an object chain if assigning to a nested key that doesn't yet exist. function parse_obj_key(obj, key, value){
    var is_assigning = (value !== undefined);
    key = key.split('.');     

    var data = obj;
    var length = key.length - is_assigning;

    for (var i = 0; i < length; i++) {
        var child = data[key[i]];
        var has_child = (child !== undefined);

        if (!has_child && !is_assigning) {
            $.log(""Invalid obj path: "" + key + ""\n"" + JSON.stringify(obj));
            return null;
        }

        if (!has_child) {
            child = {};
        data[key[i]] = child;
        }

        data = child;
    }

    if (is_assigning) {
        data[key[i]] = value;
    } else {
        return data;       
    }
} If you're trying to create an optional parameter, you should check if it is undefined using if (param !== undefined) , rather than just if (param) , otherwise you'll have trouble setting falsy values such as false , null , 0 and """" . One of the things that allows this code to be much shorter is the observation that in javascript, arr['a']['b'][0] is the same as arr['a']['b']['0'] - that is to say, array lookup using an integer is no different from array lookup using a string that contains a number. This avoids the need to parse the numbers like you do. The other major saver is the use of split rather than indexing, which makes it easy to for loop over the parts of the key."
413,"Directory write permissions check. Consider the following method that I have for checking write permissions on a directory path: /// <summary>
/// Check existence and write permissions of supplied directory.
/// </summary>
/// <param name=""directory"">The directory to check.</param>
protected static void CheckPermissions(string directory)
{
    if (!Directory.Exists(directory))
    {
        throw new DirectoryNotFoundException(String.Format(JobItemsStrings.Job_DirectoryNotFound, directory));
    }

    // Check permissions exist to write to the directory.
    // Will throw a System.Security.SecurityException if the demand fails.
    FileIOPermission ioPermission = new FileIOPermission(FileIOPermissionAccess.Write, directory);
    ioPermission.Demand();
} When running FxCop, this code throws up a ""CA2103 - Review imperative security"" warning, albeit with a certainty of 25%, with this info: ""Use of imperative demands can lead to
  unforeseen security problems. The
  values used to construct a permission
  should not change within the scope of
  the demand call. For some components
  the scope spans from the demand call
  to end of the method; for others it
  spans from the demand call until the
  component is finalized. If the values
  used to construct the permission are
  fields or properties, they can be
  changed within the scope of the demand
  call. This can lead to race
  conditions, mutable read-only arrays,
  and problems with boxed  value types."" Bascially, is FxCop being over-cautious, or am I doing it wrong?"
414,"where you state Define global constants your not defining your directories with the correct slashes for the Operating system You can use / slashes fluently on your application as both unix and windows supports them but if you really want to be on the safe side then you should use DIRECTORY_SEPARATOR As Doctrine 2.0 is only supporting PHP 5.3.0 you can replace dirname(__FILE__) with __DIR__ I would also create a constant called DS which would normally be created in a constants file, and should be one of the first included. I would convert the above to: define('ROOT_PATH'  ,  __DIR__);
 define('URL_BASE'   ,  'http://localhost/myapp/public/');
 define('LIB_PATH'   ,  realpath(""../../path/to/libs"")); //Unix / Windows
 define('OPENID_PATH',  realpath(""../../path/to/openid""));//Unix / Windows And then change the loadModels accordingly?"
415,"Return Data and Update Row without Multiple Lookups?. I have a stored procedure that looks up an article based on the article's title. But I also need to increment a column in the same table that counts the number of times the article has been viewed. Trying to be as efficient as possible, I wanted a way to do this without performing multiple lookups. Someone pointed out the newer OUTPUT clause, which I've used below. I'm just wondering if I'm using it in the most efficient way, if I really made it faster, and if there are any other optimizations that could be employed. DECLARE @Slug VARCHAR(250) -- Stored procedure argument

-- declare @UpdatedArticle table variable 
DECLARE @UpdatedArticle TABLE
(
 ArtID INT,
 ArtUserID UNIQUEIDENTIFIER,
 ArtSubcategoryID INT,
 ArtTitle VARCHAR(250),
 ArtHtml VARCHAR(MAX),
 ArtDescription VARCHAR(350),
 ArtKeywords VARCHAR(250),
 ArtLicenseID VARCHAR(10),
 ArtViews BIGINT,
 ArtCreated DATETIME2(7),
 ArtUpdated DATETIME2(7)
);

UPDATE Article
 SET ArtViews = ArtViews + 1
OUTPUT
 INSERTED.ArtID,
 INSERTED.ArtUserID,
 inserted.ArtSubcategoryID,
 INSERTED.ArtTitle,
 INSERTED.ArtHtml,
 INSERTED.ArtDescription,
 INSERTED.ArtKeywords,
 INSERTED.ArtLicenseID,
 INSERTED.ArtViews,
 INSERTED.ArtUpdated,
 INSERTED.ArtCreated
INTO @UpdatedArticle
WHERE ArtSlugHash = CHECKSUM(@Slug) AND ArtSlug = @Slug AND ArtApproved = 1

SELECT a.ArtID, a.ArtUserID, a.ArtTitle, a.ArtHtml, a.ArtDescription, a.ArtKeywords, a.ArtLicenseID,
 l.licTitle, a.ArtViews, a.ArtCreated, a.ArtUpdated, s.SubID, s.SubTitle, c.CatID, c.CatTitle,
 sec.SecID, sec.SecTitle, u.UsrDisplayName AS UserName
 FROM @UpdatedArticle a
 INNER JOIN Subcategory s ON a.ArtSubcategoryID = s.SubID
 INNER JOIN Category c ON s.SubCatID = c.CatID
 INNER JOIN [Section] sec ON c.CatSectionID = sec.SecID
 INNER JOIN [User] u ON a.ArtUserID = u.UsrID
 INNER JOIN License l ON a.ArtLicenseID = l.LicID This is used in an ASP.NET application using SQL Server 2008."
416,"There's a bigger-picture issue here; this kind of manual string manipulation is a Bad Idea. It's guaranteed to be buggy, often with security consequences. You ought to use (preferred) or at least implement a string utility class. Here are a couple examples: http://git.gnome.org/browse/glib/tree/glib/gstring.h http://cgit.freedesktop.org/dbus/dbus/tree/dbus/dbus-string.h ftp://vsftpd.beasts.org/users/cevans/untar/vsftpd-2.3.2/str.h This way all your string code will be much more concise, and entire classes of bugs eliminated."
418,"Database design for a school system. This system has to manage students, teachers, staff and grading. This is for production and is not a school assignment. As such, please let me know if I can improve on any aspect. :) My main concern is automation. I'd like my software to be able to run regardless if I still exist. I'm using SQLite as the database: create table User
(
ID integer primary key autoincrement,
Username string,
Password string
);

create table Area
(
ID integer primary key autoincrement,
Name string
);

create table Subject
(
ID integer primary key autoincrement,
Name string,
Abbreviation string,
IDArea integer references Area(ID)
);

create table Level
(
ID integer primary key autoincrement,
Name string,
Principle string
);

create table Grade
(
ID integer primary key autoincrement,
Name string,
IDLevel integer references Level(ID),
Observation string
);

create table StaffType
(
ID integer primary key autoincrement,
Name string
);

create table Staff
(
ID integer primary key autoincrement,
IDStaffType integer references StaffType(ID),
Name string,
LastNameFather string,
LastNameMother string,
DateOfBirth string,
PlaceOfBirth string,
Sex string,
Carnet string,
Telephone string,
MobilePhone string,
Address string,
FatherName string,
MotherName string,
FatherContact string,
MotherContact string,
FatherPlaceOfWork string,
MotherPlaceOfWork string,
DateOfHiring string,
YearsOfService string,
Formation string,
Specialty string,
Category string,
Salary string
);

create table GradeParalelo
(
ID integer primary key autoincrement,
IDGrade integer references Grade(ID),
IDStaff integer references Staff(ID),
Name string
);

create table Student
(
ID integer primary key autoincrement,
IDGradeParalelo integer references GradeParalelo(ID),
Rude string,
Name string,
LastNameFather string,
LastNameMother string,
DateOfBirth string,
PlaceOfBirth string,
Sex string,
Carnet string,
Telephone string,
MobilePhone string,
Address string,
FatherName string,
MotherName string,
FatherMobilePhone string,
MotherMobilePhone string,
FatherProfession string,
MotherProfession string,
FatherPlaceOfWork string,
MotherPlaceOfWork string,
Observations string
);

create table Attendance
(
ID integer primary key autoincrement,
IDStudent integer references Student(ID),
Attended string,
Date string
);

create table SubjectGrade
(
ID integer primary key autoincrement,
IDGrade integer references Grade(ID),
IDSubject integer references Subject(ID)
);

create table ScoreRecord
(
ID integer primary key autoincrement,
IDSubject integer references Subject(ID),
IDStudent integer references Student(ID),
FirstTrimester integer,
SecondTrimester integer,
ThirdTrimester integer,
FinalGrade integer,
Year string
); Any glaring room for improvement?"
419,"Converting between std::wstring and std::string. While researching ways to convert back and forth between std::wstring and std::string , I found this conversation on the MSDN forums. There were two functions that, to me, looked good. Specifically, these: std::wstring s2ws(const std::string& s)
{
    int len;
    int slength = (int)s.length() + 1;
    len = MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, 0, 0); 
    wchar_t* buf = new wchar_t[len];
    MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, buf, len);
    std::wstring r(buf);
    delete[] buf;
    return r;
}

std::string ws2s(const std::wstring& s)
{
    int len;
    int slength = (int)s.length() + 1;
    len = WideCharToMultiByte(CP_ACP, 0, s.c_str(), slength, 0, 0, 0, 0); 
    char* buf = new char[len];
    WideCharToMultiByte(CP_ACP, 0, s.c_str(), slength, buf, len, 0, 0); 
    std::string r(buf);
    delete[] buf;
    return r;
} However, the double allocation and the need to delete the buffer concern me (performance and exception safety) so I modified them to be like this: std::wstring s2ws(const std::string& s)
{
    int len;
    int slength = (int)s.length() + 1;
    len = MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, 0, 0); 
    std::wstring r(len, L'\0');
    MultiByteToWideChar(CP_ACP, 0, s.c_str(), slength, &r[0], len);
    return r;
}

std::string ws2s(const std::wstring& s)
{
    int len;
    int slength = (int)s.length() + 1;
    len = WideCharToMultiByte(CP_ACP, 0, s.c_str(), slength, 0, 0, 0, 0); 
    std::string r(len, '\0');
    WideCharToMultiByte(CP_ACP, 0, s.c_str(), slength, &r[0], len, 0, 0); 
    return r;
} Unit testing indicates that this works in a nice, controlled environment but will this be OK in the vicious and unpredictable world that is my client's computer?"
420,Comments All your ID (unique ID's) are called ID (this is OK and it works for you) But I have found when you start doing joins this may become hard to read. Thus I like to name the unique key after the table. eg User_ID on the User Table etc. To make the Identifiers easier to read either use camel case or separate words with _ Identifiers like IDArea run together a bit much. So IdArea or ID_Area or Id_Area (Remember pick a style and be consistent though). The Staff table has a lot of information in it a lot of which could be NULL. I would rather have a Person table to hold people information. Then a relationship table to hold relations ships between people. This way when your DB is expanded (and in a Business environment this will happen) you can express other relationships between staff. Related to Staff. Like Staff I would keep the personal details of Student in the Person table. Note. I would still keep a seprate table (or view) for Staff/Student that has a link into the Person table.
421,"I appreciate that all the names you choose for tables and fields are understandable and self-explanatory. Only ""GradeParalelo"" does not make sense to me. Nevertheless, I would suggest adding short comments to describe fields and tables. Include the motivation for design decisions that required complex thinking, especially if you expect the system to be maintained by different people."
422,"I don't do any Windows development, so I can't comment on the WideCharToMultiByte part being safe. The one thing I would say though is to ensure you are using the proper types for everything.  For example, string.length() returns a std::string::size_type (most likely a size_t , the constructor also takes a std::string::size_type , but that one isn't as big of a deal).  It probably won't ever bite you, but it is something to be careful of to ensure you don't have any overflows in other code you may be writing."
423,"Ruby Koans' Greed Task. Having coded in Java and C# for quite some years, I'm currently learning Ruby. I'm working my way through the Ruby Koans tutorial . At some point, you are to implement a method that calculates the game-score of a dice-game called Greed. I came up with this recursive Java/C#-like method. It passes all the supplied unit tests, so technically it's correct. Now I'm wondering: Is this good Ruby code? If not, how would a ""Rubyist"" write this method? And possibly: Why? I'm also not so happy about the amount of duplicate code but can't think 
of a better Rubyish way. def score(dice)   #dice is an array of numbers, i.e. [3,4,5,3,3]
  return 0 if(dice == [] || dice == nil)

  dice.sort!

  return 1000 + score(dice[3..-1]) if(dice[0..2] == [1,1,1])
  return 600 + score(dice[3..-1]) if(dice[0..2] == [6,6,6])
  return 500 + score(dice[3..-1]) if(dice[0..2] == [5,5,5])
  return 400 + score(dice[3..-1]) if(dice[0..2] == [4,4,4])
  return 300 + score(dice[3..-1]) if(dice[0..2] == [3,3,3])
  return 200 + score(dice[3..-1]) if(dice[0..2] == [2,2,2])
  return 100 + score(dice[1..-1]) if(dice[0] == 1)
  return 50 + score(dice[1..-1]) if(dice[0] == 5)
  return 0 + score(dice[1..-1]);
end Some background (if needed) # Greed is a dice game where you roll up to five dice to accumulate
# points. A greed roll is scored as follows:
#
# * A set of three ones is 1000 points
#
# * A set of three numbers (other than ones) is worth 100 times the
#   number. (e.g. three fours is 400 points).
#
# * A one (that is not part of a set of three) is worth 100 points.
#
# * A five (that is not part of a set of three) is worth 50 points.
#
# * Everything else is worth 0 points.
#
#
# Examples:
#
# score([1,1,1,5,1]) => 1150 points
# score([2,3,4,6,2]) => 0 points
# score([3,4,5,3,3]) => 350 points
# score([1,5,1,2,4]) => 250 points
#
# More scoring examples are given in the tests below:


class AboutScoringProject < EdgeCase::Koan
  def test_score_of_an_empty_list_is_zero
    assert_equal 0, score([])
  end

  def test_score_of_a_single_roll_of_5_is_50
    assert_equal 50, score([5])
  end

  def test_score_of_a_single_roll_of_1_is_100
    assert_equal 100, score([1])
  end

  def test_score_of_a_single_roll_of_1_is_100
    assert_equal 200, score([1,1])
  end

  def test_score_of_multiple_1s_and_5s_is_the_sum_of_individual_scores
    assert_equal 300, score([1,5,5,1])
  end

  def test_score_of_single_2s_3s_4s_and_6s_are_zero
    assert_equal 0, score([2,3,4,6])
  end

  def test_score_of_a_triple_1_is_1000
    assert_equal 1000, score([1,1,1])
  end

  def test_score_of_other_triples_is_100x
    assert_equal 200, score([2,2,2])
    assert_equal 300, score([3,3,3])
    assert_equal 400, score([4,4,4])
    assert_equal 500, score([5,5,5])
    assert_equal 600, score([6,6,6])
  end

  def test_score_of_mixed_is_sum
    assert_equal 250, score([2,5,2,2,3])
    assert_equal 550, score([5,5,5,5])
  end

  def test_score_of_a_triple_1_is_1000A
    assert_equal 1150, score([1,1,1,5,1])
  end

  def test_score_of_a_triple_1_is_1000B
    assert_equal 350, score([3,4,5,3,3])
  end

  def test_score_of_a_triple_1_is_1000C
    assert_equal 250, score([1,5,1,2,4])
  end
end"
424,"Some things that jumped out take martin york's suggestion and be consistent as much as possible, user identifying primary key names like user_id as opposed to id for every table as it will make it less confusing for those writing/maintaining the SQL. For foreign keys, I would suggest table first e.g. area_id as opposed to IdArea as it flows better with natural language. Looking at your ERD, there are places where it is failing to get to 3NF (which is a level of database normalization you should strive for when possible) Use proper field types, looks like you are using string a lot, things like date of hire should be actual timestamp/datetime column, gender can be enum, etc. All the contact/phone information in the staff and student tables can be places in more appropriate phone/contact tables as those are one to many relationships. Your attendance table...looks like it either states that a student attended school a particular day or not...seems like this would be something more on the per class level, as a student could attend a half day and such. Is it possible for a staff member to have more than one staff type, if so you should have an associative table to link staff to staff types Instead of years of service in staff, could you not just use the date of hire column to figure that out instead of every year updating the year of service column. Those are some things I noticed, hope it helps."
425,"1) I believe it is not a good practice to give variables one-letter names. Storyboard story = ... 2) I believe you can specify Duration in ColorAnimation only. And do not set it for Storyboard . 3) I would introduce variable for ColorAnimation because s.Children[0] looks weird to me when I know that it is ColorAnimation . 4) Strangely you are using 0.1f where parameter is double anyway. 5) I would consider using object and collection initializers for Storyboard.Children . 6) Optionally I would think on removing storyboard variable and start it immediatly after constructing. Result: my code looks differently, but readability changes are subjective: Line TargetLine = line;

var duration = new Duration(TimeSpan.FromSeconds(0.1));
var colorAnimation = new ColorAnimation(Colors.LightGreen, duration);
Storyboard.SetTarget(colorAnimation, TargetLine);
Storyboard.SetTargetProperty(colorAnimation, new PropertyPath(""Stroke.Color""));

new Storyboard {Children = {colorAnimation}}.Begin();"
426,"There are a few issues with the code: Do not check for == nil when it is not specified as a valid value for the method. Here,checking for it and returning 0 might mask another problem. Do not use return statements unless necessary. In ruby, almost everything is an expression, and methods return the value of the last expression. Here you can use if...elsif , or case instead of a series of if statement. Do not modify parameters that come into your function ( dice.sort! ). Do not use recursion if it makes the code less readable. Here is a version of the code with the advice above applied: def score(dice)
  score = 0
  counts = dice.each_with_object(Hash.new(0)) { |x, h| h[x] += 1 }
  (1..6).each do |i|
    if counts[i] >= 3 
      score += (i == 1 ? 1000 : 100 * i)
      counts[i] = [counts[i] - 3, 0].max
    end
    score += counts[i] * (i == 1 ? 100 : 50)
  end
  score
end"
427,"JSON API for some bank account. I have been developing this class, and was wondering if anyone had any thoughts on how I can improve the performance of it. <?php
class Something {
    private $APIUsername, $APIPassword;
    private $APIurl = 'somesite.com';

    function __construct ($APIUsername = '', $APIPassword = '') {
        try {
            if (!$APIUsername || !$APIPassword) {
                throw new Exception('You must specify a valid API username and password.');
            }

            $this->APIUsername = $APIUsername;
            $this->APIPassword = $APIPassword;
        } catch (Exception $e) {
            die($e->getMessage());
        }
    }

    /*
    * Authenticate Account
    */
    public function authenticate ($EmailAddress, $Password) {
        try {
            $data['EmailAddress'] = $EmailAddress;
            $data['Password'] = $Password;

            $data = $this->setJSON($data);

            $result = $this->fetch('authenticate', $data);
        } catch (Exception $e) {
            $result = $e->getMessage();
        }

        return $result;
    }

    /*
    * Get Contacts
    */
    public function contacts ($EmailAddress, $Password, $PIN) {
        try {
            $data['EmailAddress'] = $EmailAddress;
            $data['Password'] = $Password;
            $data['PIN'] = $PIN;

            $data = $this->setJSON($data);

            $result = $this->fetch('contacts', $data);
        } catch (Exception $e) {
            $result = $e->getMessage();
        }

        return $result;
    }

    /*
    * Get Transactions
    */
    public function transactions ($EmailAddress, $Password, $PIN) {
        try {
            $data['EmailAddress'] = $EmailAddress;
            $data['Password'] = $Password;
            $data['PIN'] = $PIN;

            $data = $this->setJSON($data);

            $result = $this->fetch('transactions', $data);
        } catch (Exception $e) {
            $result = $e->getMessage();
        }

        return $result;
    }

    /*
    * Validate PIN
    */
    public function validatepin ($EmailAddress, $Password, $PIN) {
        try {
            $data['EmailAddress'] = $EmailAddress;
            $data['Password'] = $Password;
            $data['PIN'] = $PIN;

            $data = $this->setJSON($data);

            $result = $this->fetch('validatepin', $data);
        } catch (Exception $e) {
            $result = $e->getMessage();
        }

        return $result;
    }

    /*
    * Get Account Balance
    */
    public function balance ($EmailAddress, $Password) {
        try {
            $data['EmailAddress'] = $EmailAddress;
            $data['Password'] = $Password;

            $data = $this->setJSON($data);

            $result = $this->fetch('balance', $data);
        } catch (Exception $e) {
            $result = $e->getMessage();
        }

        return $result;
    }

    /*
    * Get Account Information
    */
    public function account_information ($EmailAddress, $Password) {
        try {
            $data['EmailAddress'] = $EmailAddress;
            $data['Password'] = $Password;

            $data = $this->setJSON($data);

            $result = $this->fetch('account_information', $data);
        } catch (Exception $e) {
            $result = $e->getMessage();
        }

        return $result;
    }

    /*
    * Send Money
    */
    public function send ($EmailAddress, $Password, $PIN, $DestinationID, $Amount, $Notes = '', $FundsSource = '') {
        try {
            $data['EmailAddress'] = $EmailAddress;
            $data['Password'] = $Password;
            $data['PIN'] = $PIN;
            $data['DestinationID'] = $DestinationID;
            $data['Amount'] = $Amount;
            $data['Notes'] = urlencode($Notes);
            $data['FundsSource'] = $FundsSource;

            $data = $this->setJSON($data);

            $result = $this->fetch('send', $data);
        } catch (Exception $e) {
            $result = $e->getMessage();
        }

        return $result;
    }

    /*
    * Send (Sender Assumes Transaction Costs)
    */
    public function send_assume_costs ($EmailAddress, $Password, $PIN, $DestinationID, $Amount, $Description = '') {
        try {
            $data['EmailAddress'] = $EmailAddress;
            $data['Password'] = $Password;
            $data['PIN'] = $PIN;
            $data['DestinationID'] = $DestinationID;
            $data['Amount'] = $Amount;
            $data['Description'] = urlencode($Description);

            $data = $this->setJSON($data);

            $result = $this->fetch('send_assume_costs', $data);
        } catch (Exception $e) {
            $result = $e->getMessage();
        }

        return $result;
    }

    /*
    * Set JSON Data
    */
    private function setJSON ($data) {
        $a = array();

        $a['APIUsername'] = $this->APIUsername;
        $a['APIPassword'] = $this->APIPassword;

        foreach ($data as $key => $value) {
            $a[$key] = $value;
        }

        return json_encode($a);
    }

    /*
    * Helper method that talks to teh API
    */
    private function fetch($APIMethod, $data) {
        $c = curl_init($this->APIurl.$APIMethod);
        curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($c, CURLOPT_HTTPHEADER, array('Accept: application/json', 'Content-Type: application/json'));
        curl_setopt($c, CURLOPT_POSTFIELDS, $data);

        $returned = curl_exec($c);
        if ($returned === false) {
            throw new Exception(curl_error($c)); return;
        }

        curl_close($c);

        if (json_decode($returned)) {
            return $returned;
        } else {
            throw new Exception('Invalid Service Request.'); return;
        }
    }
}
?>"
428,"Was this shell script ready for open-source? (Random XKCD wallpaper). I wrote the following little shell script and published it on GitHub . In the repo there's also a README file that explains how to use it in more detail. This is the first time I open-sourced/published something I wrote, so I'm interested whether you think that this code is ready for the public. Some pointers, but feel free to add your own thoughts: Does it look professional? If not, what would need to be done? Are the comments too much? Was it ok to publish it, although I know that under some circumstances it doesn't work (I wrote about that in the README)? #    random xkcd wallpaper: gets a random xkcd comic from xkcd.com and sets it as the desktop background.


#!/bin/bash



# /random/comic redirects to random comic. Wget gets the index.html of the comic.
wget http://dynamic.xkcd.com/random/comic/

echo $(pwd)

#Searches the line in the index.html file that points to the url where the actual comic is placed.
#The image urls are of the form: http://imgs.xkcd.com/comics/.'name of comic'.(png | jpg)
url=$(cat index.html | grep -o -m 1 http://imgs.xkcd.com/comics/.*\.png)

#Assuming picture format is .png. Gets the name of the image file by only matching what comes after the last forward slash.
name_pic=$(echo $url | grep -o [^/]*\.png)
is_png=1


#Sets url and name_pic in the case of the picture being in .jpg format.
if [ -z ""$url"" ]
then
    url=$(cat index.html | grep -o -m 1 http://imgs.xkcd.com/comics/.*\.jpg)
    name_pic=$(echo $url | grep -o [^/]*\.jpg)
    is_png=0   
fi     


#Downloads the image and saves it under its appropriate name.
wget --output-document=""$name_pic""  ""$url""

#Sets the desktop background
gconftool-2 --set --type=string /desktop/gnome/background/picture_filename $(pwd)/""$name_pic""

#Cleans up
rm index.html

#For some reason, if the image is moved to fast (e.g without a wait) the background does not get set.
sleep 1

#The current wallpaper can always be found under ""current_xkcd_wallpaper.png"" or ""current_xkcd_wallpaper.jpg"". Also prevents cluttering the directory with images. 
#If you want to keep all the pictures you downloaded, uncomment the following lines.

#Cleans up. Makes sure that there is only one current_xkcd_wallpaper image file.
#rm current_xkcd_wallpaper.*

rm current_xkcd_wallpaper.*

if [ $is_png = 1 ] ; then
    mv $(pwd)/""$name_pic"" $(pwd)/current_xkcd_wallpaper.png
else
    mv $(pwd)/""$name_pic"" $(pwd)/current_xkcd_wallpaper.jpg
fi"
429,"MVVM, WPF Ribbon V4, with Prism. This weekend I've been having one heck of a time getting WPF Ribbon v4 working with MVVM and Prism (using unity). After much trial and error, I believe I have it working. I was hoping someone could take a look at it and give me some feedback. RibbonRegionAdapter.cs public class RibbonRegionAdapter : RegionAdapterBase<Ribbon>
{
    private Ribbon _ribbonTarget;

    public RibbonRegionAdapter(IRegionBehaviorFactory regionBehaviorFactory)
        : base(regionBehaviorFactory)
    {

    }

    protected override void Adapt(IRegion region, Ribbon regionTarget)
    {
        _ribbonTarget = regionTarget;

        region.Views.CollectionChanged += delegate {  
            foreach (RibbonTab tab in region.Views.Cast<RibbonTab>())  
            {  
                if (!_ribbonTarget.Items.Contains(tab))  
                {  
                    _ribbonTarget.Items.Add(tab);  
                }  
            }  
        };  
    }

    protected override IRegion CreateRegion()
    {
        return new SingleActiveRegion();
    }
} BootStrapper.cs - To register our regionAdapter protected override RegionAdapterMappings ConfigureRegionAdapterMappings()
    {
        RegionAdapterMappings mappings = base.ConfigureRegionAdapterMappings();

        if (mappings != null)
        {
            mappings.RegisterMapping(typeof(Ribbon), this.Container.Resolve<RibbonRegionAdapter>());
        }


        return mappings;
    } CarRibbonTab.xaml <ribbon:RibbonTab x:Class=""CarManager.Modules.CarModule.Views.CarRibbonTab""
               xmlns:ribbon=""clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary""
             xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation""
             xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml""
             xmlns:mc=""http://schemas.openxmlformats.org/markup-compatibility/2006"" 
             xmlns:d=""http://schemas.microsoft.com/expression/blend/2008"" 
             mc:Ignorable=""d"" 
             Header=""Officers"">
    <ribbon:RibbonGroup Header=""New"">

    </ribbon:RibbonGroup>
    <ribbon:RibbonGroup Header=""Manage"">
        <ribbon:RibbonButton Label=""Make""
                                LargeImageSource=""..\Resources\make.png"" />
        <ribbon:RibbonButton Label=""Inventory""
                                LargeImageSource=""..\Resources\Inventory.png"" />
        <ribbon:RibbonButton Label=""Assignments"" />
    </ribbon:RibbonGroup>
</ribbon:RibbonTab> CarRibbonTab.cs - Code behind for the View public partial class CarRibbonTab: RibbonTab
{
    public CarRibbonTab()
    {
        InitializeComponent();
    }
} Shell.xaml - Just showing the ribbon control <ribbon:Ribbon DockPanel.Dock=""Top"" Title=""CarManager"" prism:RegionManager.RegionName=""RibbonRegion"">
    <ribbon:Ribbon.ApplicationMenu>
        <ribbon:RibbonApplicationMenu SmallImageSource=""Images\Icon.png"">
            <ribbon:RibbonApplicationMenuItem Header=""Exit""
                                              ImageSource=""Images\ExitIcon.png""/>
        </ribbon:RibbonApplicationMenu>
    </ribbon:Ribbon.ApplicationMenu>

</ribbon:Ribbon> CarModule.cs - registering the view with the region public class CarModule: IModule
    {
        private readonly IRegionManager  _regionManager;
        private readonly IUnityContainer _container;
        public MenuItemViewModel MenuItem;

        public CarModule(IUnityContainer container, IRegionManager regionManager)
        {
            _container     = container;
            _regionManager = regionManager;
        }

        public void Initialize()
        {
            //Ribbon
            _container.RegisterType<Object, CarRibbonTab>(""CarRibbonTab"");

            _regionManager.AddToRegion(""RibbonRegion"", _container.Resolve<CarRibbonTab>());
        }
    }"
430,"#!/bin/bash The shebang line has no effect unless it's on the very first line, so you should put it before the copyright notice. echo $(pwd) echo $(command) is almost always the same as just writing command (the exception being that echo adds a newline at the end if the command doesn't already produce one, but that's not the case here). So you can just change the above to pwd . cat index.html | grep -o -m 1 http://imgs.xkcd.com/comics/.*\.png That's useless use of cat . If you want to grep through a file, you can just pass the filename as the last argument - no need to cat and pipe. (The same goes for later places in the code where you do the same with .jpg). gconftool-2 --set --type=string /desktop/gnome/background/picture_filename $(pwd)/""$name_pic"" I think it'd be a good idea to make the command to change the wallpaper configurable, so non-GNOME users can use your script too. Also I'm not sure why you set the image to be the wallpaper before renaming it. I think it'd make more sense to do so afterwards (that might also solve your issue of having to sleep ). On a general note you might take care to gracefully handle already existing files. For example if the script is called in a directory where an index.html already exists (which is not that unlikely), your script will a) not work and b) delete that index.html, which its owner might not appreciate."
432,"Not sure whether we have many Prism specialists on Code Review and I haven't worked with it for a while, so maybe my comments are incorrect at points. I do not really like the way you're handling region.Views.CollectionChanged event. This event provides a lot of information in eventArgs but you're ignoring it. Firstly you do not handle removing views at all. Secondly instead of iterating through all views every time I would use those from eventArgs ( NewItems property). I believe generally it is better to have views isolated from regions in terms of concrete types. Your view is not isolated since it has to inherit RibbonTab class. Maybe it is not an issue here and I'm not sure whether it should be changed somehow, it just looks strange to me."
433,"I've only briefly looked over your code. I haven't worked with std::string much but I've worked a lot with the API. Assuming you got all your lengths and arguments right (sometimes making sure the terminator and wide vs multibyte lengths are all right can be tricky), I think you're on the right track. I think the first routines you posted unnecessarily allocate an additional buffer. It isn't needed."
434,"Let's not get pattern tastic. You have an employee, that's good. Then you have a way to find them from various sources? Let's call that Employees . Then you are able to perhaps get them and find them. So you have Employees.findByName() - where you expect that there is one, and returns an Employee or throws. Then you might have a queryByName() where you don't know if there is one at all, which might return a list or iterable. Then you have some different implementations. I personally think that Impl is a terrible thing. It adds more letters without actually telling you more about the implementation. Wr decided the interface was Employees, so now we have maybe an HttpEmployees or a HibernateEmployees , see we implemented the interface, gave more information about the implementation, but didn't need to use Impl. You've made a bit of an error by putting the EmployeeService (what I called Employees ) in the Employee class. The Employee should not know about keeping records on the Employee. In addition, you should be very wary of static methods here, in this case you would be saying that in a particular application, employees can only be found from one source , because you have a static. Why not instantiate those things that need to use the Employees  interface with a particular implementation... One more thing... getAllEmployees() is unlikely to be useful. Many companies have tens or hundreds of thousands of employees....."
435,"In general, you should never handle transactions in dao code, as you never know where the transaction boundary is. You should let whoever wants to control the transactions control them. Code that starts and commits a transaction in every dao method is likely to be problematic. Btw: not very keen at all on 'dao' but as you use it, so will i."
436,I would optimize by not storing meta data along with the data. How does the view count really affect the article itself? Not at all. It's a different thing... So store it in a different place.
437,"Sorry, this might sound harsh, but I really think GPLv3 is plain overkill for your code.
And this even might sound harsher: What you want to archive can be done in a 3-liner, so I think Public Domain would fit far better. I do not want to show you up as everybody starts as beginner, and basically it's your idea which counts, the implementation itself is mostly an exercise for the reader.  So continue learning shell, it's tremendously powerful! An elaborated example which basically does what your script does, it borrows some details from your script: #!/bin/bash

cd ""`dirname ""$0""`"" || exit

[ 0 = ""$#"" ] &&
set -- gconftool-2 --set --type=string /desktop/gnome/background/picture_filename

url=""`curl -sL http://dynamic.xkcd.com/random/comic/ | grep -om1 'http://imgs.xkcd.com/comics/[^.]*\.[a-z]*'`""
img=""$PWD/xkcd-wallpaper.${url##*.}""

curl -so ""$img"" --fail ""$url"" &&
""$@"" ""$img"" I wrapped the lines just for better readability.  Note that every programmer has a set of favorite tools and ways, and one always can learn something from each other.  Like I learned ""grep -o"" from your script today (I usually use sed, but grep -o is far more elegant in this context). The nice thing on Unix is that you can chain things so easily and flexibly.  There is no need to squeeze everything into one monolithic script.  The better way would be to create two scripts as building blocks and then join them together. One pulls the picture.  Second installs the picture on gnome.  Like this: xkcd-pull.sh: #!/bin/bash

url=""`curl -sL http://dynamic.xkcd.com/random/comic/ | grep -om1 'http://imgs.xkcd.com/comics/[^.]*\.[a-z]*'`""

img=""/tmp/xkcd-wallpaper.${url##*.}""
img=""${1:-$img}""

curl -so ""$img"" --fail ""$url"" && echo ""$img"" set-gnome-wp.sh #!/bin/bash

exec gconftool-2 --set --type=string /desktop/gnome/background/picture_filename ""$@"" And then join that together, for example on the commandline: img=""`./xkcd-pull.sh`"" && ./set-gnome-wp.sh ""$img"" Following this pattern you can easily extend it for KDE or perhaps even adapt it to Cygwin under Windows.  Please note that these snippets even contain some extra bloat, which might come handy later on. As you can see easily, doing it this way there is nothing left which you cannot look up in a manual.  So all creativity left is your idea ""XKCD -> Wallpaper"" while the implementation is ""trivial"". (I did not test the code snippets here.  Maybe there still is a typo in it.  My contributed code is Public Domain.)"
438,"Calculating totals of a transaction. I am working on a project where I have to calculate the totals of a transaction.  Unfortunately, coupons have proven to be quite an issue.  There are four types of coupons: transaction percentage, transaction dollar amounts, item percentage and item dollar amounts. I ended-up with this beast of a method, and was wondering if it is clear why I'm doing each part in the way I am.  Are my comments are detailed enough?  Is my code is more-or-less readable?  Is there a way to simplify any of it? private static Totals CalculateTotals(List<Item> items, List<Coupon> coupons, List<Payment> payments)
{
    // Local vars, totals gets returned.
    Totals totals = new Totals();
    decimal subtotal = 0;
    decimal workingSubtotal = 0;
    decimal discounts = 0;
    decimal tax = 0;
    decimal paid = 0;
    decimal taxRate = (Initialization.Location.TaxRate ?? 0);


    // Get the subtotal before any discounts.
    items.ForEach(i => subtotal += (i.Price ?? 0));


    // An ItemCoupon takes a whole amount or percentage off of a single Item.
    // It can take it off of the most expensive, or least.  Nothing in the middle.
    foreach (var coupon in coupons.OfType<ItemCoupon>())
    {
        // new Item to hold the item to be discounted.
        Item item;

        // Find which item to discount.
        if (coupon.DiscountMostExpensive)
        {
            item = items.OrderByDescending(i => i.Price).FirstOrDefault();
        }
        else // Otherwise, Discount LEAST Expensive.
        {
            item = items.OrderByDescending(i => i.Price).LastOrDefault();
        }

        // Remove it from the list, before editing the price.
        items.Remove(item);

        // Set new price of item based on the type of coupon. (Percent, or whole dollar.)
        if (coupon.PercentageCoupon)
        {
            item.Price = Utils.CalculatePercentage(item.Price, coupon.DiscountPercentage);
        }
        else
        {
            item.Price = (item.Price ?? 0) - (coupon.DiscountAmount ?? 0);
        }

        // Add the item back to the list, with the new price.
        items.Add(item);
    }


    // Now that the single items have been discounted, let's get a wroking subtotal.
    items.ForEach(i => workingSubtotal += (i.Price ?? 0));


    // A TransactionCoupon takes a whole amount or percentage off of the entire transaction. 
    // To simplfy tax caculation--and because some items are non-taxable, 
    // oh and, because we don't want any one item going below zero--we 
    // split the discount over all the items, evenly.
    foreach (var coupon in coupons.OfType<TransactionCoupon>())
    {
        if (coupon.PercentageCoupon)
        {
            // If it is a Percentage Coupon, simply take said percentage of off each item.
            items.ForEach(i => i.Price = Utils.CalculatePercentage(i.Price, coupon.DiscountPercentage));
        }
        else
        {
            // If it is a whole amount, get each items percent of the of the subtotal, and discount them equally.
            // This would look way too confusing using lambda.
            foreach (var item in items)
            {
                decimal discount = (item.Price ?? 0) * ((coupon.DiscountAmount ?? 0) / workingSubtotal);
                item.Price = item.Price - discount;
            }
        }
    }


    // Let's get the new-new-new subtotal.
    workingSubtotal = 0;
    items.ForEach(i => workingSubtotal += (i.Price ?? 0));


    // Calculate the total discounts.
    discounts += (subtotal - workingSubtotal);


    // Set tax for order.  (This must be done after ALL discounts have been applied)
    foreach (var item in items.Where(i => i.Taxable))
    {
        tax += ((item.Price ?? 0) * taxRate);
    }


    // Get the total amount paid.
    payments.ForEach(p => paid += p.Amount);


    // Add all the results to the Totals struct.
    totals.Subtotal = subtotal;  // Never return the workingSubtotal;
    totals.Discounts = discounts;
    totals.Tax = tax;
    totals.Paid = paid;
    totals.Total = ((workingSubtotal + tax) - paid);

    return totals;
}"
439,"Some things I noticed. It seems like a lot/all of your public functions are simply doing the same thing, setting the functions params into an array, calling setJSON which simply appends the APIusername and APIpassword and then you fetch and catch any errors. You could have one method that does this and only methods that differ from this logic would do something else. looks like you can just use PHP's compact() function for most of what you are doing. For setJSON() , instead of looping through $data and remaking the same array, why not just add $data['APIUsername'] = $this->APIUsername; and $data['APIPassword'] = $this->APIPassword; and then return the json_encode($data) For your fetch() method, you could get rid of the curl requirement and just use streams in PHP using a combination of stream_context_create() and file_get_contents() . I think it also might be useful to glance over this articles about Exceptions . If you really are just passing along data with the username and password attached, you may just want to just use the magic __call method, that will check an array of acceptable API methods to call and then take the params, compact, add username and password, and then call your fetch method with this data and return. Example below. <?php
class API {
    protected $_api_methods = array(
        'balance' => array('EmailAddress', 'Password'),
    );

    private $_api_username;
        private $_api_password;
    private $_api_url = 'someurl.com';

    public function __construct($username, $password)
    {
        if (!$username || !$password) {
            throw new APIException('You must provide API credentials');
        }

        $this->_api_username = $username;
        $this->_api_password = $password;
    }

    public function __call($method_name, $arguments)
    {
        if (!in_array($method_name, array_keys($this->_api_methods)) {
            throw new APIException(""$method_name is not a valid API method"");
        }

        $data = $this->setJSON($method_name, $arguments);
        return $this->fetch($method_name, $data);
    }

    protected function setJSON($method_name, $data)
    {
        if (empty($data)) {
            throw new APIException('No data provided');
        }

        $data = array_combine($this->_api_methods[$method_name], $data);

        $data['api_username'] = $this->_api_username;
        $data['api_password'] = $this->_api_password;

        return json_encode($data);
    }

    protected function fetch($method, $data)
    {
        $context = stream_context_create(array(
            'http' => array(
              'method'  => 'GET',
              'timeout' => 5,
            ),
        ));

        try {
            $ret = file_get_contents($this->_api_url . $method, false, $context); 
        } catch (APIException $e) {
                $ret = $e->getMessage();
        }

        return $ret;
    }
}

class APIException extends Exception {}"
440,"The first thing that I noticed is that you're using ?? 0 a lot. If you could restructure your code to ensure that the prices won't be null that would allow you to remove those, which would clean up your code a bit. Further you're often using the pattern: int foo = 0;
//...
items.ForEach(i => foo += (i.Price ?? 0)); This can be simplified using LINQ's Sum method to: int foo = items.Sum(i => i.Price ?? 0); (Or just i.Price instead of i.Price ?? 0 if you heed my earlier suggestion). // Remove it from the list, before editing the price.
items.Remove(item); Unless item is a value-type, you don't need to delete and re-add it to change it."
441,"A few comments: Please avoid comments that tell you ""what"" the code is doing.  There is no reason to have a comment that says ""The next line of code will add two numbers"", when I can just look at the next line and see the two numbers being added.  Comments should be used to explain ""why"", not ""what"". Generally, clean code shouldn't require too many comments other than method headers.  A common pattern to look for is if you have a comment followed by several lines of code, you should probably take that block of code and refactor it into a separate method with a descriptive name, with the comment becoming the method header. Use helper methods.  The CalculateTotals() method should be just a few lines that calls into other methods like CalculatePreDiscountSubtotal(), CalculateItemDiscounts(), CalculateTransactionDiscounts(), and CalculateStatistics().  That makes it much easier to understand the overall flow of CalculateTotals(), while also making each of the smaller pieces easier to understand and debug. Why are you removing item from the list, modifying it, and then re-adding it?  You should be able to just modify the object while it's in the list. In the item loop, do you really want to sort the items on each iteration?  Not only is there a perf optimization to be made by pulling it out of the loop, the logic here is possibly broken.  Did you intend to re-sort the items every time with discounts applied, or by original price?  In other words, if you have two coupons that apply to the most expensive item, do you want them to potentially apply to the same item?  Do you apply them one at a time with whatever item is most expensive after all coupons processed so far?  Or do you want to apply them to the two most expensive items?  Note that in the second to last option, the order in which you process the coupons might matter. I would recommend not modifying the Price of an Item.  Instead, I would add a Discount member to Item and increment that. When calculating the price for a non-percentage coupon, your code will potentially make the price of an item negative, which is probably not what you want. Why not keep track of the transaction discount separately rather than trying to equally subtract it from each item in the order?  It would more closely match the actual problem domain, and simplify the code a great deal.  Not to mention that the code as is can set the price of an item to a negative number."
442,"I think with ""performance"" you mean the cost of keeping a PHP session open as long as the CURL request waits for an answer.  If it is about ""speed in PHP"" or ""loading time"" etc. then please don't get me wrong, but PHP is a farm horse, it never will make a good racehorse. Technically there is no way to speed up remote API calls, as you always need to wait for that.  The CURL library should usually performs very well, however I am not an expert when it comes to PHP+CURL. The only thing I spot is that you disable SSL certificate checking.  Doing that allows for MITM attacks, so perhaps this is not a good idea (SSL without verify is like a condom with a hole). What comes into my mind is that it always is not a good idea to keep RPC calls with a longer duration around, so I would recommend to change that into more phases.  However that voids your class, as the complete framework has to be rewritten. I cannot show you code, but here is the idea: When the user submits the RPC to your app, the app stores the request (into some database table) and returns immediately, so the user can see something like ""processing"" on the page. In the background some task picks up the request which is stored (in the database) and processes it.  The result then is saved (in the database). The client side then polls (or waits, retries, whatever) until the result is available. The ""funny"" thing about this is, that this takes even longer because of the handling of the background job.  However as the user can see some progress the waiting experience is better. Perhaps you can even do it completely asynchronous, so if the user transfers money you see some ""scheduled tasks"" list, so the user can continue to do other things (this probably involves Ajax).  And then, when the result is available, the ""scheduled task"" blinks (or whatever, you get the idea) such that the user can look into the result. All is a design issue:  Think about a DoS situation, where 1000 users click onto the ""send money"" button in the same second (perhaps after some TV add ran).  Your web server then needs to keep open 1000 sessions until all the 1000 CURL requests are done in parallel.  The API side usually will have some DoS prevention and reject 980 CURL requests, because you are only allowed to have 20 requests open simultaneously with the same API key (this is quite common). So you have to serialize the requests anyway.  Doing this from within PHP (like from within your class) is a pain in the a** (starvation problems, aborting manually. debugging concurrency, etc.), but with the background tasks it is easy:  If you only have, say, 10 concurrent processors of stored requests, there never will be any problem with reaching the API request limit."
444,"Simple star rating system. I'm working on a simple star rating system, and before I move on to actually ""tallying"" the votes, which I figure I'll just do with $.ajax , I wanted to make sure what I've done so far has been done as well as it can be. JavaScript //max number of stars
var max_stars = 5;

//add images to the ratings div
function fill_ratings() {
    var $rating = $(""#rating"");
    if($rating.length) {
        for(i = 1; i <= max_stars; i++) {
            $rating.append('<img id=""' + i + '""src=""star_default.png"" />');
            }
        }
    }

//variables...
var hovered = 0;
var has_clicked = false;
var star_clicked = 0;

function handle_ratings() {

    if(has_clicked == true) {
        for(i = 1; i <= star_clicked; i++) {
            $('#rating img#' + i).attr('src', 'star.png');
        }
    }

    $('#rating img').hover(function() {
        hovered = Number($(this).attr('id'));
        for(i = 1; i <= max_stars; i++) {
            if(i <= hovered) {
                $('#rating img#' + i).attr('src', 'star.png');
                } else {
                    $('#rating img#' + i).attr('src', 'star_default.png');
                }
            }
        }).click(function() {
                //if they click a star, only set the stars to grey that are after it.
                star_clicked = Number($(this).attr('id'));
                has_clicked = true;
                    for(i = 1; i <= star_clicked; i++) {
                        $('#rating img#' + i).attr('src', 'star.png');
                        //handle the vote here. eventually.
                    }                               
                }).mouseout(function() {
                    //if they haven't clicked a star, set all stars to grey.
                    if(has_clicked !== true) {
                            $('#rating img').attr('src', 'star_default.png');
                        } else {
                            //show their rating
                            for(i = 1; i <= max_stars; i++) {
                                if(i <= star_clicked) {
                                    $('#rating img#' + i).attr('src', 'star.png');
                                } else {
                                    $('#rating img#' + i).attr('src', 'star_default.png');  
                                }
                            }       
                        }
                    });
                }

$(function() {
    fill_ratings();
    handle_ratings();
    }); HTML <div id=""ratings""></div> The code works, but I was wondering if anyone notices any code that I can improve. Also, is there anything wrong with the way it...looks? Should I be commenting more, indenting differently, or any other ""formatting"" type things?"
445,"Django query_set filtering in the template. Can I make my template syntax simpler? I'm hoping to eliminate the if and maybe also the for block. This worked in the shell but I can't figure out the template syntax. recipes[0].recipephotos_set.get(type=3).url model.py class Recipe(models.Model):
    ....

class RecipePhotos(models.Model):
    PHOTO_TYPES = (
    ('3', 'Sub Featured Photo: 278x209'),
    ('2', 'Featured Photo: 605x317'),
    ('1', 'Recipe Photo 500x358'),
    )
    recipe = models.ForeignKey(Recipe)
    url = models.URLField(max_length=128,verify_exists=True)
    type =  models.CharField(""Type"", max_length=1, choices=PHOTO_TYPES) view.py recipes = Recipe.objects.filter(recipephotos__type=3) template.html {% for recipe in recipes %}

      {% for i in recipe.recipephotos_set.all %} 
          {% if i.type == '3' %}
              {{ i.url }}
          {% endif %}
      {% endfor %}

  <a href=""/recipe/{{ recipe.recipe_slug }}/"">{{ recipe.recipe_name }}</a></li>

{% empty %}"
446,"While OP's solution looks right for me, Ron's improvement invents a race condition: Thread 1 (in getObject()): } while (!refHead.compareAndSet(head, next));

T value = next.value; Thread 1 is suspended here, so it did not yet execute next.value = null; We know that value!=null and refHead now is next, so refHead.get().value!=null Thread 2 (in getObject()): head = refHead.get();
    assert head.value == null; Here the assert bites even that everything is will be ok again after Thread 1 continues."
447,"The obvious improvement to the code you have here is that you should package it up as a jQuery plugin, to improve code reusability and reduce the number of global variables created. You'll also want to use a class instead of id , to improve reusability (if you chose not to change this to a plugin), and to store as much information on the element themselves, instead of using global variables to store information, to create less coupled functions. Otherwise, going down the code line by line: Inside the fill_ratings function: $rating.append('<img id=""' + i + '""src=""star_default.png"" />'); You are creating elements with id attribute starting with a number. This is illegal before HTML5. Also, you can create elements in a more 'jQuery' manner with this syntax instead: $('<img>', {
    id: 'star-' + i,
    src: 'star_default.png'
}).appendTo($rating); The main benefit of this is that now you have a reference to element you just created. You can then push it to an array, to reuse later, instead of creating new jQuery objects by attempting to select the same elements again later in the code. Variable declaration - mostly a style suggestion, but you can avoid multiple var s by using the comma operator: var hovered = 0, 
    has_clicked = false, 
    star_clicked = 0; Don't use $(this) to get element attributes : $(this).attr('id'); is about 97% slower than this.id; the latter is less verbose and much much more efficient. Inside each of the event handlers attached to #rating img - instead of looping through all #rating img element, like you're doing: for (i = 1; i <= max_stars; i++) {
        if (i <= hovered) {
            $('#rating img#' + i).attr('src', 'star.png');
        } else {
            $('#rating img#' + i).attr('src', 'star_default.png');
        }
    } We can always use the information already given (the current element triggering the event) to do the processing. The above code, for instance, can be written as: $(this).prevAll().attr('src', 'star.png'); thereby reducing the all those lines into one, and removing a variable. Most of the other event handlers can be similarly rewritten. Type coercion to Number can be done without using Number - just append a + in front of the variable. In your case, it is completely unnecessary, since you're coercing it back to String again after joining it to another string in the selector passed to the jQuery selector"
448,"I would seperate the coupon discount logic into a seperate class.  Have a CouponBase class, that has a function .ApplyCouponToItem(Item item).  Then you can have a PercentageCoupon class and a WholeAmountCoupon class, and each one can override that function to do what it needs to do.  This way, your code won't be cluttered with discount logic and will be better decoupled in the face of future changes to coupons."
449,"I'm currently going through the book and yes, as admitted it's not the most Ruby-esque code I've ever seen, but I think it does achieve the main objectives of what it was set out to accomplish and I don't think the Ruby gets in the way of that. The thing I've noticed most when trying to following along, run, and even augment some of the methods was the general flow. There's a few things I can't say ""YOU SHOULD DO IT THIS WAY THUS SAYETH THE RUBY"" but it would just ""feel"" more comfortable if: The configurations were done at the beginning of the file in a Hash. As far as using a Hash, you see Hash configs a lot in Ruby, many times due to the use and reading of .yml config files so I guess I just expect configs to be done in a Hash. (If this were an application, I'd say put the configs in a .yml file, but I understand the desire to have the full solution encapsulated in a single file.) The ""search"" method definition were at the beginning of the file, right under a Hash outlining the config. (The calling of the search method still happens at the bottom in your if FILE section.) Ok so the at the beginning thing is definitely debatable, but I just found myself dropping in to each of these files, scrolling to the bottom, reading the config, scrolling up a little and reading the ""search"" method to get a high level view of what's going on, then scrolling to the top again to dig into the supporting methods. Another debatable style I've enjoyed in both reading and writing Ruby is using a space to pad the beginning and end of an inline block. So children.sort!{|x,y| y[:fitness] <=> x[:fitness]} becomes children.sort!{ |x,y| y[:fitness] <=> x[:fitness] } Yeah it's a small thing and some people will say anything that adds extra keystrokes to typing is bad, but I find it much more readable. Also just now noticing some inconsistent spacing when using operators...and as you can probably guess, I vote for more spacing in most situations. ;) def crossover(parent1, parent2, rate)
  return """"+parent1 if rand()>=rate
  point = 1 + rand(parent1.size-2)
  return parent1[0...point]+parent2[point...(parent1.size)]
end becomes def crossover(parent1, parent2, rate)
  return """" + parent1 if rand() >= rate
  point = 1 + rand(parent1.size-2)
  return parent1[0...point] + parent2[point...(parent1.size)]
end And now I'm getting nit picky...so I'm done for now."
451,"I'll refer you to a Stack Overflow post that pretty much nails the answer. I assume that you want to display all recipes that have ""Sub Featured Photos"". The call recipes = Recipe.objects.filter(recipephotos__type=3) will give you a queryset of recipes that have at least one photos with type 3. So far so good. Note, that this code is in the views.py file and not in the template. Like the StackOverflow post mentioned, you should put the filtering code in your view or model. Personally I'd prefer writing a function for your model class: class Recipe(models.Model):
    (...)
    def get_subfeature_photos(self):
        return self.recipephotos_set.filter(type=""3"") And access it in the template like this: {% for recipe in recipes %}
      {% for photo in recipe.get_subfeature_photos %}
            {{ photo.url }}
      {% endfor %}
      (...)
{% endfor %} Please note that the function is using filter() for multiple items instead of get() , which only ever returns one item and throws a MultipleObjectsReturned exception if there are more."
452,"There seems to be duplication, I'm just going to put changes for each table in a separate answer. Staff Table The mother and father contact information could be put into a separate table. That way you are not limited if someone has different contacts contact_id, contact_name, relationship, contact_number, contact_address, fk=staff_id Can a Staff have more than one StaffType? Like can a teacher be a coach? If so the table must be altered. Will all types have a specialty? Regarding DateOfHiring and YearsOfService , the length of service can be deduced using the current date and the DateOfHiring . I don't see a way to deactivate a staff member. What happens when they are terminated? Dropping their record is not a good solution. You may want to consider adding a termination date to the table."
453,"As well as the other problems already outlined, your code gets a file 'index.html', which could clobber any file of the same name in the current directory.  Maybe it would be a good idea to create a new directory so that you don't mess things up? It would also be a good idea to make sure that the debris is removed even if the script is interrupted.  You do that with 'trap'.  I recommend trapping HUP, INT, QUIT, PIPE and TERM signals: trap ""rm -f index.html; exit 1"" 0 1 2 3 13 15

...other actions...

rm -f index.html
trap 0 The trap 0 at the end ensures that your script can exit successfully - very important.  You can make your trap actions as complex as necessary - and should aim to keep them as simple as possible.  One advantage of creating a directory for intermediate files is that you can simply remove that directory to clean up."
455,"I agree with all of the other's observations above, but I will touch on a few particular points: You could definitely do some additional normalization. There are places where this may come down to a conscious decision NOT to fully normalize (there can be some reasons not to . . . Depending on your problem space), but overall, when I begin to see the same field names appearing in multiple tables (other than PK/FK relationships), I become suspicious. An example (which Martin York touches on, but I will take a step further) is all of the ""People"" fields. Note the level of duplication between the ""Staff"" table and the ""Student"" table with regard to Mothers/Fathers/Workplaces/Professions. Mothers and fathers are people. Staff are also people. Students are people. I notice you have an ""Observations"" field in your student table. I strongly recommend you define an ""Observations"" table with a foreign key to the ""Students"" table with the following fields (The Staff_ID is to record who made the observation). Over time, observations will accumulate, and it will be helpful to know when, and who made them: Observations Table: Observation_ID, Student_ID, Observation_Date, Observation, Staff_ID I agree with the notion that there should be a separate ""Contact_Info"" table. Further, I am betting you will want to send the student (or the student's parents) mail from time-to-time. I would include an ""Addresses"" table for this purpose. I won't pretend to know how it works in Bolivia, but in the United States, schools like to mail out report cards (although, parents ALSO can track their student's progress over the internet these days ...). Staff salaries can change. While you may decide it is acceptable to overwrite this value, this is another area where correct normalization indicates a Staff-Salaries table, which includes fields for ID, Salary, and Effective_Date. How far you take the normalization process can be tricky, but as one or more of the other commenters observed, you should always shoot for 3NF. I promise you, from my own painful experience, that when your boss decides he wants a report showing staff salary increases over a five-year period, you will be glad you did. While it often happens that there is a conscious, design-based decision to ""de-normalize"" a table, the decision should documented for those who may need to maintain your database in the future, when you are no longer there. Hope that helps!"
456,"One thing which immediately jumped out to me is this: LastNameFather string,
LastNameMother string,
FatherName string,
MotherName string,
FatherContact string,
MotherContact string,
FatherPlaceOfWork string,
MotherPlaceOfWork string, Your design assumes that every student will have exactly 1 mother and exactly 1 father. I can tell you now that will not be the case. Students with divorced parents may have two mothers and two fathers, all of whom will want to have their contact info listed. Some students may have gay or lesbian parents, and thus two fathers or two mothers. Some students may have neither , and instead may have a legal guardian who is neither their father nor mother. One solution to this would be to have a table for a ""person"", and link people to each student. Identify whether that person is a father or mother (or non-parental guardian). This will also simplify having siblings: you can have the same mother, father, etc. for multiple students. For the majority of students, this won't be an issue, but for more than you might think, it will. Do those families and your management a favor by making it easy to handle various family scenarios!"
457,"This FxCop warning is basically asking you to make sure (""Review"") that that non-constant you are passing ( directory ) to the security permission does not change while the permission is in effect.  Basically, FxCop isn't sure if it is possible for the code (or some rogue module that a hacker has put in place) to do something like the following: Set directory to ""c:\Temp\"" .Demand() <untrusted> Set directory to ""c:\Windows\System32\"" </untrusted> Write something into a file contained in directory . In this particular case, since directory is a non-ref parameter, it is not possible for another module outside your call-descendants to modify it.  Thus, what you need to check for: Anything in this method assigning a value to directory Anything in this method that passes directory by reference ( ref / out /unsafe pointers) Disclaimer: I am not a code security expert and have no formal training as such.  I may have missed entire classes of things to look for here. If you are dealing with code that has real-world security implications, I highly suggest you hire a consultant who does, rather than take what I wrote above as gospel."
458,"Given the specification of strncat() , you are misusing it; if you must use a concatenation operation, simply use strcat() . For reference, the C standard says: 7.21.3.2 The strncat function Synopsis #include <string.h>
char *strncat(char * restrict s1, const char * restrict s2, size_t n); Description The strncat function appends not more than n characters (a null character and
  characters that follow it are not appended) from the array pointed to by s2 to the end of
  the string pointed to by s1 . The initial character of s2 overwrites the null character at the
  end of s1 . A terminating null character is always appended to the result. 261) 261) Thus, the maximum number of characters that can end up in the array pointed to by s1 is strlen(s1)+n+1 . Now, don't get me wrong - what you are doing is safe, because you've previously checked the length, but making strncat() do the donkey work of checking the length is really pointless.  You are also not telling the whole truth to strncat() ; there is more space in the target buffer than you are admitting.  That is safe, but it is a bit wasteful. I suggest using a simple function such as: char *copy_string(char *target, const char *source)
{
    strcpy(target, source);
    return(target + strlen(source));
}

target = asString;
target = copy_string(target, ""name="");
target = copy_string(target, dev->name);
target = copy_string(target, ""&ip="");
target = copy_string(target, ipAsString);
target = copy_string(target, ""&mac="");
target = copy_string(target, dev->mac);
target = copy_string(target, ""&type="");
target = copy_string(target, dev->type); One advantage of this is that it avoids quadratic behaviour.  As your output string grows longer, the strncat() operation gradually has to skip over more and more characters each time it is called.  With long enough strings, this can become a measurable overhead.  It is a nuisance that strcpy() et al return the start address of the string instead of the address of the null at end of the string; it means you end up scanning it twice - once to copy, once to determine the length. That notation is still a bit tedious to use.  I have previously created variable-length argument list functions like this: #include <stdarg.h>

char *vstrcpy(char *buffer, size_t buflen, ...)
{
    const char *arg;
    char *bufend = buffer + buflen;
    char *target = buffer;
    va_list args;

    va_start(args, buflen);
    while ((arg = va_arg(args, const char *)) != 0)
    {
         size_t arglen = strlen(arg);
         if (target + arglen >= bufend)
             return(0);
         strcpy(target, arg);
         target += arglen;
    }
    return(target);
}

target = vstrcpy(asString, maxLength, ""name="",  dev->name,
                                      ""&ip="",   ipAsString,
                                      ""&mac="",  dev->mac,
                                      ""&type="", dev->type, (const char *)0);
if (target == 0)
    ...something went wrong despite your pre-computation... Note that you must provide an explicit cast to that final end marker; you would be invoking undefined behaviour on Windows 64 (as a specific example) if you omitted the cast.  This is as notationally convenient as the equivalent snprintf() (it requires you to write a null pointer at the end instead of a format string consisting of repeated %s operations near the beginning), and it is as safe.  You can decide on the best return value - I've chosen NULL to indicate that there wasn't enough space and a pointer to the final null if there is enough room.  You could mimic snprintf() more closely if you calculated the full length that would be required, just making sure to skip the copying when you've reached the end of the string.  You probably then need to use offsets rather than pointers because although you are guaranteed to be able to evaluate buffer + buflen , you are not guaranteed to be able to evaluate buffer + buflen + 1 .  That design leads to: #include <stdarg.h>

size_t vstrcpy(char *buffer, size_t buflen, ...)
{
    const char *arg;
    char *target = buffer;
    size_t offset = 0;
    va_list args;

    va_start(args, buflen);
    while ((arg = va_arg(args, const char *)) != 0)
    {
         size_t arglen = strlen(arg);
         if (offset + arglen < buflen)
             strcpy(target + offset, arg);
         offset += arglen;
    }
    return(offset);
}

len = vstrcpy(asString, maxLength, ""name="",  dev->name,
                                   ""&ip="",   ipAsString,
                                   ""&mac="",  dev->mac,
                                   ""&type="", dev->type, (const char *)0);

if (len >= maxLength)
    ...something went wrong despite your pre-computation... This only copies whole arguments that fit.  If there are 20 characters left in the buffer but the next string is 30 characters long, then the 20 characters are left unused.  You still get told the actual length of the space required, though, and are guaranteed no overflow.  If you have different requirements (such as copying as much as possible, even if it means a partial argument copy), then modify the code to do as you require.  In my book, if the strings don't fit where I'm trying to place them, I've screwed up. I'm not sure if modern optimizing compilers pre-compute strlen(""string constant"") .  If they don't, you can get a small benefit from using sizeof(""string constant"")-1 instead, where the -1 accounts for the terminal null that sizeof() includes in the size it returns. This example is not big enough to benefit from a table-driven approach to assembling the string.  Occasionally, if the structures have enough elements in them, you can use a table-driven approach with the offsetof() macro identifying the start locations of the string members in the data structure.  You might need to encode the types for mixed types (such as the IP address, or numbers that have to be converted to a string before printing).  It is those complications that mean you need a considerable number of elements in the structures before you use the technique. In outline, for a structure that only contains null terminated strings, you can do: struct description
{
    const char *tag;
    size_t      offset;
};

static const struct description dev_desc[] =
{
    { ""name="",  offsetof(pDevice, name) },
    { ""&ip="",   offsetof(pDevice, ip)   },  // Taking liberties here!
    { ""&mac="",  offsetof(pDevice, mac)  },
    { ""&type="", offsetof(pDevice, type) },
};
enum { DEV_DESC_SIZE = sizeof(dev_desc) / sizeof(*dev_desc) };

size_t offset = 0;
for (size_t i = 0; i < DEV_DESC_SIZE; i++)
{
     offset = vstrcpy(&asString[offset], maxLength - offset,
                      dev_desc[i].tag, ((char *)&dev + dev_desc[i].offset),
                      (const char *)0);
     if (offset > maxLength)
         break;
} This iterates through the fields in the structure dev using the control information from the descriptor array dev_desc .  The expressions get more complex if you have to deal with other types than just character strings.  If you ever have the misfortune to deal with structures with hundreds of elements, though, this can be a life-saver since you reduce the code to a simple loop and a simple table which encapsulates the complexity of the structure.  (I see Jerry Coffin gave an answer using some of this idea, but I think my version has some merits over his.) Your final assignment buys you nothing: asString[actualLength] = '\0'; The null was inserted by the final strncat() ."
461,"Most of these were already mentioned but I'd like to add: Get rid of item.Price ?? 0 . Looks like you finally missed this construction in TransactionCoupon loop for non-percentage coupons. You have there: item.Price = item.Price - discount; Use Sum instead of ForEach . It has two advantages - works on IEnumerable and allows more easily understand that in this particular line you need only sum of items being iterated, but not something that was in accumulator before. Do not introduce all you variables (unless you write in C) in the beginning of the methods . It is usually recommended to introduce variable right before it's first use. It will allow you to join variable declaration and it's assignment, which also improves readability. And in this case you will be able to use object-initializer for total variable, which (IMO) is better than direct property assignment you're doing in last lines. Too many parentheses here: totals.Total = ((workingSubtotal + tax) - paid); Any reason to take parameters as List instead of IEnumerable ?"
462,"Loops for removing unnecessary lines. I have the following method: private void removeUnnecessaryLines(List<ScatterViewItem> list)
{
    List<Line> remove = new List<Line>();
    foreach (Line line in lines)
    {
        SourceFile destination = (line.Tag as Call).getCallee();

        foreach (ScatterViewItem svi in list)
        {
            SourceFile test = svi.Tag as SourceFile;
            if (test.Equals(destination))
            {
                remove.Add(line);
            }
        }
    }

    foreach (Line l in remove)
    {
        lines.Remove(l);
        Dependencies.Children.Remove(l);
    }
} As you can see, there is a lot of iteration and casting. Is there a simple way to improve that?"
463,One thing that may be an issue is that it assumes the string is ANSI formatted using the currently active code page (CP_ACP). You might want to consider using a specific code page or CP_UTF8 if it's UTF-8.
464,"The most obvious improvement would be to use LINQ's Where method to filter the lines list instead of building up a list of to-be-deleted items and then deleting them. In addition to being easier to read and understand it will have the benefit of its runtime not being quadratic in the length of lines . You can also use the List<T>.RemoveAll method which also takes a predicate like Where (though the predicate specifies the items to be removed, so it's in a way the opposite of Where ), but modifies the list in-place, like your solution did."
465,"Simple MVC in PHP. I have a very simple PHP MVC library for my auto-didactic pedagogical purposes. I'm having a little trouble figuring out how to add in the observer patterns as show in this UML diagram from Wikipedia . model is simply contains an array and acts as a key-value store. contrlr accepts input, ostensibly from $_POST , to update a model. So then the observation relationships between the three are where my understanding breaks down. I have contrlr implementing SplOberserver and SplSubject , but how exactly should I handle communication between them? Concatenate strings to strHtml ? Please note that I want to have these classes conform to the UML diagram linked from Wikipedia above. class model {

        private $arrValues = array();

        public function __get($var) {
                return $this->arrValues[$var];
        }

        public function __set($var, $val) {
                $this->arrValues[$var] = $val;
        }

}

class contrlr implements SplOberver, SplSubject {

        private $objModel;

        public function __construct( model $objModel ) {
                $this->objModel = $objModel;
        }

        public function parsePost( array $arrPost ) {
                foreach ( $arrPost as $key => $value ) {
                        $this->objModel->$key = $value;
                }
        }

        public function update() {
        }

        public function attach() {
        }

        public function detach() {
        }

}

class view implements SplObserver {

    private $strHtml;

    public function getHtml() {
        return $this->strHtml;
    }
}"
466,"Need a feedback on my Javascript code and app implementation idea. I'm new into Javascript, and I'm not sure that is a good approach. The code works, and does what I need it to do but I'm sure I didn't do the things the right way. Can you give me feedback about the implementation idea and code? So, let's say that in index.html I have the following code into body section. <script type=""text/javascript"" src=""js/main.js"" language=""javascript""></script> The content of the main.js file is the following: document.write('<script language=""javascript"" type=""text/javascript"" >');

function loaded() {
}

loaded(); 
document.write('</script>'); I know that using document.write it is not a smart thing at all. I'm sure that other things are faulty, but I'm newbie and I'm looking for your feedback."
467,"I think you want to take out the document.writes and add <body onload=""loaded()""> (or whatever function you need to run first) to index.html"
468,"From a quick glance there are a couple of points where your making simple mistakes. // Document.write is bad
document.write('<script language=""javascript"" type=""text/javascript"" >');

// use css definitions instead
counter_div.setAttribute('style', 'width: 310px; height: 50px; font-family:lucida,tahoma,helvetica,arial,sans-serif; display: block; overflow:hide;');

// dont set inner html. This is bad. use DOM manipulation instead
title_span.innerHTML = meter_title;

// uses eval here. pass a function rather then a string
setInterval(""increment()"", interval);

// forgetting to declare addCommas with `var`. This is implecetly global.
addCommas = function(nStr) { I shall have a look at how to redesign this. Why do you need to append the div after the script tag. It's bad by design to use the script tag in the DOM for positioning. it would be better to create a <div> to fill with the timer/counter. Refactored partly here . This includes fixing the issues above plus making the dom manipulation a bit nicer. I'm not too certain how to do refactoring on your timer code."
469,"Unlike other SPL interfaces, I'm not finding that this pair of built-in interfaces has any intrinsic value other than to provide a template.  It would be nice if Observer can automatically trigger its update() method any time Subject properties are modified in any way, but this isn't the case.  You have to set it up manually. So to start, you want to separate contrlr into separate SplSubject and SplObserver classes.  Otherwise, for all intents and purposes, it's only notifying itself. model can actually be the one that implements SplObserver in your case.  But really, which class implements which interface would be up to you.  Here's just an example of a basic usage... class Observer implements SplObserver {

    function update(SplSubject $subject) {
        echo ""notified: "" . $subject->status . ""\n"";
        }

    }

class Subject implements SplSubject {
    private $status;
    private $observer;

    function __construct(SplObserver $observer) {
        $this->attach($observer);
        }

    function __destruct() {
        $this->detach($this->observer);
        }

    function __get($prop) {
        return $this->$prop;
        }

    function __set($prop, $val) {
        $this->$prop = $val;
        $this->notify();
        }

    function notify() {
        $this->observer->update($this);
        }

    function attach(SplObserver $observer) {
        $this->observer = $observer;
        $this->__set(""status"", ""attaching"");
        }

    function detach(SplObserver $observer) {
        $this->__set(""status"", ""detaching"");
        $this->observer = null;
        }

    }


$observer = new Observer();
$sub1 = new Subject($observer);
$sub1->status = ""testing"";
$sub2 = new Subject($observer);
unset($sub2);
$sub1->status = ""testing again""; Edit: You could have separate ""model"", ""view"", and ""controller"" classes all extending an abstract base class which implements SplSubject, SplObserver.  This way they can all communicate with each other and complete your chart.  But, the problem with that all centers around the notify() method, where without the option to select which observer to notify, everyone gets the update message.  The solution to allow communication between only one observer at a time would be to rip out the reference to the SPL interfaces entirely, and having your notify() method take in a specific observer argument to send to. Take the following example, which although has basically the same methods as the SPL interfaces blended together require, it doesn't implement those interfaces at all.  Instead, each method takes in a variable number of arguments (expected to be other SubjectObserver objects)... abstract class SubjectObserver {
    protected $observer_list = array(); // assoc array of classname=>object
    public $status;

    function update(SubjectObserver $subject) {
        echo get_class($this) . "" notified by "" . get_class($subject) . "": "" . $subject->status . ""\n"";
        }

    function __destruct() {
        foreach ($this->observer_list as $observer)
            { $this->detach($observer); }
        }

    function notify() {
        $args = func_get_args();
        foreach ($args as $arg)
            { $this->observer_list[get_class($arg)]->update($this); }
        }

    function attach() {
        $args = func_get_args();
        foreach ($args as $arg) {
            $this->observer_list[get_class($arg)] = $arg;
            $this->status = ""attaching "" . get_class($arg);
            $this->notify($arg);
            }
        }

    function detach() {
        $args = func_get_args();
        foreach ($args as $arg) {
            $this->status = ""detaching "" . get_class($arg);
            $this->notify($arg);
            unset($this->observer_list[get_class($arg)]);
            }
        }

    }

class model extends SubjectObserver {}

class view extends SubjectObserver {}

class controller extends SubjectObserver {}

// initialize
$model = new model();
$view = new view();
$controller = new controller();

$model->attach($controller, $view);
$view->attach($controller, $model);
$controller->attach($model, $view);


// process some input
$controller->status = ""input received"";
$controller->notify($model);
$model->status = ""data filtered"";
$model->notify($controller, $view);"
470,"This may just be me nit picking. But using this approach I can see getting very very messy.
If you decide to have say 40 theme's. That's a heck of a lot of javascript!
and especially if you decide that you are going to support things like mobile or tablet. You are changing the look of your page using javascript.
You would be better off in my opinion to have: <link rel=""stylesheet"" href=""..\css\themes\th1.css"" id=""themesheet"" type=""text/css"" /> in your html have <select id=""theme"">
  <option value=""th1"" selected=""selected"">Theme One</option>
  <option value=""th2"">Theme Two</option>
</select> then in your javascript have $('#theme').change(function(){
    var link = '..\css\themes\{name}.css';
    link = link.replace('{name}', $(this).val());
    $('#themesheet').attr('href', link);   
}); This way you are only changing the css sheet instead of coding in the style changes for every theme."
471,"Arguments in constructors matching fields. What is your opinion in arguments in constructors matching members as in the following example public Join(final int parent, final TIntHashSet children) {
  this.parent = parent;
  this.children = children;
} I find this annoying since I have to use this. and also some code review applications generate warnings."
472,"Usage of the ternary ""?:"" operator with functions listening to click events. I've recently been doing some mods to some old code I've been maintaining for a couple of years now. As part of a wider set of scripts using YAHOO YUI 2.2 (yes, that old) for dialog-style panels, I have a function that listens to click events on 3 buttons in a given panel set: addFooListeners = function (panelType) {

    YAHOO.util.Event.addListener(""show"" + panelType, ""click"", showFoo, eval(ns + "".panel_"" + panelType), true);
    YAHOO.util.Event.addListener(""hide"" + panelType, ""click"", hideFoo, eval(ns + "".panel_"" + panelType), true);
    YAHOO.util.Event.addListener(""commit"" + panelType, ""click"", commitFoo, eval(ns + "".panel_"" + panelType), true);

} This code is the result of a number of panels/dialogs having near identical behaviour. For this round of development I've needed to add the ability to do things a little differently from time to time, so I added an object, overrides which allows me to point the show , hide and commit actions elsewhere.  I came up with the following: addFooListeners = function (panelType, overrides) {

    var handlers = {
        show: ( overrides != null ? ( overrides.show != null ? overrides.show : showFoo ) : showFoo ),
        hide: ( overrides != null ? ( overrides.hide != null ? overrides.hide : hideFoo ) : hideFoo ),
        commit: ( overrides != null ? ( overrides.commit != null ? overrides.commit : commitFoo ) : commitFoo )
    }

    YAHOO.util.Event.addListener(""show"" + panelType, ""click"", handlers.show, eval(ns + "".panel_"" + panelType), true);
    YAHOO.util.Event.addListener(""hide"" + panelType, ""click"", handlers.hide, eval(ns + "".panel_"" + panelType), true);
    YAHOO.util.Event.addListener(""commit"" + panelType, ""click"", handlers.commit, eval(ns + "".panel_"" + panelType), true);
} As you can see I'm enforcing default behaviour unless an appropriate attribute in the overrides object is set with another function (named or anonymous). Is there a cleaner / more readable way to concisely setup the handlers object?  The nested ternary seems to my eyes to be cluttering things a bit but other approaches like if ( overrides != null ) { ... } seem just as messy."
473,"If you're worried about typing the extra characters for this you can consider the coding style used in C++. To avoid ambiguity between class data and parameter's passed into a method I usually use one of the following naming conventions for data members: m_parent and m_children (prefix m indicates member), parent_ and children_ , myParent and myChildren ."
474,"It looks like you can reduce that ternary a bit by using && like this: var handlers = {
    show:  ( overrides != null && overrides.show != null ? overrides.show : showFoo ),
    hide:  ( overrides != null && overrides.hide != null ? overrides.hide : hideFoo ),
    commit: ( overrides != null && overrides.commit != null ? overrides.commit : commitFoo )
} I'm not too familiar with javascript but does the function parameter have to be checked against null? Like for example, can you further shorten the check by doing something like this? show:  ( overrides && overrides.show ? overrides.show : showFoo ),
hide:  ( overrides && overrides.hide ? overrides.hide : hideFoo ),
// ..."
475,"I've personally always found the _parent or Hungarian-notation letters at the beginning far uglier than just saying this . this is very straightforward, especially if somebody else is reading your code. If I inherit somebody else's code and they use _ I change it immediately."
476,"If you have access to a copy of ""Clean Code"" it has a chapter called ""Meaningful Names"" that I agree with. Bottom line, your name should denote exactly what it is referring to. Creating an encoding for the name a la C++ only slows down reading and causes devs to mentally skip it anyways.  Also, your ide, be it eclipse, emacs, etc. should provide highlighting that makes the difference between class variables and parameters distinct."
477,Personally I use the most natural names for member variables. This is because these are the ones you are going to use the most often (thus I dislike the m_ prefix). For things that are going to happen less often (like parameters in constructors) I shorten them or add p_ depending on context and which is the most appropriate. I have found most Java coding standards I have encountered seem to prefer (in the constructor) the use of this.member = member; Personally I dislike this (but always stick to the coding standards) as it it feels more error prone. I like distinct names for all identifiers (overlapping names lead to easier mistakes). I also think that distinct identifiers make it easier to spot (for humans) trivial mistakes. this.member = p_member; Can't get that wrong as each identifier is unique.
478,"Function, taking up to 27 parameters, that checks for the existence of a path in a graph. There's got to be a better way than this that preserves the logic while sparing me the multitude of lines: sub has_path {
  clearerr;
  my %Graph = gref(shift);
  my $A = shift;
  my $B = shift;
  my $C = shift;
  my $D = shift;
  my $E = shift;
  my $F = shift;
  my $G = shift;
  my $H = shift;
  my $I = shift;
  my $J = shift;
  my $K = shift;
  my $L = shift;
  my $M = shift;
  my $N = shift;
  my $O = shift;
  my $P = shift;
  my $Q = shift;
  my $R = shift;
  my $S = shift;
  my $T = shift;
  my $U = shift;
  my $V = shift;
  my $W = shift;
  my $X = shift;
  my $Y = shift;
  my $Z = shift;
  # returns VT_BOOL
  my $bool = 0;
  my $switcher = dectab( [ $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S, $T, $U, $V, $W, $X, $Y, $Z ] );
  given ($switcher) {
   when ( ""--------------------------"" ) {
    seterr( ""No path."" );
    } # no path
   when ( ""X-------------------------"" ) {
    seterr( ""Path of one element."" );
    } # path of 1 element
   when ( ""XX------------------------"" ) {
    $bool = $Graph->has_path( $A,  $B );
   }
   when ( ""XXX-----------------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C );
   }
   when ( ""XXXX----------------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D );
   }
   when ( ""XXXXX---------------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E );
   }
   when ( ""XXXXXX--------------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F );
   }
   when ( ""XXXXXXX-------------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G );
   }
   when ( ""XXXXXXXX------------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H );
   }
   when ( ""XXXXXXXXX-----------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I );
   }
   when ( ""XXXXXXXXXX----------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J );
   }
   when ( ""XXXXXXXXXXX---------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K );
   }
   when ( ""XXXXXXXXXXXX--------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L );
   }
   when ( ""XXXXXXXXXXXXX-------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M );
   }
   when ( ""XXXXXXXXXXXXXX------------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N );
   }
   when ( ""XXXXXXXXXXXXXXX-----------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O );
   }
   when ( ""XXXXXXXXXXXXXXXX----------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P );
   }
   when ( ""XXXXXXXXXXXXXXXXX---------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q );
   }
   when ( ""XXXXXXXXXXXXXXXXXX--------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R );
   }
   when ( ""XXXXXXXXXXXXXXXXXXX-------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S );
   }
   when ( ""XXXXXXXXXXXXXXXXXXXX------"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S, $T);
   }
   when ( ""XXXXXXXXXXXXXXXXXXXXX-----"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S, $T, $U );
   }
   when ( ""XXXXXXXXXXXXXXXXXXXXXX----"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S, $T, $U, $V );
   }
   when ( ""XXXXXXXXXXXXXXXXXXXXXXX---"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S, $T, $U, $V, $W );
   }
   when ( ""XXXXXXXXXXXXXXXXXXXXXXXX--"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S, $T, $U, $V, $W, $X );
   }
   when ( ""XXXXXXXXXXXXXXXXXXXXXXXXX-"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S, $T, $U, $V, $W, $X, $Y,);
   } 
   when ( ""XXXXXXXXXXXXXXXXXXXXXXXXXX"" ) {
    $bool = $Graph->has_path( $A,  $B, $C, $D, $E, $F, $G, $H, $I, $J, $K, $L, $M, $N, $O, $P, $Q, $R, $S, $T, $U, $V, $W, $X, $Y, $Z );
   }
  }  
  return $bool;
 } This is the dectab (decision table) sub it refers to: sub dectab {
  my($ref)=shift;
  my ($res);
  foreach my $key( @$ref){ 
   if ( ! defined $key ) { 
    $res .= '-';
   } else {
    $res .= ""X"";
   }
  }
  return $res;
 } clearerr , seterr , and gref : sub clearerr {
    $ERRORFLAGGED = 0;
    $ERRORTEXT = """";
}

sub seterr {
    $ERRORTEXT = shift;
    $ERRORFLAGGED = 1;
}

sub gref {
    my $gref = shift;
    if ( defined $grefs->{$gref} ) {
        return $grefs->{$gref};
    } else {
        return undef;
    }
} This is all part of a much much larger wrapping of the Graph module. It's being turned into a COM DLL using ActiveState's PerlCtrl. Calling the sub would be done, in VBScript (for example), by set o = CreateObject(""Wrapper.Graph.2"")
...
if o.has_path( ""tom"", ""dick"", ""harry"" ) then 
... Graph.pm, by the way, defines has_path as has_path

   $g->has_path($a, $b, $c, ..., $x, $y, $z)

Return true if the graph has all the edges $a-$b, $b-$c, ..., $x-$y, $y-$z, false otherwise."
479,"Class for measuring distance as feet and inches. My homework question states: Develop a class to measure distance as feet (should be int ), inches (should
  be float ).  Include member functions to set and get attributes.  Include
  constructors.  Develop functions to add two distances. The prototype of the sum function is: Distance Sum(Distance d); Please check out my coding style and other aspects that can make this program better. #include <iostream>
using namespace std;
class Distance
{
        private:
                int feet;
                float inch;
        public:
        Distance();
        Distance(int a,float b);
        void setDistance();
        int getFeet();
        float getInch();
        void distanceSum(Distance d);
};
int main()
{
        Distance D1,D2;
        D1.setDistance();
        D2.setDistance();
        D1.distanceSum(D2);
        return 0;
}
/*Function Definitions*/
Distance::Distance()
{
        inch=feet=0;
}
Distance::Distance(int a,float b)
{
        feet=a;
        inch=b; 
}
void Distance::setDistance()
{
        cout<<""Enter distance in feet"";
        cin>>feet;
        cout<<endl<<""Enter inches:"";
        cin>>inch;
}
int Distance::getFeet()
{
        return feet;
}
float Distance::getInch()
{
        return inch;
}
void Distance::distanceSum(Distance d)
{
        cout<<""feet=""<<d.feet+feet<<endl;
        cout<<""inches=""<<d.inch+inch<<endl;
}"
480,"As I noted in a comment, I think the solution lies in using arrays and slices .  Maybe like this: sub has_path {
  clearerr;
  my %Graph = gref(shift);
  my(@States) = @_;
  my $bool = 0;
  my $switcher = dectab( [ @States ] );
  $switcher =~ m/^(X*)(?:-*)$/;
  my $number = length($1);
  if ($number == 0)  {
    seterr( ""No path."" );
  }
  else
  {
    $bool = $Graph->has_path( $States[0 .. ($length - 1)] );
  }

  return $bool;
} 

sub dectab {
  my($ref)=shift;
  my ($res);  foreach my $key( @$ref){ 
   if ( ! defined $key ) { 
    $res .= '-';
   } else {
    $res .= ""X"";
   }
  }
  return $res;
} The key observations are: The list of letter variables is better treated as an array - I used @States . The output from dectab() (which is unaltered) consists of some number of X's followed by some number of dashes.  The regex match identifies how many X's by isolating them into a string, $1 , and then calculating the length of the string.  Note that the code does not check that the output from dectab matches that pattern - it probably should. The huge switch statement amounts to supplying the elements 0..(N-1) to the $Graph->has_path() function, so the code passes the relevant slice of @States to the function. There are still some bits I'm not clear about in your code.  Specifically, I'm not sure about the roles (or sources) of the functions: clearerr gref seterr Because of that, I can't test my hypothesis.  However, I do think that this solution scales to 200 items more easily than the original - and without needing: use feature ""switch""; With more time spent, the code could still be tidied up, I'm sure.  And, since this is Perl, TMTOWTDI - there's more than one way to do it. Suggestion: Provide code that can be compiled and run whenever possible - you will get better code reviews that way."
481,"When designing a class for your program, whether it's for homework or a real production application, you want to always consider how that class is going to be use and what its responsibilities should be. Each function and method should do one thing/task and it should be reflected by the method's name. Additionally, you want to keep to a consistent easy-to-read coding style when you actually start writing the code. With those two points in mind here's some things to consider in your code: Distance::distanceSum is doing two tasks here. It's not only summing feet and inches but it's printing them out as well. Unnecessary type conversion. In your default Distance() ctor, there's an implicit conversion because you're assigning 0 to a float type. You should have gotten a warning from your compiler. Consider using an initializer list like so: Distance::Distance() : feet(0), inch(0.0)
{
} Code doesn't take advantage of const correctness. Which parameters aren't suppose to change? Which methods will be modifying your Distance class? For example, your Distance::Distance(int a,float b) isn't changing a or b . Have the compiler enforce that promise by using const: Distance::Distance(const int a, const float b) Similiarly: void Distance::distanceSum(const Distance &d); Inconsistent indentation and spacing. Consider indenting the methods under public: the same way you did with private:. Add spaces to your assignments to help readability. eg. feet = a; No module separation by file. class Distance should probably be in a separate header/implementation file rather than putting everything in one main file. Ninja comments. Comments? What comments? Exactly. Consider adding a block comment at the top of your Distance class that explains the purpose for its existence. The block comment should answer questions like how is this class suppose to be used and what details is it abstracting away? Adding a comment to clarify how the feet and inch data members are going to be used. For example, it's not clear if your distance class is maintaining the same distance measurement but with different units or it's really meant to be used as one whole unit. eg. 6 feet 2 inches or 6 feet 72 inches? With the above considerations, here's one way I would refactor your code: In distance.h header file: #ifndef DISTANCE_H
#define DISTANCE_H
class Distance
{
    private:
       // feet and inch is one unit. 
       // invariant: inch_ < 12.
       int   feet_;
       float inch_;
    public:
       Distance(const int feet = 0, const float inches = 0.0);
       void      setDistance(const int feet, const float inches = 0.0);
       int       getFeet() const;
       float     getInch() const;

       // returns this instance. Permits method chaining for Distance class.
       Distance& Add(const Distance &d);
};
#endif In distance.cpp implementation: #include ""distance.h""
Distance::Distance(const int feet, const float inches) 
         : feet_(feet + inches / 12), inch_(inches % 12)
{
}

void Distance::setDistance(const int feet, const float inches)
{
    feet_ = feet + inches / 12;
    inch_ = inches % 12;
}

int Distance::getFeet() const
{
    return feet_;
}

float Distance::getInch() const
{
    return inch_;
}

Distance& Distance::Add(const Distance &d)
{
    setDistance(getFeet() + d.getFeet(), getInch() + d.getInch());

    return *this;
} Here are the major changes above: Distance no longer uses cin/cout for explicit IO. You can push that code into main. class definition and implementation are now in their respectively named files. Removed an extra constructor definition by taking advantage of default parameters. feet and inch data members are used together to represent the measurement in distance. inch cannot be > 12 because that would mean there's enough for a foot. We enforce this by dividing feet and inches by 12 when setting distance's data. const is used to clearly indicate what can and can't change the distance object. Changed distanceSum to Add to better reflect what it's doing. Notice that Add is implemented only through Distance's public methods -- it does not manipulate feet_ and inch_ directly."
482,"Let's do some fixing. First, this is how you pass optional (non-boolean) parameters in JS (the Good Way tm ): addFooListeners = function (panelType, handlers) {
    handlers        = handlers        || {};
    handlers.show   = handlers.show   || showFoo;
    handlers.hide   = handlers.hide   || hideFoo;
    handlers.commit = handlers.commit || commitFoo; The above can be rewritten in a neater way using jQuery (not sure what the name of YUI equivalent to extend is): handlers = $.extend({
    show  : showFoo, 
    hide  : hideFoo, 
    commit: commitFoo
}, handlers || {}) Now, using eval for this code is criminal. Say the object ns refers to is module , then you can do this instead of eval : YAHOO.util.Event.addListener(""show"" + panelType, ""click"", handlers.show, module[""panel_"" + panelType], true);
YAHOO.util.Event.addListener(""hide"" + panelType, ""click"", handlers.hide, module[""panel_"" + panelType], true);
YAHOO.util.Event.addListener(""commit"" + panelType, ""click"", handlers.commit, module[""panel_"" + panelType], true); Now, as you can see, you are assigning a lot of events in a similar fashion. Did you think of defining an addPanelListener function within your function? function addPanelListener (event, panelType, handler) {
    YAHOO.util.Event.addListener(event + panelType, ""click"", handler, module[""panel_"" + panelType], true);
} 

addPanelListener(""show""  , panelType, handlers.show);
addPanelListener(""hide""  , panelType, handlers.hide);
addPanelListener(""commit"", panelType, handlers.commit): Hope it helps."
483,"Well: The first line can be written like this: sub has_path
{
  clearerr;
  my %Graph = gref(shift);

  my ($A, $B, $C, $D, $E, $F
     ,$G, $H, $I, $J, $K, $L
     ,$M, $N, $O, $P, $Q, $R
     ,$S, $T, $U, $V, $W, $X
     ,$Y, $Z)                    = @_; But if all you are doing is using the parameters to call another function then just leave them in the array @_ and pass that to the function you are calling: sub has_path
{
    clearerr;
    my %Graph = gref(shift);

    my $switcher = dectab( @_ );            # just use the input array (- graph)
                                            # as a parameter into dectab.
                                            # If you actually want to limit it then
                                            # splice() off then end.

    if ($switcher =~ /^(X+)(-*)$/)  # make sure the result is XXX----
    {
            my $size        = length($1);   # Count the X.
                                            # Note this block is not entered if
                                            # zero X's in switcher variable

            # Cut the $size elements from the input array
            # and pass them as parameters to has_path()
            return $Graph->has_path(splice(@_, 0 , $size));
    }
    # If we reach here the call failed.
    # Just return the 0
    return 0;
}"
484,"A bunch of these functions should be operators. You also seem to be confused about the purpose of addition. Also, using namespace std is bad. You also didn't provide any other operators- even though any class user will logically expect that if you can add a distance, you can add a distance to the current object, and that you can subtract distances too. You also didn't provide any kind of input verification or const correctness. class Distance
{
    int feet;
    float inch;
public:
    // Constructors
    Distance();
    Distance(int a, float b);

    // Getters
    int getFeet() const;
    float getInch() const;

    // Operator overloads - arithmetic
    Distance operator-(const Distance&) const;
    Distance& operator-=(const Distance&);
    Distance operator+(const Distance&) const;
    Distance& operator+=(const Distance&);

    // Create from console
    static Distance getDistanceFromConsole();
};
// Operator overloads - I/O
std::ostream& operator<<(std::ostream&, const Distance&); And the implementations are... Distance::Distance() : feet(0), inch(0.0f) {}
Distance::Distance(int argfeet, float arginch) : feet(argfeet), inch(arginch) {
    // Verify that we are actually in feet and inches.
    // Not gonna write this code- dependent on the class invariants
    // which were not explicitly specified (e.g., can have negative Distance?)
}
int Distance::getFeet() const {
    return feet;
}
float Distance::getInch() const {
    return inch;
}
Distance Distance::operator-(const Distance& dist) const {
    Distance retval(*this);
    retval -= dist;
    return retval;
}
Distance& Distance::operator-=(const Distance& dist) {
    feet -= dist.feet;
    inches -= dist.inches;
    // Verify values- e.g. that inches is less than 12
    return *this;
}
Distance operator+(const Distance& dist) const {
    Distance retval(*this);
    retval += dist;
    return retval;
}
Distance& operator+=(const Distance& dist) {
    feet += dist.feet;
    inches += dist.inches;
    // More verification here.
}

std::ostream& operator<<(std::ostream& output, const Distance& dist) {
    output << ""Feet: "" << dist.feet << ""\n"";
    output << ""Inches: "" << dist.inches << std::endl; // flush when done.
    return output;
}

Distance getDistanceFromConsole() {
    int feet; float inch;
    std::cout<<""Enter distance in feet"";
    std::cin>>feet;
    std::cout<<endl<<""Enter inches:"";
    std::cin>>inch;
    return Distance(feet, inch);
}"
485,"Making a generator version of random.sample() seems to be a much better idea: from __future__ import division
from random import random
from math import ceil as _ceil, log as _log

def xsample(population, k):
    """"""A generator version of random.sample""""""
    n = len(population)
    if not 0 <= k <= n:
        raise ValueError, ""sample larger than population""
    _int = int
    setsize = 21        # size of a small set minus size of an empty list
    if k > 5:
        setsize += 4 ** _ceil(_log(k * 3, 4)) # table size for big sets
    if n <= setsize or hasattr(population, ""keys""):
        # An n-length list is smaller than a k-length set, or this is a
        # mapping type so the other algorithm wouldn't work.
        pool = list(population)
        for i in xrange(k):         # invariant:  non-selected at [0,n-i)
            j = _int(random() * (n-i))
            yield pool[j]
            pool[j] = pool[n-i-1]   # move non-selected item into vacancy
    else:
        try:
            selected = set()
            selected_add = selected.add
            for i in xrange(k):
                j = _int(random() * n)
                while j in selected:
                    j = _int(random() * n)
                selected_add(j)
                yield population[j]
        except (TypeError, KeyError):   # handle (at least) sets
            if isinstance(population, list):
                raise
            for x in sample(tuple(population), k):
                yield x Taking a sampling mean then becomes trivial: def sampling_mean(population, k, times):
    for t in xrange(times):
        yield sum(xsample(population, k))/k That said, as a code review, not much can be said about your code as it is more or less taking directly from the Python source, which can be said to be authoritative. ;) It does have a lot of silly speed-ups that make the code harder to read."
486,I would personally introduce spring and their hibernate support into your application then you can use there hibernate transaction manager and define transactions in the xml file and then forget about them in the actual code
487,There's no reason to have both inches and feet since the one can be calculated from the other.  Superfluous redundancy just adds complexity.
488,"I would, and have, redesign your set of functions to resemble casts: std::wstring x;
std::string y = string_cast<std::string>(x); This can have a lot of benefits later when you start having to deal with some 3rd party library's idea of what strings should look like."
489,"C++ comments: Prefer initializer lists: Distance::Distance()
    :feet(0), inch(0)
{
        // NOT THIS -> inch=feet=0;
} General coding comments: Don't combine functionality: You should define a function to add Distance objects and one to print them. (DeadMG has that covered above). void Distance::distanceSum(Distance d)
{
        cout<<""feet=""<<d.feet+feet<<endl;
        cout<<""inches=""<<d.inch+inch<<endl;
} Also I see you don't normalize your results. You could have 1 foot 300.05 inches. When ever the state of an object changes where one parameter flows into another you should normalize the data. Have an explicit function to do so and call it each time state changes: private: void Normalize() { int eFeet = inches / 12; feet += eFeet; inches -= (eFeet * 12);} Implementation Comments: But then again why do you store what is actually a single value in two different variables (feet and inches). Why not just store the total distance in inches (and then do conversion on the way in/out). Look at the unix time. It just counts the seconds since the epoch. All other values are calculated from this."
490,"Tame this Beast: TSQL Unpivot. Okay... here's the beast: SELECT
     SUBSTRING(DischDate, 7, 4) + SUBSTRING(DischDate, 1, 2) as YYYYMM
    ,Type
    ,SubType
    ,Diags
    ,Count(*)        as Count
    ,SUM(Charges)    as Charges
    ,SUM(Payments)    as Payments
FROM
    (
        SELECT DISTINCT
             ID
            ,Diags
        FROM 
           (SELECT VisitID as ID
                    ,DX01 ,DX11 ,DX21, DX31
                    ,DX02 ,DX12 ,DX22, DX32
                    ,DX03 ,DX13 ,DX23, DX33
                    ,DX04 ,DX14 ,DX24, DX34
                    ,DX05 ,DX15 ,DX25, DX35
                    ,DX06 ,DX16 ,DX26, DX36
                    ,DX07 ,DX17 ,DX27, DX37
                    ,DX08 ,DX18 ,DX28, DX38
                    ,DX09 ,DX19 ,DX29, DX39
                    ,DX10 ,DX20 ,DX30, DX40
               FROM [AGH00]...[20110128 - AGH00#TXT]) p
            UNPIVOT
               (Diags FOR DX IN
                    (DX01 ,DX11  ,DX21, DX31
                    ,DX02 ,DX12  ,DX22, DX32
                    ,DX03 ,DX13  ,DX23, DX33
                    ,DX04 ,DX14  ,DX24, DX34
                    ,DX05 ,DX15  ,DX25, DX35
                    ,DX06 ,DX16  ,DX26, DX36
                    ,DX07 ,DX17  ,DX27, DX37
                    ,DX08 ,DX18  ,DX28, DX38
                    ,DX09 ,DX19  ,DX29, DX39
                    ,DX10 ,DX20  ,DX30, DX40)
            )AS unpvt
        ) as DIAGS
    LEFT JOIN [AGH00]...[20110128 - AGH00#TXT] as A0 on DIAGS.ID = A0.VisitID
    LEFT JOIN ( SELECT VisitID, Sum(ChargsAmt) as Charges
                FROM [AGH00]...[20110128 - AGH00Chg#TXT]
                Group By VisitID ) as AC on A0.VisitID = AC.VisitID
    LEFT JOIN ( SELECT VisitID, Sum(Pmt) as Payments
                FROM [AGH00]...[20110128 - AGH00Pmt#TXT]
                Group By VisitID ) as AP on A0.VisitID = AP.VisitID                
Group By
     SUBSTRING(DischDate, 7, 4) + SUBSTRING(DischDate, 1, 2)
    ,Type
    ,SubType
    ,Diags
Order By
     SUBSTRING(DischDate, 7, 4) + SUBSTRING(DischDate, 1, 2)
    ,Type
    ,SubType
    ,Diags Sample output: YYYYMM Type SubType Diags # Charges    Payments
201004 I    SPEC    5185  3 224086.60  222986.60
200910 I    MONT    73390 2 7573.42    6984.13
200910 O    AHCW    463   4 578.00     578.00
200910 I    MEDI    2766  2 67444.39   67444.39 Notes: SQL2005 LinkedServer to a TextFile with a backing ini for field descriptions. DischDate is ""mm/dd/yyyy"" text field. I want YYYYMM for grouping (as well as other fields) First ""table"" is a list generated via Unpivot that basically generates a list of VisitID's and unique Diags Left Join main customer data by ""VisitID"" Left Join Charges Data (Grouped to get individual charges grouped by ""customer"" aka VisitID) Left Join Payment Data (same as last) Group by/Order By/Select Date YYYYMMDD, Type, Subtype, Diags... and grouped Count/Sums More information is in this SO question where someone pointed me to the unpivot option. Including a semi-confused explanation of what I want to accomplish (basically grouping information for a couple similar reports). Just wondering if there is a more graceful way, and if anyone see potential errors."
491,"Simplified Android Spinner. I have written a simple spinner wrapper, but was wondering if any of you could think of any ways to make it more robust. It only handles strings at the moment. MySpinner : package a.b.c;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class MySpinner extends Spinner {

    // constructors (each calls initialise)
    public MySpinner(Context context) {
        super(context);
        this.initialise();
    }
    public MySpinner(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.initialise();
    }
    public MySpinner(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.initialise();
    }

    // declare object to hold data values
    private ArrayAdapter<String> arrayAdapter;

    // add the selected item to the end of the list
    public void addItem(String item) {
        this.addItem(item, true);
    }
    public void addItem(String item, boolean select) {
        arrayAdapter.add(item);
        this.setEnabled(true);
        if (select) this.selectItem(item);
        arrayAdapter.sort(new Comparator<String>() {
            public int compare(String object1, String object2) {
                return object1.compareTo(object2);
            };
        });
    }

    // remove all items from the list and disable it
    public void clearItems() {
        arrayAdapter.clear();
        this.setEnabled(false);
    }

    // make the specified item selected (returns false if item not in the list)
    public boolean selectItem(String item) {
        boolean found = false;
        for (int i = 0; i < this.getCount(); i++) {
            if (arrayAdapter.getItem(i) == item) {
                this.setSelection(i);
                found = true;
                break;
            }
        }
        return found;
    }

    // return the current selected item
    public String getSelected() {
        if (this.getCount() > 0) {
            return arrayAdapter.getItem(super.getSelectedItemPosition());
        } else {
            return """";
        }
    }

    // allow the caller to use a different DropDownView, defaults to android.R.layout.simple_dropdown_item_1line
    public void setDropDownViewResource(int resource) {
        arrayAdapter.setDropDownViewResource(resource);
    }
    // internal routine to set up the array adapter, bind it to the spinner and disable it as it is empty
    private void initialise() {
        arrayAdapter = new ArrayAdapter<String>(super.getContext(), android.R.layout.simple_spinner_item);
        arrayAdapter.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
        this.setAdapter(arrayAdapter);
        this.setEnabled(false);
    }
} To use: Use a.b.c.MySpinner instead of Spinner in your XML layout file Set up a variable, mMySpinner = (MySpinner)findViewById(R.id.spinner); You can then use all the functions which should be self-explanatory If there are no items in the list, the spinner is disabled to prevent untoward events mMySpinner.clearItems() - to remove all the items mMySpinner.addItem(""Blue"") - to add Blue as an item in list (items are sorted by abc) mMySpinner.selectItem(""Red"") - to make the indicate item the current selection mMySpinner.getSelected() - to return the current selected item string"
492,"Dynamically generating a list of events. This is a simple list of items in a list, which allows the user to dynamically generate that list of events. Then a controller action does the work of serializing that into the database. The issue is that there's the PHP-generated HTML segment, and there's a separate JavaScript segment to do the additions (for when someone presses the ""add new page"" button). This is not only duplicated; when it's done inline in the JavaScript it's extremely ugly to look at (look at the length of that line!). Is there a better way of doing this? <?php
/** @var $this Zend_View */

$this->headLink()->appendStylesheet($this->baseUrl('css/redmond/jquery-ui-1.8.5.custom.css'));

$this->headScript()->appendFile($this->baseUrl('js/jquery.js'));
$this->headScript()->appendFile($this->baseUrl('js/jquery-ui-1.8.5.custom.min.js'));

$this->headScript()->captureStart(); ?>
//<script language=""text/javascript"">
    function CreateDateboxes(jqObject) {
        jqObject.datepicker({
            dateFormat: 'yy-mm-dd',
            showOn: 'button',
            changeYear: true,
            changeMonth: true
        });
    }

    function RemoveParent() {
        $(this).parent().parent().remove();
    }

    function AddNewEvent() {
        var today, html, temp, datestring;
        today = new Date();
        datestring = (today.getYear()+1900) + '-' + (today.getMonth()+1) + '-' + today.getDate();
        html = '<li class=""ui-content"">\n    <div style=""float: left; width: 200px;"">\n        <span class=""ui-icon ui-icon-trash ui-button ui-state-active"" style=""float: left; margin:3px;""></span>\n        <input name=""dates[]"" class=""datebox"" style=""width: 120px;"" type=""text"" value=""' + datestring + '"" />\n    </div>\n    <div style=""padding-left: 200px;"">\n        <input name=""contents[]"" type=""text"" style=""width: 100%;"" />\n    </div>\n</li>';
        $(this).after(html);
        temp = $(this).next();
        CreateDateboxes($('.datebox', temp));
        $('.ui-icon-trash', temp).click(RemoveParent);
    }

    $(function() {
        CreateDateboxes($('.datebox'));
        $('.ui-icon-trash').click(RemoveParent);
        $('.ui-icon-plus').parent().click(AddNewEvent);
    });
//</script>
<?php $this->headScript()->captureEnd(); ?>
<div class=""story"">
    <form action=""<?= $this->url(array('controller' => 'admin', 'action' => 'applyEvents')) ?>"" method=""post"">
        <ul style=""list-style: none; margin-bottom: 1em; padding: 0; width: 100%;"">
            <li class=""ui-button ui-state-default"" style=""width: 100%; margin-bottom: 5px;""><span class=""ui-icon ui-icon-plus"" style=""float: left;""></span>
                Add a new Event</li>
            <? foreach ($this->events as $event) { ?>
                <li class=""ui-content"">
                    <div style=""float: left; width: 200px;"">
                    <span class=""ui-icon ui-icon-trash ui-button ui-state-active"" style=""float: left; margin:3px;""></span>
                    <input name=""dates[]"" class=""datebox"" style=""width: 120px;"" type=""text"" value=""<?= $event->GetDate()->format('Y-m-d') ?>"" />
                    </div>
                    <div style=""padding-left: 200px;"">
                        <input name=""contents[]"" type=""text"" value=""<?= $event->GetMessage() ?>"" style=""width: 100%;"" />
                    </div>
                </li>
            <? } ?>
        </ul>
        <input type=""submit"" name=""submit"" value=""Apply"" />
        <input type=""submit"" name=""submit"" value=""Cancel"" />
    </form>
</div>"
493,"Function to turn to requested bearing. I've been writing a function: float turnToRequestedHeading(float initialHeading, float requiredHeading, float turnRate) I keep thinking there must be a clever way to do it, but it escapes me. All values are in Radians, Headings between - \$\pi\$ and + \$\pi\$ , and turnRate between -0.5 and +0.5. If the requiredHeading is less than the turnRate away from the initialHeading then it should return requiredHeading Otherwise it should return initialHeading + or - turnRate, whichever gets closer to the requiredHeading. The following code is what I have so far, which I'm quite happy with, but is there anything I've missed, or is there an easier way to do this? // return the new heading based on the required heading and turn rate
private float turnToRequestedHeading(float initialHeading, float requiredHeading, float turnRate) {
    //DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Started"");
    float resultantHeading;
    int   direction = 1;            // clockwise, set anti-clockwise (-1) later if required
    if ((Math.signum(initialHeading) == Math.signum(requiredHeading)) || (Math.signum(initialHeading) == 0) || (Math.signum(requiredHeading) == 0)) {
        // both headings are on the same side of 0 so turn will not pass through the  +/- Pi discontinuity
        if (Math.max(Math.abs(requiredHeading) - Math.abs(initialHeading), Math.abs(initialHeading) - Math.abs(requiredHeading)) < turnRate) {
            // angle to be updated is less than turn rate
            resultantHeading= requiredHeading;
            /*DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Path1"");
        } else {
            // angle to be updated is greater than turn rate
            if (initialHeading < requiredHeading) {
                // turn clockwise
                resultantHeading = initialHeading + turnRate;
                /*DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Path2"");
            } else {
                // turn anti-clockwise
                resultantHeading = initialHeading - turnRate;
                /*DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Path3"");
            }
        }
    } else {
        // headings are on different sides of 0 so turn may pass through the +/- Pi discontinuity
        if (Math.abs(initialHeading) + Math.abs(requiredHeading) < turnRate) {
            // angle to be updated is less than turn rate (around 0)
            resultantHeading= requiredHeading;
            /*DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Path4"");
        } else if ((180 - Math.abs(initialHeading)) + (180 - Math.abs(requiredHeading)) < turnRate) {
            // angle to be updated is less than turn rate (around +/- Pi)
            resultantHeading= requiredHeading;
            /*DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Path5"");
        } else {
            // angle to be updated is greater than turn rate so calculate direction (previously assumed to be 1)
            if (initialHeading < 0) {
                if (requiredHeading > PIf + initialHeading) direction = -1;
            } else {
                if (requiredHeading > -PIf + initialHeading) direction = -1;
            }
            if ((direction == 1) && (initialHeading > PIf - turnRate)) {
                // angle includes the +/- Pi discontinuity, clockwise
                resultantHeading = -TWO_PIf + turnRate + initialHeading;
                /*DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Path6 snap=""+(resultantHeading > requiredHeading));
                if (resultantHeading > requiredHeading) resultantHeading = requiredHeading;
            } else if ((direction == -1) && (initialHeading < -PIf + turnRate)) {
                // angle includes the +/- Pi discontinuity, anti-clockwise
                resultantHeading = TWO_PIf - turnRate + initialHeading;
                /*DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Path7 snap=""+(resultantHeading < requiredHeading));
                if (resultantHeading < requiredHeading) resultantHeading = requiredHeading;
            } else {
                // angle does not includes the +/- Pi discontinuity
                resultantHeading = initialHeading + direction * turnRate;
                /*DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading(initialHeading=""+initialHeading+"", requiredHeading=""+requiredHeading+"", turnRate=""+turnRate+""): Path8 direction=""+direction);
            }
        }
    }
    // ensure -PI <= result <= PI
    if (resultantHeading < -PIf) resultantHeading = resultantHeading + TWO_PIf; 
    if (resultantHeading >= PIf)  resultantHeading = resultantHeading - TWO_PIf; 
    //DEBUG*/Log.d(this.getClass().getName(), ""turnToRequestedHeading: Returning ""+resultantHeading);
    return resultantHeading;
} I have written some testing code to check it out as there were quite a few different 'special cases' private void turnToRequestedHeadingTest(float initialHeading, float requiredHeading, float turnRate, float expectedResult) {
    if (Math.round(turnToRequestedHeading(initialHeading*PIf/180, requiredHeading*PIf/180, turnRate*PIf/180)*180/PIf) != expectedResult) {
        /*DEBUG*/Log.i(this.getClass().getName(), ""test(initial=""+initialHeading+"", required=""+requiredHeading+"", rate=""+turnRate+"") Expected ""+expectedResult+"", Returns ""+(Math.round(turnToRequestedHeading(initialHeading*PIf/180, requiredHeading*PIf/180, turnRate*PIf/180)*180/PIf)));
    }
}

/*DEBUG*/Log.i(this.getClass().getName(), ""turnToRequestedHeading tests:"");
turnToRequestedHeadingTest(   0,   0,  0,   0);
turnToRequestedHeadingTest(   0,   0, 25,   0);
turnToRequestedHeadingTest(  10,  15, 25,  15);
turnToRequestedHeadingTest(  20,  55, 25,  45);
turnToRequestedHeadingTest(  85,  95, 25,  95);
turnToRequestedHeadingTest( 150,-170, 25, 175);
turnToRequestedHeadingTest( 170, 177, 25, 177);
turnToRequestedHeadingTest( 170,-175, 25,-175);
turnToRequestedHeadingTest( 175,-100, 25,-160);
turnToRequestedHeadingTest( 175,   0, 25, 150);
turnToRequestedHeadingTest( 180,   0, 25, 155);
turnToRequestedHeadingTest(-170,-100, 25,-145);
turnToRequestedHeadingTest(-100, -80, 25, -80);
turnToRequestedHeadingTest( -30, -15, 25, -15);
turnToRequestedHeadingTest( -30,  15, 25,  -5);
turnToRequestedHeadingTest( -20,  -5, 25,  -5);
turnToRequestedHeadingTest( -20,   5, 25,   5);
turnToRequestedHeadingTest( -20,  15, 25,   5);
turnToRequestedHeadingTest(  10, 180, 25,  35);
turnToRequestedHeadingTest(  10,-160, 25, -15);
turnToRequestedHeadingTest( 170,   0, 25, 145);
turnToRequestedHeadingTest( 170, -15, 25,-165);
turnToRequestedHeadingTest(-170,   5, 25,-145);
turnToRequestedHeadingTest( -10, 160, 25,  15);
turnToRequestedHeadingTest( -10,-150, 25, -35);
turnToRequestedHeadingTest(  10,-170, 25, -15);
turnToRequestedHeadingTest(   0, 180, 25,  25);
turnToRequestedHeadingTest( -10, -15, 25, -15);
turnToRequestedHeadingTest( -20, -55, 25, -45);
turnToRequestedHeadingTest( -85, -95, 25, -95);
turnToRequestedHeadingTest(-150, 170, 25,-175);
turnToRequestedHeadingTest(-170,-177, 25,-177);
turnToRequestedHeadingTest(-170, 175, 25, 175);
turnToRequestedHeadingTest(-175, 100, 25, 160);
turnToRequestedHeadingTest(-175,   0, 25,-150);
turnToRequestedHeadingTest( 170, 100, 25, 145);
turnToRequestedHeadingTest( 100,  80, 25,  80);
turnToRequestedHeadingTest(  30,  15, 25,  15);
turnToRequestedHeadingTest(  30, -15, 25,   5);
turnToRequestedHeadingTest(  20,   5, 25,   5);
turnToRequestedHeadingTest(  20,  -5, 25,  -5);
turnToRequestedHeadingTest(  20, -15, 25,  -5);
turnToRequestedHeadingTest( -10,-180, 25, -35);
turnToRequestedHeadingTest( -10, 160, 25,  15);
turnToRequestedHeadingTest(-170,   0, 25,-145);
turnToRequestedHeadingTest(-170,  15, 25, 165);
turnToRequestedHeadingTest( 170,  -5, 25, 145);
turnToRequestedHeadingTest(  10,-160, 25, -15);
turnToRequestedHeadingTest(  10, 150, 25,  35);
turnToRequestedHeadingTest( -10, 170, 25,  15);
// More tests
turnToRequestedHeadingTest(   0,  15, 25,  15);
turnToRequestedHeadingTest(   0,  60, 25,  25);
turnToRequestedHeadingTest(   0, -15, 25, -15);
turnToRequestedHeadingTest(   0, -60, 25, -25);
turnToRequestedHeadingTest( 180, 165, 25, 165);
turnToRequestedHeadingTest( 180, 100, 25, 155);
turnToRequestedHeadingTest( 180,-165, 25,-165);
turnToRequestedHeadingTest( 180,-100, 25,-155);
turnToRequestedHeadingTest(-180, 165, 25, 165);
turnToRequestedHeadingTest(-180, 100, 25, 155);
turnToRequestedHeadingTest(-180,-165, 25,-165);
turnToRequestedHeadingTest(-180,-100, 25,-155);
turnToRequestedHeadingTest(  25,   0, 25,   0);
turnToRequestedHeadingTest(  25, -25, 25,   0);
turnToRequestedHeadingTest( -25,   0, 25,   0);
turnToRequestedHeadingTest( -25,  25, 25,   0);
turnToRequestedHeadingTest( 155, 180, 25, 180);
turnToRequestedHeadingTest( 155,-155, 25, 180);
turnToRequestedHeadingTest(-155, 180, 25,-180);
turnToRequestedHeadingTest(-155, 155, 25,-180);
turnToRequestedHeadingTest( 155,-180, 25,-180);
turnToRequestedHeadingTest(-155,-180, 25,-180);"
495,"Just winging it off the top of my head, pseudocode follows:
EDIT - correcting some math
EDIT2 - have some javascript :) function turnToRequestedHeadingTest(initial, requested, turnRate, newAngle)
{
    var ang1 = (Math.PI/180.0) * initial;
    var ang2 = (Math.PI/180.0) * requested;
    var na = turnToRequestedHeading(ang1,ang2,turnRate);
    na = na * (180.0/Math.PI);
    if(Math.abs(na- newAngle) > Math.epsilon)
        throw ""Failed on:"" + initial + ""-"" + requested + "" "" + na;
}
function turnToRequestedHeading(ang1,ang2,turnRate)
{
    if(ang1 == ang2) return ang1;

    // pretend there's a vector v1 pointed out from 
    // the origin along initialHeading of length 1
    // v1 = <cos initial, sin initial>
    var v1= [Math.cos(ang1), Math.sin(ang1)];

    // pretend there's a vector v2 pointed out from 
    // the origin along requiredHeading of length 1
    // v2 = <cos required, sin required>
    var v2= [Math.cos(ang2), Math.sin(ang2)];

    // angle between v1,v2 = acos(v1 dot v2)
    var dang = Math.acos(v1[0]*v2[0], v1[1]*v2[1]);
    dang = dang > Math.PI ? Math.PI * 2 - dang : dang;
    if(dang < turnRate) return ang2;

    // delta angle = acos(cos initial * cos required, sin initial * sin required);
    // resulting turn = Math.Min(turnRate, delta angle) * Math.sign(delta angle);
    var deltaTurn = (Math.min(turnRate, dang) * Math.sign(ang2-ang1)) + ang1;

    // return initial + resulting turn;    
    return deltaTurn;
}"
496,"C function to find and delete a node from a singly linked list. I'm looking for the most commonly used style for writing the delete_item() function of a singly linked list, that find a matching item and deletes it. Is what I have the 'typical' or 'normal' solution? Are there more elegant ones? What seems inelegant to me about my solution below, although I don't know a better way to express it, is that the code needs to check the first record individually (i.e. a special case), then as it goes through the iteration, it's not checking iter , it's checking iter->next , ahead of the iterator's present location, because in a singly linked list you can't go backwards. So, is there a cleaner way to write the delete_item() function? #include <stdio.h>
#include <stdlib.h>

struct node {
    int x;
    struct node *next;
};

struct node *head;

struct node *create_item(int x);
void print_list();
void delete_item(int x);

int main(int argc, int argv) {

    struct node *n;
    int i;

    // initialise a linked list with a few items
    head = create_item(1);
    n = head;

    for (i = 2; i < 10; i++) {
        n->next = create_item(i);
        n = n->next;
    }

    // before
    print_list();

    // delete 7.
    delete_item(7);

    // after
    print_list();

    // lets delete all odd numbers for effect.
    delete_item(1);
    delete_item(3);
    delete_item(5);
    delete_item(9);

    print_list();
}

struct node *create_item(int x) {
    struct node *new;

    new = (struct node *) malloc (sizeof(struct node));
    new->x = x;
    return new;
}

void print_list() {
    struct node *iter;

    iter = head;

    while (iter != NULL) {
        printf(""num: %i\n"", iter->x);
        iter = iter->next;
    }
}

//We're looking for the best way to right this.
//This is _my_ standard solution to the problem.
// (that is, to test the first element explicitly
// the use current->next != NULL to be one behind
// the search).
//I wondered what other people's is or if there
//is a convention?
void delete_item(int x) {

    struct node *iter;
    iter = head;

    if (iter == NULL) {
        printf(""not found\n"");
        return;
    }

    if (iter->x == x) {
        printf(""found in first element: %i\n"", x);
            head = head->next;
        return;
    }

    while (iter->next != NULL) {
        if (iter->next->x == x) {
            printf(""deleting element: %i\n"", x);
            iter->next = iter->next->next;
            return;
        }

        iter = iter->next;
    }

    printf(""not found\n"");
} This is a complete example that can be compiled and tested. The output: 23:28: ~$ gcc -o ll linked_list.c
23:28: ~$ ./ll
num: 1
num: 2
num: 3
num: 4
num: 5
num: 6
num: 7
num: 8
num: 9
deleting element: 7
num: 1
num: 2
num: 3
num: 4
num: 5
num: 6
num: 8
num: 9
found in first element: 1
deleting element: 3
deleting element: 5
deleting element: 9
num: 2
num: 4
num: 6
num: 8"
497,"It's been ages since I've done C++, but here are my observations: First off, you're using global variables, which is ill-advised.  I'm not sure if C supports member functions, but if not, you should be using parameter passing, e.g. delete_item(node* head, int x) and so on. if (iter == NULL) {
    printf(""not found\n"");
    return;
} iter is set to the head of the linked list, and if the linked list doesn't yet exist, you reply that the item is ""not found\n"" .  I would change this to ""Linked list is empty.\n"" if (iter->x == x) {
    printf(""found in first element: %i\n"", x);
    return;
} This doesn't seem to work in the sense that it does not actually delete the element.  If you want this item deleted -- which I'm assuming you do, given the name of the function -- then you should add this line: head = head->next; (You'll need to pass the head parameter ""by reference"" to make sure that this change will propagate outside the code of the delete_item function.  Normally, if the parameter being passed wasn't a pointer, this would be done by passing the pointer. head is a node* , however, and I have forgotten how to pass a pointer by reference... I think it would either be node*& head or node** head ... sorry, but you'll have to figure that one out! :) )  Alternatively, you could have delete_item return a node * , and at the end of the function, you could return the first non-matching entry, and this would be called by head=delete_item(head, x) .  It's probably slightly frowned upon to do it that way, but it would be an easy way out. At any rate, once you get that accomplished, it will delete the current head, and the new head will be the second element, if one exists... else it will be set to NULL . while (iter->next != NULL) {
    if (iter->next->x == x) {
        printf(""deleting element: %i\n"", x);
        iter->next = iter->next->next;
        return;
    }

    iter = iter->next;
} One problem I see is that you have to decide if you want to delete duplicate entries.  For example, if 7 appears twice in the linked list, do you want to delete both 7 s, or just one?  If you want to delete both, you need to traverse the entire linked list by removing the return statements in the while loop and the initial check of the head node.  This will create a problem as the program proceeds on to the final, ""not found"" statement, but that can be solved with an if statement: if (!entryfound) printf(""not found\n""); entryfound would have to be declared to be 0 , and set to 1 if a match was found in the while loop.  Alternatively, you could do entryfound++ in the event of a match and change this last line: if (entryfound) { printf(""%i matches found and deleted.\n"", entryfound); }
  else { printf(""No matches found.\n""); } After the changes, this is what your code should look like: #include <stdio.h>
#include <stdlib.h>

struct node {
    int x;
    struct node *next;
};

struct node *create_item(int x);
void print_list(node *head);
void delete_item(node *&head, int x);

int main(int argc, int argv) {
    struct node *head, *tail;

    // initialise a linked list with a few items
    head = create_item(1);
    tail = head;

    for (int i = 2; i < 10; i++) {
        tail->next = create_item(i);
        tail = tail->next;
    }

    // before
    print_list(head);

    // delete 7.
    delete_item(head, 7);

    // after
    print_list(head);

    // lets delete all odd numbers for effect.
    delete_item(head, 1);
    delete_item(head, 3);
    delete_item(head, 5);
    delete_item(head, 9);

    print_list(head);
}

struct node *create_item(int x) {
    struct node *new;

    new = (struct node *) malloc (sizeof(struct node));
    new->x = x;
    return new;
}

void print_list(node *iter) {
    int i=0;

    if (iter==NULL} { printf(""Linked list is empty."")); }
      else {
        while (iter != NULL) {
          printf(""Index: %i, Value=%i\n"", i, iter->x);
          iter = iter->next;
        }
      }
}

//We're looking for the best way to right this.
//This is _my_ standard solution to the problem.
// (that is, to test the first element explicitly
// the use current->next != NULL to be one behind
// the search).
//I wondered what other people's is or if there
//is a convention?

void delete_item(node *&head, int x) {
    int i=0;
    node* iter=head;  // Head might have to be dereferenced here... I forget!

    if (iter==NULL) {
        printf(""Linked list is empty.\n"");
        return;
    }

    if (iter->x == x) {
            printf(""Deleting Item. Index: %i, Value=%i\n"", i, x);
            head = head->next;
            entryfound++;
    }

    while (iter->next != NULL) {
        i++;
        if (iter->next->x == x) {
            printf(Deleting Item. Index: %i, Value=%i\n"", i, x);
            iter->next = iter->next->next;
            entryfound++;
        }

        iter = iter->next;
    }



    if (entryfound) { printf(""%i matches found and deleted.\n"", entryfound); }
      else { printf(""No matches found.\n""); }

} As others have stated, you need to be deallocating the memory.  Your program has what is known as a memory leak.  The old ""deleted"" nodes are not actually deleted, they are simply removed from the chain of pointers.  I'll leave it up to you to deallocate them in the event of a match. Again, it's been a long time since I've done C++, but that's my take.  Sorry for any debugging that you might have to do in that code."
498,"General Comments: Why do your list handling functions not take a list as a parameter? As a result your application can only have one list. Comments on Delete: You are leaking the list item when you delete it. Since the create_item() is calling malloc() I would expect the delete_item() to call free() . I would split the delete_item() into two parts. The first part that deals with the head as a special case and the second part that deals with removing elements from the list (and free() ing them). void delete_item(struct node** list, int x)
{
    if ((list == NULL) || ((*list) == NULL))
    {
        printf(""not found\n"");
        return;
    }
    
    (*list) = delete_item_from_list(*list);
}

struct node* delete_item_from_list(struct node* head)
{
    struct node* iter = head;
    struct node* last = NULL;

    while (iter != NULL)
    {
        if (iter->x == x)
        {
            break;
        }

        last = iter;
        iter = iter->next;
    }

    if (iter == NULL)
    {
        printf(""not found\n"");
    }
    else if (last == NULL)
    {
        printf(""found in first element: %i\n"", x);
        head = iter->next;
    }
    else
    {
        printf(""deleting element: %i\n"", x);
        last->next = iter->next;
    }
   
    free(iter);
    return head;
}"
499,"Deleting an item from a singly-linked list requires finding the previous item.  There are two approaches one can use to deal with this: When deleting an item, search through the list to find the previous item, then do the unlink. Have a ""deleted"" flag for each item.  When traversing the list for some other reason, check the ""deleted"" flag on each node.  If a ""deleted"" node is encountered, unlink it from the previously-visited node. Note that in a garbage-collected system, it's possible to add items to the start of the list, or perform the #2 style of deletion, in a lock-free thread-safe manner.  Nodes which are deleted may get unlinked in one thread and accidentally relinked in another, but the delete flag will cause the node to be unlinked again on the next pass.  In a multi-threaded system requiring explicit deallocation, such an unlink and relink sequence could be disastrous, since a node could be unlinked, deallocated, and relinked; locks would thus be necessary to avoid problems."
500,"Filtering (search) a model with multiple params in hash. This function in my Profile model receive a hash from a search form and should filter the table depending on those values. I guess there is something like a pattern for such a standard behavior, right now I ended up with this (unfortunately I had to reproduce the code here, so it might not work for some reasons, but you get the idea). Just a note: we're storing in the model some strings containing multiple data, each of these fields should be a one-to-many relationship (db normality violation). I give an example: country_preferences is a string filled up by an html select :multiple => true . In the string I then find values like: [""Australia"", ""China"", ""United Kingdom""] . def search opts # This default doesn't work the way I would like = {:user_type => :family}

    #TODO: default opts value in method sign if possible
    opts[:user_type] ||= :family

    # initial criteria
    fields= ""user_type= ?""
    values= [opts[:user_type]]

    # each field filters the list in one of these three ways
    staight_fields = [ :country, :first_name, :last_name, :nationality ]
    like_fields = [:country_preferences, :keyword, :languages ]
    bool_fields = [:driver, :housework, :children ]

    # cicle the options and build the query    
    opts.each do |k, v|
      if straight_fields.include? k
        fields += "" AND #{k} = ?""
        values += v
      elsif like_fields.include? k
        fields += "" AND #{k} like %?%""
        values += v
      elsif bool_fields.include? k
        fields += "" AND #{k} = ?""
        values += v == 'true'
      else
        logger.warn ""opts #{k} with value #{v} ignored from search""
      end
    end

    # execute the query and return the result
    self.registered.actives.where([fields] + values)   
  end I think I can use more scope but how can I combine them together? In general, how can I make this code much better? The boss, when introducing the project, said one-to-many relationships for that kind of fields would be a pain in the back. What do you think about this pragmatic solution?"
501,"Have you looked into using a pre existing gem for this? I found one called has_scope that seems like it might do exactly what you're trying to refactor. You would need to add a scope for each of your filters and then add some has_scope calls in your controller. Here's a few examples. I'm not as familiar with Rails 3 scopes as I am with 2, so the code likely won't work as is. Model: class Profile < ActiveRecord::Base
  scope :country, lambda {|country| where(:country => country) }
  scope :keyword, lambda {|keyword| where([""keyword LIKE :term"", {:term => ""%#{keyword}%""}]) }
  scope :driver, where{:driver => true)
end Controller: class ProfileController < ApplicationController
  has_scope :country
  has_scope :keyword
  has_scope :driver, :type => :boolean
end"
503,"RubyGem for Enums. A little background first.  I've been working on a fairly large Rails application which quickly grew into a breeding ground for ""smelly"" code. One antipattern we were using a lot was storing objects in an STI lookup table and having lots of scattered logic based on the name of the object. Here's a dumbed down example of what we had: class Lookup < ActiveRecord::Base
end

class AlarmStatus < Lookup
  has_many :alarm_logs
end

class AlarmLog < ActiveRecord::Base
  belongs_to :alarm_status
end Then all over our application we would do things like: case @alarm_log.alarm_status.name
when ""active""
  # Do something
when ""verified""
  # Do something
when ""inactive""
  # Do something
end This is obviously bad for a lot of reasons, but let's just say it was everywhere. After a few months of this, a consultant came along and pointed out our ""code smell"" and made some suggestions on how to refactor, which included a Ruby implementation of Java's Enum class . We ended up using this frequently in our app, and have extracted into a ruby gem called classy_enum . The premise of classy_enum is that you get the power of OOP mixed with the strictness of an enumerated type, which is pretty much what we were trying to mimic with our STI Lookup model. Example of defining an enum: class Priority < ClassyEnum::Base
  enum_classes :low, :medium, :high

  def send_email?
    false
  end
end

class PriorityHigh < Priority
  def send_email?
    true
  end
end The gem's README has some other usage examples, including how to integrate it with a Rails project. I may be asking for a lot here, but I would love some feedback from anyone willing to give it. It seems like a really cool solution to our problem and I can't imagine we're the only ones who have attempted to solve this before. Here's a list of questions that would be really useful for us: Is this a common problem? Does our solution make sense? Is there a better way to do it? Is the documentation clear? Would you use this in your application? Why or why not? How could we improve it? How is the code quality?"
504,"Workaround for overloaded constructor in PHP. I have a class whose purpose is to display a comment.  I'd like to be able to instantiate it by passing a Comment object if I happen to have it available, or just the values if that's what I have available at the time.  Unfortunately PHP doesn't allow overloaded constructors, so here's the workaround I came up with. class CommentPanel extends Panel {
    //Private Constructor, called only from MakeFrom methods
    private function CommentPanel($text, $userName, $timestamp) {
        parent::Panel(0, $top, System::Auto, System::Auto);

        // Render comment
    }

    public static function MakeFromObject(Comment $comment) {
        return new CommentPanel($comment->text, $comment->User->nickname, $comment->last_updated_ts);
    }

    public static function MakeFromValues($text, $userName, $timestamp) {
        return new CommentPanel($text, $userName, $timestamp);
    }
} So here's the two methods for instantiating a CommentPanel : $cp = CommentPanel::MakeFromObject($comment);
// or...
$cp = CommentPanel::MakeFromValues($text, $user, $last_updated_ts);
// but not
$cp = new CommentPanel(); //Runtime error I'm moderately satisfied, although it's not near as intuitive as an overloaded constructor.  Any thoughts on improving this?"
505,"Unit-testing a controller in Ruby on Rails. I intend this to be a general question on writing an effective set of test cases for a controller action. I include the following ingredients: Ruby on Rails RSpec: A testing framework. I considered doing a vanilla Rails question, but I personally use RSpec, and I feel many other folks do too. The principles that come out of this discussion should be portable to other testing frameworks, though. Will Paginate: I include this to provide an example of code whose implementation is blackboxed to the controller. This is an extreme example of just using the model methods like @programs = Program.all . I chose to go this route to incorporate an additional factor for discussion, and to demonstrate that the same principles apply whether using external application code (e.g., model code) or an external plugin. There seems to be a lack, given my humble Google Fu, of style guides for RSpec testing at this level, so it is my hope that, on top of me improving my code, this can become a useful guide for my fellow travelers. For example purposes, let's say I currently have in my controller the following: class ProgramssController < ApplicationController
  def index
    @programs = Program.paginate :page => params[:page], :per_page => params[:per_page] || 30
  end
end Sidebar: For those unfamiliar with will_paginate , it tacks onto a ActiveRecord Relation ( all , first , count , to_a are other examples of such methods) and delivers a paginated result set of class WillPaginate::Collection , which basically behaves like an array with a few helpful member methods. What are the effective tests I should run in this situation? Using RSpec, this is what I've conceived at the moment: describe ProgramsController do
  def mock_program(stubs={})
    @mock_program ||= mock_unique_program(stubs)
  end

  def mock_unique_program(stubs={})
    mock_model(Program).as_null_object.tap do |program|
      program.stub(stubs) unless stubs.empty?
    end
  end

  describe ""GET index"" do
    it ""assigns @programs"" do
      Program.stub(:paginate) { [mock_program] }
      get :index
      response.should be_success
      assigns(:programs).should == [mock_program]
    end

    it ""defaults to showing 30 results per page"" do
      Program.should_receive(:paginate).with(:page => nil, :per_page => 30) do
        [mock_program]
      end
      get :index
      response.should be_success
      assigns(:programs).should == [mock_program]
    end

    it ""passes on the page number to will_paginate"" do
      Program.should_receive(:paginate).with(:page => '3', :per_page => 30) do
        [mock_program]
      end
      get :index, 'page' => '3'
      response.should be_success
      assigns(:programs).should == [mock_program]
    end

    it ""passes on the per_page to will_paginate"" do
      Program.should_receive(:paginate).with(:page => nil, :per_page => '15') do
        [mock_program]
      end
      get :index, 'per_page' => '15'
      response.should be_success
      assigns(:programs).should == [mock_program]
    end
  end
end I wrote this with the following principles in mind: Don't test non-controller code: I don't delve into the actual workings of will_paginate at all and abstract away from its results. Test all controller code: The controller does four things: assigns @programs , passes on the page parameter to the model, passes on the per_page parameter to the model, and defaults the per_page parameter to 30, and nothing else. Each of these things are tested. No false positives: If you take away the method body of index , all of the test will fail. Mock when possible: There are no database accesses (other ApplicationController logic notwithstanding) My concerns, and hence the reason I post it here: Am I being too pedantic? I understand that TDD is rooted in rigorous testing. Indeed, if this controller acts as a part of a wider application, and say, it stopped passing on page , the resulting behaviour would be undesirable. Nevertheless, is it appropriate to test such elementary code with such rigor? Am I testing things I shouldn't be? Am I not testing things I should? It think I've done an okay job at this, if anything veering on the side of testing too much. Are the will_paginate mocks appropriate? You see, for instance, with the final three tests, I return an array containing only one program, whereas will_paginate is quite liable to return more. While actually delving this behaviour by adding, say 31 records, may (?) violate modular code and testing, I am a bit uneasy returning an unrealistic or restrictive mock result. Can the test code be simplified? This seems quite long to test one line of controller code. While I fully appreciate the awesomeness of TDD, this seems like it would bog me down. While writing these test cases were not too intensive on the brain and basically amounted to a fun vim drill, I feel that, all things considered, writing this set of tests may cost more time than it saves, even in the long run. Is this a good set of tests? A general question."
507,"Converting an already-uploaded file and saving it to a model's FileField. Please review this: from os import path, remove

try:
    video = Video.objects.get(id=original_video_id)
except ObjectDoesNotExist:
    return False

convert_command = ['ffmpeg', '-i', input_file, '-acodec', 
       'libmp3lame', '-y', '-ac', '2', '-ar', 
       '44100', '-aq', '5', '-qscale', '10', 
       '%s.flv' % output_file]                     

convert_system_call = subprocess.Popen(
    convert_command,
    stderr=subprocess.STDOUT,
    stdout=subprocess.PIPE
)

logger.debug(convert_system_call.stdout.read())

try:

    f = open('%s.flv' % output_file, 'r')
    filecontent = ContentFile(f.read())
    video.converted_video.save('%s.flv' % output_file, 
                     filecontent, 
                     save=True)
    f.close()

    remove('%s.flv' % output_file)

    video.save()

    return True
except:
    return False"
508,"If you don't mind recursion (although C programmers generally DO mind), then you can do: node* delete_item(node* curr, int x) {
    node* next;
    if (curr == NULL) { // Found the tail
        printf(""not found\n"");
        return NULL;
    } else if (curr->x == x) { // Found one to delete
        next = curr->next;
        free(curr);
        return next;
    } else { // Just keep going
        curr->next = delete_item(curr->next, x);
        return curr;
    }
} then, in main, you should do head = delete_item(head, 7); This uses the C stack to hold the ""backwards look"" in the list."
509,"Given that php allows optional parameters and doesn't require type checking of parameters that are passed in, you can sort of ""fake"" an overloaded constructor. something like this: class CommentPanel extends Panel {
    public function __construct($text_or_comment, $username=null, $timestamp=null) {
        if (is_string($text_or_comment) {
            $this->textConstructor($text_or_comment, $username, $timestamp);
        }
        else { // assume that it's a comment since it's not a string ... there are better ways to handle this though
            $this->commentConstructor($text_or_comment);
        }
    }

    private function textConstructor($text, username, $timestampe) { /* . . . */ }
    private function commentConstructor(Comment $comment) { /* . . . */ }
} This method will allow for a more consistent API and one that is perhaps more familiar to Java and C++ developers. Also, I'm not positive which version of PHP you're targeting, but I believe in the current version, uses __construct instead of the class name as the constructor. I'm not sure if this is preferred but the documentation does say that it checks for __construct first and then the class name style constructor, so I would guess that using __construct() instead of CommentPanel() would reduce runtime ever so slightly. I'm not 100% sure on that though, that's just my understanding. Please correct me if I'm wrong :)"
510,"Clean, easy to understand code. However: Never hide errors with a bare except. Change try:
    ...
except:
    return False into try:
    ...
except (IOError, AnyOther, ExceptionThat, YouExpect):
    logging.exception(""File conversion failed"") Also, unless you need to support Python 2.4 or earlier, you want to use the files context manager support: with open('%s.flv' % output_file, 'r') as f:
    filecontent = ContentFile(f.read())
    video.converted_video.save('%s.flv' % output_file, 
                               filecontent, 
                               save=True)
remove('%s.flv' % output_file) That way the file will be closed immediately after exiting the with -block, even if there is an error. For Python 2.5 you would have to from __future__ import with_statement as well. You might also want to look at using a temporary file from tempfile for the output file."
513,"House number parsing. I have 2 functions used for parsing a house number and I think these can both be improved. Any suggestions? input: 45a - 47b or 45a bis 47b output: 45,a,47,b public static string[] HausnummerAufteilen(string hausNummer)
    {
        string[] result = new string[4];
        string[] resultVon = new string[2];
        string[] resultBis = new string[2];

        resultVon[0]  = string.Empty;
        resultVon[1]  = string.Empty;
        resultBis[0]  = string.Empty;
        resultBis[1]  = string.Empty;           

        int pos1, pos2;
        pos2 = 0;
        pos1 = hausNummer.IndexOf(""bis"");
        if (pos1 != -1)
        { 
            pos2 = pos1 + 3;
        }
        else
        {
            pos1 = hausNummer.IndexOf(""-"");
            if (pos1 != -1)
                pos2 = pos1 + 1;
        }

        if (pos1 > 0)
        {
            resultVon = HausnummerBuchst(hausNummer.Substring(0, pos1).Trim());
            resultBis = HausnummerBuchst(hausNummer.Substring(pos2, hausNummer.Length - pos2).Trim());
        }
        else
            resultVon = HausnummerBuchst(hausNummer);


        List<string> list = new List<string>();
        list.AddRange(resultVon);
        list.AddRange(resultBis);
        result = list.ToArray();


        return result;
    }

    public static string[] HausnummerBuchst(string hauseNummer)
    {
        string[] result = new string[2];

        result[0] = string.Empty;
        result[1] = string.Empty;

        int iPos;
        int testInt;
        bool bFound = false;

        for (iPos = 0; iPos < hauseNummer.Length; iPos++)
        {

            if (!int.TryParse(hauseNummer[iPos].ToString() ,out testInt))
            {
                bFound = true;
                break;
            }
        }

        if (bFound)
        {
            result[0] = hauseNummer.Substring(0, iPos).Trim();
            result[1] = hauseNummer.Substring(iPos, hauseNummer.Length - iPos).Trim();
        }
        else
            result[0] = hauseNummer;            

        return result;

    }"
514,"How to reduce number of hierarchical 'if statements'. <% @descriptions.each_with_index do |description, i| %>
  <% description.tale2.each do |tax_ref| %>            
    <% if condition %>              
      <% if condition %>
        <% if condition %>                  
          <%= $text_first_describe%> <%= $paren_author_yr %>
             <% ref_sp_uniq.each_with_index do |ref, i| %>
               <% if ref == tax_ref.ref_wo_brace%>
                  <% execution %>                      
               <% elsif i == (ref_sp_uniq.size - 1)%>
                  <%# @ref_desc = ""#{@ref_desc_numb}. #{tax_ref.ref_wo_brace}"" %>
               <% end %>
             <% end %>
          <% if condition %>
                  <% execution %>                      
          <% elsif condition %>
            <% execution %>
          <% elsif taxon_name.emend_author_year %>                    
             <%= print %>
          <% else %>                    
             <%= print %>                    
          <% end %>
        <% end %>
      <% else %>
        <% if condition %>
          <%= print %>
          <% ref_sp_uniq.each_with_index do |ref, i| %>
             <% if condition %>
                <% execution %>                      
             <% elsif condition %>
                  <% execution %>                      
             <% end %>
          <% end %>
          <% if condition %>
            <% execution %>                      
          <% elsif condition %>
            <% execution %>                      
          <% elsif condition %>
            <% execution %>                      
          <% else %>
            <% execution %>                      
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>        
<% end %>"
515,"Anytime I encounter a method that's only doing read-only parsing of strings and I see it's using String.IndexOf() and positions , it leaps out at me like a gigantic code smell. Sometimes upon examination it turns out to be a legitimate and wise usage. However very often the programmer is manually splitting strings and looping through parts of the string. In other words they are doing exactly what String.Split() and foreach loops would offer them, but doing it the longer and less readable way. This is one of those cases. This may be just my personal taste in code. In any case, I can show you how I would tackle this problem using foreach and Split() , which I believe would be a great improvement to your methods. Except for this difference I think we might have taken comparable approaches. Variable names A lot of your variables are named with very little descriptiveness. You may understand that variables are named so that someone maintaining or reading the code (like me) can understand what's going on, but you could do much better in this department. result : You use this word many times in your variable names. The problem is this name is completely useless to me. I can see it is the result of something (variously a function, a loop or some other process) but beyond that you might as well just call the variable foo or bar . hauseNummerVon and hauseNummerBin are far more understandable than resultVon and resultBin - I now know exactly what it is; it's the from house number and the to house number. For either result[] array, I am left with nothing and I would have to read all of the code before I understood what they contained. This is a little backwards - I should know what the variable contains, then be able to read the code - with descriptive variable names giving me a greater understanding of what's going on. bFound : Don't shorten your variable names like this. I'm left wondering: What is a b ? What does it mean if it's found? Maybe this would be more recognisable to a German reader, but even so, expanding b to a word to say exactly what's found would do wonders for readability. pos1 , pos2 : SeparatorPosition and SeparatorEnd would have been more descriptive. Better yet these variables are entirely unnecessary if you just use String.Split() . My approach As I mentioned above, as oppose to editing your methods, I've written from scratch how I'd tackle this problem. ParseHouseNumberRange This is the entry method. You feed this method a string such as ""20a bis 21c"". It splits it up on the ""bis"" or the ""-"" (defined in the separators array) in order to produce smaller chunks of the original string. Each of these chunks is passed to  then passes each of the results (in this case, ""20a "" and "" 21c"", spaces included) over to the non-public method ParseHouseNumber below. ParseHouseNumber will split these chunks up further and this method combines all the results into a single array which is returned. Given ""20a bis 21c"" or similar, it returns an array: 20, a, 21, c . public string[] ParseHouseNumberRange(string houseNumberRange)
{
    string[] separators = new string[] {""bis"", ""-""};
    string[] houseNumbers = houseNumberRange.Split(separators,
        StringSplitOptions.RemoveEmptyEntries);

    List<string> parsedList = new List<string>();

    foreach (string houseNumber in houseNumbers)
    {
        parsedList.AddRange(ParseHouseNumber(houseNumber));
    }

    return parsedList.ToArray();
} ParseHouseNumber This method takes a segment of an address from the method above, such as ""20a "". After trimming out any spaces, it walks through the string character by character, plucking out digits and letters and sorting them into their own individual sections e.g. ""1c4ad3"" would be split into the sections 1, c, 4, ad, 3 . Any non-digit non-letter characters are ignored. Once all sections have been sorted out from the string provided to it, it returns those sections in the form of an array. public string[] ParseHouseNumber(string houseNumber)
{
    bool firstRun = true;
    bool alphabeticMode = false; // set on first run

    houseNumber = houseNumber.Trim();

    List<string> sections = new List<string>();
    string currentSection = """";

    foreach (char c in houseNumber)
    {
        bool isLetter = Char.IsLetter(c);
        bool isDigit = Char.IsDigit(c);

        if (!(isDigit || isLetter)) continue;

        // If we've switched character type, then a section's finished.
        if (firstRun)
        {
            alphabeticMode = isLetter;
            firstRun = false;
        }
        else if ((isLetter && !alphabeticMode)
            || (isDigit && alphabeticMode))
        {
            sections.Add(currentSection);
            currentSection = """";
            alphabeticMode = !alphabeticMode;
        }

        currentSection += c;
    }

    if (currentSection != """") sections.Add(currentSection);

    return sections.ToArray();
}"
519,"Executing a program with a temporary directory and measuring the running time. I need a code review for best practices and code correctness of the following piece of code. run executes a program and validates in output. If the output is valid status can be found in VALID_SOLUTIONS . elapsed = None
tmpdir = tempfile.mkdtemp(prefix='structure-%s-' % os.path.basename(instance))
try:
  for r in range(options.repeat):
    run_returncode, run_status, run_elapsed = run(
        r, path, program, tmpdir, options.timeout, options.satisfiable)
    if run_status not in VALID_SOLUTIONS:
      returncode, status, elapsed = run_returncode, run_status, None
      break

    if r == 0:
      # Set the expected results
      returncode, status = run_returncode, run_status
      elapsed = [run_elapsed]
    else:
      if returncode != run_returncode or status != run_status:
        # Results don't match
        returncode, status, elapsed = None, 'inconsistent_results', None
        break
      else:
        # Extra set
        elapsed.append(run_elapsed)
except Exception as e:
  # Unexpected error in script itself
  print(e, file=sys.stderr)
  #traceback.print_exc()
  status = 'error'
except KeyboardInterrupt as e:
  print('interrupted', file=sys.stderr)
  returncode, status, elapsed = None, 'interrupted', None
finally:
  if status in VALID_SOLUTIONS:
    avg = sum(elapsed) / len(elapsed)
    std = (sum((e - avg)**2 for e in elapsed) / len(elapsed)) ** 0.5
    ci = 1.96 * std / (len(elapsed) ** 0.5)
    print(instance, returncode, status, avg, ci)
  else:
    print(instance, returncode, status, None, None)

  sys.stdout.flush()
  exit(int(status not in ['interrupted'] + VALID_SOLUTIONS))"
520,"You've coded by your principles pretty reasonably. My only real suggestion is to have just one assertion per test, including any #should_receive or #should= statements. The intention of most of your tests seems to be to test one single unit of functionality, so there is no need to repeat assertions, particularly when they are dependent. It will help focus more clearly on the aim of the individual tests, reducing their volume and heightening the readability. As far as RSpec style, there are a few idioms I have seen more commonly used: using #and_return in place of returning values from blocks using mock_model doing setup in before blocks Overall, I would likely have written it like this: describe ProgramsController do
  before(:each) do
    @mock_programs = [mock_model(Program)]
    Program.stub(:paginate).and_return(@mock_programs)
  end

  describe ""GET index"" do
    it ""succeeds"" do
      get :index

      response.should be_success
    end

    it ""renders the index template"" do
      get :index

      response.should render_template(""programs/index"")
    end

    it ""assigns @programs"" do
      get :index

      assigns(:programs).should == [mock_program]
    end

    it ""defaults to showing 30 results per page"" do
      Program.should_receive(:paginate).with(:page => nil, :per_page => 30).and_return(@mock_programs)

      get :index
    end

    it ""passes on the page number to will_paginate"" do
      Program.should_receive(:paginate).with(:page => '3', :per_page => 30).and_return(@mock_programs)

      get :index, 'page' => '3'
    end

    it ""passes on the per_page to will_paginate"" do
      Program.should_receive(:paginate).with(:page => nil, :per_page => '15').and_return(@mock_programs)

      get :index, 'per_page' => '15'
    end
  end
end I think, for the limited scope which you've provided, this is a good set of tests. You may be able to skip the test for basic success since all your other tests are dependent on a successful action. I personally can't speak too deeply about testing will_paginate, since I do much the same when testing the use of it from the controller. If it's tested well in the model that uses it, you've covered the basic behavior."
521,"Well, firstly, don't be afraid of empty lines. This code is quite hard to read. Secondly, functions is good invention. ;) That code as it is now is a bare piece of code, with no indication of where most of the parameters come from, and it seems that the acceptable solutions is a global, as you have capitalized it? That doesn't make much sense to me. Just as you have a function called run() to run the program, it would make sense to have a function to run it multiple times, with the tests for that you have. I'm also not sure why you trap KeyboardInterrupt, without seeming to actually do anything with it, except setting the status, and then testing the status. You could just do exit directly from that exception handler, that would be clearer. Otherwise it seems fine. Feedback on correctness is impossible when your code isn't a running example. But then again, tests generally work better than code reviews there, although they are not exclusive."
522,"NHibernate (UoW) + cCommand pattern. I'm building an ASP.NET MVC app and would like some feedback for my way to query/execute statements to the ORM. I'm using Fluent NHibernate, and have mixed the UoW provided by NHibernate with a Command pattern. ICommand.cs (Core layer) using NHibernate;

namespace MyDemon.Core.Commands
{
    public interface ICommand<out TResult>
    {
        TResult Execute(ISession session);
    }
} ISessionExtensions.cs (Core layer) using NHibernate;

namespace MyDemon.Core.Commands
{
    public static class ISessionExtensions
    {
        public static TResult Execute<TResult>(this ISession session, ICommand<TResult> unitOfWork)
        {
            return unitOfWork.Execute(session);
        }
    }
} GetUserById.cs (Core layer) using NHibernate;

namespace MyDemon.Core.Commands.User
{
    using Entities;

    public class GetUserById : ICommand<User>
    {
        public int UserId { get; set; }

        public GetUserById(int userId)
        {
            UserId = userId;
        }

        #region Implementation of IUnitOfWork<out User>

        public User Execute(ISession session)
        {
            return session.Get<User>(UserId);
        }

        #endregion
    }
} AccountController.cs (Web layer) [AjaxOnly]
[Authorize]
public ActionResult Details(int id)
{
    User userToGet = _session.Execute(new GetUserById(id));

    if (userToGet == null)
    {
        return PartialView(""Partials/UserNotFound"");
    }

    DetailsUserViewModel userToViewModel = Mapper.Map<User, DetailsUserViewModel>(userToGet);

    return PartialView(""Partials/Details"", userToViewModel);
} What do you think? A clever design, or just another ""too-much code"" approach?"
523,"Comments. Well written code tells you how a problem is being solved. Well written comments tell you what problem is being solved. Great comments tell you what assumptions the programmer is making about the data going in and coming out. In the finally clause: You have a magic constant. Best practice is that you declare constants with descriptive variables names. The variables 'r' and 'e': no single letter variable names please, save for those that are so basic no one will get them wrong, which is basically x,y,z and t, in the context for cartesian coordinates or parameterized plots. And 'e' was an exception a few lines ago, now it's a list element? Lastly, x**.5 is accurate, but sqrt(x) is more readable."
524,"In general, you can try inverting the condition on your outermost if block, and work your way in.  This will often result in less nesting, eg: if condition1
  if condition2
    #ifblock
  else
    #elseblock2
  end
else
  #elseblock
end Inside a loop, as you have your code, it would become this strcture, which is less nested: if !condition
  #elseblock
  next
end
if !condition2
  #elseblock2
  next
end
#ifblock"
525,"In addition to the points that Lennart made, there's just one minor thing I'd like to add: You repeat the expression '%s.flv' % output_file four times in your code. You might want to store this in a variable like filename = '%s.flv' % output_file . This way there's less repetition and if you ever want to change the target file format, all you'll have to change are the filename and convert_command variables."
528,"Alternate solution without the overhead of the array_chunk call. (Don't get me wrong, I love array_chunk and use it for a lot of things, but this isn't one where it's needed.) $array = getData(...);
$n = 5; //or whatever you want to chunk into
echo ""<div>""; //always open one
$lcv = 1; // loop count variable
foreach ($array as $key => $val) {
    //format $key/$val as needed here...
    if ($lcv++ % $n == 0) { //every Nth item
        echo ""</div><div>""; //close old one and open new one
    }
}
echo ""</div>""; //always close the last one. Worst case here is you might have an empty <div></div> block at the end if you had an exact multiple of n.... but that's not really that big a deal 99.999% of the time. :) If it is... then you can catch it like so: $array = getData(...);
$num = count($array);
$n = 5; //or whatever you want to chunk into
echo ""<div>""; //always open one
$lcv = 1; // loop count variable
foreach ($array as $key => $val) {
    //format $key/$val as needed here...
    if ($lcv++ % $n == 0 && $lcv < $num) { // every Nth item, unless we're done
        echo ""</div><div>""; //close old one and open new one
    }
}
echo ""</div>""; //always close the last one. (Of course you can use print , echo , or ?>...<? tags... whatever you want to actually do all the output, doesn't matter.) And to be honest, I'd probably add one more case to it: $array = getData(...);
$num = count($array);
if ($num == 0) {
    echo ""<div>No results?</div>"";
} else {
    $n = 5; //or whatever you want to chunk into
    echo ""<div>""; //always open one
    $lcv = 1; // loop count variable
    foreach ($array as $key => $val) {
        //format $key/$val as needed here...
        if ($lcv++ % $n == 0 && $lcv < $num) { // every Nth item, unless we're done
            echo ""</div><div>""; //close old one and open new one
        }
    }
    echo ""</div>""; //always close the last one.
} Just to cover the case that whatever search it is didn't actually return anything."
529,"A few ways you could make it more robust. In getSelected() , why not call getSelectedItem() instead? You tend to use super.foo() instead of foo() ; that's usually a bad idea. Just call foo() , unless you really want to avoid any override in your class.  If you always use super.foo() , then if you decide you want to override foo() , perhaps for some debug code, you have to go change your code everywhere from super.foo() to just foo() or perhaps this.foo() . This code doesn't seem to enforce a consistent policy around duplicates in the spinner. If duplicates are not allowed, perhaps good to check for that at add time."
531,"Hypothetical SalesTax challenge. I have a small solution to the following hypothetical problem: Basic sales tax is applicable at a rate of 10% on all goods, except
  books, food, and medical products that are exempt. Import duty is an
  additional sales tax applicable on all imported goods at a rate of 5%,
  with no exemptions. When I purchase items I receive a receipt which lists the name of all
  the items and their price (including tax), finishing with the total
  cost of the items, and the total amounts of sales taxes paid. The
  rounding rules for sales tax are that for a tax rate of n%, a shelf
  price of p contains (np/100 rounded up to the nearest 0.05) amount of
  sales tax. Write an application that prints out the receipt details
  for these shopping baskets. INPUT : Input 1: 1 book at 12.49 1 music CD at 14.99 1 chocolate bar at 0.85 Input 2: 1 imported box of chocolates at 10.00 1 imported bottle of perfume at 47.50 Input 3: 1 imported bottle of perfume at 27.99 1 bottle of perfume at 18.99 1 packet of headache pills at 9.75 1 box of imported
  chocolates at 11.25 OUTPUT Output 1: 1 book : 12.49 1 music CD: 16.49 1 chocolate bar: 0.85 Sales Taxes: 1.50 Total: 29.83 Output 2: 1 imported box of chocolates: 10.50 1 imported bottle of perfume: 54.65 Sales Taxes: 7.65 Total: 65.15 Output 3: 1 imported bottle of perfume: 32.19 1 bottle of perfume: 20.89 1 packet of headache pills: 9.75 1 imported box of chocolates: 11.85 Sales Taxes: 6.70 Total: 74.68 I'm interested in feedback on my use of design patterns, whether there are any extensibility issues, how SOLID the code is and the style/structure of the unit tests. I'd really appreciate hearing constructive criticisms. Full solution is available here This is part of the main solution: public class SalesItem : ISalesItem
{
    private string _name;
    private decimal _price;

    public SalesItem(string name, decimal price)
    {
        #region Parameter Checking
        if (String.IsNullOrWhiteSpace(name))
            throw new ArgumentException(""name"");
        if(price < 0)
            throw new ArgumentException(""price"");
        #endregion

        this._name = name;
        this._price = price;
    }

    #region ISalesItem Members

    public string Name
    {
        get { return this._name; }
    }

    public decimal GetPrice()
    {
        return this._price;
    }

    public decimal GetSalesTax()
    {
        return 0.0M;
    }

    public decimal GetTotal()
    {
        return this.GetPrice() + this.GetSalesTax();
    }

    #endregion
}

public class SalesItemTaxDecorator: ISalesItem
{
    protected ISalesItem _decoratedSalesItem;
    protected ITax _salesTax;

    public SalesItemTaxDecorator(ISalesItem salesItem, ITax salesTax)
    {
        this._decoratedSalesItem = salesItem;
        this._salesTax = salesTax;
    }

    #region ISalesItem Members

    public string Name
    {
        get { return _decoratedSalesItem.Name; }
    }

    public virtual decimal GetSalesTax()
    {
        return this._decoratedSalesItem.GetSalesTax() + _salesTax.CalculateTax(this._decoratedSalesItem.GetPrice());
    }

    public virtual decimal GetPrice()
    {
        return this._decoratedSalesItem.GetPrice();
    }

    public virtual decimal GetTotal()
    {
        return this.GetPrice() + this.GetSalesTax();
    }

    #endregion
}

public class Tax : ITax
{
    private decimal _rate;
    private IRounding _rounding;

    public Tax(decimal rate, IRounding rounding)
    {
        this._rate = rate;
        this._rounding = rounding;
    }

    #region ISalesTax Members

    public decimal Rate
    {
        get { return this._rate; }
    }

    public IRounding Rounding
    {
        get { return this._rounding; }
    }

    public virtual decimal CalculateTax(decimal itemPrice)
    {
        decimal tempTax = itemPrice * this.Rate;
        decimal roundedTax = Rounding.Round(tempTax);
        return roundedTax;
    }

    #endregion
}

public static class SalesItemFactory
{
    private static readonly Rounding ROUNDING = new Rounding(0.05M);
    private static readonly ITax BASICTAX = new Tax(0.1M, ROUNDING);
    private static readonly ITax IMPORTTAX = new Tax(0.05M, ROUNDING);

    private static readonly Dictionary<ItemType, ITax> itemTaxLookup = new Dictionary<ItemType, ITax>()
    {
        { ItemType.Basic, BASICTAX },
        { ItemType.Import, IMPORTTAX }
    };

    public static ISalesItem GetSalesItem(string name, decimal price, ItemType itemType)
    {
        ISalesItem item = new SalesItem(name, price);

        foreach (int flag in Enum.GetValues(typeof(ItemType)))
        {
            if ((flag & (int)itemType) == flag)
            {
                item = (ISalesItem)Activator.CreateInstance(typeof(SalesItemTaxDecorator), new object[] { item, itemTaxLookup[(ItemType)flag] });
            }
        }

        return item;
    }

    public static ISalesItem GetSalesItem(string name, decimal price)
    {
        return new SalesItem(name, price);
    }
}"
532,"I would not insist on replacing lines.Remove with lines = lines.Where(...) . I believe this replacement is subjective since you will still need to remove the same lines from Dependencies.Children collection. Instead I would modify foreach statement. If you do not checking test == null then instead of test = svi.Tag as SourceFile , I would use test = (SourceFile)svi.Tag . Resharper says the same. Second nested foreach is definitely a Contains statement Rename remove -> linesToRemove since remove is not a noun IEnumerable<> for method parameter, not List<> Better name for list parameter? It doesn't clear what is that parameter used for from method signature Why not UpperCamelCase ? Result: private static void RemoveUnnecessaryLines(IEnumerable<ScatterViewItem> list)
{
    var linesToRemove = lines
        .Select(line => ((Call)line.Tag).getCallee())
        .Where(destination => list.Any(svi => Equals(svi.Tag, destination)))
        .ToList();

    foreach (Line l in linesToRemove)
    {
        lines.Remove(l);
        Dependencies.Children.Remove(l);
    }
}"
533,"Is there a better way than lambda to filter on attributes/methods of objects?. Is there a better (more pythonic?) way to filter a list on attributes or methods of objects than relying on lamda functions? contexts_to_display = ...
tasks = Task.objects.all()
tasks = filter(lambda t: t.matches_contexts(contexts_to_display), tasks)
tasks = filter(lambda t: not t.is_future(), tasks)
tasks = sorted(tasks, Task.compare_by_due_date) Here, matches_contexts and is_future are methods of Task .  Should I make those free-functions to be able to use filter(is_future, tasks) ? Any other comment?"
534,"Wow, a lot of code to review. Unfortunately I'm too lazy to look through entire solution, let's I'll post my first 10 points. 1) http://en.wikipedia.org/wiki/Overengineering . Looked through the solution and have found absolutely no point in having such an amount of interfaces. I would definitely get rid of ITax and IRounding because there is only one implementation for each of them and there is no point to isolate them during unit-testing because there is too small functionality to isolate. Do not make it in such a complicated way until you really need such a complicated model. You will have time to make things worse later :) 2) I personally hate 4-line regions - they do not help at all as for me. 3) If you have a factory for salesItems then why don't you want to make class SalesItem hidden inside Factory class. public static class SalesItemFactory
{
    class SalesItem : ISalesItem { ... }
    class SalesItemTaxDecorator : ISalesItem { ... }

    ...
} If you really want to unit-test them then at least make them internal and use InternalsVisibleTo . Or better even not to test them, test factory! 4) item = (ISalesItem)Activator.CreateInstance(typeof(SalesItemTaxDecorator), new object[] { item, itemTaxLookup[(ItemType)flag] }); Why activator at all? 5) The same line as in previous point. Why do you assign this value to item and continue iterations? Simply return it! And in order to keep your logic you should revert collection returned by Enum.GetValues . 6) I would remove 'protected' and 'virtual' stuff from your decorator and replace them with 'private' and 'sealed' instead. Otherwise you're giving an ability to decorate decorator but that is strange. Too much of extensibility 7) Let's go to unit-tests :). https://github.com/manwood/SalesTax/tree/master/Manwood.SalesTax.Tests/Stubs . Do not write your stubs, use for example RhinoMock instead. They make life easier due to many reasons: you do not have to write your stubs, you will not see your stubs while looking for inheritors of ITax , they allow you to write more precise unit-tests (your unit-tests are not that good, see next point). 8) https://github.com/manwood/SalesTax/blob/master/Manwood.SalesTax.Tests/SalesItemTest.cs . [TestClass]
public class SalesItemTest
{
    [TestMethod] public void SalesItemGetPriceTest() { }
    [TestMethod] public void SalesItemGetSalesTaxTest() { }
    [TestMethod] public void SalesItemGetTotalTest() { }
} Doubling your names too much in testMethods. PriceTest() , SalesTaxTest() , GetTotalTest() would be better names. 9) https://github.com/manwood/SalesTax/blob/master/Manwood.SalesTax.Tests/SalesItemTaxDecoratorTest.cs [TestMethod]
    public void SalesItemTaxDecoratorTotalTest()
    {
        SalesItemTaxDecorator taxDecorator = new SalesItemTaxDecorator(new SalesItemStub(10M, 0M), new TaxStub(0.1M));
        decimal total = taxDecorator.GetTotal();
        Assert.AreEqual(11M, total);
    } This is invalid test. What you're testing is whether it will return 11 if price is 10 and tax is 0.1 . What you should test is a) Tax was calculated for price value (it means that ITax.CalculateTax was invoked with parameter 10) b) result taken from tax was added to 10 and returned. RhinoMocks will help use assert a) statement and you should assert b) on your own in the same manner you do it right now. This test should  not have 0.1 constants, otherwise you're testing tax class also (even though it is a stub). 10) 10th point, I want to go sleep. Asking about patterns in such a simple example will never be easy, because there is no point in them in such examples and you will never need them until you will extend it."
536,"Windows service for monitoring network interface changes. I'm currently working on several projects for my company to help reduce the amount of calls we have to deal with so we can focus on higher priority task, such as server resource reduction, etc. The first project on my list was to reduce the number of proxy issues a user has when migrating from an internal network to an external network such as home Internet. I have come up with a Windows service idea where the service would be deployed from our servers and installed via a command.  Once installed and started the service would monitor the connection states of all the network interface on the computer. Upon a network interface change such as: Ethernet plugged out IP changes Interfaces enabled / disabled etc the service would attempt to ping our DomainController .  If the ping is a success, we will then check to see if the proxy settings for the machine are set.  If not, we will automatically set them and enable them.  If the ping is unsuccessful, we will disable the proxy. The project is not fully complete but there is still a nice bit of code there to review. ProxyMonitor.cs using System;
using System.Diagnostics;
using System.ServiceProcess;
using System.Configuration.Install;
using System.Reflection;
using System.Threading;
using System.Net.NetworkInformation;

namespace Serco.Services.ProxyMonitor
{
    class ProxyMonitor : ServiceBase
    {
        static void Main(string[] args) 
        {
            AppDomain.CurrentDomain.UnhandledException += CurrentDomainUnhandledException;
            if (System.Environment.UserInteractive)
            {
                string parameter = string.Concat(args);
                switch (parameter)
                {
                    case ""/install"":
                            ManagedInstallerClass.InstallHelper(new string[] { Assembly.GetExecutingAssembly().Location });
                        break;
                    case ""/uninstall"":
                        ManagedInstallerClass.InstallHelper(new string[] { ""/u"", Assembly.GetExecutingAssembly().Location });
                        break;
                }
            }
            else
            {
                ServiceBase.Run(new ProxyMonitor());
            }
        }

        private static void CurrentDomainUnhandledException(object sender, UnhandledExceptionEventArgs e)
        {
        }

        /*
         * Start the main service application
         */
        private ManualResetEvent MainShutdownEvent = new ManualResetEvent(false);
        private Thread MainThread;
        private static EventLog EventManager = new EventLog();
        public static string ProxyIp;

        public ProxyMonitor()
        {
            EventManager.Source = ServiceConfiguration.ServiceName;
        }

        protected override void OnStart(string[] args)
        {
            ProxyIp = string.Concat(args);
            MainThread = new Thread(MainWorkerThread);
            MainThread.Name = ""MainWorkerThread"";
            MainThread.IsBackground = true;
            MainThread.Start();
        }

        private void MainWorkerThread()
        {
            EventManager.WriteEntry(""Watching for ip: "" + ProxyIp);
            NetworkChange.NetworkAddressChanged += new NetworkAddressChangedEventHandler(AddressChangedCallback);
        }

        public static void AddressChangedCallback(object Sender,EventArgs Args)
        {
            //try and ping the Proxy Server
            Ping Ping = new Ping();
            PingReply Reply = Ping.Send(""secret.domain"");

            if (Reply.Status == IPStatus.Success) 
            {
                /*
                 * Update Proxy Settings
                 */
            }
        }

        protected override void OnStop()
        {
            MainShutdownEvent.Set();
            if(!MainThread.Join(3000))
            {
                // give the thread 3 seconds to stop
                MainThread.Abort();
            }
        }
    }
} ManagedInstallation.cs using System;
using System.ServiceProcess;
using System.Configuration;
using System.ComponentModel;
using System.Configuration.Install;

namespace Serco.Services.ProxyMonitor
{
    [RunInstaller(true)]
    public class ManagedInstallation : Installer
    {
        public ManagedInstallation()
        {
            var ProcessInstaller = new ServiceProcessInstaller();
            var ServiceInstaller = new ServiceInstaller();

            //set the information and privileges
            ProcessInstaller.Account        = ServiceConfiguration.AccountType;
            ProcessInstaller.Username       = null;
            ProcessInstaller.Password       = null;
            ServiceInstaller.DisplayName    = ServiceConfiguration.DisplayName;
            ServiceInstaller.StartType      = ServiceConfiguration.StartType;
            ServiceInstaller.Description    = ServiceConfiguration.Description;
            ServiceInstaller.ServiceName    = ServiceConfiguration.ServiceName;

            Installers.Add(ProcessInstaller);
            Installers.Add(ServiceInstaller);
        }

        private ServiceController ServiceController = new ServiceController(ServiceConfiguration.ServiceName);

        protected override void OnAfterInstall(System.Collections.IDictionary savedState)
        {
            base.OnAfterInstall(savedState);
            ServiceController.Start();
        }
    }
} ServiceConfiguration.cs using System;
using System.Collections.Generic;
using System.Text;
using System.ServiceProcess;

namespace Serco.Services.ProxyMonitor
{
    class ServiceConfiguration
    {
        public static string DisplayName
        {
            get { return ""Proxy Monitor""; }
        }

        public static string ServiceName
        {
            get { return ""ProxyMonitor""; }
        }

        public static string Description
        {
            get
            {
                return ""ProxyMonitor is a helper developed to manage the state of the proxy for the employess whilst of the internal network."";
            }
        }

        public static ServiceStartMode StartType
        {
            get{return ServiceStartMode.Automatic;}
        }

        public static ServiceAccount AccountType 
        {
            get{return ServiceAccount.LocalSystem;}
        }
    }
} The ServiceConfiguration class may be modified to populate from a local file depending on the deployment discussion I will have with my colleges."
537,"I think lambdas are fine in this case. (Yeah, not much of a code review, but what can I say... You basically ask a yes/no question. Answer: ""No"". :) )"
538,"Random Number Generator Class. I've written an abstract class in C# for the purpose of random number generation from an array of bytes. The .NET class RNGCryptoServiceProvider can be used to generate this array of random bytes, for example. using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace MyLibrary
{
    /// <summary>
    /// Represents the abstract base class for a random number generator.
    /// </summary>
    public abstract class Rng
    {
        /// <summary>
        /// Initializes a new instance of the <see cref=""Rng""/> class.
        /// </summary>
        public Rng()
        {
            //
        }

        public Int16 GetInt16(Int16 min, Int16 max)
        {
            return (Int16)(min + (Int16)(GetDouble() * (max - min)));
        }

        public Int32 GetInt32(Int32 min, Int32 max)
        {
            return (Int32)(min + (Int32)(GetDouble() * (max - min)));
        }

        public Int64 GetInt64(Int64 min, Int64 max)
        {
            return (Int64)(min + (Int64)(GetDouble() * (max - min)));
        }

        public UInt16 GetUInt16(UInt16 min, UInt16 max)
        {
            return (UInt16)(min + (UInt16)(GetDouble() * (max - min)));
        }

        public UInt32 GetUInt32(UInt32 min, UInt32 max)
        {
            return (UInt32)(min + (UInt32)(GetDouble() * (max - min)));
        }

        public UInt64 GetUInt64(UInt64 min, UInt64 max)
        {
            return (UInt64)(min + (UInt64)(GetDouble() * (max - min)));
        }

        public Single GetSingle()
        {
            return (Single)GetUInt64() / UInt64.MaxValue;
        }

        public Double GetDouble()
        {
            return (Double)GetUInt64() / UInt64.MaxValue;
        }

        public Int16 GetInt16()
        {
            return BitConverter.ToInt16(GetBytes(2), 0);
        }

        public Int32 GetInt32()
        {
            return BitConverter.ToInt32(GetBytes(4), 0);
        }

        public Int64 GetInt64()
        {
            return BitConverter.ToInt64(GetBytes(8), 0);
        }

        public UInt16 GetUInt16()
        {
            return BitConverter.ToUInt16(GetBytes(2), 0);
        }

        public UInt32 GetUInt32()
        {
            return BitConverter.ToUInt32(GetBytes(4), 0);
        }

        public UInt64 GetUInt64()
        {
            return BitConverter.ToUInt64(GetBytes(8), 0);
        }

        /// <summary>
        /// Generates random bytes of the specified length.
        /// </summary>
        /// <param name=""count"">The number of bytes to generate.</param>
        /// <returns>The randomly generated bytes.</returns>
        public abstract byte[] GetBytes(int count);
    }
} Any suggestions for improvements would be welcome."
539,"The neatest way to deal with this is to use what I was taught as the ""2 pointer trick"" (thank you Charles Lindsay all those years ago): Instead of holding a pointer to the record you hold a pointer to the pointer that points to it - that is you use a double indirection. This enables you to both modify the pointer to the record and to modify the record without keeping track of the previous node. One of the nice things about this approach is that you don't need to special case dealing with the first node. An untested sketch using this idea for delete_item (in C++) looks like: void delete_item(node** head, int i) {
  for (node** current = head; *current; current = &(*current)->next) {
    if ((*current)->x == i) {
      node* next = (*current)->next;
      delete *current;
      *current = next;
      break;
    }
  }
} This loop will break after the first entry it finds, but if you remove the ""break"" then it will remove all entries that match."
540,"Open, write and close a file. I have a small 10-liner function that writes some data to a file using an std::ofstream . I did not explicitly call .close() at the end of my function, but it failed code review with the reason that it is better to explicitly call it for style and verbosity reasons. I understand there is no harm in calling .close() explicitly, but does calling it explicitly just before a return statement indicate a lack of understanding or faith in RAII? The C++ standard says: 27.8.1.2 virtual ~ basic_filebuf (); [3] Effects: Destroys an object of class basic_filebuf<charT,traits> . Calls close() . Am I justified in my argument that calling .close() at the end of a function is redundant and/or unnecessary? bool SomeClass::saveData()
{
    std::ofstream saveFile(m_filename);

    if (!saveFile.is_open())
        return false;

    saveFile << m_member1 << std::endl;
    saveFile << m_member2 << std::endl;

    saveFile.close(); // passed review only with this line
    return true;
} The function is only supposed to return false if the file could not be opened for writing."
541,"I'm torn on this one. You are absolutely correct. However if a coding standard requires calling close() explicitly or it's a group people's consensus of doing that, there's not much you can do. If I were you, I would just go with the flow. Arguing such things is unproductive."
542,"Assuming that the fstream object is local to the function, I would tend to argue against this. People need to become accustomed to letting RAII do its job, and closing an fstream object falls under that heading. Extra code that doesn't accomplish something useful is almost always a poor idea. Edit: Lest I be misunderstood, I would argue against this, not only for this specific case, but in general. It's not merely useless, but tends to obscure what's needed, and (worst of all) is essentially impossible to enforce in any case -- people who think only in terms of the ""normal"" exit from the function really need to stop and realize that the minute they added exception handling to C++, the rules changed in a fundamental way. You need to think in terms of RAII (or something similar) that ensures cleanup on exit from scope -- and explicitly closing files, releasing memory, etc., does not qualify."
543,"My take is that what you have should be the preferred way of doing things. First of all, the names of the input parameters are what will show up in javadocs, and therefore should not have any prefix or silly names that will make the javadocs cryptic. Second, if the input parameter names clearly define what the things are, then why name the global variables something else that will make the rest of the code less meaningful or more difficult to maintain? Third, the scope of the input parameters is so limited, that it seems to me that you would rarely find this to be error-prone, especially when simply initializing class data."
544,I would argue the exact opposite. Explicitly closing a stream is probably not what you want to do. This is because when you close() the stream there is the potential for exceptions to be thrown. Thus when you explicitly close a file stream it is an indication you both want to close the stream and explicitly handle any errors that can result (exceptions or bad-bits) from the closing of the stream (or potentially you are saying if this fails I want to fail fast (exception being allowed to kill the application)). If you don't care about the errors (ie you are not going to handle them anyway). You should just let the destructor do the closing. This is because the destructor will catch and discard any exceptions thus allowing code to flow normally. When dealing with the closing of a file this is what you normally want to do (if the closing fails does it matter?).
545,"The first lambda (calling matches_contexts ) can't be avoided because it has to capture the contexts_to_display , but the not is_future() can be moved into a new Task method can_start_now : it's clearer (hiding the negative conditions), reusable, and this condition will most probably be more complicated in the future. Yes, YAGNI , I know... ;) And because I did not need the sorting phase to return a copy of tasks , I used in-place sort.  By the way, the arguments are reversed between filter(f,iterable) and sorted(iterable,f) , using one just after the other seemed akward... So the code is now: class Task:
    ...
    def can_start_now(self):
        return not self.is_future()


contexts_to_display = ...
tasks = Task.objects.all()
tasks = filter(lambda t: t.matches_contexts(contexts_to_display), tasks)
tasks = filter(Task.can_start_now, tasks)
tasks.sort(Task.compare_by_due_date)"
546,"There is a middle ground here.  The reason the reviewers want that explicit close() ""as a matter of style and verbosity"" is that without it they can't tell just from reading the code if you meant to do it that way, or if you completely forgot about it and just got lucky.  It's also possible their egos were bruised from failing to notice or remember, at least at first, that close() would be called by the destructor.  Adding a comment that the destructor calls close() isn't a bad idea.  It's a little gratuitous, but if your coworkers need clarification and/or reassurance now, there's a good chance a random maintainer a few years down the road will too, especially if your team doesn't do a lot of file I/O."
547,"I would use a list comprehension: contexts_to_display = ...
tasks = [t for t in Task.objects.all()
         if t.matches_contexts(contexts_to_display)
         if not t.is_future()]
tasks.sort(cmp=Task.compare_by_due_date) Since you already have a list, I see no reason not to sort it directly, and that simplifies the code a bit. The cmp keyword parameter is more of a reminder that this is 2.x code and will need to be changed to use a key in 3.x (but you can start using a key now, too): import operator
tasks.sort(key=operator.attrgetter(""due_date""))
# or
tasks.sort(key=lambda t: t.due_date) You can combine the comprehension and sort, but this is probably less readable: tasks = sorted((t for t in Task.objects.all()
                if t.matches_contexts(contexts_to_display)
                if not t.is_future()),
               cmp=Task.compare_by_due_date)"
548,"If you're planning on placing this in a reusable library you should validate inputs (min > max throws an IndexOutOfRangeException, etc.) Also, you do not need to cast to double in the GetDouble method as the division implicitly returns a double and casting the first operand of the division in GetSingle still causes the division to return a double though you may be sacrificing some precision in the randomness as a result of sacrificing 32bits before you divide. Otherwise the code does seems as though it would be sufficient. Depending on the scope of your solution perhaps you want to consider min/max overloads for GetSingle and GetDouble and if you're really looking to be special maybe support for System.Numerics.BigInteger and System.Decimal?"
549,"Image resizing class. How does this class to resize an image look? using System;
using System.Collections.Generic;
using System.Web;
using System.Drawing;
using System.IO;

/*
 * Resizes an image
 **/
public static class ImageResizer
{
    // Saves the image to specific location, save location includes filename
    private static void saveImageToLocation(Image theImage, string saveLocation)
    {
        // Strip the file from the end of the dir
        string saveFolder = Path.GetDirectoryName(saveLocation);
        if (!Directory.Exists(saveFolder))
        {
            Directory.CreateDirectory(saveFolder);
        }
        // Save to disk
        theImage.Save(saveLocation);
    }

    // Resizes the image and saves it to disk.  Save as property is full path including file extension
    public static void resizeImageAndSave(Image ImageToResize, int newWidth, int maxHeight, bool onlyResizeIfWider, string thumbnailSaveAs)
    {
        Image thumbnail = resizeImage(ImageToResize, newWidth, maxHeight, onlyResizeIfWider);
        thumbnail.Save(thumbnailSaveAs);
    }
    // Overload if filepath is passed in
    public static void resizeImageAndSave(string imageLocation, int newWidth, int maxHeight, bool onlyResizeIfWider, string thumbnailSaveAs)
    {
        Image loadedImage = Image.FromFile(imageLocation);
        Image thumbnail = resizeImage(loadedImage, newWidth, maxHeight, onlyResizeIfWider);

        saveImageToLocation(thumbnail, thumbnailSaveAs);
    }

    // Returns the thumbnail image when an image object is passed in
    public static Image resizeImage(Image ImageToResize, int newWidth, int maxHeight, bool onlyResizeIfWider)
    {
        // Prevent using images internal thumbnail
        ImageToResize.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
        ImageToResize.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);

        // Set new width if in bounds
        if (onlyResizeIfWider)
        {
            if (ImageToResize.Width <= newWidth)
            {
                newWidth = ImageToResize.Width;
            }
        }

        // Calculate new height
        int newHeight = ImageToResize.Height * newWidth / ImageToResize.Width;
        if (newHeight > maxHeight)
        {
            // Resize with height instead
            newWidth = ImageToResize.Width * maxHeight / ImageToResize.Height;
            newHeight = maxHeight;
        }

        // Create the new image
        Image resizedImage = ImageToResize.GetThumbnailImage(newWidth, newHeight, null, IntPtr.Zero);

        // Clear handle to original file so that we can overwrite it if necessary
        ImageToResize.Dispose();


        return resizedImage;
    }
    // Overload if file path is passed in instead
    public static Image resizeImage(string imageLocation, int newWidth, int maxHeight, bool onlyResizeIfWider)
    {
        Image loadedImage = Image.FromFile(imageLocation);
        return resizeImage(loadedImage, newWidth, maxHeight, onlyResizeIfWider);
    }
}"
550,"I think the design is pretty good. A few comments: I'd rename the class to something a bit more descriptive, say RandomGenerator . Then when you implement the class you can declare it with CspGenerator: RandomGenerator or MersenneGenerator: RandomGenerator and it's obvious what the class does. Comment the get() methods. IMO all public elements should be documented. Get/set could be left out, but that is a matter of preference. In particular I'd like to know what kind of range min anf max is and is used for. Is getBytes() needed externally? If not, I would consider making it class-level rather than public. The formatting is good - even in Visual Studio I've seen it get messed up as code is refactored and changed."
551,"abort() implementation. Here you go: #define abort(msg) (fprintf(stderr, msg) && *((char*)0))"
552,"PascalCase the method names and method params if you are feeling overly ambitious. // Set new width if in bounds
    if (onlyResizeIfWider)
    {
        if (ImageToResize.Width <= newWidth)
        {
            newWidth = ImageToResize.Width;
        }
    } FindBugs barks in Java for the above behavior... refactor into a single if since you are not doing anything within the first if anyways... // Set new width if in bounds
    if (onlyResizeIfWider && ImageToResize.Width <= newWidth)
    {
        newWidth = ImageToResize.Width;
    } Comments here could be a bit more descriptive; while you state what the end result is I am still lost as to why that would resolve the issue. // Prevent using images internal thumbnail
    ImageToResize.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
    ImageToResize.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone); Maybe something similar to what is stated on this blog ... // Prevent using images internal thumbnail since we scale above 200px; flipping
    // the image twice we get a new image identical to the original one but without the    
    // embedded thumbnail
    ImageToResize.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
    ImageToResize.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);"
553,"In C# it's generally common practice to use Pascal Case in method names (so SaveImageToLocation instead of saveImageToLocation) and Camel Case in parameter names (so ""public static Image ResizeImage(Image imageToResize, ..."") RotateFlip can be a rather expensive operation just to clear an internal thumbnail. As far as the images are concerned, do you need to support vector images or will this generally be used for Bitmap (rasterized) images (this includes compressed variations like png, jpg, gif, etc.)? If you only plan to output Bitmaps then I suggest using the Bitmap(Image original, int width, int height) constructor which will take a source image and scale it, removing the need to do costly rotations. There are a number of methods to draw scaled images, some of which are much more efficient than others and each have varying pros and cons to using them, but the biggest advantage to GetThumbnailImage is use of embedded thumbnails. It is generally not good practice to dispose of a parameter so it may warrant a different pattern (returning an image and letting the calling code call image.Save(filename) at its own discretion isn't that terrible), but if you intend to leave it this way you should definitely comment it. Refer to this post for information about loading images without locking files. The overloads that receive a file path instead of an Image object should wrap their loaded Image files in a using block (or try/finally+dispose) like so: public static void ResizeImageAndSave(string imageLocation, int newWidth, int maxHeight, bool onlyResizeIfWider, string thumbnailSaveAs)
{
    Image thumbnail = null;

    try
    {
        using (Image loadedImage = Image.FromFile(imageLocation)) 
        {
            thumbnail = resizeImage(loadedImage, newWidth, maxHeight, onlyResizeIfWider);
        }
        saveImageToLocation(thumbnail, thumbnailSaveAs);
    }
    finally
    {
        if (thumbnail != null) thumbnail.Dispose();
    }
} Hope this helps :)"
554,"A thing to try: case statement case tax_ref
when a then execution1
when b then execution2
end http://www.tutorialspoint.com/ruby/ruby_if_else.htm"
555,"Non-standard interface to standard function The obvious criticism of that implementation is that it has a different interface from what the C standard requires: 7.20.4.1 The abort function Synopsis #include <stdlib.h>
void abort(void); Description The abort function causes abnormal program termination to occur, unless the signal SIGABRT is being caught and the signal handler does not return. Whether open streams
  with unwritten buffered data are flushed, open streams are closed, or temporary files are
  removed is implementation-defined. An implementation-defined form of the status
  unsuccessful termination is returned to the host environment by means of the function
  call raise(SIGABRT) . Returns The abort function does not return to its caller. Unreliable implementation of 'crash' There were systems, notoriously the DEC VAX, where accessing the memory at address 0 did not cause problems (until the programs that were written on the VAX were ported to other platforms that did abort). Dereferencing a null pointer is undefined behaviour - that means anything could happen, including 'no crash'. Nitpicks in implementation If, for some reason, fprintf() returns 0, your program will not abort.  For example: abort(""""); does not abort.  It is also dangerous to use the string as the format string; you should use: #define abort(msg) (fprintf(stderr, ""%s\n"", msg) && *((char*)0)) It would be better to use a comma operator in place of the && : #define abort(msg) (fprintf(stderr, ""%s\n"", msg), raise(SIGABRT)) Since the standard library could have defined a macro abort() , you should #undef it before defining it yourself."
556,"I'd recommend changing this: int len;
int slength = (int)s.length() + 1;
len = WideCharToMultiByte(CP_ACP, 0, s.c_str(), slength, 0, 0, 0, 0); ...to this: int slength = (int)s.length() + 1;
int len = WideCharToMultiByte(CP_ACP, 0, s.c_str(), slength, 0, 0, 0, 0); Slightly more concise, len 's scope is reduced, and you don't have an uninitialised variable floating round (ok, just for one line) as a trap for the unwary."
557,"I think using GetDouble to generate the other random numbers can create performance problems when the user needs efficient random numbers. Since GetBytes should return a uniform distribution anyway, cant you bypass using floating-point numbers? See e.g. Javas Random.nextInt implementation . Something else, but this may be unnecessary and YAGNI for you: have you considered decoupling the RNG from the probability density function? At the moment your RNG directly supports generating uniformly distributed numbers from within a given range but it supports no other distributions. This could be off-loaded into a separate Distribution class. For reference, Boost.Random does just that."
558,"Sudoku Grid special purpose Iterators. Please have a look at these iterators which I use for my Sudoku solver. They behave slightly different from STL iterators and don't implement all functionality that would be needed to use them in a stl context. But the basic idea behind them was to clean up the code in the Sudoku program that makes heavy use of the three access patterns (row, col, block) that I implemented. The most ""important"" iterator is the BlockIterator, since without that iterating over all nine fields in a block looked quite ugly. Iterating rows and columns wasn't that bad, but since I started writing the stuff I decided to create a complete set. Some technical details: The grid class holds an (evil) array of pointers to Field objects, that's one dimensional (I could have used a two dimensional array as well, but I often do it this way and feel quite comfortable with modulo operations). Maybe I will replace this with a vector later. The grid class adds a few static functions to calculate offsets in the array based on row, col or block positions. class Grid {
public:
    Grid();
    Grid(std::string s);

    class Iterator {
    public:
        Iterator(Grid* g) : grid(g), it(0){}
        Field* operator*(){return field;}
        void operator++(){
            ++it;
            if(it < 9) field = calc_field();
            else field = NULL;
        }
    protected:
        virtual Field* calc_field() = 0;
        Field* field;
        Grid* grid;
        int it;
    };

    class RowIterator : public Iterator {
    public:
        RowIterator(Grid* g, int row) : Iterator(g){
            row_offset = row * size; //Grid::block_offset(block);
            field = calc_field();
        }
        Field* calc_field(){
            int field_index = row_offset + it;
            return grid->field[field_index];
        }
    protected:
        int row_offset;
    };

    class ColIterator : public Iterator {
    public:
        ColIterator(Grid* g, int col) : Iterator(g){
            col_offset = col;
            field = calc_field();
        }
        Field* calc_field(){
            int field_index = it * size + col_offset;
            return grid->field[field_index];
        }
    protected:
        int col_offset;
    };

    class BlockIterator : public Iterator {
    public:
        BlockIterator(Grid* g, int block) : Iterator(g){
            block_offset = Grid::block_offset(block);
            field = calc_field();
        }
        Field* calc_field(){
            int field_index = block_offset + ((it / 3) * size) + (it % 3);
            return grid->field[field_index];
        }
    protected:
        int block_offset;
    };

    RowIterator& row_iter(int row){return *(new RowIterator(this, row));}
    ColIterator& col_iter(int col){return *(new ColIterator(this, col));}
    BlockIterator& block_iter(int block){return *(new BlockIterator(this, block));}

(...)

    static int block_offset(int block){return ((block / 3) * size * 3) + ((block % 3) * 3);}

protected:
        Field* field[grid_size]; Sample usage: This function is called, when I set a value in a field. It goes through all fields, that would possibly be influenced by this field (same row, col or block) void Field::do_exclusions(){
    // row
    for(Grid::RowIterator it = grid->row_iter(row); *it; ++it)
        (*it)->set_excluded(value);
    // col
    for(Grid::ColIterator it = grid->col_iter(col); *it; ++it)
        (*it)->set_excluded(value);
    // block
    for(Grid::BlockIterator it = grid->block_iter(block); *it; ++it)
        (*it)->set_excluded(value);
} So please tell me, if something like this would be ""acceptable"" (not to mention ""best practices""), even if it somehow takes a very free view on the iterator concept. And of course every idea how this could be improved is welcome. PS: I tried to add a tag ""iterator"" but I'm not allowed for too few reputation."
559,"My criticism is you are trying to abort via a crash: *((char*)0)) This invokes undefined behavior. It does not necessarily invoke a crash (or termination). If you want to raise the abort signal do so explicitly: raise(SIGABRT) Also you are re-defing a system method using #define (I am relatively sure this is not allowed and causes undefined behavior though I can not quote chapter and verse). #define abort(msg) Also by doing this you need to search through all the source to find any current usage of abort. As this may clash with the new usage (or will the pre-processor be intelligent about it. The fact that I ask the question should make you worry let alone the answer). Why not define your own function with a slightly different name (this will also allow you to call the system abort). #define abortWithMsg(msg) do { fprintf(stderr, msg); abort(); } while (false)"
560,"In my first quick scan through, here are some things I want to bring up: If you are going to overload operators, do it the way the users of the language expect, or don't do it at all.  I expect operator++ to return something, not be a void . Does block_offset really need to be public? On that same note, do your actual concrete implementations of the iterators need to be public, since you have methods to create them that are public?  Would it make sense for anyone to ever want to create them a different way?"
561,"If you're using C# 3.0, you can use extension methods // declare as
public static Image ResizeImage(this Image source, ...

// use as 
Image myThumb = myImage.Resize(...); Treating width differently than height seems inconsistent. Never dispose passed-in arguments in a public function ( ImageToResize ). The caller almost never expects this to happen. Do dispose the temporary local variables ( loadedImage ). No other code can do it, and it could cause a memory leak."
562,"Spawning threads to process data. I have a class that spawns threads to process data. I am working on instrumentation code. When the process is started, time = System.currentTimeMillis(); When it completes, time = System.currentTimeMillis() - time; I have a method to retrieve this time: /**
 * Get the time taken for process to complete
 * 
 * @return Time this process has run if running; time it took to complete if not
 */
public long getRunTime() {
   return processRunning? System.currentTimeMillis() - time : time;
} Is this a clear use of the ternary operator? Is my javadoc comment clear?"
563,"It appears that the method sometimes returns a timestamp ( time ) and sometimes it returns a duration (difference between timestamps) (assuming that time is always a timestamp - if not, then this issue simply moves to time having a dual definition)."
564,"When working with files, checking before an operation can be  useful, but you still always need to handle relevant exceptions (e.g. FileNotFoundException , IOException ). The permissions (or existence) of a file/directory may change between the time you check and time the operation is invoked ( new FileIOPermission(...) in this case). This situation is more common than it seems."
565,"Since the method has a return value even if the code is not finished processing the first line of your javadoc ought not read ""Get the time taken for process to complete"" but perhaps rather ""Get the current or total processing time"" or something of that nature? I also agree with Bert F's comment, but if there were clear comments explaining the behavior and you don't intend on exposing start and end times individually then there's no reason to waste an extra variable; you can either keep the code as it is and add comments or optionally get rid of the boolean ""processRunning"" and instead use your completedTime/runTime variable to establish the fact that it's still running. All minor gripes, all in all."
566,I have no problem the ternary operator. But it is hard to tell that the result is what the comments is saying. Without having a context on what time is (which is a bad variable name) it is hard to understand the result of the function. time: Bad variable name. Time of what?
567,"Why can't you use the operators || and && ? im not at all literate with the syntax but you should be able to convert: <% if condition %>            
  <% if condition %>
     <% if condition %>
     <% end %>
  <% end %>
<% end %> into: <% if condition && condition && condition %>
    <% expression %>
<% end %> Looking at the docs this logical expressions are available! also removing the language identifiers you should be able to do: <%
    if condition && condition && condition
        expression
    end
%> When it comes down to the else if 's then you can increase readability by doing a switch statement: The main point is to remove the not so required <% and %> in places. http://www.ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#and"
568,"Reservoir Sampling in Clojure. I am learning clojure and decided to start out by trying to write a solution to a fairly simple algorithm, reservoir sampling.  As I stated, I am learning clojure specifically and problem solving in a functional language in general.  Can someone please take a look at my code and critique it on it's ""clojureness"".  Am I using the right idiomatic conventions, is there a way that performs better (and why), formatting, anything really. (defn sample-seq [size data]
  (loop [sample (transient (vec (take size data)))
         idx size
         data (drop size data)]
    (if (empty? data)
      (persistent! sample)
      (let [rand-num (rand-int idx)
            new-sample (if (< rand-num size) 
                         (assoc! sample rand-num (first data)) 
                         sample)]
        (recur new-sample (inc idx) (rest data))))))
(println (sample-seq 4 [2.0, 4.0, 7.0, 6.0, 3.0, 8.0, 12.0, 9.0, 4.0, 1.0]))"
569,"Binary tree encoding. I implemented a solution to this coding challenge on the Code Golf. I have decent experience with C/C++, but it's been a while since I've used them extensively. #include <math.h>
#include <stdio.h>
#include <stdlib.h>

// Prototypes
struct BTnode;
struct BTnode * bt_add_left(struct BTnode * node, int data);
struct BTnode * bt_add_right(struct BTnode * node, int data);
int             bt_depth(struct BTnode * tree);
int             bt_encode_preorder(int * list, struct BTnode * tree, int index);
struct BTnode * bt_node_create(int data);
int             bt_node_delete(struct BTnode * node);
void            bt_print_preorder(struct BTnode * tree);
int *           encode(struct BTnode * tree);
struct BTnode * decode(int * list);

// Binary tree node
struct BTnode
{
  int data;
  struct BTnode *left, *right;
};

// Add node to this node's left
struct BTnode * bt_add_left(struct BTnode * node, int data)
{
  struct BTnode * newnode = bt_node_create(data);
  node->left = newnode;
  return newnode;
}

// Add node to this node's right
struct BTnode * bt_add_right(struct BTnode * node, int data)
{
  struct BTnode * newnode = bt_node_create(data);
  node->right = newnode;
  return newnode;
}

// Determine depth of the tree
int bt_depth(struct BTnode * tree)
{
  int depth;
  int leftdepth = 0;
  int  rightdepth = 0;
  if( tree == NULL ) return 0;

  if( tree->left != NULL )
    leftdepth = bt_depth(tree->left);
  if( tree->right != NULL )
    rightdepth = bt_depth(tree->right);

  depth = leftdepth;
  if(rightdepth > leftdepth)
    depth = rightdepth;

  return depth + 1;
}

// Recursively add node values to integer list, using 0 as an unfolding sentinel
int bt_encode_preorder(int * list, struct BTnode * tree, int index)
{
  list[ index++ ] = tree->data;

  // This assumes the tree is complete (i.e., if the current node does not have
  // a left child, then it does not have a right child either)
  if( tree->left != NULL )
  {
    index = bt_encode_preorder(list, tree->left, index);
    index = bt_encode_preorder(list, tree->right, index);
  }

  // Add sentinel
  list[ index++ ] = 0;
  return index;
}

// Allocate memory for a node
struct BTnode * bt_node_create(int data)
{
  struct BTnode * newnode = (struct BTnode *) malloc(sizeof(struct BTnode));
  newnode->left = NULL;
  newnode->right = NULL;
  newnode->data = data;
  return newnode;
}

// Free node memory
int bt_node_delete(struct BTnode * node)
{
  int data;
  if(node == NULL)
    return 0;
  data = node->data;

  if(node->left != NULL)
    bt_node_delete(node->left);
  if(node->right != NULL)
    bt_node_delete(node->right);

  free(node);
  return data;
}

// Print all values from the tree in pre-order
void bt_print_preorder(struct BTnode * tree)
{
  printf(""%d "", tree->data);
  if(tree->left != NULL)
    bt_print_preorder(tree->left);
  if(tree->right != NULL)
    bt_print_preorder(tree->right);
}

// Decode binary tree structure from a list of integers
struct BTnode * decode(int * list)
{
  struct BTnode * tree;
  struct BTnode * nodestack[ list[0] ];
  int i,j;

  // Handle trivial case
  if( list == NULL ) return NULL;

  tree = bt_node_create( list[1] );
  nodestack[ 1 ] = tree;

  j = 1;
  for(i = 2; i < list[0]; i++)
  {
    if( list[i] == 0 )
    {
      //printf(""popping\n"");
      j--;
    }
    else
    {
      if( nodestack[j]->left == NULL )
      {
        //printf(""Adding %d to left of %d\n"", list[i], nodestack[j]->data);
        nodestack[ j+1 ] = bt_add_left(nodestack[j], list[i]);
        j++;
      }
      else
      {
        //printf(""Adding %d to right of %d\n"", list[i], nodestack[j]->data);
        nodestack[ j+1 ] = bt_add_right(nodestack[j], list[i]);
        j++;
      }
    }
  }

  return tree;
}

// Encode binary tree structure as a list of integers
int * encode(struct BTnode * tree)
{
  int maxnodes, depth, length;
  int * list;
  int j;

  // Handle trivial case
  if(tree == NULL) return NULL;

  // Calculate maximum number of nodes in the tree from the tree depth
  maxnodes = 1;
  depth = bt_depth(tree);
  for(j = 0; j < depth; j++)
  {
    maxnodes += pow(2, j);
  }

  // Allocate memory for the list; we need two ints for each value plus the
  // first value in the list to indicate length
  list = (int *) malloc( ((maxnodes * 2)+1) * sizeof(int));
  length = bt_encode_preorder(list, tree, 1);
  list[ 0 ] = length;
  return list;
}

int main()
{
  struct BTnode * tree;
  struct BTnode * newtree;
  int * list;
  int i;

  /* Provided example

        5
       / \
      3   2
         / \
        2   1
       / \
      9   9
  */
  tree = bt_node_create(5);
  bt_add_left(tree, 3);
  struct BTnode * temp = bt_add_right(tree, 2);
  bt_add_right(temp, 1);
  temp = bt_add_left(temp, 2);
  bt_add_left(temp, 9);
  bt_add_right(temp, 9);
  printf(""T (traversed in pre-order):  "");
  bt_print_preorder(tree);
  printf(""\n"");

  list = encode(tree);
  printf(""T (encoded as integer list): "");
  for(i = 1; i < list[0]; i++)
    printf(""%d "", list[i]);
  printf(""\n"");

  newtree = decode(list);
  printf(""T' (decoded from int list):  "");
  bt_print_preorder(newtree);
  printf(""\n\n"");


  // Free memory
  bt_node_delete(tree);
  bt_node_delete(newtree);
  free(list);
  return 0;
} How could my program be improved? I'm thinking mostly in terms of clarity/readability, maintainability, and reusability, but I also welcome any comments about my implementation of the data structures and any possible improvements in terms of performance or correctness."
571,"I only have a minute before running out the door, so here's the first thing I saw: Its good practice to set your pointers to NULL after you free them.  Just as you are testing to ensure its not set to NULL since you do that upon creation, you should do that when deleting."
572,"Getting the last date where a given week day occurred. I'm trying to learn a little bit about functional programming and as my tool I chose F# since I'm a .NET developer and the environment is more natural to me. In one of my pet projects I'm dealing with dates, so I created a function to get the last date where a given week day occurred. For example, last Tuesday was yesterday ( DateTime.Now.AddDays(-1.0) ). #light

module DateTimeExtensions
    open System    

    let rec whenWasLastBasedOnDate (weekDay:DayOfWeek, currentDate:DateTime) = 
        match currentDate with
        | _ when currentDate.DayOfWeek = weekDay -> currentDate
        | _ -> whenWasLastBasedOnDate(weekDay, currentDate.AddDays(-1.0))

    let whenWasLast (weekDay:DayOfWeek) = 
        let currentDate = DateTime.Now
        match currentDate with
        | _ when currentDate.DayOfWeek = weekDay -> currentDate
        | _ -> whenWasLastBasedOnDate(weekDay, currentDate.AddDays(-1.0))    


    let now = DateTime.Now
    let lastSunday = whenWasLast DayOfWeek.Sunday
    let lastMonday = whenWasLast DayOfWeek.Monday
    let lastTuesday = whenWasLast DayOfWeek.Tuesday
    let lastWednesday = whenWasLast DayOfWeek.Wednesday
    let lastThursday = whenWasLast DayOfWeek.Thursday
    let lastFriday = whenWasLast DayOfWeek.Friday
    let lastSaturday = whenWasLast DayOfWeek.Saturday"
573,"In int bt_depth(struct BTnode * tree) Too many different checks for NULL. You only need to check once. The call to bt_depth() on the left and right nodes will perform there own explicit checks don't try and pre optimize. int bt_depth(struct BTnode * tree)
{
  if( tree == NULL ) return 0;
  int leftdepth  = bt_depth(tree->left);
  int rightdepth = bt_depth(tree->right);

  return max(leftdepth, rightdepth) + 1;
} In int bt_encode_preorder(int * list, struct BTnode * tree, int index) You are using tree without check for NULL tree list[ index++ ] = tree->data; You are also doing a recursive call without checking. At some point you may end up hitting a NULL and trying to de-reference it. if( tree->left != NULL )
{
  index = bt_encode_preorder(list, tree->left, index);
  index = bt_encode_preorder(list, tree->right, index); // tree->right may be NULL!!!!
} In int bt_node_delete(struct BTnode * node) This is note a node delete this is a full tree delete. It should be named appropriately. In void bt_print_preorder(struct BTnode * tree) It is easier just to check if the current node is NULL. The always print left and right nodes. void bt_print_preorder(struct BTnode * tree)
{
  if (tree == NULL) return;

  printf(""%d "", tree->data);
  bt_print_preorder(tree->left);
  bt_print_preorder(tree->right);
} In encode(struct BTnode * tree) // Calculate maximum number of nodes in the tree from the tree depth
  maxnodes = 1;
  depth = bt_depth(tree);
  for(j = 0; j < depth; j++)
  {
    maxnodes += pow(2, j);
  } This is the only use of bt_depth(). Rather than do this why not just have a function called bt_count_nodes(BTnode* tree) that actual counts the nodes (bt_depth actually traverses all the nodes anyway (why not count them instead of the depth). In struct BTnode * decode(int * list) I can quite work out if this is correct without running it. This is a bad sign that the code could do with simplification."
574,"The most obvious point to make is that whenWasLast repeats the entire code of whenWasLastBasedOnDate . You can (and should) simply write the whole method by just calling whenWasLastBasedOnDate : let whenWasLast (weekDay:DayOfWeek) =
    whenWasLastBasedOnDate(weekDay, DateTime.Now) Another point is that you should write AddDays(-1.0) as AddDays -1.0 . In languages with ML-like syntax it is generally discouraged to add redundant parentheses around function arguments because it encourages the misconception that the parentheses are part of the method call syntax. On a somewhat more subjective note, I think that using if would read nicer than a match without any patterns. On a more general design note it is generally considered good style in functional programming to use higher order functions to express the code more abstractly. For example instead of saying ""Check if the given day was a weekDay . If so, return it, if not repeat with the day before"" you could say ""Look at the last seven days and return the one who is a weekDay "". This is not only more idiomatic functional programming, but also makes it impossible to get into infinite recursion by getting the exit condition wrong. In code it would look like this: [-6.0..0.0] |> Seq.map currentDate.AddDays |>
    Seq.find (fun d -> d.DayOfWeek = weekDay)"
575,"I agree with Alex that ManualResetEvent may be a little cleaner simply because you don't need to perform manual signal tracking to ensure you don't wait due to the Monitor already pulsing but, as I understand it, WaitHandle (used by ManualResetEvent ) has more overhead. It's also quite possible to use memory barriers and Application.DoEvents / Thread.Sleep in a time-limited loop to achieve a lockless solution, but none of this matters unless you have very strict resource/performance concerns. Regardless, there's always more than one way to skin a cat and your usage is indeed safe and correct. If the Connect method is running on your UI thread be sure your timeout isn't really long or windows may think your application is not responding because blocking in Monitor.Wait does not resume the window's message pumping; if you need a long timeout or it is not running on the UI thread you will need to ensure the Connect method cannot be called again before the last has finished (if this._channel.Open() returns false if it is already open that should suffice). In the case of it being on the UI thread, besides preventing double execution, you would want to switch to a small timeout in a time-limited loop that calls Application.DoEvents() . You may already be aware of these concerns but I'm having to make a lot of assumptions to review the code. While I'm at it, it's probably trivial, but you can also move you Command instantiation to just before the lock to save yourself unnecessary instance creation in some cases."
576,"I recommend three improvements, one major and two minor. The minor one first: Don't pad out with spaces to horizontally align tokens. There's nothing wrong with doing it, it'll just end up taking time to keep everything aligned, or you'll end up not bothering (because your in a hurry perhaps) and have inconsistent alignment. Secondly, typedef your structure: typedef struct BTnode_def
{
  int data;
  struct BTnode_def *left, *right;
} BTnode; so you can just use BTnode instead of struct BTnode . The major one: Don't use prototypes when you can use the function/structure itself as the prototype. You can get rid of the whole prototype section in your code. You'll need to move bt_node_create up a bit though. This will decrease maintenance time - when you change a function's parameters / return value, you only need to do it once. Oh, and I've just noticed that there appears to be a few C++ features in your code, so it's not pure C code. UPDATE I've removed the prefixed underscore (I actually don't do that normally). I'm not sure about the comment mentioning the namespace thing as C doesn't have namespaces. As for C++ features (I'm not up to date with the C specification so some of these may be in the latest spec): Single line comments are C++ Declarations at any point in the code are C++, C requires declarations to be at the start of the block, i.e. after a { . ANOTHER UPDATE This is a personal preference, but I like to put the point * next to the symbol without a white space: // Instead of this
BTNode * bt_node_create (...);
// I like
BTNode *bt_node_create (...); which, for me, makes it quicker to differentiate between multiplication and pointer dereferences: a * func ();  // an expression: a times return value of func
a *func ();   // a declaration: func returns a pointer to type a I know that the context of the above would disambiguate between the two, but that requires extra parsing by my brain of the adjacent code, and the less my brain has to do the better (it is an old brain after all and not as good as the ones these young people on here have ;-) )."
577,"I think your code is pretty readable and looks like idiomatic enough Clojure code. So from a readability standpoint your code seems fine. However performing assoc on a vector of length n takes O(log n) time, so your runtime will be in O(n log n) as opposed to O(n) , which an imperative implementation would be in. However there's not much you can do about this other than perhaps using java arrays imperatively, but that would be very unidiomatic Clojure code. And O(n log n) isn't that bad (definitely not as bad as the O(n^2) I incorrectly claimed before). (Note that my previous note about transients was wrong as assoc! on a transient vector has the same runtime complexity as on a persistent vector).  Usually you'd avoid index-based loops wherever possible, but the nature of the algorithm makes that pretty much impossible here."
578,"A couple things in addition to the suggestions made already: As @Martin said, bt_node_delete deletes a branch of the tree. I think a good term for that may be ""prune"". list = (int *) malloc( ((maxnodes * 2)+1) * sizeof(int)); list = (int *) malloc( ((maxnodes * 2) + 1) * sizeof(int) ); list = (int *) malloc(((maxnodes * 2) + 1) * sizeof(int)); I prefer #3, but #2 is more consistent with spacing in the style you gave. Place your pointer operators with the symbol it modifies: struct BTnode * decode(int * list) BTnode *decode(int *list) Personally I don't like the convention of putting spaces inside parenthesis and square brackets ( statement ). I think it is unnecessary whitespace that is harder to maintain if you need to change the statement."
579,"Although it won't fail often, especially not in toy programs, it is still a good idea to check that malloc() (and realloc() and calloc() when you use them) haven't returned a null pointer.  And, when you use realloc() , you do not assign the result to the variable passed as the first argument.  That is, do not use: ptr = realloc(ptr, newsize); Use: newptr = realloc(oldptr, newsize); An alternative that is often sufficient is to use a cover function ( emalloc() and xmalloc() are both used for the purpose) that guarantees not to return a null pointer. void *emalloc(size_t nbytes)
{
    void *ptr = malloc(nbytes);
    if (ptr == 0)
        abort();
    return(ptr);
} You can use more elegant mechanisms than abort() to report the error.
Use symmetric cover functions for realloc() , calloc() and free() ."
580,"Basic JavaScript library. My own CMS is currently using jQuery, but as one of the goals is to have the whole project to be very small, I've decided to write my own basic library.  I only really need to select elements and modify them using results from my server (via Ajax). The JavaScript-library v0.01: (Attempt 1) (function(){
    a=this.Function;
    a.prototype.extend=(function(a,b){this[a]=b;return this});
    a.prototype.implement=(function(a,b){this.prototype[a]=b;return this});
    $=(function(a,b,c){return (b?$(b)[c?c:0]:document).querySelectorAll(a)})
    .extend(""post"",(function(a,b){
        c=[];
        for(x in a)
            c[c.length]=[x,a[x]].join(""="");
        d=XMLHttpRequest?new XMLHttpRequest():new ActiveXObject(""Microsoft.XMLHTTP"");
        d.open(""POST"",""./"",true);
        d.setRequestHeader(""Content-type"",""application/x-www-form-urlencoded"");
        d.onreadystatechange=b;
        d.send(c.join(""&""));
        return this;
    }))
    .extend(""each"",(function(a,b,c){
        for(x in a)
            if(a.hasOwnProperty(x))
                b.call(c, a[x], x, a);
        return this;
    }));
})(); I know that querySelectorAll can't be relied on, but it is just good for the start of this. The JavaScript-library v0.02: (Attempt 2) I believe this is much improved.  It has reasonable variable names, works better, and most of all is quite buggy. var _    = new function Sample(){};  ////////////////////////////////////////
    _.temp  = {};                    // This Object is intended just for
    _.pages = {};                    // testing, I do the rest in the console
    _.pid   = {};                    // <- Stores the current pageID
    _.el    = {};                    // /PAGE-ID/PAGE-TITLE or #!page=PAGE-ID
    _.fn    = {};                    ////////////////////////////////////////
    _.$    = {};                     // <- Lets leave JQuery alown. :)
(function(){
    this.$ = function(a,b,c){
        if(b&&b.isType(""string""))   b = $(b);
        d=b?b[c|0]:document;
        return document.getElementsByClassName.call(d,a);
    };
    var $FP = Function.prototype, $OP = Object.prototype;
    $OP.isType = function (type){
        return typeof this === type;
    }
    $OP.each   = function(fun){ // `fun()` runs 3 times HOW??
        if(this.isType(""array"")&&this.forEach) return this.forEach(a); // if this is an array and we have a browser with Array().forEach then lets use native code instead.
        if(this.isType(""object"")||this.isType(""array""))
            for(var x in this)
                if(this.hasOwnProperty(x))
                    fun.call(this[x],x,this);
        return this;
    };
    $OP.toString    = function(){
        if(!this.isType(""object"")&&!this.isType(""array"")) return this;
        var arr=[];
        this.each(function(a){
            arr[arr.length] = a+""=""+this;
        });
        return arr.join(""&"");
    }
    $FP.multiInput = $FP.MI   = function(){
        var self = this;
        return function(obj){
            if(obj.isType(""object"")||obj.isType(""array""))
                obj.each(function(a,b){
                    self.call(b,a,this);
                });
            else
                self.apply(this,arguments);
            return this;
        };
    };
    $OP.extend = function(key,val){ // I want to add all my functions dynamicly and in bulk.
        (this.prototype||this)[key]=val; // Either myObject.extend(""key"",""val"") or my Object.extend({""key"":""val""}) work.
        return this;
    }.MI(); // MI/multiInput simply allows objects to be passed instead of making it more sence to use obj.prototype.test=myvalue;
    this.$.extend({
        ""post"": function(a,b,c,d){
            var e=XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(""Microsoft.XMLHTTP"");
        e.open(""post"", a, true);
            e.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            e.onreadstatechange = function(){
                if(xmlhttp.readyState==4) // Page has fully loaded, now did we get a status code of ""200 ok"" or an error? Please tell me if ""304 Not modified"" should be added as run `c` and not `d`
                    (xmlhttp.status==200?c:d).call(xmlhttp.responseText,xmlhttp);
            };
            e.send(b.toString());
            return this;
        },
        ""post_json"": function(a,b,c){
            return this.post(a,b,function(){
                c.call(""return ""+$.Function(this)()); // This should run c with this being the object. What works better `()` or `.call()` ?? 
            });
        }
    });
}).call(_); // Lets Leave JQuery alown.

_.$.prototype.each(function(){console.log(this)});"
581,"Just rough idea. Not tested. // TODO: throw exception if turnRate is negative
// TODO: throw exception if abs(turnRate) exceeds some maximum value.
const float FUL_CIRCLE = 360; // or (2 * Math.PI) for radian
float difference = Math.IEEEremainder(requiredHeading - initialHaeding, FUL_CIRCLE);
float absTurnRate = Math.abs(turnRate);
float headingChange = Math.max(-absTurnRate, Math.min(+absTurnRete, difference));
float resultantHeeding = Math.IEEEremainder(initialHeading + headingChange, FUL_CIRCLE);
return resultantHeeding; if your platform does not provide Math.IEEEremainder, use the following: double GetRemainder(double dividend, double divisor) {
    return dividend - divisor * Math.round(dividend / divisor);
} or double GetRemainder(double dividend, double divisor) {
    return dividend - divisor * Math.floor(dividend / divisor + 0.5);
}"
582,"Handling COM exceptions / busy codes. This code writes to Excel using the COM interface. The general issue is that any exception handling has to handle the ""Excel is busy"" exception. This occurs if information is sent to Excel quicker than it can handle it - eg. latency when a workbook is loaded/created, or the user is playing with the scrollbars (there are good reasons for letting this happen). This is probably the only example I know of which is simpler and cleaner in VB6 than in C#! In VB6 an ON ERROR would be used. The error handler would then create an error for most cases. But if the error code is a ""busy"" then it will sleep a short period of time (typically half a second) and then try again with a ""RESUME"". Don't get me wrong, ON ERROR is generally messier than C#'s try...catch and it is easier to produce awful code; however, this is one example where the VB6 ON ERROR works better. A long sequence of Excel calls can be trapped with one handler. The ""RESUME"" will then send control back to the line where the 'busy' occurred - this avoids duplicate calls or skipped calls. The solution I have in C# is to create a while loop with a flag. The flag indicates a repeat of the loop is required due to a 'busy' return from Excel. See the code below. Is there a simpler, more elegant way of doing this?  The main problem is that this requires a method for each type of Excel call. To avoid too many duplicate Excel calls in the busy scenario, the contents of each method is atomic or close to atomic - eg. ""write this formatted value""; ""apply this formatting to this row"". This results in lots of methods. And/or methods with lots of parameters (the example below is a short one with just one format option, but there could be more - colors, decimal points, etc). private void WriteDoubleValue(Excel.Worksheet sh, int x, int y, double lfval, bool bBold)
{
    bool bNotSuccess = true;
    while (bNotSuccess)
    {
        try
        {
            ((Excel.Range)sh.Cells[y,x]).set_Value(Missing.Value, lfval);
            ((Excel.Range)sh.Cells[y, x]).Font.Bold = bBold;
            bNotSuccess = false;
        }

        catch (System.Runtime.InteropServices.COMException e)
        {
            if ((e.ErrorCode & 0xFFFF) == 0xC472)
            {   // Excel is busy
                Thread.Sleep(500); // Wait, and...
                bNotSuccess = true;  // ...try again
            }
            else
            {   // Re-throw!
                throw e;
            }
        }
    }
}"
583,"If I understood you correctly, you have a lot of methods which are identical to the one you've shown except for the parameters they take and the contents of the try -block. The rest is repeated code, which is bad. To fix this I'd recommend to abstract the ""repeat this action as long as Excel is busy"" logic into its own method, which takes the action to be repeated as a parameter. On a style note, I would argue against using Hungarian Notation. It's not really commonly used in .net and basically every style guide written in this century argues against it. I'd also recommend making the bool variable positive (i.e. success instead of notSuccess ). This way people don't have to perform double negation in their head when reading things like notSuccess = false (which would be changed to success = true ). With these suggestions the code could look like this: private void TryUntilSuccess(Action action)
{
    bool success = false;
    while (!success)
    {
        try
        {
            action();
            success = true;
        }

        catch (System.Runtime.InteropServices.COMException e)
        {
            if ((e.ErrorCode & 0xFFFF) == 0xC472)
            {   // Excel is busy
                Thread.Sleep(500); // Wait, and...
                success = false;  // ...try again
            }
            else
            {   // Re-throw!
                throw e;
            }
        }
    }
} You could then implement WriteDoubleValue and all the methods like it with a call to TryUntilSuccess like this: TryUntilSuccess( () =>
{
    ((Excel.Range)sh.Cells[y,x]).set_Value(Missing.Value, lfval);
    ((Excel.Range)sh.Cells[y, x]).Font.Bold = bBold;
});"
584,"I would suggest writing your code with full variable names and generating your production version with a minimizer to improve readability. As it stands this is reviewable because it's small, but I have no desire to be thorough because your variables are annoying to trace. This will also make maintenance less of a hassle. Overall it looks to accomplish the objective. Each ajax request will require manual error checking if you plan on having any fault-tolerance. If this will be used several times you may want to refactor the error checking into the base to save overall code length later."
585,"When re-throwing an exception don't specify the exception or throw a new exception with the old one as an inner exception otherwise you replace the exception stack trace with the line of the throw in the catch block which will prevent you from seeing which of the lines in the try block caused the exception. I assume you're using this in many places? I've refactored out the error check, but sepp2k's code promotes greater reusability of the pattern as a whole. Still, here's a slightly more efficient and shorter implementation of the control loop itself in case you're more comfortable with it. A hybrid of the two is probably your best bet. private void WriteDoubleValue(Excel.Worksheet sh, int x, int y, double lfval, bool bBold)
{
    bool retry = false;
    do
    {
        try
        {
            ((Excel.Range)sh.Cells[y,x]).set_Value(Missing.Value, lfval);
            ((Excel.Range)sh.Cells[y, x]).Font.Bold = bBold;
            retry = false;
        }
        catch (System.Runtime.InteropServices.COMException e)
        {
            if (retry = e.ShouldRetry())
            {   // Excel is busy
                Thread.Sleep(500); // Wait, and...
            }
            else throw; 
            //calling throw without a param *rethrows* 
            //which is important to preserve the stack trace
        }
    } while (retry);
}

private void ShouldRetry(this COMException e) {
    return ((e.ErrorCode & 0xFFFF) == 0xC472);
}"
586,"I'm not sure if this belongs as a comment here but I built my solution in clojure as well.  The Fibonacci numbers are generated as an infinite sequence as per Halloway's ""Programming in Clojure"" p. 136.  I then sum using using a list comprehension ;;Programming in Clojure p. 136

(defn fibo [] (map first (iterate (fn [[a b]] [b (+ a b)]) [0 1])))

(defn proj-euler2 [] 
  (reduce + (for [x (fibo) :when (even? x) :while (< x 4000000)] x)))"
587,"Multithreaded log test. I'm writing a logger extension that allows multiple threads to log a process, and then dump that log to the main log in one atomic operation. The point of it is to make the logs easier to read when many threads are executing. Is this test valid and clear or not? /**
 * Test that thread logs do not interlace
 * @throws InterruptedException 
 */
@Test
public void testDumpMultithreaded() throws InterruptedException {
    Thread t1 = new Thread() {
        @Override
        public void run() {
            logger.bufferedMessages.get().add(""t1: One"");
            logger.bufferedMessages.get().add(""t1: Two"");
            logger.bufferedMessages.get().add(""t1: Three"");
            logger.dump();
        }
    };

    Thread t2 = new Thread() {
        @Override
        public void run() {
            logger.bufferedMessages.get().add(""t2: One"");
            logger.bufferedMessages.get().add(""t2: Two"");
            logger.bufferedMessages.get().add(""t2: Three"");
            logger.dump();
        }
    };

    t1.start();
    t2.start();

    t1.join();
    t2.join();

    Iterator<String> i = logger.messages.iterator();
    boolean t1Correct = false;
    boolean t2Correct = false;

    while (i.hasNext()) {
        if (i.next().equals(""t1: One"")) {
            t1Correct = true;
            t2Correct &= i.next().equals(""t1: Two"");
            t2Correct &= i.next().equals(""t1: Three"");
        }
    }

    i = logger.messages.iterator();
    while (i.hasNext()) {
        if (i.next().equals(""t2: One"")) {
            t2Correct = true;
            t2Correct &= i.next().equals(""t2: Two"");
            t2Correct &= i.next().equals(""t2: Three"");
        }
    }

    assertEquals(""Thread one's log not consecutive: "", true, t1Correct);
    assertEquals(""Thread two's log not consecutive: "", true, t2Correct);
}"
588,"Rewrite it from scratch, if I were to encounter such code in any commit, I would immediately remove that code and talk with the one who committed it about JS in general... // anonymous wrapper if fine...
(function(){

    // but not using var still creates global variables
    a=this.Function; // why are you extending the builtin function constructor?

                           // no need for extra parenthesis here
                           // also, this is hardly needed.. for the code below
    a.prototype.extend=    (function(a,b){this[a]=b;return this});


    // what is this being used for?
    a.prototype.implement=(function(a,b){this.prototype[a]=b;return this});


    // overrides an existing mapping of jQuery
    $=(function(a,b,c){return (b?$(b)[c?c:0]:document).querySelectorAll(a)})

    // hard to read
    .extend(""post"",(function(a,b){

        // more leakage
        c=[];

        // if you don't use {} you might as well put it on the same line
        // Oh and I shouldn't forget my usual rant about the missing
        // hasOwnProperty call
        for(x in a) // leakage of x
            c[c.length]=[x,a[x]].join(""=""); // what about c.push() ?

        // leakage leakage leakage
        d=XMLHttpRequest?new XMLHttpRequest():new ActiveXObject(""Microsoft.XMLHTTP"");

        d.open(""POST"",""./"",true);
        d.setRequestHeader(""Content-type"",""application/x-www-form-urlencoded"");
        d.onreadystatechange=b;
        d.send(c.join(""&""));
        return this;
    }))

    .extend(""each"",(function(a,b,c){
        for(x in a) // leakage of x
            if(a.hasOwnProperty(x)) // why all of a sudden hasOwnProperty here?
                b.call(c, a[x], x, a);
        return this;
    }));
})(); EDIT An untested cleaned up version from me. (function() {
    function $(selector, parentSelector, index) {
        var element = parentSelector ? $(parentSelector)[index || 0] : document;
        return element.querySelectorAll(a);
    };

    $.extend = function(obj, props) {
        for(var i in props) {
            if (props.hasOwnProperty(i)) {
                obj[i] = props[i];
            }
        }
        return this;
    };

    $.extend($, {
        post: function(data, callback) {
            var params = [];

            for(var i in data) {
                if (data.hasOwnProperty(i)) {

                    // might need url encoding...
                    params.push([i, data[i]].join('='));
                }
            }

            // this might need for fallbacks, check the jQuery source for that
            var req;
            if (XMLHttpRequest) {
                req = new XMLHttpRequest();

            } else {
                req = new ActiveXObject(""Microsoft.XMLHTTP"");
            }

            req.open('post', '/', true);

            // is that really cross browser these days?
            req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            req.onreadstatechange = callback;
            req.send(params.join('&'));
            return this;
        },

        each: function(obj, func, that) {
            for(var i in obj) {
                if (obj.hasOwnProperty(i)) {
                    func.call(that, obj[i], obj, i);
                }
            }
            return this;
        }
    });
    window.$ = $;
})();"
589,"This code uses some poor mistakes and has a few mistakes in it. See annotated code. Recommended reading : Let's make a framework , learn from the jQuery source 1 and 2 and the jquery source (warning. Daunting!) (function () {
    // Ok so were going to extend the global Function object?
    // Don't extend native objects it really messes with other people's code
    // If you must you can either clone them or wrap around them

    // Let's not forget that a is implecitly global. We do not do this.
    // If we want a global we MAKE it global. so declare it with 
    // var a = ...
    // and use global.a or window.a = ... to set things in global scope
    // a doesn't even need to be global and if it's does its a horrible name.
    a = this.Function;
    // Were calling extend twice. Why don't we define $.post and $.each
    // seperately instead. This is a classic case of hardcore over-engineering

    // We do not extend native prototypes. This is bad, other people make 
    // assumptions of what the native prototypes are like

    // No need to wrap functions in ( ). This is only neccesary for when you
    // want to do 
    // (function() { }()) and  there are no other ""symbols"" on the line.
    // We only use ( ) because function () { }() is an invalid expression 
    // and throws an error without ( )
    a.prototype.extend = (function (a, b) {
        // why do we need a f.extend(""foo"", o) 
        // It's neater to just call f.foo = o
        // This function is redundant. 
        this[a] = b;
        // Ok it implements chaining. It's really not worth it for chaining
        // all you can chain is f.extend. 
        return this
    });
    // Dead code
    a.prototype.implement = (function (a, b) {
        // Even if its not dead again your just calling f.implement(""foo"", o)
        // instead of f.prototype.foo = o
        // this really hurts readability and feels unneccesary.
        this.prototype[a] = b;
        return this
    });
    // Woh another implecit global this is bad. Oh and let's overwrite anyone
    // who defines $ shall we. Bye jQuery, bye prototype, bye mootools. 
    // if your writing a framework then don't overwrite common names like $.
    // Dont use excuses like I will only use it. If your going to do it, 
    // then do it properly.
    $ = (function (a, b, c) {
        // I might get round to ""understanding"" this block. It's messy though
        return (b ? $(b)[c ? c : 0] : document).querySelectorAll(a)
    }).extend(""post"", (function (a, b) {
        c = [];
        for (x in a)
        c[c.length] = [x, a[x]].join(""="");
        d = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(""Microsoft.XMLHTTP"");
        d.open(""POST"", ""./"", true);
        d.setRequestHeader(""Content-type"", ""application/x-www-form-urlencoded"");
        d.onreadystatechange = b;
        d.send(c.join(""&""));
        return this;
    })).extend(""each"", (function (a, b, c) {
        for (x in a)
        if (a.hasOwnProperty(x)) b.call(c, a[x], x, a);
        return this;
    }));
})();"
590,"Nested if statements with 3 different parameters. I have a block of code below. The allDone() method at the bottom should only be run if the allCompleted == true . It should run through each of the statements to test. allCompleted : This starts as true so the below logic works right. run*.Checked : This is based on a check box in a form. This block should only run if this box is checked. cmd : This is a generic string variable stating whether another part of the code (not shown here) was run successfully. If it has run successfully this string will read ""done"". After those options, if all enabled ( run*.Checked == true ) methods have returned the cmd* string as ""done"" (everything that's checked has run successfully) then allCompleted should be true at the end so allDone() gets run. If one single enabled method returns false (there was an error somewhere or otherwise it did not return ""done"" ), then the allDone() method should not be run and the code will continue, skipping the last if (allCompleted) statement. bool allCompleted = true;

if (runPart1.Checked)
    if (cmdPart1 == ""done"")
        allCompleted = ((allCompleted)? true : false);
    else
        allCompleted = false;

if (runPart2.Checked)
    if (cmdPart2 == ""done"")
        allCompleted = ((allCompleted) ? true : false);
    else
        allCompleted = false;

if (runPart3.Checked)
    if (cmdPart3 == ""done"")
        allCompleted = ((allCompleted) ? true : false);
    else
        allCompleted = false;

if (runPart4.Checked)
    if (cmdPart4 == ""done"")
        allCompleted = ((allCompleted) ? true : false);
    else
        allCompleted = false;


if (allCompleted)
    allDone(); So if at anytime one of the enabled parts fail the code will basically just move on. As it stands this code works, I just feel like it could be written better. Is this the best way or have I got it? Something about it makes me feel awkward still. EDIT: Also, each time one of the parts completes, it runs this method, so it will run a few times being false in the end until the last one runs and all the others are ""done"" in which case it should completes and run allDone() ."
592,"allCompleted = true;
allCompleted &= (!runPart1.Checked || cmdPart1 == ""done""));
allCompleted &= (!runPart2.Checked || cmdPart2 == ""done""));
allCompleted &= (!runPart3.Checked || cmdPart3 == ""done""));
allCompleted &= (!runPart4.Checked || cmdPart4 == ""done""));

if (allCompleted) {
   allDone();
} Here's a start - without more context I'm not sure what else can be done. Will edit other ideas later. EDIT: Possible idea for you to try: interface RunPart {
   public boolean doAction();
} And for the action code: ArrayList CheckActions = new ArrayList();

if (RunPart1.Checked)
   CheckActions.add(new RunPart1());

if (RunPart2.Checked)
   CheckActions.add(new RunPart2());

if (RunPart3.Checked)
   CheckActions.add(new RunPart3());

if (RunPart4.Checked)
   CheckActions.add(new RunPart4());

foreach (RunPart runPart in CheckActions) {
   allCompleted &= part.doAction();
}

if (allCompleted) {
   allDone();
} All the RunParts need to implement the RunPart interface. This will make it a bit easier to add more actions in the future. Not sure if this is practical for you or not but here it is."
593,"Okay, here is how I would reduce the code duplication (if I am understanding the conditions correctly): Edit: Original: bool runCompleted(bool checked, string done)
{
    if( ( checked && done == ""done"" ) || !checked )
        return true;
    else
        return false;
} New version based on Jerry's feedback: bool runCompleted(bool checked, string done)
{
    return !checked || done == ""done"";
} Then in your code: if(    runCompleted(runPart1.Checked, cmdPart1 )
    && runCompleted(runpart2.Checked, cmdPart2 )
    && runCompleted(runpart3.Checked, cmdPart3 )
    && runCompleted(runpart4.Checked, cmdPart4 )
  )
    allDone();"
594,"I'm a very big noob at C# so please forgive me if this is a horrible solution, but how about using arrays? bool allCompleted = true;
String[] commands = { cmdPart1, cmdPart2, cmdPart3, cmdPart4 };
CheckBox[] checkBoxes = { runPart1, runPart2, runPart3, runPart4 };

// ensure commands.Length == checkBoxes.Length
for (int i = 0; i < checkBoxes.Length; i++)
    if (checkBoxes[i].Checked && commands[i] != ""done"")
        allCompleted = false;"
595,"Others are giving you refactoring ideas, so I will just focus on one statement in your original code that is repeated 4 times. allCompleted = ((allCompleted) ? true : false); Look at this. You are inspecting allCompleted . If the value is true,  you're setting it to true. If it is not true, you're setting it to false. You are setting it to what it already is in a sort of non-intuitive way. You could very well rewrite it as the below and have the exact same meaning. allCompleted = allCompleted ? allCompleted : allCompleted; Simplify that to allCompleted = allCompleted; And then simplify that to leaving it out altogether. if(runPart1.Checked)
   if (cmdPart1 != ""done"")
      allCompleted = false; Code can be complicated enough as it is. Try not to add further complexity by including code that can be non-obvious in the fact that it does nothing at all!"
596,"This seems to be a lot of code to say the same as this: [AjaxOnly]
[Authorize]
public ActionResult Details(int id)
{
    User userToGet = _session.Get<User>(id);

    if (userToGet == null)
    {
        return PartialView(""Partials/UserNotFound"");
    }

    DetailsUserViewModel userToViewModel = Mapper.Map<User, DetailsUserViewModel>(userToGet);

    return PartialView(""Partials/Details"", userToViewModel);
} What problem are you trying to solve here? (or am I missing something?)"
597,"Autodetecting monitors in XFCE. I got sick of manually xrandering things on my computers (especially since I always just sequence monitors from left to right and set each at the highest resolution) so I wrote this: #!/usr/bin/ruby

def xrandrPairs (xList)
## Takes a split list of xrandr output and returns [[<display name>, <max-resolution>], ...]
  pairs = [[matchDisplay(xList[0]), matchOption(xList[1])]]
  (2..xList.length-1).to_a.each do |i| # kind of hacky, but I need to reference car and cadr here, so a call to .map won't do it
    if xList[i] =~ /^\S/ 
      pairs.push([matchDisplay(xList[i]), matchOption(xList[i+1])]) 
    end
  end
  pairs
end

def matchDisplay (dispString)
## Matches a display name
  dispString.match(/^([^\s]*)/)[1]
end

def matchOption (optString)
## Matches a resolution string (since they have whitespace preceding them)
  optString.match(/^\s*([^\s]*)/)[1]
end

def xrandrString (xPairs)
## Takes [[<display name>, <max-resolution>] ...] and returns an xrandr command string
  s = ""xrandr --output #{xPairs[0][0]} --mode #{xPairs[0][1]}""
  if xPairs.length >= 2
    (1..xPairs.length-1).to_a.each do |i| # same as above
      s += "" --output #{xPairs[i][0]} --mode #{xPairs[i][1]} --right-of #{xPairs[i-1][0]}""
    end
  end
  s
end

exec xrandrString(xrandrPairs(`xrandr`.split(""\n"")[1..-1])) The key is that each computer I use has different displays (they're named differently and they have different maximum resolutions), so as far as I know, I have to either parse xrandr output or write a different script for each machine. I don't care that it's inefficient (traversing the xrandr output multiple times and doing some looped string formatting) because it only runs once at startup time, and deals with a list of 30 elements at the outside. I'm using Ruby 1.8.7 straight out of the Squeeze repos for ease of installation (this is also why I wouldn't mind being shown how this works in Python/Perl; those come with the system). Can I get some comments on it?"
598,"First of all, the convention in ruby is to use snake_case , not camelCase for variable and method names. It's generally a good idea to adhere to a language's naming conventions - if only so that the code looks consistent when you're calling standard library methods as well as your own. In your xrandrPairs method, you mention that you're using an index to iterate because you have to go through the array in pairs. You can avoid this by using each_cons(2) which will yield each item together with the item after it (e.g. [1,2,3].each_cons(2) will yield 1,2 in the first iteration and 2,3 in the second). However there's a better way to do this then to iterate through the lines. You can use scan to find all the lines that start without spaces and extract the information you want in one go: def xrandr_pairs (xrandr_output)
## Returns [[<display name>, <max-resolution>] ...]
  display_re = /^(\S+)/
  option_re = /^\s+(\S+)/
  xrandr_output.scan(/#{display_re}.*\n#{option_re}/)
end Since scan returns an array containing one subarray per match where each item in the subarray corresponds to one capturing group in the regex, this will produce the output you want. Note that xrandr_pairs now takes xrandr 's output as a string, not an array of lines. In addition to using scan I also changed the regexen a bit: I replaced [^\s] with \S , which is equivalent but shorter, and used + instead of * , so it does not match empty strings. The xrandr_string method can also be rewritten to be much nicer by using the each_cons method like this: def xrandr_string (x_pairs)
## Takes [[<display name>, <max-resolution>] ...] and returns an xrandr command string
  s = ""xrandr --output #{x_pairs[0][0]} --mode #{x_pairs[0][1]}""
  x_pairs.each_cons(2) do |(previous_output, previous_mode), (output, mode)|
      s += "" --output #{output} --mode #{mode} --right-of #{previous_output}""
    end
  end
  s
end You don't need to check that the size is at least 2 because each_cons simply doesn't do anything if the array is smaller than the given chunk-size. I also used the destructuring bind of block arguments to assign the elements of the subarrays to variables directly. Instead of building up the string imperatively you could also use map and join like this: def xrandr_string (x_pairs)
## Takes [[<display name>, <max-resolution>] ...] and returns an xrandr command string
  cmd = ""xrandr --output #{x_pairs[0][0]} --mode #{x_pairs[0][1]}""
  args = x_pairs.each_cons(2).map do |(previous_output, previous_mode), (output, mode)|
    ""--output #{output} --mode #{mode} --right-of #{previous_output}""
  end
  [cmd, *args].join("" "")
end"
600,"Just a few points that came to mind as I was reading your code. It appears to me that the main thread terminates once the NetworkChange.NetworkAddressChanged event is hooked, in which case the thread is redundant as the event will be raised by another thread anyway. MainShutdownEvent is created and 'set' but I don't see anything actually using it. NetworkChange.NetworkAddressChanged is hooked but not unhooked, it won't matter much when the appdomain is unloaded on termination but I would just feel better if it was part of the standard 'shutdown' process in OnStop() I don't like the empty UnhandledException event handler, if you are going to hook it I would suggest some form of logging. At a minimum you should use log such events to the event log via the EventLog property on ServiceBase . I'm not sure which thread will be used to rais the NetworkChange.NetworkAddressChanged , but I wouldn't rely on it being the same one as OnStop() so you should probably look at some form of locking/signaling to handle any situations where OnStop() is called while the event handler is running. It might not cause any real issues but I personally would want to play it safe. It might be interesting to temporarily add a long sleep into the event handler just to see what happens if it's busy when told to stop."
601,"Connecting to a database. I'm working on a web application that I inherited from a colleague long gone. To connect to the MySQL database I use the following classes: statement.php <?php
//class sql
//{
    class Statement
    {
        private $m_connection;

        function __construct($connection)
        {
            $this->m_connection = $connection;
        }

        function query($query)
        {
            $connection = $this->m_connection;
            $handle = $connection->getHandle();

            $result = mysql_query($query,$handle);

            if ($result === FALSE)
                throw new Exception(mysql_error());

            $instance = new Result($this);
            $instance->setHandle($result);

            return $instance;
        }
    }
//}
?> result.php <?php
//class sql
//{
    class Result
    {
        private $m_handle;
        private $m_statement;

        function __construct($statement)
        {
            $this->m_statement = $statement;
        }

        function setHandle($handle)
        {   
            $this->m_handle = $handle;
        }

        function fetch()
        {
            $handle = $this->m_handle;          
            $row = mysql_fetch_array($handle);

            return $row;
        }
    }
//}
?> connection.php <?php
include_once(""statement.php"");
include_once(""result.php"");

//class sql
//{
    class Connection
    {
        private $m_handle;

        function __construct($server,$username,$password)
        {
            $handle = mysql_connect($server,$username,$password);
            $this->m_handle = $handle;
        }

        function __destruct()
        {
            $handle = $this->m_handle;
            @mysql_close($handle);
        }

        function createStatement()
        {
            return new Statement($this);
        }

        function getHandle()
        {
            return $this->m_handle;
        }
    }
//}
?> named.php <?php
include_once(""connection.php"");

function createNamedConnection($name)
{
    if ($name == ""dbalias1"")
    {
        $connection = new Connection(""first.host.com"",""user"",""uspw"");

        $statement = $connection->createStatement();
        $statement->query(""USE db1"");

        return $connection;
    }   
    if ($name == ""dbalias2"")
    {
        $connection = new Connection(""second.host.com"",""user2"",""nouse"");

        $statement = $connection->createStatement();
        $statement->query(""USE db2"");

        return $connection;
    }

    return null;
}
?> To have a connection I can use the following script: $connection = createNamedConnection(""dbalias1"");
$statement = $connection->createStatement();
$query = ""SELECT   *
          FROM     tContent c
          WHERE    c.cID > 100"";
$result = $statement->query($query);
while(($row = $result->fetch()) !== FALSE){
    //do something
} The problem is that those classes caused me a lot of trouble, and I'm sure there is work to be done on them. I don't know where to begin to make those classes more secure and easy to use."
602,"Database class using PDO. The point of this question I'm actually using it while developing a simple application and it seems to cover all my needs. Also it uses PDO so that we don't really have to worry about SQL Injection. I know I usually code strange, but I hope you could give me suggestions and feedback in order to improve it. Code: Database Class /* Operate on the database using our super-safe PDO system */
class db
{
    /* PDO istance */
    private $db = NULL;
    /* Number of the errors occurred */
    private $errorNO = 0;

    /* Connect to the database, no db? no party */
    public function __construct()
    {
        try
        {
            $this->db = new PDO(
                'mysql:dbname='.reg::get('db-name').';host='.reg::get('db-host'), reg::get('db-username'), reg::get('db-password')
            );
        }
        catch (Exception $e) 
        {
            exit('App shoutdown');
        }
    }

    /* Have you seen any errors recently? */
    public function getErrors() { return ($this->errorNO > 0) ? $this->errorNO : false; }

    /* Perform a full-control query */
    public function smartQuery($array)
    {
        # Managing passed vars
        $sql = $array['sql'];
        $par = (isset($array['par'])) ? $array['par'] : array();
        $ret = (isset($array['ret'])) ? $array['ret'] : 'res';

        # Executing our query
        $obj = $this->db->prepare($sql);
        $result = $obj->execute($par);

            # Error occurred...
            if (!$result) { ++$this->errorNO; }

        # What do you want me to return?
        switch ($ret)
        {
            case 'obj':
            case 'object':
                return $obj;
            break;

            case 'ass':
            case 'assoc':
            case 'fetch-assoc':
                return $obj->fetch(PDO::FETCH_ASSOC);
            break;

            case 'all':
            case 'fetch-all':
                return $obj->fetchAll();
            break;

            case 'res':
            case 'result':
                return $result;
            break;

            default:
                return $result;
            break;
        }
    }

    /* Get PDO istance to use it outside this class */
    public function getPdo() { return $this->db; }

    /* Disconnect from the database */
    public function __destruct() { $this->db = NULL; }
} Use $db = new db;
$user = $db->smartQuery(array(
    'sql' => ""SELECT UserName FROM `post` WHERE UserUID = :uid"",
    'par' => array('uid' => $uid),
    'ret' => 'fetch-assoc'
));
echo $user['Username']; What I think is wrong Well, I have encountered these 2 points while revisiting this code, and I'd like to get some feedback about them particularly: The error system (which, let's face it, sucks right now) The first try-catch code, which is actually working, but I never use that so, please, look at it. Also if my application cannot connect to the database, most (if not all) features cannot be activated (such-as the PHP error log trough a database record, so that every times an error occurred, the admin is warned trough the application itself)."
604,"""Hello, world!"" program using a class for printing. Please take a look at my program and let me know how I can improve it. /*
""   To Print A Line On The Display Screen""
    Date:5th January 2011
    Programmer:Fahad
*/
#include <iostream>
using namespace std;
class Print
{
    public:
        void print_();
};
int main()
{
    Print Obj;
    Obj.print_();
    system( ""pause"" );
    return 0;
}
void Print::print_()
{
    cout << ""I am in print function and the program runs fine."" << endl;
}"
605,"Not sure what you mean by coding style. If you're talking about spacing and such, here are changes I would make. Note that these are entirely subjective and people are probably going to disagree with me. Don't indent the public: specifier in the class -- leave it flush with the curly braces that mark the class definition. The reason for this is the implicit private region in the class. Example code: class Example
{
    int a; //Shouldn't this line
    public:
        void MyFunc(); //Indent to the same place this one does?
};


class Ahhhhh
{
    int a;  //Ahhh.. we match now :)
public:
    void MyFunc();
}; For that matter this class has no private members so I would just change class to struct and remove the access specifier entirely. I would remove using namespace std; and explicitly qualify those members which are in std . Would really stink to get a nasty error message from the compiler because you happened to define a function called copy (which might conflict with std::copy ). system(""pause""); should be std::cin.get(); If you're talking about ""design"", it seems overengineered to me. No reason to involve objects in a program like this at all. Just sticking the print statement in main would suffice."
606,"In addition to what Billy said, I find Obj.print_() to look strange in C++ code.  I would have just made the method name print() ."
607,"In addition to the other comments, I would also use a different naming convention for types and objects. For example, this looks unconventional. Print Obj;
Obj.print_(); I prefer: Print obj;
obj.print(); It's just a convention but being able to easily spot names that denote types helps if you start to use more complex expressions. For example: Print().print(); Personally, I would also avoid system(""pause"") . You need to #include either <stdlib.h> or <cstdlib> to use it. Although the system call itself is standard C++ (from the standard C library), what you pass to it is system dependent. In general I don't believe you should make your programs stop artificially. If they are designed to run in a terminal then the terminal user will be able to see the output even after the program exits."
608,"I prefer seeing class names that are nouns and method names that are verbs. Print might read better as Printer , ObjectPrinter or WhateverPrinter . I've seen the _ suffix (or a m_ prefix) to denote members quite a bit but I've never found it useful to attach this sort of decoration to a name."
610,"Under the circumstances, a using directive seems highly suspect. While there are times/places that it's useful, this doesn't seem (to me) to be one of them. The name of a typical class should also be a noun, not a verb. A verb signals that what you have is a single action, which is not a good candidate for a normal class. If it's going to be a class at all, it should probably be a functor. I'd also add a parameter (with a default value) so it would be easy to use a stream other than std::cout when/if necessary: struct Print { 
    std::ostream &operator()(std::ostream &os = std::cout) { 
        return os << ""whatever\n"";
    }
}; Using system(""pause""); is also quite non-portable. If you want to wait for the user to press a key before ending the program, it's generally better to build that into your own code: void pause() { 
    std::cout << ""Press \""enter\"" when ready.\n"";
    getchar();
}

int main() { 
    Print()();
    pause();
    return 0;
} Frankly, even using the functor strikes me as silly in this case though -- you're taking something simple (print out a string) and making it much more complex without getting anything in return. Given how little the program does, the Print class accomplishes nothing useful or positive at all."
611,"How to reduce this archive detection function and make it supports wildcards. The function below is called to determine if a given file is the archive of another file. I'm also looking for a way to supports wildcards. For example if the original log file is serverw3c.log and we type serverw3c*.log, it returns true for the following: serverw3c.log.2011-02-04 serverw3c.log serverw3c.log.20110204_120132 serverw3c_20110204.log The code: /// <summary>
/// Check if a given file is an archive of an original file.
/// The check is performed on the names of the files only.
/// </summary>
/// <param name=""originalFile"">The original file.</param>
/// <param name=""archivedFile"">The file which is supposed to be an archive of the original one.</param>
/// <returns>True if the file is an archive, False otherwise.</returns>
public bool IsArchive(string originalFile, string archivedFile)
{
    // We assume that an archived file has the name of the original 
    // concatenated with a timestamp '.YYYYMMDD_HHMMSS'
    Regex exp = new Regex(string.Concat(originalFile, ""."", ""[0-9][0-9][0-9][0-9][0-1][0-9][0-9][0-9]_[0-2][0-9][0-5][0-9][0-5][0-9]""));
    if (exp.IsMatch(archivedFile))
        return true;

    exp = new Regex(string.Concat(Path.GetFileNameWithoutExtension(originalFile), ""_"", ""[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]"", Path.GetExtension("".log"")));
    if (exp.IsMatch(archivedFile))
        return true;

    exp = new Regex(string.Concat(Path.GetFileNameWithoutExtension(originalFile), ""_"", ""[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]"", ""_"", ""[0-9][0-9][0-9]"", Path.GetExtension("".log"")));
    if (exp.IsMatch(archivedFile))
        return true;

    exp = new Regex(string.Concat(originalFile, ""."", ""[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]""));
    if (exp.IsMatch(archivedFile))
        return true;

    return false;
}"
612,"Your regex can be shortened using {x} , which repeat a pattern x times. So your third regex would become: exp = new Regex(string.Concat(Path.GetFileNameWithoutExtension(originalFile),
                              ""_[0-9]{8}_[0-9]{3}"",
                              Path.GetExtension("".log""))); As far as wildcards, if you use * it will be entered into the regex. It looks from MSDN that it won't be removed from the file name when you call GetFileNameWithoutExtension() . However, I was unable to test this as I don't have Visual Studio on my computer. It worked as a wildcard on my regex tests."
613,"The one thing that is not C++ like for me is this: Obj.print_(); This tightly couples the print method to a particular output method. It would be better to allow the user of your object to define what the output method is: std::cout << Obj << ""\n""; Which means you need to define an output operator for you object: std::ostream& operator<<(std::ostream& str, Print const& data)
{
    // STUFF
    return str;
} Though not technically wrong. I am not a fan of underscore at the ends of identifiers: print_() Looks wierd to me. But this is a style thing. See you local coding conventions for rules. If you had put it on the front I would have been a lot more complainey about it. System is hard to use cross platform. Especially when you do system(""pause""). system( ""pause"" ); I prefer the platform neutral: std::cout << ""Hit Enter to continue\n"";
std::cin.clear();
char plop;
std::cin >> plop;  // cin is buffered. So nothing is sent until you hit enter."
614,"A barrier can ensure the threads execute in an interleaved fashion. final CyclicBarrier rendezvous = new CyclicBarrier(2);
final CyclicBarrier conclusion = new CyclicBarrier(3);
Thread a = new Thread() {
    public void run() {
         try {
             rendezvous.await();
             // do your stuff
             // do your stuff
             rendezvous.await(); // if you want to be extra sure the ops are interleaved
             // do your stuff
         } catch (...) {}
         finally { conclusion.await(); }
    }
};

Thread b = new Thread() {
    public void run() {
         try {
             rendezvous.await();
             // do your other stuff
             // do your other stuff
             rendezvous.await(); // if you want to be extra sure the ops are interleaved
             // do your other stuff
         } catch (...) {}
         finally { conclusion.await(); }
    }
};

a.start();
b.start();
conclusion.await(); assertTrue instead of assertEquals(.., true, ..). cut and paste error has you modifying t2Correct instead of t1Correct"
615,"Performance testing functions for wrapping an index. After asking this question , I decided to write a test and determine the fastest way to wrap an index (where my maxSize is always a power of 2). There are 3 functions that I'm comparing: // plain wrap
public static int WrapIndex(int index, int endIndex, int maxSize)
{
    return (endIndex + index) > maxSize ? (endIndex + index) - maxSize : endIndex + index;
}

// wrap using mod
public static int WrapIndexMod(int index, int endIndex, int maxSize)
{
    return (endIndex + index) % maxSize;
}

// wrap my masking out the top bits
public static int WrapIndexMask(int index, int endIndex, int maxSize)
{
    return (endIndex + index) & (maxSize - 1);
} Here is my test: public static void WrapTest(int numRuns = 10000)
{
    int index = 256;
    int endIndex = 0;
    int maxSize = 4096;

    long wrapPlain = 0;
    long wrapMod = 0;
    long wrapMask = 0;

    Stopwatch sw = new Stopwatch();

    for (int i = 0; i < numRuns; i++)
    {

        // plain
        sw.Start();
        for (int j = 0; j < numRuns; j++)
        {
            WrapIndex(index, endIndex, maxSize);
        }
        sw.Stop();
        wrapPlain += sw.ElapsedTicks;
        sw.Reset();

        // mod
        sw.Start();
        for (int j = 0; j < numRuns; j++)
        {
            WrapIndexMod(index, endIndex, maxSize);
        }
        sw.Stop();
        wrapMod += sw.ElapsedTicks;
        sw.Reset();

        // mask
        sw.Start();
        for (int j = 0; j < numRuns; j++)
        {
            WrapIndexMask(index, endIndex, maxSize);
        }
        sw.Stop();
        wrapMask += sw.ElapsedTicks;
        sw.Reset();

        // change indexes
        endIndex++;
        endIndex = endIndex % maxSize;

        index++;
        index = index % maxSize;
    }
    Console.WriteLine(String.Format(""Plain: {0} Mod: {1} Mask: {2}"", wrapPlain / numRuns, wrapMod / numRuns, wrapMask / numRuns));
} I ran the test and I'm consistently getting the following results (in ticks): Plain: 25 Mod: 16 Mask: 16 (maxSize = 512)
Plain: 25 Mod: 17 Mask: 17 (maxSize = 1024)
Plain: 25 Mod: 17 Mask: 17 (maxSize = 4096) I was expecting that the mask will be faster than all of them, but it seems to be as fast as using the modulo operator. I've also tried increasing the numRuns , but the results are consistent. Is my test valid? Is there a better way to test the performance?"
616,"Your results do seem odd, so I tried to rewrite your test and see if I can get different results.  I suspected that you might be starting and stopping the stopwatch too frequently, which can skew your results due to the loss of precision every time you start and stop.  In my code, I only start and stop the stopwatch once per type of calculation. Using the code below, I get results more in line with what you would expect, namely that masking is the fastest, followed by plain subtraction, followed by modulo division. Here is a typical output from one of my test runs: Plain: 59.7033
Mod: 64.6872
Mask: 58.1923 In various runs, Plain and Mask tend to vary with respect to each other, and sometimes show very similar numbers.  Mod always tends to be slower. And here is the code: static void Main(string[] args)
{
    TestPerf(WrapIndex, ""Plain"");
    TestPerf(WrapIndexMod, ""Mod"");
    TestPerf(WrapIndexMask, ""Mask"");
}

public static void TestPerf(Func<int, int, int, int> getIndex, string label, int numRuns = 10000)
{
    int maxSize = 4096;

    Stopwatch sw = new Stopwatch();
    sw.Start();

    for (int i = 0; i < numRuns; i++)
    {
        for (int index = 0; index < maxSize; index++)
        {
            getIndex(index, 1234, maxSize);
        }
    }

    sw.Stop();
    Console.WriteLine(string.Format(""{0}: {1}"", label, ((double)sw.ElapsedTicks) / numRuns));
} EDIT: Also notice that I cast ElapsedTicks to double before dividing to avoid rounding.  You should be careful to avoid rounding in your calculations because that just adds noise to your final result. EDIT 2: I played around with the code snippet in your pastie link and I was originally getting the same results as you, but I think I've finally gotten to the bottom of it. What's happening is that without that Func wrapper, the jitter is able to do some serious optimizing.  I know it's the jitter and not the C# compiler, because all of the code is intact in the ildasm output.  In fact, for 2 out of your 3 methods (mod and mask), it's able to deduce that the methods aren't accomplishing anything at all (because they're doing a simple calculation, and the return value is just discarded), so it doesn't even bother calling them. To validate that statement, simply comment out the line in WrapIndex() and return a plain 0, which is sure to get optimized out.  Run your program again and you'll see that all three methods now report the same times.  There's no way that doing a mod or a mask has the same cost as returning a constant 0, so that tells you that the code just isn't being executed. This is another issue you have to be aware of when doing perf tests.  If your test is too simple, the optimizer will just discard all of your code. In my test, the Func wrapper was preventing the jitter from optimizing as much, because it doesn't know which code is going to be executed, so it can't inline and then discard the code, which is why you get more reasonable numbers. So I think the results from my code, using the Func delegate, give a more accurate reflection of the relative costs of your three index methods."
617,"Making sure all elements are processed in a JQuery call. I have a piece code similar to below: But I keep having this nagging feeling that there has to be an easier way!
Any ideas? var synch = false
var indexArray = new Array();
var rowCount = theTable.find('tr').length;
$("".views"").each(function(index) {
    indexArray.push( $(this).val()); // Not the real code but something to this effect
    if (rowCount <= (index+1)) synch = true;
});
while (!synch);
DO something with indexArray....."
618,"There is absolutely no need for the synch part - JavaScript is synchronous , and you should not get into a situation where the processing of that function (the one you're showing) will not be completed before the next line runs. (By the way, that function you have there can be rewritten for greater efficiency) var indexArray = $('.views').map(function(){
    return this.value;
}).get(); Let's assume that you are doing something async in that each loop, for instance, ajax calls. Your best bet is to keep a count of how many of the calls are completed in the callback function, then execute the rest of your code when the last callback function is called: var views = $('.views'), 
    completed = 0,
    total = views.length;

views.each(function(){
    someAsyncFunction (function(){
        // Process data
        if(++completed === total) {
            // We're done! Let's move on..
        }
    });
}); This can be abstracted away into another function, though doing that is left as an exercise for the reader."
619,"I would recommend to look at Exception Handling in your code - there is nothing except for empty CurrentDomainExceptionHandler. However it's very crucial for such services to have a clear exception hierarchy and handling policy. There should be at least 2 types: Non-recoverable errors - if service couldn't start because of invalid configuration etc Recoverable errors - if you couldn't pong ""secret.domain"" because it's unavailable then should you proceed? How to deal with timeout exceptions? Should there be a queue with unproceeded requests or should they immediately be discarded? Should  the size of the queue be configurable if you need it? If you want your service to work in 24x7 mode then you must have answers on these and few other questions about how to deal with unexpected situations. Another missing point is Configuration . Are you goint to rewrite your code and re-install service if ""secret.domain"" changes? Or if you need to increase timeout or even change display name for service? I would recommend to have a configuration file that can be re-read on every start. It would save you a lot time."
620,"Here is the wildcard alternative public bool IsArchive(string filePattern, string archivedFile)
{
    return new Regex(filePattern.Replace(""*"", ""[^ ]*"")).IsMatch(archivedFile);
}"
621,"Class for holding person's information. I have written another program in C++. Excluding the point that the class definition should be in a separate header file, is there anything that needs to be improved? /*
    Date:5th January 2011
    Programmer:Fahad
*/
#include <iostream>
#include <string>
using namespace std;
class Persons     //A class that will store the name,addresses and id numbers of the users
{
    private:
        string name_;
        string address_;
        int id_number_;

    public:
        static int count;    //This is the count of the objects created
        Persons();
        void getData(int n);
        void displayData(int n);
        ~Persons();
};

int Persons count;//initializing the static member

int main()
{
    cout << ""Enter Number Of Persons:"";
    int n;     //This is the number of objects that the user wants to make.
    cin >> n;
    Persons *ptr;    //A pointer that will be used for the dynamic memory allocation.

    /*Exception Handling*/
    ////////////////////////////////////////////////////////////////////
    try
    {
        //ptr=new [sizeof(Persons) * n];
        ptr=new Persons[n];
    }
    catch(bad_alloc xa)
    {
        cout<<""Sorry,Program Can Not Continue"";
        cin.get();
        exit(1);
    }
    /////////////////////////////////////////////////////////////////////
    for(int i = 0; i< n; i++)
    {
        ptr[i].getData(n);
    }
    for(int j = 0; j< n; j++)
    {
        ptr[j].displayData( n );
    }
    cin.get();
    delete[] ptr;
    return 0;
}


/*Function Definitions*/

Persons::Persons()
{
    name_="""";
    address_="""";
    id_number_=0;
    count++;
}
void Persons::getData(int n)
{

        cout<<""Enter Name (Press '$' To Exit):"";
        getline(cin,name_,'$');
        cout<<endl<<""Enter Address (Press '$' To Exit):"";
        getline(cin,address_,'$');
        cout<<endl<<""Enter Identitiy Card Number:"";
        cin>>id_number_;

}
void Persons::displayData(int n)
{

        cout<<""Name:""<<name_;
        cout<<endl<<""Address:""<<address_;
        cout<<endl<<""Identitiy Card Number:""<<id_number_;

}"
622,"There are several things you should do with this template, and templates that look like this in general: Break some elements into partials. Push logic to the model. Instead of <% if condition with model %>
   stuff
 <% else %>
   other stuff
 <% end %> when stuff or other stuff are strings with little or no markup, do <%= model.display_for_condition %> Use helpers for cases like 2) where the things to be displayed have some markup: <% condition_helper(model.condition?) %> Use presenter objects, especially when dealing with display logic that references more than one model. Most abstractly, but most importantly for learning to write code with fewer if statements, internalize one of the key distinctions between OO style and procedural style code: with OO you ask objects to do things they know how to do. If you find yourself always asking objects for information and deciding what to do with it, you are using objects as nothing more than structs and writing procedural code. Or as my intern described it the other day: (this has become one of my favourite quotes about programming) if you're itchy it's ok to scratch your own itch, but it would be kind of weird to scratch other people's itches."
623,"I avoid using namespace std; . cout << ""Enter Number Of Persons:"";
int n;     //This is the number of objects that the user wants to make.
cin >> n; Personally, I always use getline to capture a line at a time when using std::cin for interactive input. The fact that >> stops at whitespace means that it is very easy for the user to enter two fields in a single line and then the second field gets used at a subsequent point in the program without the user being able to respond to a later prompt. Also you should always check whether the input operation succeeded. std::string inputline;
if( std::getline( cin, inputline ) )
{
    std::istringstream iss( inputline );
    if( iss >> n )
    {
        // success
    }
    else
    {
    }   // fail
}
else
{
    // fail
} catch(bad_alloc xa)
{
    cout<<""Sorry,Program Can Not Continue"";
    cin.get();
    exit(1);
} For all that you actually do in the exception handler, you may as well let the expection propogate. The runtime might actually give a more meaningful error message for bad_alloc . Also, unless you have a good reason, always catch exception by const reference. e.g. catch( const std::bad_alloc& ba ) . Looking at your definition of Persons , I think that Person is a better name for the class. I see one name and one address member, if the class represented multiple people (e.g. a household) you would need at least multiple names, I would have thought. Always try and avoid needing to use delete[] explicitly. Here a vector would be much simpler and safer. std::vector<Person> persons(n); int Persons count;//initializing the static member Class static variables are normally not advisable. This isn't valid, it should be: int Persons::count; In this program it isn't giving you anything that n isn't so I would just remove it. Persons::Persons()
{
    name_="""";
    address_="""";
    id_number_=0;
    count++;
} Always prefer to initialize member variables. Assigning """" to a newly constructed std::string is redundant so you could do either. Persons::Persons()
    : name_()
    , address_()
    , id_number(0)
{
    count++;
} or even this (although some people prefer an explicit initializer for all members and bases). Persons::Persons()
    : id_number(0)
{
    count++;
} for(int i = 0; i< n; i++)
{
    ptr[i].getData(n);
}
for(int j = 0; j< n; j++)
{
    ptr[j].displayData( n );
} Why do getData and displayData take an int ? They don't use the parameter, and I don't understand why you are passing n . cin.get(); This seems redundant. void Persons::getData(int n)
{

        cout<<""Enter Name (Press '$' To Exit):"";
        getline(cin,name_,'$');
        cout<<endl<<""Enter Address (Press '$' To Exit):"";
        getline(cin,address_,'$');
        cout<<endl<<""Enter Identitiy Card Number:"";
        cin>>id_number_;

} Again, my comments about the unused parameter, always using getline and always checking the success of input operations all apply."
624,"First the errors: the static member attribute has to be initialized as: int Persons::count = 0; Then in general: you should use std::vector to avoid having to manually manage resources. While they are correctly managed in this small code sample, if you start building bigger projects you will most probably make a mistake some day (all of us do it). Program defensively to avoid errors: use existing libraries. The getData() and displayDAta() member functions do not need the argument, nor they use it. Remove it from the interface. You are not handling errors in the getData() member function nor in main. You should check the state of the istream after each operation. I tend to avoid using namespace directives, but this is a matter of taste."
625,"Yes, it is a common problem. I think this is a great way to solve this, I wish I'd done it! Back in my java days I did use the typesafe enum pattern. In ruby I tend to create method objects after the third or so repetition in cases like this, but this is a much cleaner solution and I'm going to start using it for sure. I found the documentation really clear. I do intend to use it in my app, because it is an excellent way to formalize what I am doing when I create method objects and suggest to others that they replace their long nested if statements with method objects. The only think I think of at the moment that I might want to improve on it would be to have an option to create a back reference to the owning object for cases where double dispatch will further remove conditional logic. (or like for example where I had a a set of alarms that each should ring at some percentage of the owning objects master volume)"
626,if you need to comment about the use of a variable like: static int count;    //This is the count of the objects created you should use self descriptive  names like object_count instead. same goes for int n;     //This is the number of objects that the user wants to make. which could e amount_of_objects ore something like that
627,"Persons name is quite confusing to represent a single person It looks like the main idea is to serialize/deserialize instance of Person (correct me if I'm wrong here). The more natural is to override operator >> and operator << - it would allow you to specify every stream you want as data source/destination not only standart out/in. istream& operator>> (istream& in, Person& p)    
{    
  in >> p.Name    
  in >> p.Address;        
  return in;
} 

ostream& operator<< (ostream& out, const Person& p)    
{    
     out << p.Name << 't';    
     out << p.Address << endl;    
     return out;    
}"
628,"This probably isn't going to be the case, but is this class ever going to be used in a multithreaded application?  If so, you should be locking around the incrementing of count since multiple threads could be allocating an object of that type at the same time.  In general, be careful when doing that sort of thing though and ask yourself if your class really cares how many times its been constructed, or if you should be keeping track outside of the class itself."
631,"Partitioning strings into substrings of fixed length. I've got a Clojure function here that's meant to parse a string of form: ""DDXXXYYY"" where DD is meant to be discarded, and XXX and YYY are string representations of integers. (defn split-id [tileid]
  (map #(Integer/parseInt %)
       (map (partial apply str)
            (partition 3 (drop 2 tileid))))) Or, written with the threading macro: (defn split-id [tileid]
  (map #(Integer/parseInt %)
       (map (partial apply str)
            (->> tileid (drop 2) (partition 3))))) Does anyone have any recommendations for a simple way to do this? It feels like clojure.contrib.string should have a partition function that takes a string and an integer. I think I've come up with a fairly good block of code for the above function, which I had to extend a bit. I'd love comments and suggestions on the final block. (defn parse-ints
  ""Converts all strings in the supplied collection to their integer
  representation.""
  [coll]
  (map #(Integer/parseInt %) coll))

(def res-map
  ^{:doc ""Map between the second digit in a MODIS TileID
metadata value and the corresponding resolution.""}
  {:1 ""1000""
   :2 ""500""
   :4 ""250""})

(defn tileid->res
  ""Returns a string representation of the resolution referenced by the
supplied MODIS TileID.""
  [tileid]
  (res-map (keyword (subs tileid 1 2))))

(defn tileid->xy
  ""Extracts integer representations of the MODIS X and Y coordinates
referenced by the supplied MODIS TileID.""
  [tileid]
  (parse-ints
   (map (partial apply str)
        (partition 3 (subs tileid 2)))))

(defn split-id
  ""Returns a sequence containing the resolution, X and Y
  coordinates (on the MODIS grid) referenced by the supplied MODIS
  TileID.""
  [tileid]
  (flatten
   ((juxt tileid->res
          tileid->xy) tileid)))"
634,"Adding flair to PHP page with Sassy (SCSS). This is what I've done so far: $block-height: 180px;

@mixin block {
    float: left;
    margin-bottom: 20px !important;
    margin-right: 20px !important;
    overflow: hidden;
}

#content h2 {
    height: 30px;
}

#top-bar {
    overflow: hidden;
}

.block-1 {
    @include block;
    width: 340px;
    height: 390px;
    h2 {
        color: #555;
        font-size: 28px;
        font-weight: 400;
        line-height: 120%;
    }
}

.block-2 {
    @include block;
    width: 340px;
    height: $block-height;
}

.block-3 {
    @include block;
    width: 160px;
    height: $block-height;
} HTML: <div id=""content"">
    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&locations=Front Page&page_sections=Profile');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
        <div class=""block-1"">
            <?php the_post_thumbnail('large'); ?>
        </div>
    <?php endwhile; ?>

    <?php // Start the main loop
        if ( have_posts() ) while ( have_posts() ) : the_post();
    ?>
        <div class=""block-2 padding-top"">
            <?php the_content(); ?>
        </div><!-- .entry-content -->

    <?php endwhile; // end of the loop. ?>


    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&locations=Front Page&page_sections=Themep');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
        <div class=""block-2 border-top"">
            <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
    <?php endwhile; ?>

        <?php // Create and run custom loop
            $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&locations=Front Page&page_sections=ThemeCL');
            while ($custom_posts->have_posts()) : $custom_posts->the_post();
        ?>
            <div class=""float-left"">
                <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
                <p><?php the_excerpt(); ?></p>
            </div>
        <?php endwhile; ?>

        <?php // Create and run custom loop
            $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&locations=Front Page&page_sections=Theme Child Right');
            while ($custom_posts->have_posts()) : $custom_posts->the_post();
        ?>
            <div class=""float-right"">
                    <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
                    <p><?php the_excerpt(); ?></p>
                </div>
            </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&locations=Front Page&page_sections=FromBlog');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
        <div class=""block-3 border-top"">
            <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
            <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
            <p><?php the_excerpt(); ?></p>
            <p><?php echo get_post_meta($post->ID, ""Other_Work"", true); ?></p>
        </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&locations=Front Page&page_sections=Featured');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
        <div class=""block-2 border-top"">
            <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
            <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail('large'); ?></a>
            <p><?php the_excerpt(); ?></p>
        </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=Last');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
        <div class=""block-3 border-top"">
            <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
            <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
            <p><?php the_excerpt(); ?></p>
            <p><?php the_meta(); ?></p>
        </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=Lastest');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
    <div class=""block-7 border-top"">
        <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
        <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
        <p><?php the_excerpt(); ?></p>
    </div>
    <?php endwhile; ?>
</div><!-- #content --> Do you have any other tips for good practice?"
635,"You could try the following, using the Java substring method and a vector of offsets: (defn split-id [tileid]
  (map 
    #(Integer. (.substring tileid % (+ % 3)) ) 
    [2 5]))"
636,"Python class w/ Telnet interface to memcached. I haven't had anyone help me out with code review, etc, so I thought I'd post a Python class I put together for interfacing with Telnet to get information from a memcached server. import re, telnetlib

class MemcachedStats:

    _client = None

    def __init__(self, host='localhost', port='11211'):
        self._host = host
        self._port = port

    @property
    def client(self):
        if self._client is None:
            self._client = telnetlib.Telnet(self._host, self._port)
        return self._client

    def key_details(self, sort=True):
        ' Return a list of tuples containing keys and details '
        keys = []
        slab_ids = self.slab_ids()
        for id in slab_ids:
            self.client.write(""stats cachedump %s 100\n"" % id)
            response = self.client.read_until('END')
            keys.extend(re.findall('ITEM (.*) \[(.*); (.*)\]', response))
        if sort:
            return sorted(keys)
        return keys

    def keys(self, sort=True):
        ' Return a list of keys in use '
        return [key[0] for key in self.key_details(sort=sort)]

    def slab_ids(self):
        ' Return a list of slab ids in use '
        self.client.write(""stats items\n"")
        response = self.client.read_until('END')
        return re.findall('STAT items:(.*):number', response)

    def stats(self):
        ' Return a dict containing memcached stats '
        self.client.write(""stats\n"")
        response = self.client.read_until('END')
        return dict(re.findall(""STAT (.*) (.*)\r"", response)) This is also up on GitHub . I would love some feedback on: Organization Better ways of accomplishing the same result"
637,"Why not make DB a Singleton class? Making it Singleton will prevent multiple sign-ons. Now in your code, each time a DB object is created, you authenticate with the database server. If you make it Singleton, you just have to connect once. And whenever you need the instance, you just have to fetch it."
638,"The pattern self.client.write(""some command\n"")
response = self.client.read_until('END') appears three times in your code. I think this is often enough to warrant refactoring it into its own method like this: def command(self, cmd):
    self.client.write(""%s\n"" % cmd)
    return self.client.read_until('END') In key_details you're using extend to build up a list. However it's more pythonic to use list comprehensions than building up a list imperatively. Thus I'd recommend using the following list comprehension: regex = 'ITEM (.*) \[(.*); (.*)\]'
cmd = ""stats cachedump %s 100""
keys = [key for id in slab_ids for key in re.findall(regex, command(cmd % id))] Afterwards you do this: if sort:
    return sorted(keys)
return keys Now this might be a matter of opinion, but I'd rather write this using an else : if sort:
    return sorted(keys)
else:
    return keys I think this is optically more pleasing as both return s are indented at the same level. It also makes it immediately obviously that the second return is what happens if the if condition is false."
639,"Theme/skin swap... version 2! (CSS-driven). I basically have an AJAX-fetched skin (html/css) that's loaded into a dummy element (id=SkinContainer) when the page is loaded, and then the content of one of its divs (contentdiv) is fetched with another AJAXHTTPRequest. At any rate, when the page is loaded, the user can click a button to swap the theme/skin. Below is the (working) code for my theme swap, but I'm wondering whether or not it's the best way to do this: function themeSwap() {
    var oldTheme = themeSelect;
    themeSelect++;
    if (themeSelect>2 || themeSelect<1) {themeSelect=1;}
    $('html').addClass('js');

    var tempContentDiv = document.getElementById(""contentdiv"");
    var tempContent = tempContentDiv.innerHTML;

    ReplaceJSCSSFile(""css/skin"" + oldTheme  + "".css"", ""css/skin"" + themeSelect + "".css"", ""css"");
    AJAX_LoadResponseIntoElement(""skinContainer"", ""skin"" + themeSelect + "".txt"", function() {themeSwapCallback(tempContent)} );
}

function themeSwapCallback (tempContent) {
    initPage();
    document.getElementById(""contentdiv"").innerHTML = tempContent;
    setCookie(""themeSelection"",themeSelect,365);
} What this basically does is stores the innerHTML of contentdiv into the ""tempContent"" variable, loads the new skin into skinContainer with an AJAX fetch, and then restores the original content by setting contentdiv's innerHTML to ""tempContent."" The reason why it has to use an AJAX fetch on top of the CSS swap is because the structure of the elements changes. Have I finally have this done correctly?  or is this still not perfect? :("
640,"Setting up radio button click ActionListeners. Instead of writing four almost identical setOnClickListener method calls, I opted to iterate over an array, but I'm wondering if this was the best way to do it. Do you have any suggestions for improving it? /* Set up the radio button click listeners so two categories are not selected
   at the same time. When one of them is clicked it clears the others.
*/
final RadioButton[] buttons = {radio_books,radio_games,radio_dvds,radio_electronics};
for (int i = 0; i < 4; i++) {
    final int k = i;
    buttons[i].setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            for (int j = 0; j < 4; j++) {
                if (buttons[j] != buttons[k]) {
                    buttons[j].setChecked(false);
                }
            }
        }
    });
}"
642,"It's typical callback method, you just defined setOnClickListener once. Calling 4 times is not bad smell ."
643,"What GUI framework is this? Is the View v being passed to the OnClick method actually the clicked RadioButton ? If so, here are some changes to consider final RadioButton[] buttons = {radio_books,radio_games,radio_dvds,radio_electronics};

final OnClickListener onClickHandler =
    new OnClickListener() {
        @Override
        public void onClick(final View v) {
            final RadioButton checkedButton = (RadioButton) v;
            for (final RadioButton button : buttons) {
                if (button != checkedButton) {
                    button.setChecked(false);
                }
            }
        }
    };

for (final RadioButton button : buttons) {
    button.setOnClickListener(onClickHandler);
} If View v != the checked radio button, then: final RadioButton[] buttons = {radio_books,radio_games,radio_dvds,radio_electronics};
for (final RadioButton thisButton: buttons) {
    thisButton.setOnClickListener(
        new OnClickListener() {
            @Override
            public void onClick(final View v) {
                for (final RadioButton button : buttons) {
                    if (button != thisButton) {
                        button.setChecked(false);
                    }
                }
            }
        }
    );
}"
645,"A text editor driven file renamer in Ruby. I wrote the following Ruby script several years ago and have been using it often ever since. It opens a text editor with the list of files in current directory. You can then edit the file names as text. Once you save and exit the files are renamed. The renamer allowed me to maintain spreadsheet-like file names thanks to the powerful column editing capabilities of vi (emacs also has those). Here is how one such directory looks: I would like to use it as an example for a Ruby workshop. Could you please suggest best-practice and design pattern improvements? #!/usr/bin/ruby

RM = '/bin/rm'
MV = '/bin/mv'

from = Dir.entries('.').sort; from.delete('.'); from.delete('..')
from.sort!

from.delete_if {|i| i =~ /^\./} # Hidden files

tmp = ""/tmp/renamer.#{Time.now.to_i}.#{(rand * 1000).to_i}""

File.open(tmp, 'w') do |f|
  from.each {|i| f.puts i}
end

ENV['EDITOR'] = 'vi' if ENV['EDITOR'].nil?
system(""#{ENV['EDITOR']} #{tmp}"")

to = File.open(tmp) {|f| f.readlines.collect{|l| l.chomp}}
`#{RM} #{tmp}`

if to.size != from.size
  STDERR.puts ""renamer: ERROR: number of lines changed""
  exit(1)
end

from.each_with_index do |f, i|
  puts `#{MV} -v --interactive ""#{f}"" ""#{to[i]}""` unless f == to[i]
end"
646,"Java synchronous queue implementation. I just want to make sure there aren't any deadlocks or inconsistencies (the code is also available on GitHub ). Disclaimer - In real life, I would not implement a queue myself, but use an existing implementation. This is just preparations for job interviews. package org.basic.concurrent;

import java.util.ArrayList;
import java.util.List;

public class SynchedQueue<T> {
    private final Object lock = new Object();
    private final Object full = new Object();
    private final Object free = new Object();

    private final List<T> buffer;
    private int head;
    private int tail;
    private int size;
    private final int capacity;

    public SynchedQueue(int capacity) {
        // http://stackoverflow.com/questions/4912088/how-to-create-a-fixed-size-generic-buffer-in-java
        buffer = new ArrayList<T>(capacity);
        for (int i = 0; i < capacity; ++i)
            buffer.add(null);
        this.capacity = capacity;
    }

    public void enqueue(T x) {
        if (x == null)
            throw new RuntimeException(""Doesn't allow storing nulls"");

        synchronized (lock) {
            while (!tryEnqueue(x)) {
                try {
                    free.wait();
                } catch (InterruptedException ignored) {
                }
            }
            full.notify();
        }
    }

    public T dequeue() {
        synchronized (lock) {
            while (true) {
                T item = tryDequeue();
                if (item != null)
                {
                    free.notify();
                    return item;
                }
                try {
                    full.wait();
                }
                catch (InterruptedException ignored) {}
            }
        }
    }

    private boolean tryEnqueue(T x) {
        assert size <= capacity;
        if (size >= capacity) {
            return false;
        }

        buffer.set(tail, x);
        tail = (tail + 1) % capacity;
        ++size;
        return true;
    }

    private T tryDequeue() {
        assert size >= 0;
        if (size == 0)
            return null;
        T item = buffer.get(head);
        head = (head + 1) % capacity;
        --size;
        return item;
    }
}"
647,"Just a couple of things: #!/usr/bin/ruby It's possible that on some systems this isn't where ruby lives, it's better to do: #!/usr/bin/env ruby from = Dir.entries('.').sort; from.delete('.'); from.delete('..') Can be written as from = Dir.entries('.').sort - ['.', '..'] Which is more succinct and eliminates having three statements on one line (which you shouldn't do). Or you could eliminate hidden files and . / .. in one go with: from = Dir.entries(.).select do |filename|
    filename[0].chr != '.'
end Edit: from = Dir.glob(""*"").sort Is definitely the best solution."
649,"I have not coded in Java for a few years so it might be good to get another opinion, though some points did stand out while reading your code. It seems odd to me that you would use an ArrayList with a fixed size, personally I would just use an array for the buffer. when you dequeue, you do not overwrite the value until you enqueue over the top of it. This might not seem like an issue (and if you only queue primative types like int , its not) but if you use reference types and the queue cycles slowly then it means you hold a reference to the object for longer than needed and it cannot be collected. I'm a bit worried about catching the InterruptedException inside a while(true) loops without breaking out of the loop. The most common reason I have seen for one thread to interrupt another is when the interrupting thread wants to give the interrupted thread the opportunity to terminate gratefully, but this will prevent that option. I thought about what can be returned in such a case and eventually decided it might be best to let this exception flow through and be handled by the caller."
650,"It looks like a BlockingQueue not just SynchQueue throw new RuntimeException(""Doesn't allow storing nulls""); - there is IllegalArgumnetException for this. It would better to add throws InterruptedException to method declaration rather than swallowing it. You are going to add/remove from the tail/head of the internal buffer - LinkedList looks like better options for internal storage. You don't need tons of Array.Copy in this case. It would also remove those tryDequeue() and tryEnqueue() and greatly simplify the code. This code doesn't work in a single thread scenario. Consider the situation when I call enqueue() for the first time on queue then full.notify() will fail immediately."
654,"A custom thread-pool/queue class. I wanted a class which executes any number of tasks but only a certain amount at the same time (e.g. to download various internet content and keep the overall download speed at a good level). The class I wrote seems to work but there are probably things that can be improved. Do these locks make sense? Should there be other locks as well? I have a method and an event that is only relevant if a specific constructor is used.  Is there a way to improve that? The class I use for tasks is ThreadStart .  Is that a good idea? There might be better method names/class names. Are there any general errors (e.g. that more Threads than the max-count will be executed)? There are probably more points that could be improved.  Also, if anyone knows a good open source library (or native .NET class even) which does just what my class is supposed to do, I would be interested in that too. public class ThreadQueue
{
    private readonly HashSet<ThreadStart> WorkingThreads = new HashSet<ThreadStart>();
    private readonly Queue<ThreadStart> Queue = new Queue<ThreadStart>();

    private bool RaiseCompleteEventIfQueueEmpty = false;

    private int ThreadsMaxCount;

    public ThreadQueue(int threadsMaxCount)
    {
        ThreadsMaxCount = threadsMaxCount;
    }

    /// <summary>
    /// Creates a new thread queue with a maximum number of threads and the tasks that should be executed.
    /// </summary>
    /// <param name=""threadsMaxCount"">The maximum number of currently active threads.</param>
    /// <param name=""tasks"">The tasks that should be executed by the queue.</param>
    public ThreadQueue(int threadsMaxCount, ThreadStart[] tasks) : this(threadsMaxCount)
    {
        RaiseCompleteEventIfQueueEmpty = true;
        foreach (ThreadStart task in tasks)
        {
            Queue.Enqueue(task);
        }
    }

    /// <summary>
    /// Starts to execute tasks. Used in conjunction with the constructor in which all tasks are provided.
    /// </summary>
    public void Start()
    {
        CheckQueue();
    }

    private readonly object addlock = new object();
    /// <summary>
    /// Adds a task and runs it if a execution slot is free. Otherwise it will be enqueued.
    /// </summary>
    /// <param name=""task"">The task that should be executed.</param>
    public void AddTask(ThreadStart task)
    {
        lock (addlock)
        {
            if (WorkingThreads.Count == ThreadsMaxCount)
            {
                Queue.Enqueue(task);
            }
            else
            {
                StartThread(task);
            }
        }
    }

    /// <summary>
    /// Starts the execution of a task.
    /// </summary>
    /// <param name=""task"">The task that should be executed.</param>
    private void StartThread(ThreadStart task)
    {
        WorkingThreads.Add(task);
        BackgroundWorker thread = new BackgroundWorker();
        thread.DoWork += delegate { task.Invoke(); };
        thread.RunWorkerCompleted += delegate { ThreadCompleted(task); };
        thread.RunWorkerAsync();
    }

    private void ThreadCompleted(ThreadStart start)
    {
        WorkingThreads.Remove(start);
        CheckQueue();
        if (Queue.Count == 0 && WorkingThreads.Count == 0 && RaiseCompleteEventIfQueueEmpty) OnCompleted();
    }

    private readonly object checklock = new object();
    /// <summary>
    /// Checks if the queue contains tasks and runs as many as there are free execution slots.
    /// </summary>
    private void CheckQueue()
    {
        lock (checklock)
        {
            while (Queue.Count > 0 && WorkingThreads.Count < ThreadsMaxCount)
            {
                StartThread(Queue.Dequeue());
            }
            if (Queue.Count == 0 && WorkingThreads.Count == 0 && RaiseCompleteEventIfQueueEmpty) OnCompleted();
        }
    }

    /// <summary>
    /// Raised when all tasks have been completed. Will only be used if the ThreadQueue has been initialized with all the tasks it should execute.
    /// </summary>
    public event EventHandler Completed;

    /// <summary>
    /// Raises the Completed event.
    /// </summary>
    protected void OnCompleted()
    {
        if (Completed != null)
        {
            Completed(this, null);
        }
    }
}"
655,In ThreadCompleted looks like you're raising OnCompleted twice - once in this method itself and another one in CheckQueue method
656,"Do I always have to return something in an anonymous function?. I have inherited this snippet of jQuery JavaScript and am currently brushing up on my jQuery. NetBeans IDE complains that Anonymous function does not always return a value . So there is not always an explicit exit point. I am aware that the $() shortcut is not being used. This is because it is running within a WordPress environment and needs to be in no-conflict mode. function init() {

    jQuery(""#post"").submit(function(_e) {
        // Make sure question is supplied
        var contents;
        if(window.tinyMCE && document.getElementById(""content"").style.display==""none"") { // If visual mode is activated.
            contents = tinyMCE.get(""content"").getContent();
        } else {
            contents = document.getElementById(""content"").value;
        }

        if(!contents) {
            alert(msg_enter_question);
            _e.preventDefault();
            _e.stopPropagation();
            return true;
        }


        // We must have atleast 2 answers.
        var answer_count = 0
        jQuery("".answer"").each(function() {
            if(this.value) answer_count++;
        });
        //if(answer_count < 2) {
        //  alert(""<?php //_e(""Please enter atleast two answers""); ?>"");
        //  _e.preventDefault();
        //  _e.stopPropagation();
        //  return true;
        //}

        //A correct answer must be selected.
        var correct_answer_selected = false;
        jQuery("".correct_answer"").each( function(_e) {
            if(this.checked) {
                correct_answer_selected = true;
                return true;
            } 
        });
        if(!correct_answer_selected) {
            alert(msg_correct_answer);
            _e.preventDefault();
            _e.stopPropagation();

        } 
    });
}
jQuery(document).ready(init); My question is - do I always have to return something in an anonymous function? I.e. is NetBeans right to complain?"
657,"modify custom loops to improve readability and efficiency for Wordpress?. The following code retrieve custom post types with their custom taxonomy. I'm just a beginner in PHP and I would like to know tips in order to improve readability and perhaps efficiency. home.php: <?php
/**
 * Template Name: Home
 * @package WordPress
 * @subpackage Prominent
 * @since Prominent 1.0
 */
get_header(); ?>

<div id=""sidebar"">
    <?php get_sidebar(); ?>
</div><!-- #sidebar -->

<div id=""content"">

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=Profile');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
    <div class=""block-1"">
        <?php the_post_thumbnail('large'); ?>
    </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=Tagline');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
    <div class=""block-2 padding-top"">
        <h2><?php the_title(); ?></h2>
        <p><?php the_content(); ?></p>
    </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=Themep');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
    <div class=""block-2 border-top"">
        <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
    <?php endwhile; ?>

        <?php // Create and run custom loop
            $custom_posts = new WP_Query();
            $custom_posts->query('post_type=page_content&page_sections=ThemeCL');
            while ($custom_posts->have_posts()) : $custom_posts->the_post();
        ?>  <div class=""float-left"">
                <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
                <p><?php the_excerpt(); ?></p>
            </div>
        <?php endwhile; ?>

        <?php // Create and run custom loop
            $custom_posts = new WP_Query();
            $custom_posts->query('post_type=page_content&page_sections=Theme Child Right');
            while ($custom_posts->have_posts()) : $custom_posts->the_post();
        ?>  <div class=""float-right"">
                <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
                <p><?php the_excerpt(); ?></p>
            </div>
        </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=FromBlog');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>  <div class=""block-3 border-top"">
            <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
            <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
            <p><?php the_excerpt(); ?></p>
        </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=Featured');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
    <div class=""block-2 border-top"">
        <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
        <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail('large'); ?></a>
        <p><?php the_excerpt(); ?></p>
    </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=Last');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
    <div class=""block-3 border-top"">
        <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
        <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
        <p><?php the_excerpt(); ?></p>
        <p><?php the_meta(); ?></p>
    </div>
    <?php endwhile; ?>

    <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=Lastest');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>
    <div class=""block-7 border-top"">
        <h2><a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_title(); ?></a></h2>
        <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
        <p><?php the_excerpt(); ?></p>
    </div>
    <?php endwhile; ?>

</div><!-- #content -->

<?php get_footer(); ?>"
660,"RM = '/bin/rm'
MV = '/bin/mv' In general it's preferable to use the FileUtils class rather than relying on shell utilities. Though in this particular case, you might want to stick at least with mv since the FileUtils.mv method does not have an :interactive option. tmp = ""/tmp/renamer.#{Time.now.to_i}.#{(rand * 1000).to_i}"" Ruby has a Tempfile class which can generate a unique temporary file more reliably than this. You should use it. from.each {|i| f.puts i} Calling puts on an array will puts each line individually, so the above can just be shortened to f.puts from . ENV['EDITOR'] = 'vi' if ENV['EDITOR'].nil? Can be shortened to ENV['EDITOR'] ||= 'vi' . Though what you have isn't particularly verbose either, so it doesn't really matter much which one you choose. system(""#{ENV['EDITOR']} #{tmp}"") Use system(ENV[EDITOR], tmp) instead. This way you get rid of the string interpolation and the code still works if either ENV['EDITOR'] or tmp should contain a space or other shell meta-character (not that they're particularly likely to, but it's a good idea to use the multiple-argument-form of system where ever possible). to = File.open(tmp) {|f| f.readlines.collect{|l| l.chomp}} Usually this could be replaced with to = File.readlines(tmp).collect {|l| l.chomp} . However if you follow my suggestion of using Tempfile , that won't be an option any more. `#{RM} #{tmp}` If you use fileutils, this will just be FileUtils.rm(tmp) (or rm(tmp) if you include FileUtils ). If you don't want to use FileUtils , you should at least use system(RM, tmp) for the same reasons as above. However if you use Tempfile , which you should, this becomes redundant anyway. from.each_with_index do |f, i|
  puts `#{MV} -v --interactive ""#{f}"" ""#{to[i]}""` unless f == to[i]
end To iterate over two arrays in parallel, use zip : from.zip(to) do |f, t|
  system(MV, ""-v"", ""--interactive"", f, t) unless f == t
end Note that here using system instead of backticks is especially important since one of the files in from or to containing spaces is actually somewhat likely. So with all my suggestions, your code should now look like this: #!/usr/bin/env ruby
require 'tempfile'

MV = '/bin/mv'

from = Dir.glob('*').sort

ENV['EDITOR'] ||= 'vi'

to = nil
Tempfile.open(""renamer"") do |f|
  f.puts from
  f.close
  system(ENV['EDITOR'], f.path)
  f.open
  to = f.readlines.collect {|l| l.chomp}
end

if to.size != from.size
  STDERR.puts ""renamer: ERROR: number of lines changed""
  exit(1)
end

from.zip(to) do |f, t|
  system(MV, ""-v"", ""--interactive"", f, t) unless f == t
end"
663,"Have you tried running this implementation? It fails immediately with a java.lang.IllegalMonitorStateException which according to the Javadoc is: Thrown to indicate that a thread has attempted to wait on an object's monitor or to notify other threads waiting on an object's monitor without owning the specified monitor. The problem is that the implementation synchronizes on the field lock but calls notify() and wait() on full and free without holding their locks. When you fix this, it's important to keep in mind that calling wait() automatically releases the lock of the object you are waiting on, but does not release locks on other objects. If you don't take that into account, it's quite easy to create deadlocks. For readability, I'd recommend using java.util.concurrent.locks.Condition instead of wait() and notify() which are fairly low level and difficult to reason about. In fact, the example usages in the Javadoc for Condition come from the implementation of a bounded buffer. I also have to echo Brian's concern: it's important that you don't silently swallow InterruptedException . You have two choices on how to handle interruption. If you want to handle the exception yourself, then JCIP says you need to set the interrupted status back. catch (InterruptedException e)
{
  Thread.interrupt();
  // Handle the interruption
} The other choice, which is better in my opinion, is to just propagate the exception. Java's built in libraries use this strategy, for an example see BlockingQueue.take() ."
664,"Netbeans is right to complain about this (there are some details on the website about it but they are a bit sparse). Also this isn't Netbeans specific, for example Firefox with strict-mode enabled will warn about this also. So in: jQuery("".correct_answer"").each( function(_e) {
    if(this.checked) {
        correct_answer_selected = true;
        return true;
    }
}); In the event that this.checked is false, your function returns undefined so it is much better to explicitly handle that event."
665,"The test in the OP and Ron's test are both valid tests, but it's important to realize that they may not fail even if there are legitimate concurrency problems. The test in the OP is unlikely to ever interleave the calls to add(). Even if the test ran thousands of times, t1 would usually always finish before t2 started. Ron's test ensures that the calls to add() do interleave by using a CyclicBarrier. However, using the CyclicBarrier ensures that the state maintained by the two threads gets flushed to main memory, potentially hiding concurrency problems in both add() and dump(). Both tests are decent, and you might as well run them both. For true peace of mind though, why not post the code for the logger on this site?"
666,"It looks a bit like block-1's height is calculated from @block-height, in which case I would do that calculation rather than putting in a literal value. This way if you change @block-height, block-1 will adjust with it. Beyond Sass and efficiency, I would also advise you to think again about the class names block-1, block-2 and block-3. If there will only be one of each of these on a page then use IDs rather than classes and name them after the content (eg. site-nav-block or article-block). If there will be more than one then give it a class name and name it after the content type (eg. nav-item or article-summary). This will be much less confusing for a third party like myself to read, and indeed for you as your page gets bigger and requires more styling."
670,"A few things. When you connect, don't hard code mysql, you are already fetching all the db info from a registry/config ... make the the dbtype configurable as well. That is after all, the point of PDO. When you catch errors in connection or when executing a query, use the PDOException class use exceptions for your prepare and execute calls instead of counting the errors that happens...as that's not really useful (it will be obvious an error happened, what I care about is what that error actually is). personally, I would break down this class into specific methods. instead of connecting to the db in the constructor, I would have a connect() method to do this. I would also have a query, prepare, and bind method and then have interaction method: delete, update, insert and then a set of fetch methods, fetchOne, fetchAll, fetchCol, etc. Also the connect method would check for a set conn, and only attempt to connect if you didn't already have an existing connection. The query method would call connect(). The reason for this is that you may include your db class throughout your code, even if you dont fetch anything in particular requests...with your code if this is the case a connection will be made regardless. What you want is lazy loading...meaning a db connection will only be made if you actually attempt to use the db with a fetch/update/delete/insert/etc. Here is some sample pseudo code $db = new MyPdoClass();
$db->connect();
$stmt = $db->query($sql, $params);
$results = $stmt->fetchAll(PDO::FETCH_ASSOC);
// or call your MyPdoClass::fetchAll, which would do that so you would just call
$results = $db->fetchAll($sql, $params);"
673,"Basic form validation. Question + Desired Outcome The code below works currently, however I'm not convinced the utilisation of an Array to iterate through numerous non-existent form fields is anywhere near efficient enough for my liking. Can this process be improved to effectively eliminate the first step in the Suggested Solution? Desired Outcome: When a response is submitted on FormB, validate data on FormA to ensure entries have been at least some input on each field. Background We're using a support ticketing system within our organisation which thus far is working pretty well. One minor niggle however is that the 'View Ticket' page separates ""Important Ticket Variables"" (assigned technician, ticket category etc.) - from the ""Reply to Ticket"" form. Two forms, one page. Validation for both forms happens post-submit on the next page, again each is separate from the other. In theory, that method makes sense. However, as they are two separate forms, what this often means is that people are able to bypass often-critical data from the ""important ticket variables"", and just add a reply. An element of human-training exists here but as ever, a programmatic change will satisfy the need for consistency. Save for rewriting the whole process to resolve this issue, I've looked at putting in a fairly simple JS ""overlay"" on the view ticket page, so that when they submit a ""Reply to ticket"" - it does a quick verification to make sure all the 'Important Ticket Variables' have some form of entry. It's a quick fix but comes with some (for me) interesting challenges. Languages The main application is written in PHP, using MySQL, complemented with jQuery v1.3.2. Constant ""Important ticket variables"" always have a name= of ticket_fields[customXX] , where XX is basically the id in the database, which at present means we're at an upper limit of around 60 at the moment, obviously this may increase in time as more ticket_fields are created! Not all ticket_fields are used on every ticket, some tickets use 5-10 fields, others use none. Example FormA data (formatting stripped out) <input type=""radio"" name=""ticket_fields[custom5][selection]"" id=""custom50"" value=""3""  />&nbsp;<label for=""custom50"">No</label>&nbsp;
<input type=""radio"" name=""ticket_fields[custom5][selection]"" id=""custom51"" value=""4""  />&nbsp;<label for=""custom51"">Yes</label>&nbsp;

<input type=""checkbox"" name=""ticket_fields[custom6][selections][]"" id=""custom60"" value=""1""  />&nbsp;<label for=""custom60"">A</label>
<input type=""checkbox"" name=""ticket_fields[custom6][selections][]"" id=""custom64"" value=""5""  />&nbsp;<label for=""custom64"">B</label>&nbsp;

<select name=""ticket_fields[custom27][parent]"" id=""ticket_fields_custom27_parent""  >
<option value=""0"">Please Select</option>
<option value=""129562786078"">Sample Option - Add new option, then delete this</option>
<option value=""129562792948"">Top level</option>
</select> Suggested Solution This JS executes onSubmit of FormB: // ####################################################################
  // The following bits validate the 'Additional Ticket Fields' on submit
  // ####################################################################
    // Need an array of numbers for some horrible hacking. Used to iterate through the dynamically generated ""ticket_fields"" 100 should be safe, famous last words.
    var numArray = new Array();
    var b;
    for (b = 0; b < 100; b++) { numArray[b] = b; }

    // Text boxes

    // Radio Buttons
    // iterates through existing ticket_fields and finds existing radio buttons, then validates on that radio button
    $.each(numArray, function(i, v) {
        var radbut = $('input:radio[name^=""ticket_fields[custom' + v + ']""]');
        // If found a checkbox, validate it
        if (radbut.length > 0) {
            var radbut2 = $('input:radio[name^=""ticket_fields[custom' + v + ']""]:checked');
            console.log(radbut2.length);
            if (radbut2.length > 0) {  } else { validationFail = true; }
        } else {
        // do nowt
        }
    });

    // Check boxes
    // iterates through existing ticket_fields and finds existing checkboxes, then validates on that checkbox
    $.each(numArray, function(i, v) {
        var chkbox = $('input:checkbox[name^=""ticket_fields[custom' + v + ']""]');
        // If found a checkbox, validate it
        if (chkbox.length > 0) {
            var chkbox2 = $('input:checkbox[name^=""ticket_fields[custom' + v + ']""]:checked');
            if (chkbox2.length > 0) {  } else { validationFail = true; }
        } else {
        // do nowt
        }
    });

    // Select boxes ... includes multi-levels
    // Checks each select box in turn, fails if value set to 0. Does nothing if no selectors exist.
    $('select[name^=""ticket_fields""] option:selected').each(function(){
        if (this.length) {
        } else { 
            if(this.value == 0) {
                validationFail = true;
            }
        }
    });

if (validationFail) {
    alert('Please ensure all Additional Ticket Fields are completed. \n REMEMBER: Click Update when done.');
    return false;
}"
675,"Coupling The first thing that comes to mind is the tight coupling between db and reg . Since db doesn't actually need to know anything about reg , and only needs a few values from it, I feel it's better practice to pass the required values in as needed: public function __construct($host, $database, $username, $password)
{
    ...
} Exception handling As mentioned in another answer, catch PDOException instead. Also, you will have a lot of frustration down the track trying to figure out what an ""App shoutdown"" error means with improved error reporting. try
{
    $db = new DB(...);
}
catch (PDOException $e)
{
    logError($e);
    exit('Sorry, the site is broken!');
} Commenting phpDoc comments can prove invaluable as the size and complexity of classes grow. Even if not strictly necessary for simple projects, I've found it a useful habit to get into."
676,"Large Zend_Db query. Is there a better way to accomplish the following? /**
 * Performs an access check given a user.
 *
 * @param Cas_Acl_Sid $user The user or SID being checked.
 * @param Cas_Acl_Privilege $privilege The privilege to check.
 * @return int|null 1 if user access allowed, 2 if group access allowed, false if access is denied, null if access cannot be determined.
 */
public function accessCheck(Cas_Acl_Sid $user, Cas_Acl_Privilege $privilege)
{
    $db = Zend_Db_Table_Abstract::getDefaultAdapter();
    $usersQuery = $db->select()->from('AccessControlEntries', array('Allowed', new Zend_Db_Expr('1 AS Type')))
        ->where('Acl = ?', $this->_id)
        ->where('Sid = ?', $user->GetGuid())
        ->where('Privilege = ?', $privilege->GetId());

    $groupsQuery = $db->select()->from('AccessControlEntries', array('Allowed', new Zend_Db_Expr('2 AS Type')))
        ->join('GroupMembers', $db->quoteIdentifier(array('GroupMembers', 'Group')) . ' = ' .
                               $db->quoteIdentifier(array('AccessControlEntries', 'Sid')), array())
        ->where('Acl = ?', $this->_id)
        ->where($db->quoteIdentifier(array('GroupMembers', 'User')) . ' = ?', $user->GetGuid())
        ->where('Privilege = ?', $privilege->GetId());

    $query = $db->select()
        ->union(array($usersQuery, $groupsQuery), Zend_Db_Select::SQL_UNION_ALL)
        ->order('Type')
        ->order('Allowed')
        ->limit(1);

    $dbResult = $db->fetchAll($query);

    if (!count($dbResult))
    {
        return null;
    }
    else {
        if ($dbResult[0]['Allowed'])
        {
            return (int)$dbResult[0]['Type'];
        }
        else
        {
            return false;
        }
    }
}"
677,"Sorting Visitors. I started to write a code with top-down tests. 
My first version, grow to something like this: public class Worker
{
  public void Execute(Foo foo)
  {
     //Do X on Foo
     //Do Y on Foo
     //Do Z on Foo

     //Get Bar from Foo

     //Do A on Bar
     //Do B on Bar
     //Do C on Bar
  }
} then this started to grow more. So, I've to add more actions like X,Y,Z I refactorized the code in something like: public interface IFooVisitor
{
  void Visit(Foo foo);
}

public interface IBarVisitor
{
  void Visit(Bar bar);
}

public class Worker
{
  public Worker(
            IEnumerable<IFooVisitor> fooVisitors, 
            IEnumerable<IBarVisitor> barVisitors)
  { ... }
  public void Execute(Foo foo)
  {
    foreach(var fooVisitor in fooVisitors) { fooVisitor.Visit(foo); }
    var bar = getbarfromfoo(foo);
    foreach(var barVisitor in barVisitors) { barVisitor.Visit(bar); }
  }
} The code is much more cleaner, but the problem is that i need some specific order in the execution of visitors. So, one alternative is to add a property to each visitor like: public int Priority {get { return 1; } } The project is opensource and the full code is here : IAbcVisitor is ICloneVisitor IXyzVisitor is IPostWeaveAction"
678,"Zend_Application bootstrapper. This seems a bit wrong because there's a lot of business logic going on inside the bootstrapper. Is there a better way to accomplish what's going on here? <?php

/**
 * Zend_Application Bootstrapper
 *
 * @copyright 2011 Case Western Reserve University, College of Arts and Sciences
 * @author Billy O'Neal III (bro4@case.edu)
 */

class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    public function __construct($application)
    {
        parent::__construct($application);
        Cas_Ldap::SetGlobalOptions($this->getOption('ldapserver'), $this->getOption('ldapsearchbase'));
    }

    protected function _initLayout()
    {
        $layout = Zend_Layout::startMvc();
        $layout->setLayoutPath(APPLICATION_PATH . '/layouts/scripts');
        $layout->setLayout('layout');
        return $layout;
    }

    protected function _initView()
    {
        $this->bootstrap('db');
        $view = new Zend_View();

        //Set the version string with subversion revision if found.
        $version = '0.1';
        $svnPath = APPLICATION_PATH . '/../.svnrev';
        if (file_exists($svnPath))
        {
            $hFile = fopen($svnPath, 'r');
            $version .= '.' . fgets($hFile);
            fclose($hFile);
            $lastModTime = filemtime($svnPath);
            $dateTime = new DateTime('@' . $lastModTime, new DateTimeZone('America/New_York'));
            $version .= ' ' . $dateTime->format('o-n-j G:i') . 'Z';
        }
        $view->version = $version;

        // Setup Navigation

        $nav = array();
        $nav[] = array(
            'label' => 'Welcome',
            'controller' => 'index',
            'action' => 'index',
            'order' => -1
        );

        $loggedIn = Cas_Users_User::LoggedIn();

        $logxLink = array('controller' => 'User', 'order' => 1000);
        $logxLink['label'] = $loggedIn ? 'Logout' : 'Login';
        $logxLink['action'] = strtolower($logxLink['label']);
        $logxLink['pages'] = array(array(
            'controller' => 'User',
            'action' => 'AccessDenied',
            'visible' => false,
            'label' => 'Access Denied'
        ));
        $nav[] = $logxLink;

        $adminPermission = Cas_Acl_Privilege::CreateExisting('refreshAdmin');
        unset($hasAdmin);
        $hasAdmin = (bool)Cas_Users_User::CurrentPrivilegeCheck($adminPermission);
        $nav[] = array(
            'controller' => 'admin',
            'action' => 'index',
            'order' => 2,
            'label' => 'Administration',
            'visible' => $hasAdmin,
            'pages' => array(array(
                'controller' => 'admin',
                'action' => 'useradmin',
                'label' => 'User Administration',
                'order' => 1
            ),array(
                'controller' => 'admin',
                'action' => 'globalpermissions',
                'label' => 'System Permissions',
                'order' => 2
            ),array(
                'controller' => 'admin',
                'action' => 'editevents',
                'label' => 'Edit Events List',
                'order' => 3
            ),array(
                'controller' => 'template',
                'action' => 'index',
                'label' => 'Edit Templates',
                'order' => 4
            ), array(
                'controller' => 'admin',
                'action' => 'notauthorized',
                'label' => 'Access Denied',
                'visible' => false
            ), array(
                'controller' => 'admin',
                'action' => 'usermembership',
                'label' => 'User Membership Edit',
                'visible' => false
            ))
        );

        $nav[] = array(
            'controller' => 'faq',
            'action' => 'index',
            'order' => 3,
            'label' => 'Frequently Asked Questions'
        );

        if ($loggedIn)
        {
            $nav[] = array(
                'order' => 4,
                'label' => 'My Refresh',
                'uri' => '#',
                'pages' => array(
                    array(
                        'label' => 'Accelerate My Refresh',
                        'order' => 1,
                        'controller' => 'accelerate',
                        'action' => 'index'
                    )
                )
            );

            $standardSystems = array();
            $standardSystems[] = array(
                'label' => 'About Standard Computers'
            );
            $standardSystems[] = array(
                'label' => 'Dell Optiplex 980 MT',
                'make' => 'Dell',
                'model' => 'Optiplex980MT'
            );
            $standardSystems[] = array(
                'label' => 'Dell Latitude E4310',
                'make' => 'Dell',
                'model' => 'LatitudeE4310'
            );
            $standardSystems[] = array(
                'label' => 'Dell Latitude E6410',
                'make' => 'Dell',
                'model' => 'LatitudeE6410'
            );
            $standardSystems[] = array(
                'label' => 'Dell Latitude E6510',
                'make' => 'Dell',
                'model' => 'LatitudeE6510'
            );
            $standardSystems[] = array(
                'label' => 'Apple iMac 21.5&quot;',
                'make' => 'Apple',
                'model' => 'iMac'
            );
            $standardSystems[] = array(
                'label' => 'Apple MacBook Pro 13&quot;',
                'make' => 'Apple',
                'model' => 'MacBookPro'
            );
            $standardSystems[] = array(
                'label' => 'Apple MacBook Air 11&quot;',
                'make' => 'Apple',
                'model' => 'MacBookAir'
            );

            foreach ($standardSystems as $key => &$value)
            {
                $value['controller'] = 'StandardSystem';
                $value['action'] = 'index';
                $value['order'] = $key;
                if (!isset($value['make']))
                    continue;
                $value['params'] = array('make' => $value['make'], 'model' => $value['model']);
                unset($value['make']);
                unset($value['model']);
            }

            $nav[] = array(
                'controller' => 'StandardSystem',
                'action' => 'index',
                'label' => 'Standard Computers',
                'order' => 5,
                'pages' => $standardSystems
            );

            $nav[] = array(
                'uri' => 'mailto:casrefresh@case.edu',
                'label' => 'Send Feedback',
                'order' => 6
            );
        }

        $nav = new Zend_Navigation(new Zend_Config($nav));
        $view->navigation($nav);
        //Done setting up navigation.

        //Register the view, and return it.
        $viewRenderer =
            Zend_Controller_Action_HelperBroker::getStaticHelper('ViewRenderer');
        $viewRenderer->setView($view);

        $view->setHelperPath(APPLICATION_PATH . '/views/helpers', 'Cas_View_Helper');
        return $view;
       }

    protected function _initFrontController()
    {
        $fc = Zend_Controller_Front::getInstance();
        $fc->setControllerDirectory(APPLICATION_PATH . '/controllers');
        $fc->registerPlugin(new Cas_Controller_DefaultViews());
        Zend_Controller_Action_HelperBroker::addPrefix('Cas_Controller_Helper');
        return $fc;
    }
}"
679,"Have you considered using the Chain of Command instead of the visitor? public interface IFooChainLink
{
    void Execute(Foo foo);
}

public interface IBarChainLink
{
    void Execute(Bar bar);
}

public class Worker
{
    public Worker(IFooChainLink fooChain, IBarChainLink barChain)
    { ... }

    public void Execute(Foo foo)
    {
        fooChain.Execute(foo);
        var bar = getbarfromfoo(foo);
        barChain.Execute(bar);
    }
} Your chain links would look like this public DoXToFoo : IFooChainLink
{
    private static IFooChainLink NextInChain = new DoYToFoo();

    public void Execute(Foo foo)
    {
        // DO STUFF HERE
        NextInChain.Execute(foo);
    }
} You will also need an EndOfFooChain public EndOfFooChain : IFooChainLink
{
    public void Execute(Foo foo)
    {
        // DO NOTHING HERE
    }
} And you might want a start point that makes more sense in your calling code, such as public FooChainActivator : IFooChainLink
{
    private static IFooChainLink NextInChain = new DoXToFoo();

    public void Execute(Foo foo)
    {
        // DO NOTHING
        NextInChain.Execute(foo);
    }
} With this, you can have your chain well sequenced and easily insert links into the chain, even the beginning and end without ever changing the calling code. If you would rather have your chain sequence declared in one place, you can pass NextInChain as a constructor parameter to each layer of the chain, so that your calling code becomes var worker = new Worker(
                 new DoXToFoo(
                 new DoYToFoo(
                 new DoZToFoo(
                 new EndOfFooChain()))),
                 new DoAToBar(
                 new DoBToBar(
                 new DoCToBar(
                 new EndOfBarChain())))
              ); This has an added advantage that you can send arguments to the links in the chain, but I feel it's a little messier than defining the NextLinkInChain within the links themselves. I guess that's a matter of personal preference."
680,"LL(1) tokenizer for LISP. I am trying to write a LISP interpreter in C#, so I started with a tokenizer. I haven't finished it yet (have to handle floating point numbers & symbols), but I already rewrote it two times because I can't wasn't satisfied with design. public class TokenizerException : System.ApplicationException
{
    public TokenizerException() {}
    public TokenizerException(string message) {}
    public TokenizerException(string message, System.Exception inner) {}

    // Constructor needed for serialization 
    // when exception propagates from a remoting server to the client.
    protected TokenizerException(System.Runtime.Serialization.SerializationInfo info,
        System.Runtime.Serialization.StreamingContext context) {}
}
public abstract class Token
{
    public string val;
    public Token(string val)
    {
        if(val != null) this.val = val;
        else this.val = """";
    }
}
class OpenParenToken: Token 
{
    public OpenParenToken(string value) : base(value) {}        
}
class CloseParenToken: Token 
{
    public CloseParenToken(string value) : base(value) {}
}
class NumberToken: Token 
{
    public NumberToken(string value) : base(value) {}
}
class StringToken: Token 
{
    public StringToken(string value) : base(value) {}
}
class IdToken: Token 
{
    public IdToken(string value) : base(value) {}
}
class SymbolToken: Token 
{
    public SymbolToken(string value) : base(value) {}
}


public class Tokenizer
{

    private const string parens = ""([])"";
    private string code;
    private char ch;
    private object token;
    private List<Token> tokens;

    private int p = 0;

    public Tokenizer(string code)
    {
        this.code = code;
        tokens = new List<Token>();
    }

    private char getCh()
    {
        ch = code[p];
        return ch;
    }

    public void DumpTokens()
    {
        foreach(object t in tokens)
        {
            Console.Write(""<""+t.GetType()+"", ""+(t as Token).val+""> "");
        }
        Console.WriteLine();
    }

    private char NextCh()
    {
        if(p >= code.Length) throw new TokenizerException(""End of input reached, cant get more chars"");
        ch = getCh();
        if(char.IsWhiteSpace(ch)) { p++; return NextCh(); }
        else return ch;
    }

    private Token NextParenToken(char ch)
    {
        Token t;
        if(parens.IndexOf(ch) <= parens.Length/2)
        {
            t = new OpenParenToken(ch.ToString());
        }
        else t = new CloseParenToken(ch.ToString());
        tokens.Add(t);
        return t;
    }

    private Token NextNumberToken()
    {
        int startPos = p;
        while(p < code.Length)
        {
            char c = getCh();
            if(!char.IsDigit(c)) break;
            p++;
        }
        p--;
        NumberToken n = new NumberToken(code.Substring(startPos, p - startPos + 1));
        tokens.Add(n);
        return n;
    }

    private Token NextStringToken()
    {
        if(p + 1 > code.Length) throw new TokenizerException(""Unmatched \"" at the end of the code"");
        int startPos = ++p;
        while(p < code.Length)
        {
            char c = getCh();
            if(c == '\""') break;
            p++;
        }

        StringToken t = new StringToken(code.Substring(startPos, p - startPos + 1));
        tokens.Add(t);
        return t;
    }

    private Token NextIDToken()
    {
        int startPos = p;
        while(p < code.Length)
        {
            getCh();
            if(parens.IndexOf(ch) > parens.Length/2 || char.IsWhiteSpace(ch)) break;
            if(parens.IndexOf(ch) >= 0 && parens.IndexOf(ch) <= parens.Length/2) throw new TokenizerException(""Bad identifier at "" + p);
            p++;
        }
        p--;
        string id = code.Substring(startPos, p - startPos + 1);
        IdToken t = new IdToken(id);
        tokens.Add(t);
        IdTable.insert(id, t);

        return t;
    }

    public Token NextToken()
    {
        char ch = NextCh();
        if(parens.Contains(ch))
        {
            return NextParenToken(ch);
        }

        if(char.IsDigit(ch))
        {
            return NextNumberToken();
        }

        if(ch == '\""')
        {
            return NextStringToken();
        }

        // identifiers
        return NextIDToken();
    }

    public void Lex()
    {
        tokens.Clear();
        for(p=0; p < code.Length; p++)
        {
            NextToken();
        }
    }

}"
682,"just something that i have considered how about hiding the paginate stuff behind a helper method and then stub the helper method this way you can swap out the pagination implementation with anytime you want
and then just test the helper method is delegating the params to will_paginate class ProgramssController < ApplicationController
  def index
    @programs = paginate_progams(params)
  end
end now you stub the paginate_programs method
and then you can spec up the helper method paginate"
683,"Eratosthenes sieve and MPI. I wrote this sieve of Eratosthenes with MPI, but I'm not sure if it's good enough. Should I use MPI_Scatter and MPI_Gather instead of collecting arrays of separate processes in the root process? Also, I'm not sure if I call printArray(myArray, (N/size)-1); right, where myArray is an array of pointers. GCC gives a warning at this point. #include ""mpi.h""
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <time.h>

#define N 60

int main(int argc, char *argv[])
{
long timeCPU;
int rank, size, k, i, v, n, scatterSize;
int **tmpArray, *myArray, firstElement, lastElement;

MPI_Init(&argc,&argv);

MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);

if(N%size != 0)
{
    MPI_Finalize();
    printf(""ERROR!"");
    exit(0);
}

firstElement = (rank*N)/size;
lastElement = floor(((rank+1)*N)/size);
myArray = (int*) (malloc(((N/size)-1)*sizeof(int)));

for(i=0, v=firstElement+2; i<=(N/size)-1; i++, v++)
{
    myArray[i] = v;
}
    printArray(myArray, (N/size)-1);
/* All processes have to execute above code first */
MPI_Barrier(MPI_COMM_WORLD);

k = 2;

do
{
    markMultiples(k, myArray, lastElement-firstElement);
    k = nextNumber(k, myArray, lastElement-firstElement);
    MPI_Bcast(&k, 1, MPI_INT, 0, MPI_COMM_WORLD);
}
while(k*k <=N);

MPI_Send(myArray, (N/size)-1, MPI_INT, 0, 50, MPI_COMM_WORLD);

MPI_Barrier(MPI_COMM_WORLD);

if (rank == 0)
{
    // Initialize 2D array
    tmpArray = (int**) (malloc(size*sizeof(int)));
    for(i=0;i<size;i++)
    {
        tmpArray[i] = (int*) (malloc(((N/size)-1)*sizeof(int)));
    }

    // Gather from every process his own array
    for (i=0; i<size;i++)
    {
        MPI_Recv(tmpArray[i], (N/size)-1, MPI_INT, i, 50, MPI_COMM_WORLD, MPI_STATUS_IGNORE);
        printArray(tmpArray[i], (N/size)-1);
        printf(""-----------------------------------------\n"");
    }

    // Build 1d array with primes - TODO

}

//printArray(array, lastElement-firstElement);
free(myArray);
MPI_Finalize();
return 0;
}

int nextNumber(int k, int *array, int n)
{
int i;

for(i=0; i<=n; i++)
{
    if(array[i] > k)
        return array[i];
}
return -1;
}

void markMultiples(int k, int *array, int n)
{
int i;

for (i=0; i<=n; i++)
{
    if(array[i] % k == 0 && array[i] != k)
    {
        array[i] = -1;
    }
}
}

void printArray(int *array, int n)
{
int i;

for(i=0; i<=n; i++)
{
    printf(""array[%d] = %d\n"", i, array[i]);
}
}"
684,"1) I would remove string val from your base Token class, it smells like stringly typed code. Your inheritors may have more specific information, for example number token may provide a double instead of string 2) public string val; - Pascal case for public properties is a rule for .Net 3) if(val != null) this.val = val; else this.val = """"; is a long form for: this.val = val ?? """"; 4) private char NextCh() recursion makes no sense here, regular loop is more than enough. 5) haven't found any sense having this field: private char ch; , you have it as local variable everywhere. This field should be removed. 6) code field can be made readonly 7) getCh() one-line method should be removed 8) 'token' field should be removed since it doesn't seem to be used and doesn't make any sense in 'Tokenizer' context 9) Is IdTable a singleton? Singletons are evil. 10) String.IndexOf(c) does the same as this while(p < code.Length)
    {
        char c = getCh();
        if(c == '\""') break;
        p++;
    }` 11) Your tricks with parentheses and indexOf <= Length/2 do not improve readability at all 12) IMO your class is too stateful, while parsing tokens in each method you have to keep in mind all those fields you have in your class. I would recommend remove ALL fields and use method parameters instead."
686,"In adition to Snowbear's points: 1) I don't use an inheritance hierarchy for the token, instead I find it more convenient to use an enum property on the token to identify the type. 2) You might want to think about ""reading"" the whitespace as a token that simply isn't returned (this is an extension of Snowbear's point about not using recursion to read the next char). 3) LL(1) is a term that refers to parsers, not scanners (tokenisers). 4) I also like implement my scanners as an IEnumerator that takes the string to be scanned in the constructor ... but that's just a matter of personal taste. :)"
687,"Do I need to use a callback function here, or is there another way?. Here is the pertinent code: index.html <!--  DOM INITIALIZATION -->
<script type=""text/javascript"">
$().ready(function() {

getThemeInfo();

if (themeSelect==2) {
   ReplaceJSCSSFile(""css/skin1.css"", ""css/skin2.css"", ""css"");   // overwrite CSS
}

AJAX_LoadResponseIntoElement(""skinContainer"", ""skin"" + themeSelect + "".txt"", function() {
    AJAX_LoadResponseIntoElement(""contentdiv"", ""index.txt"", initPage);
    });

});
</script> funcs.js function initPage()
{
    setContentDimensions();
    replaceCSSMenu();
    showContainer();
    setContentPositions();
}

function setContentPositions()
{
    var contentTop = findTop(document.getElementById('NavMenu')) + 4;
    var contentLeft = findLeft(document.getElementById('kwick1')) + 226;

    document.getElementById('contentdiv').style.top = (contentTop)+ ""px"";
} Quick recap: It fetches the theme selection, and if it's not the default (1), then it changes the CSS file to skin2.css.  Then, it fetches the page with AJAX and initializes it, and part of initialization is setting the div dimensions and positions. Although the theme swap works perfectly through the button (code not shown here,) it does not work in Opera if the theme setting, stored in cookies, is a non-default theme, causing the CSS to be swapped during the loading of the page (i.e. this code here.)  For whatever reason, the .top and .left of my ""contentdiv,"" which is set in ContentPositions() function, is wrong. I'd assumed this was happening because the CSS styles were not loaded prior to the JavaScript attempting to set contentdiv's position.  To test this theory, I put an alert() in setContentPositions() to test that contentTop & contentTop were indeed wrong (they were,) and then another alert() after the DOM init line that changes the CSS file.  With the addition of the alert() after the CSS change within DOM init, it loads perfectly. Why is the CSS file not processed by the time it does two AJAX fetches?  Is a callback function the proper way to fix this? Edit... The code for some of the functions used in the above code was requested.  Here it is: function ReplaceJSCSSFile(oldfilename, newfilename, filetype){
 var targetelement=(filetype==""js"")? ""script"" : (filetype==""css"")? ""link"" : ""none"";
 var targetattr=(filetype==""js"")? ""src"" : (filetype==""css"")? ""href"" : ""none"";
 var allElements=document.getElementsByTagName(targetelement);

 for (var i=allElements.length; i>=0; i--){
  if (allElements[i] && allElements[i].getAttribute(targetattr)!=null && allElements[i].getAttribute(targetattr).indexOf(oldfilename)!=-1){
   var newelement=CreateJSCSSFile(newfilename, filetype);
   allElements[i].parentNode.replaceChild(newelement, allElements[i]);
  }
 }
}

function CreateJSCSSFile(filename, filetype){
 if (filetype==""js""){
  var fileref=document.createElement('script');
  fileref.setAttribute(""type"",""text/javascript"");
  fileref.setAttribute(""src"", filename);
 }
 else if (filetype==""css""){
  var fileref=document.createElement(""link"");
  fileref.setAttribute(""rel"", ""stylesheet"");
  fileref.setAttribute(""type"", ""text/css"");
  fileref.setAttribute(""href"", filename);
 }
 return fileref;
}



function AJAX_LoadResponseIntoElement (elementId, fetchFileName, cfunc) {
  var XMLHRObj;
  if (window.XMLHttpRequest) { XMLHRObj=new XMLHttpRequest(); }
    else { XMLHRObj=new ActiveXObject(""Microsoft.XMLHTTP""); }

  XMLHRObj.onreadystatechange=function()
    {
    if (XMLHRObj.readyState==4 && XMLHRObj.status==200)
      {
      document.getElementById(elementId).innerHTML=XMLHRObj.responseText;
      cfunc();
      }
    }
  XMLHRObj.open(""GET"",fetchFileName,true);
  XMLHRObj.send();
}"
688,"Multiple explicit cast operations. This sample code works fine, but it looks awful.  How would you improve this? data.Add(((Adress)(((OwnerIDList)owner.Adresses.Value)[0].Adress.Value)).FirstName.Value.ToString());
data.Add(((Adress)(((OwnerIDList)owner.Adresses.Value)[0].Adress.Value)).LastName.Value.ToString()); Why do we use .Value in FirstName.Value.ToString() ? FirstName is a DTString object (implements a basic interface for all data types to be stored in data base)."
689,"at least I would extract a variable: var address = (Adress)((OwnerIDList)owner.Adresses.Value)[0].Adress.Value;
data.Add(address.FirstName.Value.ToString());
data.Add(address.LastName.Value.ToString()); All these cast operations make me believe that your code is not that strongly typed. If it so then there is not that much you can do with readability in this code. P.S.: Address in English has two d ."
690,"Waiting for game server connection. public boolean connectedOnGameServer = false;
public final Object conGameServerMonitor = new Object();

public void connectedToGameServer() {
    synchronized (conGameServerMonitor) {
        if (connectedOnGameServer != false)
            throw new RuntimeException(""Player connected twice"");
        connectedOnGameServer = true;
        conGameServerMonitor.notifyAll();
    }
}

public void waitForGameServerConnection() {
    synchronized (conGameServerMonitor) {
        try {
            long startTime = System.currentTimeMillis();
            long waited = 0;
            while (!connectedOnGameServer && waited < GAMESERVER_CONNECT_TIMEOUT) {
                conGameServerMonitor.wait(GAMESERVER_CONNECT_TIMEOUT - waited);
                waited = System.currentTimeMillis() - startTime;
            }
            if (waited > GAMESERVER_CONNECT_TIMEOUT && connectedOnGameServer) {
                throw new RuntimeException(""Client didn't connect to game server in time ("" + GAMESERVER_CONNECT_TIMEOUT + "" ms)"");
            }
        } catch (InterruptedException e) {
            throw new RuntimeException(""Interrupted while waiting for client to connect to game server"", e);
        }
    }
} What I need is: Thread A calls waitForGameServerConnection Thread B calls connectedToGameServer Thread A continues"
691,"What's with all the .Value is it because the variables are defined as Nullable< T > variables? In that case, you can substitute FirstName.Value.ToString() With FirstName.ToString() Besides that, the place where I would clean up would be the actual objects that you are querying for data. You have a lot of casts, and a lot of .Value lookups to get to the real data. This results in the code that uses those classes reflects the design choices made when implementing those classes, And that is the real reason why your code looks awful. I would change those types, so you would be able to write: data.Add(owner.Adresses[0].Adress.FirstName); Also it seems illogical that an object that you retrieve from an Addresses collection should have a property called Address? Maybe that should have a better name. And as already mentioned, there are two d's in address."
692,"Extract a joined result set into a parent-child hierarchy. I'm writing a quiz application in PHP and am querying the DB for questions and their associated answers. I then wrangle the result set into a usable array for my front end. However, it always seems like a wrestling match and I'm wondering if I could have got to my desired array structure more efficiently. What I wanted was an associative array / dictionary which was structured so that the questions were at the top level with their associated answers underneath. I also wanted a numeric index above the question level so that I can later use that to match my current_step session variable for stepping through the form. function get_question_data( $quiz_id)
{
    global $wpdb;

    if ( !isset($quiz_id)) {
        return FALSE;
    }

    $sql = $wpdb->prepare(""SELECT q.ID AS 'question_id', question, explanation, q.sort_order, qa.ID AS 'answer_id', qa.answer, qa.correct, qa.hint
                           FROM {$wpdb->prefix}my_quiz_questions q
                           LEFT JOIN wp_nmsi_quiz_answers AS qa ON q.ID = qa.question_id
                           WHERE quiz_id=%d ORDER BY q.ID"", $quiz_id);
    $quiz_data = $wpdb->get_results($sql, ARRAY_A);
    fb($quiz_data,'DATABASE RESULTS');

    //build into a user-friendly array which we can use to manage quiz steps and questions later.
    $question_array = array();

    foreach ($quiz_data as $key=>$value) {


      foreach ($value as $k => $v) {
            if ($k == 'question' ) {
                if (!array_key_exists('question_'.$value['question_id'], $question_array)) {
                $question_array['question_'.$value['question_id']]['question_text'] = $v;
                $question_array['question_'.$value['question_id']]['question_id'] = $value['question_id'];
                }
            }

            if ($k == 'answer'){
                $question_array['question_'.$value['question_id']]['answers'][$value['answer_id']]['text'] = $v;        
            }

            if ($k == 'hint') {
                $question_array['question_'.$value['question_id']]['answers'][$value['answer_id']]['hint'] = $v;
            }

            if ($k == 'correct') {
                $question_array['question_'.$value['question_id']]['answers'][$value['answer_id']]['correct'] = $v;
            }


            if ($k == 'explanation' ) {
                $question_array['question_'.$value['question_id']]['explanation'] = $v;
            }

        }


    }

    //echo $wpdb->last_query;
    return array_values($question_array);
} I ended up with this solution . Update: Query Results array(6) {
  [0]=>
  array(8) {
    [""question_id""]=>
    string(1) ""1""
    [""question""]=>
    string(34) ""Question 1. What is the question ?""
    [""explanation""]=>
    string(38) ""This is the explanation for question 1""
    [""sort_order""]=>
    string(1) ""0""
    [""answer_id""]=>
    string(2) ""20""
    [""answer""]=>
    string(16) ""this is answer 4""
    [""correct""]=>
    string(1) ""0""
    [""hint""]=>
    string(29) ""this is the hint for answer 4""
  }
  [1]=>
  array(8) {
    [""question_id""]=>
    string(1) ""1""
    [""question""]=>
    string(34) ""Question 1. What is the question ?""
    [""explanation""]=>
    string(38) ""This is the explanation for question 1""
    [""sort_order""]=>
    string(1) ""0""
    [""answer_id""]=>
    string(2) ""19""
    [""answer""]=>
    string(16) ""this is answer 3""
    [""correct""]=>
    string(1) ""0""
    [""hint""]=>
    string(29) ""this is the hint for answer 3""
  }
  [2]=>
  array(8) {
    [""question_id""]=>
    string(1) ""1""
    [""question""]=>
    string(34) ""Question 1. What is the question ?""
    [""explanation""]=>
    string(38) ""This is the explanation for question 1""
    [""sort_order""]=>
    string(1) ""0""
    [""answer_id""]=>
    string(2) ""18""
    [""answer""]=>
    string(16) ""this is answer 2""
    [""correct""]=>
    string(1) ""0""
    [""hint""]=>
    string(29) ""this is the hint for answer 2""
  }
  [3]=>
  array(8) {
    [""question_id""]=>
    string(1) ""1""
    [""question""]=>
    string(34) ""Question 1. What is the question ?""
    [""explanation""]=>
    string(38) ""This is the explanation for question 1""
    [""sort_order""]=>
    string(1) ""0""
    [""answer_id""]=>
    string(2) ""17""
    [""answer""]=>
    string(16) ""this is answer 1""
    [""correct""]=>
    string(1) ""1""
    [""hint""]=>
    string(29) ""this is the hint for answer 1""
  }
  [4]=>
  array(8) {
    [""question_id""]=>
    string(1) ""2""
    [""question""]=>
    string(10) ""Question 2""
    [""explanation""]=>
    string(26) ""Explanation for question 2""
    [""sort_order""]=>
    string(1) ""0""
    [""answer_id""]=>
    string(2) ""24""
    [""answer""]=>
    string(28) ""test answer 2 for question 2""
    [""correct""]=>
    string(1) ""0""
    [""hint""]=>
    string(13) ""answer 2 hint""
  }
  [5]=>
  array(8) {
    [""question_id""]=>
    string(1) ""2""
    [""question""]=>
    string(10) ""Question 2""
    [""explanation""]=>
    string(26) ""Explanation for question 2""
    [""sort_order""]=>
    string(1) ""0""
    [""answer_id""]=>
    string(2) ""23""
    [""answer""]=>
    string(28) ""test answer 1 for question 2""
    [""correct""]=>
    string(1) ""1""
    [""hint""]=>
    string(13) ""answer 1 hint""
  }
}"
693,"My code examples are excerpts. Don't copy/paste them, they are suggestions you can incorporate into your code. if (waited > GAMESERVER_CONNECT_TIMEOUT && connectedOnGameServer)
{
   throw new RuntimeException(""Client didn't connect to game server in time ("" + GAMESERVER_CONNECT_TIMEOUT + "" ms)"");
} can be reduced to: if (!connectedOnServer) {
   throw new RuntimeException(""Client didn't connect to game server in time ("" + GAMESERVER_CONNECT_TIMEOUT + "" ms)"");
} Now, you can handle this without an exception. Connections fail quite regularly, and it's easy to handle that. public boolean waitForConnection() {
   synchronized (conGameServerMonitor) {
      // loop, guard
      return connectedOnGameServer? true : false;
   }
} With this you can ask the player if he wants to try again, or wait a bit and try again, etc without having to catch an exception.
But what if B calls connectedToGameServer() after the wait completes? boolean connectionInProgress;

public void connectedToGame() {
   synchronized (conGameServerMonitor) {
      if (connectionInProgress) {
         connectedOnGameServer = true;
         conGameServerMonitor.notifyAll(); 
      }
   }
}

public boolean waitForConnection() {
   synchronized (conGameServerMonitor) {
      connectionInProgress = true;
      // wait
      connectionInProgress = false;
      return connectedOnGameServer? true : false;
   }
} You handle the wakeups and interuptions correctly. Kudos for the waited part - I thought ""Useless!"" for a second, but I forgot that a thread could wake anytime, and it's the thread's responsibility to be sure that it's conditions are fulfilled."
694,"The main comment I have is that I think that C# is the wrong language to pick for tokenizing a language. Its perfectly good for the main bulk of the lisp interpretor but one of the major skills of software engineer is picking the correct language for the job. Not just of ease of writing but ease of maintainability and future work. Now I personally like LEX but there are other lexical generators out there. But I just want to show you how simple the LEX file is. Even if you don't know the exact syntax of LEX it is simple enough that most people will immediately be able to read (assuming a CS background) and even the most complex modification can be done within an hour given an appropriate book. OK I am not 100% sure of the exact rules for tokenizing Lisp. DIGIT           [0-9]
NUMBER          [+-]?{DIGIT}+
EXP             [EeDd]{NUMBER}
IDTOKEN         [^)(; \t\v\r]
IDENTIFIER      {IDTOKEN}+
SPACE           [ \t\v\r]

%x              STRING COMMENT
%%

;                               { BEGIN(COMMENT); }
<COMMENT>[^\n]+                 { /* IGNORE */ }
<COMMENT>\n                     { BEGIN(INITIAL); }

{NUMBER}                        { return CONSTANT_NUMBER_INT; }

{NUMBER}{EXP}                   { return CONSTANT_NUMBER_FLOAT; }
{NUMBER}?"".""{DIGIT}+{EXP}?      { return CONSTANT_NUMBER_FLOAT; }
{NUMBER}"".""{DIGIT}*{EXP}?       { return CONSTANT_NUMBER_FLOAT; }

{NUMBER}\/{NUMBER}              { return CONSTANT_NUMBER_RATIO; }

\""                              { BEGIN(STRING); yymore(); }
<STRING>[^\""\\\n]+              { yymore(); }
<STRING>\\.                     { yymore(); }
<STRING>\""                      { BEGIN(INITIAL); return CONSTANT_STRING; }
<STRING>\n                      { error(""NewLine inside string"");}

{IDENTIFIER}                    { return NAME; }

\(                              { return '('; }
\)                              { return ')'; }

\n                              { lineCount++; }
{SPACE}+                        { /* Ignore Space */ }

%%
/* Add this rule if there are things that can't match
 * But Lisp seems to be very flexible on Identifier
 * names so it seems like it is not required.
 .                               { error(""Unknown character""); }
 */ 50 lines is a lot easier to read than 200."
695,"You forgot to test what view should be rendered. If you use this , your specs will be much cleaner. The last four should be standard matchers. See this as an example. describe ProgramsController do
  let(:programs) { [mock_model(Program)] }    

  describe ""GET index"" do
    it { should paginate(Program).with_default_per_page(30) }

    describe ""after pagination"" do
      before(:each) do
        Program.stub(:paginate).and_return(programs)    
        get :index
      end

      it { should assign_to(:programs).with(programs) }
      it { should respond_with(:success) }
      it { should render_template(:index) }
      it { should_not set_the_flash } 
    end
  end
end"
696,"From the structure of the sql query, it looks like your output is going to have duplicate rows, due to the fact that a single question can have multiple answers. This means you're going to have to do some screwy stuff, like what you did with the nested foreach loops. I would recommend splitting this into two separate queries, one to get the questions and one to get the answers, and then just assigning the responses straight into the array without all the if(key==whatever) { // assign something } magic. As for the array itself, it looks quite good. Some pretty minor points: question_array doesn't really need to have a string-based key (e.g., $question_array['question_1'] ); it may be easier to work with if you just use numbers (e.g., $question_array[1] ). You don't have a field for how many points each question is worth."
697,"I managed to get around a generic array by pulling out the numbers from the name= attribute on each form field with the following: // Pulls numbers from submitted ""ticket_fields"" which are stored in the name= attribute.
// Used to iterate through the dynamically generated ""ticket_fields""
var numArray = new Array();
$(':input[name^=""ticket_fields""]').each(function(){
    fieldId = $(this).attr('name').replace(/\D/g, """");
    if ($.inArray(fieldId,numArray) > -1) { } else { numArray.push(fieldId); }          
}); This makes it much friendlier, so rather than numArray having a ridiculous level of integers to iterate through, it gets exactly the right values from the form fields themselves every time. Also allows it to scale infinitely."
698,"Providing unchecked exception ""wrapper"" interfaces for an API with checked exceptions. I recently had a discussion in the forum of an API, because they changed an exception from checked to unchecked. I believed it needs to be checked, because it is recoverable. The arguments of ""the other side"" were verbosity and tediousness of try/catch or throws. If it were purely theoretical question, I'd be right, but I agree that in practice it is sometimes tedious to write all these try/catches just for the sake of rethrowing unchecked exceptions, or logging. So, an idea came to my mind, and I wonder whether it's viable. I'll illustrate with simple code: public interface Foo {
    String foo() throws Exception;
}

public interface EasyFoo extends Foo {
    String foo();
} These are two interfaces that define the same method (and this is enforced by inheritance), but the ""easy"" version does not define throwing checked exceptions. Then come 2 default implementations: public class FooImpl implements Foo {

    @Override
    public String foo() throws Exception {
        return ""foo"";
    }
}

public class EasyFooImpl implements EasyFoo {

    Foo foo;

    public EasyFooImpl(Foo foo) {
        this.foo = foo;
    }

    @Override
    public String foo() {
        try {
            return foo.foo();
        } catch (Exception ex) {
            throw new RuntimeException(ex);
        }
    }
} The latter delegates to the former, wrapping all exceptions in runtime exceptions. And finally a factory: public class FooFactory {
    public static Foo createFoo() {
        return new FooImpl();
    }

    public static EasyFoo createEasyFoo() {
        return new EasyFooImpl(new FooImpl());
    }
} The benefits: the user of the API can choose how he likes to use the implementation. If he doesn't intend to do anything with the checked exceptions, he can use the ""easy"" version you support only one interface. The 2nd is the same, and you'll just have to add the methods that you have in the main one. the user can use the EasyFoo in places where Foo is required: EasyFoo foo = FooFactory.createEasyFoo();
helper.doSomething(foo); // which is public void doSomething(Foo foo); Enough foos - the question is, is this a viable solution that can reduce verbosity while retaining the good sides of checked exceptions?"
699,"I'm a few years out of RoR, but worked for a company that was heavy on testing an we used RSpec. In a case like this we would have tested some additional points, mainly about the content of the response. A few lines like (syntax may be totally wrong, as said I'm out of this): test the amount of records
@programs.should.have(30).records then there was a command to test if certain records are in the result
@programs.should.contain(...)
this requires fixtures of course. The idea behind this was to make sure we could replace a certain plugin against a new one and be sure it doesn't break anything or contains bugs. (For example the acts_as_taggable plugin had a bug that made it impossible to delete tags, thing was running into an infinite loop)
And of course to avoid programmers to make changes while testing in the browser or similar. With will_paginate a typical bug would be to set the pagination to 10 to see several pages in the browser (because there are only 20 records in the fixtures...) and forget to set this value back to 30. And if it's not the programmer, then maybe the guy working on the HTML/CSS. We made sure every of those details were tested More tests would make sure that the right file would be used for rendering. 
something like response.should.render_template(name) This seems to be a lot of work. But on the positive side: When my first web site for a customer went online, after six weeks of programming and my humble 3 months of knowing about Ruby on Rails, it had no bugs at all and stood 1.000 hits/minute without a single line of code to be changed."
700,"Ok, I'm going to assume that this is a honest-to-goodness exceptional case, that is extremely unlikely to happen. It isn't like java.sql, that throws an exception when opening a connection fails, which can happen very easily and should be handled by returning null . If there are people who want this exception unchecked, they should write their own wrapper for it, IMO. If you did want it in the library, though, I'd do it exactly as you did for interfaces. The unchecked version doesn't depend on the checked vesion's implementation, so you only ever need one wrapper EasyFooImpl . I would wonder about the design of the library if I ever saw that. Checked or unchecked, it's best to avoid throwing exceptions altogether. There are only two valid reasons I see as being ""exception-worthy"": Where an unknown operation leaves the code in a unknown/invalid state. This should unrecoverable by the code that throws the exception. Where it is impossible to return an invalid state, such as null or 0 . An example that comes to mind is Integer.parse() . You can't return null ; it requires int . And you can't return 0 or NAN because that is in the valid return set of the method. An exception the cleanest, most readable way you can signal that the string is unparsable to an integer."
701,"Just accept the fact that the exception is unchecked and move on. The industry is moving away from checked exceptions: C++ never had them, C# decided not to follow Java in this place, and the latest frameworks for Java are using unchecked exceptions. Face it, checked exceptions are a nice idea that doesn't work in practice. As a result, the thing you try in your code, will never pass any code review I'll be part of."
702,"Find the center of n squares which together build a rectangle. I have a rectangle with size w and height h . Now I want to split this rectangle into n new rectangles that are as similar as possible to a square. Afterwards I'd like to calculated the center of each square. public static List<Point> getCenters(int number, double width, double height)
    {
        List<Point> points = new List<Point>();
        int originalNumberOfSquares = number;
        int numberOfSquares = number;
        if (numberOfSquares % 2 == 1)
        {
            numberOfSquares++;
        }
        int rectangleWidth = Convert.ToInt32(width);
        int rectangleHeight = Convert.ToInt32(height);

        double minDistance = Double.MaxValue;
        int nSquaresInRow = -1;
        int nSquaresInColumn = -1;

        for (int i = 0; i <= numberOfSquares; i++)
        {
            for (int j = 0; j <= numberOfSquares; j++)
            {
                if (i * j == numberOfSquares)
                {
                    if (Math.Abs(i - j) < minDistance)
                    {
                        minDistance = Math.Abs(i - j);
                        nSquaresInRow = i;
                        nSquaresInColumn = j;
                    }
                }
            }
        }

        int squareWidth = rectangleWidth / nSquaresInColumn;
        int squareHeight = rectangleHeight / nSquaresInRow;

        for (int r = 0; r < originalNumberOfSquares; r++)
        {
            int xSquareCenter = (((r + 1) * 2) - 1) * (squareWidth / 2);
            while (xSquareCenter > rectangleWidth)
            {
                xSquareCenter = xSquareCenter - rectangleWidth;
            }

            int row = (r / nSquaresInColumn) + 1;
            int ySquareCenter = ((2 * row) - 1) * (squareHeight / 2);

            points.Add(new Point(Convert.ToDouble(xSquareCenter), Convert.ToDouble(ySquareCenter)));
        }

        return points;
    } Now the code works, but I think it's a little bit ugly. Any hints on how I can improve it?"
703,"Your first step should be to use meaningful variable names, even for your looping variables. I've never looked at this code before. I have no idea what it's doing. When other members of your team (if you have one) look at this code, they'll have no idea what's happening. If you come back to this code in a few days, weeks, months, etc., you will be in the same boat as the rest of us. Once you've given variables good names, it will be easier to reason about the code for both yourself and anyone else who comes after you. In turn, it will be easier to give additional refactoring advice, if appropriate."
704,"A couple of notes: The width, height and number of sub-rectangles should be parameters, not local variables. If you should, for example, want to print out the centres for differing values of w , h and n , calling the method in a loop with different arguments is more convenient than changing the code and rerunning it multiple times. Determining the size of the sub-rectangles and collecting their centres could be done in two separate methods because a) they can easily be separated as they're not intertwined b) it makes it immediately obvious which part is done by which code and c) they might be useful on their own. Rather than outputting the centres, you should return them in an array or list. This way you can also easily use the method in a context where you don't want to print the centres or want to do something to them before printing. Also it's generally a good practice to separate IO code from logic code. Since both i and j are ints and thus minDistance will only ever hold integer values, it should have type int , not double . Otherwise it leaves the impression that it could possibly have a non-integer value. On a similar note you should probably make the type of width and height int as well since the first thing you do is to truncate them to int s. Having their type be double might make the user of your method think the results will be more accurate than they really are."
705,"I'm not really sure what you want from this, if all you want is to make it more readable, then a few well placed new-lines will make a world of difference. If you want to reduce the amount of code, I don't think there is much room for that other than switching constructors for InputScopeName . txtBox.InputScope = new InputScope
{
    Names =
    {
        new InputScopeName(InputScopeNameValue.Text)
    }
}; Note: Text does not appear to be a valid member of InputScopeNameValue , but ill keep it for the sake of consistency with the question."
706,"Interpolating given value and legacy value from serialization buffer. Here's a function that interpolates between a given value and a value fetched out of a legacy serialization buffer: template<typename T>
T interpolate(Buffer& buffer, const T currentValue, const float prop)
{
    T bufferValue;
    buffer.readT(&buferValue);
    return currentValue + (bufferValue-currentValue)*prop;
} This works great for interpolate<float> and interpolate<int> and so on. However if I want to pass a more complex structure such as a vector, I'd rather the currentValue parameter was passed by reference instead of by value.  I can use overloading to handle that situation: // in addition to original function
Vector interpolate(Buffer& buffer, const Vector& currentValue, float prop)
{
    Vector bufferValue;
    buffer.readT(bufferValue);
    return currentValue + (bufferValue-currentValue)*prop;
} Even if you rip out the lerp into a helper function, it still isn't ideal to repeat the function like this when the only difference from the original is the & parameter, especially if there's more than one type I'd like to pass by reference. I can use traits to auto-detect when to use a reference: // to replace original function

template<typename T>
struct RefTrait { typedef const T Ref; }

template<>
struct RefTrait<Vector> { typedef const Vector& Ref; }

template<typename T>
T interpolate(Buffer& buffer, typename RefTrait<T>::Ref currentValue, const float prop)
{
    T bufferValue;
    buffer.readT(&buferValue);
    return currentValue + (bufferValue-currentValue)*prop;
} However now the compiler can't induce the type of T by default, and the calling code has to explicitly state type: floatVal = interpolate<float>(buffer, floatVal, 0.5f);
vectorVal = interpolate<Vector>(buffer, vectorVal, 0.5f); Is there anyway to have compact calling code as well as a single defined function?"
707,"Basic folder tree with a list of strings. I am building up a basic folder tree with a list of strings in the form /root/node/node/node. Here is the basic algorithm I am using currently to build this collection and fill in my TreeGridView : // This method gets the list of folders and leaves, then trims out any folder paths
// that are already encompassed in a larger folder path, the idea is that it causes
// less work when adding the actual tree nodes (I may be wrong in this assumption)
List<string> BuildFinalList()
{
    // This list is a collection of root folder paths and leaf folder names
    // i.e. pair(""/root/node/node"", ""node""), pair(""/root/node"", ""node)
    List<KeyValuePair<string, string>> folders = GetListOfFolders();
    var paths = new List<string>();
    foreach(var folder in folders)
    {
        var leaf = folder.Value;
        var root = folder.Key;
        paths.Add(string.Concat(root, ""/"", leaf);
    }
    paths.Sort(_INVERSE_LENGTH_COMPARE); // this sorts the list longest to shortest

    // Iterate the computed paths from longest to shortest, if a path is not
    // encompassed by an existing path in the final list, add it to the
    // final list, otherwise just move to the next path
    var finalList = new List<string>();
    foreach(var path in paths)
    {
        bool found = false;
        foreach(var item in finalList)
        {
            if (item.StartsWith(path, StringComparison.Ordinal))
            {
                found = true;
                break;
            }
        }

        if (!found)
        {
            finalList.Add(path);
        }
    }
    return finalList;
 } Once I have the final list built, I then add the nodes to the tree (for simplification, I have removed the calls to end update and begin update of the tree that contains the root node): void FillTreeNodes(TreeNode root)
{
    var rootText = root.Text;
    var rootTextLength = rootText.Length;
    var nodeStrings = BuildFinalList();
    foreach(var nodeString in nodeStrings)
    {
        var roots = nodeString.Split(new char[] { '/' },
            StringSplitOptions.RemoveEmptyEntries);

        // The initial parent is the root node
        var parentNode = root;
        var sb = new StringBuilder(rootText, nodeString.Length + rootTextLength);
        for(int rootIndex = 0; rootIndex < roots.Length; rootIndex++)
        {
            // Build the node name
            var parentName = roots[rootIndex];
            sb.Append(""/"");
            sb.Append(parentName);
            var nodeName = sb.ToString();

            // Search for the node
            var index = parentNode.Nodes.IndexOfKey(nodeName);
            if (index == -1)
            {
                 // Node was not found, add it
                 var temp = new TreeNode(parentName, 1, 1);
                 temp.Name = nodeName;
                 parentNode.Nodes.Add(temp);
                 parentNode = temp;
            }
            else
            {
                 // Node was found, set that as parent and continue
                 parentNode = parentNode.Nodes[index];
            }
        }
    }
}"
708,"Interop: Return Parameter Method as Void. For interop purpose, this is something that I always do (C#): public static extern BigObject InteropWithCPlusPlus(); where BigObject is ( you guess it) a big object, it's not something small like int , or double . Now, is this a good practice? Or is it better to do the interop in this way: public static extern void InteropWithCPlusPlus(ref BigObject bigObject); I prefer the first one as it is easier to read and understand, but I afraid that it comes with performance penalty when the return object is a large, consuming memory one."
709,"One improvement that comes to mind is: bool found = false;
foreach(var item in finalList)
{
    if (item.StartsWith(path, StringComparison.Ordinal))
    {
        found = true;
        break;
    }
} Finding out whether a condition is met for any item in a collection is a common enough problem that LINQ has a method for that: Enumerable.Any . Using that the above code can be written as just: bool found = finalList.Any(item =>
    item.StartsWith(path,StringComparison.Ordinal); Which is both shorter and simpler."
710,"I don't think there would be too much of a difference. You have to use a reference anyway, because non-native types are stored as references. On x86 processors, returns are placed in register A, which is limited length. So, your C++ program would be either returning a reference to BigObject or modifying an existing instance of it. The area where I can see a performance hit is in memory allocation. If you are making that call, using the object, and then discarding it, it would be faster to create on single instance in your C# code and use that rather than allocating memory every time. You'll get diminishing returns for small numbers of calls, though; unless you have a couple thousand in a given program run, you probably won't notice the hit either way."
711,"There is a lot that needs to be taken into consideration when implementing a threaded work queue and I wouldn't recommend doing it manually unless you've got a really good reason because existing solutions are tested and reliable and without very specific design needs and some hardcore coding to go with it you'll likely wind up with something less efficient/powerful than the existing options. That said, as an exercise this can be a very educational challenge and I'll try to review it as such; production relevant notes are below. Technically it's just a matter of preference, but generally speaking, private member variables don't have capitalized first letters to help differentiate between public members and internal implementation details (typical .NET style is CamelCase for public members and pascalCase for fields/variables/parameters). It seems you are using the Complete event for two different meanings; you should make this two separate events. I wouldn't bother with RaiseCompleteEventIfQueueEmpty , instead just have an ItemComplete event and a QueueComplete event or something like that and always raise the events; if the caller doesn't care about one or the other (or either) they simply don't attach handlers to them. There are synchronization issues due to your locking strategy. Because your AddTask and CheckQueue methods use different lock objects it's possible to be adding to and accessing the queue at the same time. Because Queue is not inherently thread-safe this could cause issues. You're better off using a single lock between the two. If you're on framework 4.0 you may want to consider using ConcurrentQueue instead. BackgroundWorker contains provisions intended to make it easy to setup simple background tasks separate from a UI thread. BackgroundWorker is also a Component, which technically means you should Dispose of it when you're done (not from its own thread) although I don't think its implementation depends on it currently, that could change and you want to follow proper practices regarding IDisposable . It doesn't look like you need much of the convenience it offers and are mainly using it for the completion event, which you could implement yourself pretty easily. You would have more control and less overhead using Thread which should also keep you conscious of everything that's happening in something this low level. Here's a brief discussion on Stack Overflow . Also worth noting: BackgroundWorker uses BeginInvoke internally which executes the work on a ThreadPool thread. In regard to using ThreadStart , it's just a delegate like any other, but if you are wanting to parallelize work, it's likely that you will want to provide a context or workload to each thread. It's possible to work around this a few ways, including using closures when defining the delegate but that's messy and not suitable for all situations. The Thread class, which uses ThreadStart , also supports ParameterizedThreadStart . Since you're using Invoke you can probably accept any delegate and any number of parameters, perhaps like so: private readonly Queue<KeyValuePair<Delegate, object[]>> Queue = new Queue<KeyValuePair<Delegate, object[]>>();
private readonly object queueSync = new object();

public void AddTask<F>(F task, params object[] parameters) where F : Delegate
{
    lock (queueSync)
    {
        if (WorkingThreads.Count == ThreadsMaxCount)
        {
            Queue.Enqueue(new KeyValuePair<Delegate, object[]>(task, parameters));
        }
        else
        {
            StartThread(task, parameters);
        }
    }
}

private void StartThread(Delegate task, object[] parameters)
{
    WorkingThreads.Add(task);
    BackgroundWorker thread = new BackgroundWorker();
    thread.DoWork += delegate { task.Invoke(parameters); };
    thread.RunWorkerCompleted += delegate { ThreadCompleted(task); };
    thread.RunWorkerAsync();
} Warnings: this code doesn't take into account my other suggestions and was written ad-hoc in the text editor here so it has not been compiled or tested; the idea is all I'm trying to demonstrate. There are several better ways to make use of generics or the delegate choice in general and you would probably also want to provide the context data in your completion event. You should probably provide a little more information in your completion event so that the attached code can see what completed (consider one event handler can be used for many threads and even many pools). Use an object that inherits from EventArgs to contain your task (and the parameters if you take that bit of advice). In regard to Darragh's answer and your comments there: if you would like to leverage the ThreadPool but need to know when work is complete you can use Task Parallel Library which now ships with 4.0 to use Task objects which by default are scheduled using the ThreadPool . Alternatively, if your tasks will be very long running and you still want to run on your own threads or specify your own concurrency regulations you can implement a Task Scheduler and continue to leverage the existing patterns/classes. This will promote usability and maintenance and if at some point you wanted to use a different scheduling mechanism it would require minimal change. It should be noted (as can be see in the documentation above) that there is already support for long running tasks not using the ThreadPool even in the default scheduler. The following free ""books"" have a lot of good information, both on the new parallelism extensions to the framework (TPL, PLINQ, Parallel.For, etc.) as well as information on synchronization primitives and the raw patterns used to manage multi-threaded workloads: Patterns for Parallel Programming: Understanding and Applying Parallel Patterns with the .NET Framework 4 Parallel Programming with Microsoft .NET Threading in C# Most of these contain very similar information, but each has their own style as well as different juicy nuggets of wisdom."
712,We use Smart Thread Pool .  It is simple and tested.  You should be able to implement your requirements with less effort and more confidence by building on it rather than implementing your own.
713,"I know you have already marked one of the answers as the answer, and rightly so, it is very complete and helpful. I am adding this answer as well as no one mentioned this and it is part of your first question: 1. Do those locks make sense? Should there be other locks as well? In regards to the second half of that, Should there be other locks as well. Yes. You are using a HashSet to keep track of working threads. You are adding to, removing from, and getting the count of this set without any locking. That is a disaster waiting to happen. You need to mutex around your reads and writes to the HashSet . As has already been mentioned, if you can use .Net 4.0 then there is a ConcurrentBag collection that you can use. Otherwise you need to add another lock object and lock around access to your HashSet ."
714,"Path finding function. Could this be made more efficient, and/or simpler?  It's a path-finding function.  It seems to work, but do you see any potential cases where it could fail? // Searches for a path from [start] to [end].
// Predicate [passable] should take an std::pair<int,int> and return true if the node is passable.
// Nodes in path are stored in [out].
// Return value is a pair.  With first being a bool to indicate if a path was found,
// and second an iterator for the end of the path
template<typename OutputIterator, typename PassablePR>
std::pair<bool, OutputIterator> ShortestPath(std::pair<int,int> start, std::pair<int,int> end, PassablePR passable, OutputIterator out)
{
    typedef std::pair<int,int> node;

    std::pair<bool, OutputIterator> ret(false, out);

    // queue of nodes expanding out from the starting point
    std::queue<node> q;

    // keep track of visited nodes so we don't visit them twice
    std::vector<node> visited_nodes;
    auto visited = [&visited_nodes] (node n) {
        return std::find(visited_nodes.begin(), visited_nodes.end(), n) != visited_nodes.end();
    };

    // link child nodes to parents
    std::map<node,node> path_tree;

    q.push(start);
    while(q.empty() == false)
    {
        auto parent = q.front();
        if(passable(parent) && !visited(parent))
        {
            visited_nodes.push_back(parent);

            if(parent == end)
            {
                ret.first = true;
                std::vector<std::pair<int,int>> path;
                auto i = path_tree.find(parent);
                while(i != path_tree.end())
                {
                    path.push_back(i->first);
                    parent = i->second;
                    path_tree.erase(i);
                    i = path_tree.find(parent);
                }

                // path is currently from end to start, so reverse it
                std::copy(path.rbegin(), path.rend(), ret.second);

                return ret;
            }

            auto child(parent);

            // node to the left         
            --child.first;
            q.push(child);          
            if(path_tree.find(child) == path_tree.end())
                path_tree[child] = parent;

            // right
            child.first += 2;
            q.push(child);
            if(path_tree.find(child) == path_tree.end())
                path_tree[child] = parent;

            // above
            --child.first;
            --child.second;
            q.push(child);
            if(path_tree.find(child) == path_tree.end())
                path_tree[child] = parent;

            // and below
            child.second += 2;
            q.push(child);
            if(path_tree.find(child) == path_tree.end())
                path_tree[child] = parent;
        }
        q.pop();
    }
    return ret;
} Testing it out: int main()
{
    int grid[5][5] =
    { { 0, 1, 0, 0, 0 },
      { 0, 0, 0, 1, 0 },
      { 0, 1, 0, 1, 0 },
      { 0, 1, 0, 1, 0 },
      { 0, 0, 0, 1, 0 } };

    std::vector<std::pair<int,int>> path;

    auto ret = ShortestPath(std::pair<int,int>(0,0), std::pair<int,int>(4,4),
        [&grid] (std::pair<int,int> n) -> bool {
            if(ben::WithinBoundsInclusive(std::pair<int,int>(0,0), std::pair<int,int>(4,4), n) == false)
                return false;
            return grid[n.first][n.second] == 0;
        },
        std::back_inserter(path));

    if(ret.first)
    {
        std::cout << ""Path found\n"";

        std::for_each(path.begin(), path.end(),
            [](std::pair<int,int> n) {
                std::cout << '(' << n.first << ',' << n.second << "")\n"";
            });
    }
    else
        std::cout << ""Path not found\n"";
}"
715,"If I understand your question correctly, using the RefTrait policy in your second solution is acceptable but you want to avoid specifying template parameters from the client code that's using it. If so then perhaps one possible idea is to create an inline wrapper function around your interpolate for marshaling the call so type deduction happens automatically: template <>
struct RefTrait<Vector> { typedef const Vector &Ref; };

template <typename T>
T interpolateImp(Buffer& buffer, typename RefTrait<T>::Ref currentValue, const float prop)
{
    T bufferValue;
    buffer.readT(&bufferValue);
    return currentValue + (bufferValue-currentValue)*prop;
}

template <typename T>
inline T interpolate(Buffer& buffer, T &currentValue, const float prop)
{
    return interpolateImp<T>(buffer, currentValue, prop);
} It doesn't avoid the overloading but it'll at least help with the automatic type-deduction when you try to use it: floatVal  = interpolate(buffer, floatVal, 0.5f);
vectorVal = interpolate(buffer, vectorVal, 0.5f); And the interpolate wrapper should get optimized away into just a interpolateImp call when the compiler inlines it. But I would recommend taking a look at what Mike said first and find out really how much of a performance impact this is. If afterwards you still decide to pursue this route there are two things to keep in mind. Caveat with using your current RefTrait . At the moment, T bufferValue; in your interpolate creates a locate T variable but doesn't initialize it. This poses a problem if T = const Vector&. Furthermore, it also means you're unable to change this T object later on should you need to. One possible way to fix it is to also add a valueType to your RefTraits policy. You would then use typename T::valueType to create any locates you would need inside interpolate . Using templates in this matter will reduce code clarity unless you're extra dilgent. The syntax has a matter of exploding in your face and could be difficult to get right especially if you're trying to cover the funny corner cases. Be sure to weight the tradeoffs. Edit: After thinking about my above code some more, I noticed it could be simplified a bit by just keeping the syntax the same as the OP. I've updated mines to reflect that."
716,"Branch-and-bound based IP solver. I've written this rather nave branch-and-bound based IP solver. Are there any obvious JavaScript optimisations that could speed it up?  I am not looking for asymptotically better algorithms, just simple speed optimisations effective on problem sizes with 5-6 variables and minSize values up to about 500. /** Represents a simple 1-dimensional 
 * IP (Integer Programming) problem.
 * @constructor
 * @param {Array<size: Number, cost: Number>} priceList
 *   List of costs for given sizes.
 *   Note that this list will be sorted by this constructor.
 */
function Prices (priceList) {
  this.prices = priceList;
  this.prices.sort (PriceCompare);
  this.minimise = PricesMinimise;
  this.pricesBB = PricesBB;
}

/** Solves the simple 1-dimensional IP problem:
 * Minimise Sum_i cost_i * x_i
 *    where Sum_i size_i * x_i >= minSize
 *      and cost_i, size_i are positive reals,
 *      and x_i is a nonnegative integer. (i = 0..prices.length - 1)
 *
 * cost_i = this.prices[i].cost and size_i = this.prices[i].size.
 *
 * @param {Number} minSize  The minimum size that must be supplied.
 * @return {xs: Array, cost: Number}  [x_0, x_1, ...] and total cost.
 */
function PricesMinimise (minSize) {
  this.minSize = minSize;
  this.incumbent = Number.POSITIVE_INFINITY;
  this.maxCost = Number.POSITIVE_INFINITY;
  var xsCost = this.pricesBB (0, 0, 0, 0);
  xsCost.xs.reverse ();
  return xsCost;
}

/** Solves a sub problem using only price list elements with
 * index >= i.  It uses instance fields
 * minSize: the minimum required size sum,
 * incumbent: lowest full solution cost seen so far,
 * maxCost: upper bound on full solution cost.
 * @param {Number} i        Minimum price list index.
 * @param {Number} sizeSum  Size sum already selected.
 * @param {Number} costSum  Cost sum already spent.
 * @param {Number} minCost  Lower bound on full solution cost in this
 *                          subtree.
 * @return {xs: Array, cost: Number}  A minimum candidate
 *   solution, or null if none better than the incumbent were
 *   found.
 */
function PricesBB (i, sizeSum, costSum, minCost) {
  var price = this.prices [i];
  var size = price.size;
  var cost = price.cost;
  var xReal = (this.minSize - sizeSum) / size;
  var x = Math.ceil (xReal);
  var localCostSum;
  if (size == Number.POSITIVE_INFINITY) {
    x = 1;
    size = 0; // Avoid NaN in recursive call
    localCostSum = cost;
  } else {
    localCostSum = costSum + cost * x;
    var localMinCost = costSum + cost * xReal;
    minCost = Math.max (minCost, localMinCost);
    if (localMinCost >= this.incumbent) return null;
  }
  this.maxCost = Math.min (this.maxCost, localCostSum);
  var localMin = {'xs': [x], 'cost': localCostSum};
  if (localCostSum < this.incumbent) this.incumbent = localCostSum;
  if (localCostSum == minCost) return localMin;
  if (i < this.prices.length - 1)
    for (x--; x >= 0; x--) {
      var xsCost =
        this.pricesBB (i + 1, sizeSum + size * x, costSum + cost * x, minCost);
      if (xsCost == null) continue;
      xsCost.xs.push (x);
      localMin = xsCost;
      if (localMin.cost == minCost) return localMin;
    }
  if (localMin.cost == this.incumbent)
    return localMin;
  else
    return null;
}"
719,"Generalized PHP function for editing data in a table. I've got some legacy code which I need to maintain and its got this function which works perfectly fine , but I'm trying to understand if it is working using acceptable coding practices or not... I am trying to understand if it is safe and secure to operate the site with the function as-it-is. The function would be called as: $this->editData('users',""activation_key"",$_GET['key']); The actual function (unedited): function editData($table_name,$fldname,$fldval,$other='',$lang_flag=0)
{

    $link = $this->my_connect();
    $this->my_select_db($this->DATABASE_NAME,$link);
$arr_types =  array(""TR_"", ""TN_"", ""TREF_"", ""PHR_"", ""PHN_"", ""IR_"", ""IN_"", ""MR_"", ""MN_"", ""TNEF_"", ""TRC_"", ""TNC_"", ""TRFN_"", ""TNFN_"",""TNURL_"",""TRURL_"");
    if (!empty($GLOBALS[""HTTP_POST_VARS""])) {
        reset($GLOBALS[""HTTP_POST_VARS""]);
        while (list($k,$v)=each($GLOBALS[""HTTP_POST_VARS""])) 
        {

            for($p=0;$p<count($arr_types);$p++)
            {
                if(stristr($k,$arr_types[$p])!="""")
                {
                    $k = str_replace($arr_types[$p],"""",$k);
                }
            }
            ${strtolower($k)}=$v;
            //echo ""<br> k =$k -- v = $v"";
        }   
    }
    if (!empty($_POST)) {
        reset($_POST);
        while (list($k,$v)=each($_POST)) 
        {

            for($p=0;$p < count($arr_types);$p++)
            {
                if(stristr($k,$arr_types[$p])!="""")
                {
                    $k = str_replace($arr_types[$p],"""",$k);
                }
            }
            ${strtolower($k)}=$v;
            //echo ""<br> k =$k -- v = $v"";
        }   
    }
    if (!empty($GLOBALS[""HTTP_GET_VARS""])) {
        reset($GLOBALS[""HTTP_GET_VARS""]);
        while (list($k,$v)=each($GLOBALS[""HTTP_GET_VARS""])) 
        {

            for($p=0;$p < count($arr_types);$p++)
            {
                if(stristr($k,$arr_types[$p])!="""")
                {
                    $k = str_replace($arr_types[$p],"""",$k);
                }
            }
            ${strtolower($k)}=$v;
            //echo ""<br> k =$k -- v = $v"";
        }   
    }
    if (!empty($_GET)) {
        reset($_GET);
        while (list($k,$v)=each($_GET)) 
        {

            for($p=0;$p < count($arr_types);$p++)
            {
                if(stristr($k,$arr_types[$p])!="""")
                {
                    $k = str_replace($arr_types[$p],"""",$k);
                }
            }
            ${strtolower($k)}=$v;
            //echo ""<br> k =$k -- v = $v"";
        }   
    }
     $result=$this->my_query(""show fields from $table_name"",$link);
    $query=""update $table_name SET   "";
     while ($a_row = $this->my_fetch_array($result)) {
        $field=""$a_row[Field]"";


            if($field!=$fldname)
            {
                if(isset($$field))
                {
                       $query.=""`"".$field.""`="";

                       $query.=""'"".$this->removeQuotes($$field,$lang_flag).""' , "";
                }
                else
                {
                    if(isset($GLOBALS[""$field""]))
                    {
                        //echo ""<br> var "".$GLOBALS[""$field""];
                        $query.=""`"".$field.""`="";
                        $query.=""'"".$this->removeQuotes($GLOBALS[""$field""],$lang_flag).""' , "";

                    }
                }
            }
     }
     $query = substr($query,0,-2);
    $query.="" where `$fldname`='$fldval' $other""; 
    $query  ;
    //echo $query;
     $result=$this->my_query($query,$link);
     $this->my_free_result($result);
     $this->my_close($link);
     return $result;
}"
720,"Review of object oriented design for a sample interview question. I'm going over the interview questions from "" Cracking the Coding Interview "" and one of the chapters (Chapter 7) deals with Object Oriented Design (OOD). The requirements for one of the problems are as follows: Imagine you have a call center with
  three levels of employees: fresher, 
  technical lead (TL), product manager
  (PM). There can be multiple employees,
  but only one TL or PM. An incoming
  telephone call must be allocated to a 
  fresher who is free. If a fresher
  cant handle the call, he or she must 
  escalate the call to technical lead.
  If the TL is not free or not able to 
  handle it, then the call should be
  escalated to PM. Design the classes
  and  data structures for this problem.
  Implement a method getCallHandler(). I've written a solution in C#, it was not compiled (suggested by the author of the book) and it is currently not multithreaded. My solution is a bit long, but it should be really simple to understand. Based on my understanding of the problem, I've established a ""chain of command"" where each employee knows who his/her superior is. Calls get handled in the following manner: If a fresher is given a call which he/she cannot handle, then the fresher escalates the call to his/her superior: a tech lead. If there are no free freshers, then the tech lead automatically gets the call. If the tech lead is busy or cannot service the call, then he/she escalates the call to the product manager. If the product manager (PM) is busy, then the call gets queued on the PM's queue and dequeued once their current call is serviced. NOTE: multithreading will be added in a later revision, so please ignore any multithreading issues. enum EStatus{ HANDLING, ESCALATED, QUEUED }
enum ERank{ FRESHER, TECH_LEAD, PROD_MANAGER }

abstract class Employee
{
    public ERank Rank{get; private set;}

    public Employee(ERank rank)
    {
        Rank = rank;
    }

    public abstract EStatus ServiceCall(Call call);
}

class Fresher:Employee
{
    private TechLead _superior;

    public Fresher(TechLead superior):base(ERank.FRESHER)
    {
        _superior = superior;
    }

    public override EStatus ServiceCall(Call call)
    {
        if(CanService(call))
        {
            call.Service(this);
            return EStatus.HANDLING;
        }
        else
        {
            _superior.ServiceCall(call);
            return EStatus.ESCALATED;
        }
    }

    private bool CanService(Call call)
    {
        // some logic to determine if the call can be serviced 
    }
}

class TechLead:Employee
{
    private Call _activeCall;
    private ProductManager _superior;

    public TechLead(ProductManager superior):base(ERank.TECH_LEAD)
    {
        _activeCall = null;
        _superior = superior;
    }

    public override EStatus ServiceCall(Call call)
    {
        if(_activeCall == null && CanService(call))
        {
            HandleCall(call);
            return EStatus.HANDLING;
        }
        else
        {
            _superior.ServiceCall(call);
            return EStatus.ESCALATED;
        }
    }

    private bool CanService(Call call)
    {
        // some logic to determine if the call can be serviced 
    }

    private HandleCall(Call call)
    {
        _activeCall = call;
        call.OnCallServiced += new Call.CallServicedDelegate(OnCallServiced);
        call.Service(this);
    }

    private void OnCallServiced(Call call)
    {
        if(call!=_activeCall)
        {
            // TODO: this call was never accepted
        }
        else
        {
            _activeCall = null;
        }
    }
}

class ProductManager:Employee
{
    private Call _activeCall;
    private Queue<Call> _callQueue;

    public ProductManager():base(ERank.PROD_MANAGER)
    {
        _activeCall = null;
        _callQueue = new Queue<Call>();
    }

    public override EStatus ServiceCall(Call call)
    {
        if(_activeCall == null)
        {
            HandleCall(call);
            return EStatus.HANDLING;
        }
        else
        {
            _callQueue.Enqueue(call);
            return EStatus.QUEUED;
        }
    }

    private HandleCall(Call call)
    {
        _activeCall = call;
        call.OnCallServiced += new Call.CallServicedDelegate(OnCallServiced);
        call.Service(this);
    }

    private void OnCallServiced(Call call)
    {
        if(call!=_activeCall)
        {
            // TODO: this call was never accepted
        }
        else
        {
            if(_callQueue.Count==0)
            {
                _activeCall = null;
            }
            else
            {
                HandleCall(_callQueue.Dequeue());
            }
        }
    }
}

class Call
{
    public delegate void CallServicedDelegate(Call call);
    public event CallServicedDelegate OnCallServiced;

    public Employee CallHandler{get; private set;}

    public Call()
    {
        CallHandler = null;
    }

    public void Service(Employee callHandler)
    {
        CallHandler = callHandler;

        // Invoke the notification when the call is complete
        OnCallServiced(this);
    }

    public void Disconnect()
    {
        // Disconnect the call
    }
}

class CallCenter
{
    private bool _running;
    private BlockingQueue<Call> _callQueue;
    private Queue<Employee> _freeFreshers;
    private List<Employee> _busyFreshers;
    private readonly TechLead _techLead;

    public CallCenter(int numEmployees)
    {
        // create the tech lead and a supervising product manager
        _techLead = TechLead(new ProductManager());

        _callQueue = new BlockingQueue<Call>();
        _freeFreshers = new Queue<Employee>();
        _busyFreshers = new List<Employee>();

        for(int i = 0; i < numEmployees; i++)
        {
            _freeFreshers.Enqueue(new Fresher(_techLead));
        }
    }

    public void AcceptCall(Call call)
    {
        _callQueue.Enqueue(call);
    }

    // Assuming that threading will be handled
    public void StartCallService()
    {
        _running = true;

        while(_running)
        {
            Call call = _callQueue.Dequeue();

            // Subscribe for the on call serviced delegate
            call.OnCallServiced += new Call.CallServicedDelegate(OnCallServiced);

            if(_freeFreshers.Count>0)
            {
                // Block until a fresher is available
                 Employee e = _freeFreshers.Dequeue();

                 // Assign the call to a free fresher
                switch(e.ServiceCall(call))
                {
                    case EStatus.HANDLING:
                        _busyFreshers.Add(e);
                        break;
                    case EStatus.ESCALATED:
                        _freeFreshers.Enqueue(e);
                        break;
                    case EStatus.QUEUED:
                    default:
                        break;
                }
            }
            else
            {
                _techLead.ServiceCall(call);
            }
        }
    }

    // Assuming that threading will be handled
    public void StopCallService()
    {
        _running = false;
    }

    private void OnCallServiced(Call call)
    {
        switch(call.CallHandler.Rank)
        {
            case ERank.FRESHER:
                _busyFreshers.Remove(call.CallHandler);
                _freeFreshers.Enqueue(call.CallHandler);
                break;
            case ERank.TECH_LEAD:
            case ERank.PROD_MANAGER:
            default:
                // nothing to do if it's a tech lead or prod manager
                break;
        }
    }
} I was hoping to get some feedback since this question came from a book, there are many possible OOD solutions and I don't have an actual interviewer to comment on the solution. In addition, I do have the author's solution and I can post it if necessary. Does this seem like a decent solution to the problem as stated? Is there something that I should definitely improve?"
721,"Automatic translation of forms. I want my application to support multiple UI-languages (aka i18n). To do so, I have built the static class below, to automatically translate the form and all its contents to the desired language. It looks into a resource file for the user's Culture, and replaces the .Text properties of the controls with the strings it finds there, or falls-back to the initial strings, which is English. Usage is calling TranslateForm(this) from each form's constructor. Two concerns about my code: * The overloading of the ""Translate"" method. I didn't find any way to overcome this. * The special handling of different controls, which seems unnecessary. I'm not a professional programmer, so any correction / enhancement / fix to my code is more than welcomed! using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
using System.Globalization;
using System.Resources;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Collections;

namespace blahblah
{
    static class TranslationHelper
    {
        static private ResourceManager rm = null;

        static private CultureInfo default_ci = null;

        static private CultureInfo lang_ci = null;

        /// <summary>
        /// translate control into the specific lang, or leave it untranslated if no translation string found
        /// </summary>
        /// <param name=""ctrl""></param>
        /// <param name=""lang""></param>
        static private void Translate(Control ctrl, string lang)
        {
            string str = TranslateString(ctrl.Name, lang);
            if (str != null)
                ctrl.Text = str;
        }

        static private void Translate(ToolStripMenuItem o, string lang)
        {
            string str = TranslateString(o.Name, lang);
            if (str != null)
                o.Text = str;
        }

        static private void Translate(ToolStripItem o, string lang)
        {
            string str = TranslateString(o.Name, lang);
            if (str != null)
                o.Text = str;
        }

        static private void Translate(Form o, string lang)
        {
            string str = TranslateString(o.Name, lang);
            if (str != null)
                o.Text = str;
        }

        /// <summary>
        /// returns the <c>name</c> string from the <c>lang</c> resource
        /// </summary>
        /// <param name=""name"">string/key name</param>
        /// <param name=""lang"">the language to translate to</param>
        /// <returns>a translated string for <c>name</c></returns>
        static public string TranslateString(string name, string lang)
        {
            if (lang_ci == null || !lang_ci.TwoLetterISOLanguageName.Equals(lang))
                lang_ci = new CultureInfo(lang);

            try
            {
                return rm.GetString(name, lang_ci);
            }
            catch (Exception)
            {
                // no translation yet
                try
                {
                    return rm.GetString(name, default_ci);
                }
                catch (Exception)
                {
                    return null;
                    //MessageBox.Show(ex.Message.ToString(), name);
                    //System.Console.WriteLine(ex.Message.ToString());
                }
            }
        }

        static public void TranslateForm(string lang, Form parent)
        {
            if (rm == null)
                rm = new ResourceManager(""etimet.i18nResources.i18n"", Assembly.GetExecutingAssembly(), null);
            if (default_ci == null)
                default_ci = new CultureInfo(""en"");

            // handle direction
            if (Program.conf.CurrentLang.Equals(""he"") || Program.conf.CurrentLang.Equals(""ar"") || Program.conf.CurrentLang.Equals(""fa""))
            {
                parent.RightToLeft = RightToLeft.Yes;
            }
            else
            {
                parent.RightToLeft = RightToLeft.No;
            }

            // translate the form itself
            Translate(parent, lang);

            // translate all the children controls, recursively
            Control.ControlCollection c = parent.Controls;
            foreach (Control o in c)
            {
                // special handling for the menu
                if (o.GetType() == typeof(MenuStrip))
                {
                    foreach (ToolStripMenuItem it in ((MenuStrip)o).Items)
                    {
                        Translate(it, lang);
                        //MessageBox.Show(it.Text);
                        foreach (ToolStripItem f in it.DropDownItems)
                        {
                            if (typeof(ToolStripSeparator) != f.GetType())
                                Translate(f, lang);
                        }
                    }
                }
                RecursiveTranslateCtrl(lang, o);
            }
        }

        static private void RecursiveTranslateCtrl(string lang, Control ctrl)
        {
            Translate(ctrl, lang);

            foreach (Control c in ctrl.Controls)
            {
                RecursiveTranslateCtrl(lang, c);
            }
        }
    }
}"
723,"Simply put, this code fails a lot best practices also contains massive security issues.
Suggestion to improve for best practices: $GLOBALS[""HTTP_POST_VARS""] is deprecated in favor of $_POST So you looping over $GLOBALS[""HTTP_POST_VARS""] and $_POST is redundant and bad mojo. Just looping over $_POST will accomplish the same thing. Same goes for $GLOBALS[""HTTP_GET_VARS""] and $_GET . You should be passing in the $link object as parameter. Since there is no code intended to change the database connection conditionally (the connect parameters are always the same). This prevents your scripts creating multiple database connection resources and destroying them (more memory and time consuming). Also passing in the database resource as parameter to the function is a type of dependency injection which makes your code testable should you want to in the future. Since this also appears to be in a class, consider creating the database connection in the __construct and use that single instance. Using sessions in favor of $GLOBALS Pretty much any use of $GLOBALS is considered bad practice. I'm sure there are a few exceptions to the rule. But there you should definitely not be using is for storing data in a scopeless fashion. This is what sessions are for. removeQuotes() is never called on $fldname or $fldval As you can imagine this a serious security issue leaving your script open to SQL Injection attacks. Use mysql_real_escape_string in favor of home made sanitising functions i.e. removeQuotes() There is a lot more to safe escaping query parameters that remove slashes. And in my experience home made sanitising functions often quietly fail when you have mixed string and number parameters. As a matter of readability and style I would make to following suggestions, I know these are subject matters but there are common ways of doing things. Substitute the use of string concatenation $query.=""`"".$field.""`="";
$query.=""'"".$this->removeQuotes($$field,$lang_flag).""' , "";
... more concatenation ...
$query = substr($query,0,-2); for array joining $queryParams[] = ""`"".$field.""`='"".$this->removeQuotes($$field,$lang_flag).""'"";
... more array filling ...
$query = join(',', $queryParams); General WTFs This is doing nothing at all $query  ; And code that does nothing is very bad mojo. Call count() once. This is not really an issue, doing something like this for($p=0;$p In actual fact calls count() on every iteration of the loop, even though the return value will never change. It causes the interpreter to do more work than necessary, although I suspect during compilation to byte code this would be optimised automatically. This could be substituted for: // only call count() once
$count = count($arr_types);
for($p=0;$p<$count;$p++) Don't nest unnecessarily. Don't nest conditionals (if/else/switch) and loop(while/for) unnecessarily. It makes for messier code, code that's harder to read and follow mentally, and importantly difficult to test. if(isset($$field))
{
     $query.=""`"".$field.""`="";

     $query.=""'"".$this->removeQuotes($$field,$lang_flag).""' , "";
 }
 else
 {
     if(isset($GLOBALS[""$field""]))
     {
         $query.=""`"".$field.""`="";
         $query.=""'"".$this->removeQuotes($GLOBALS[""$field""],$lang_flag).""' , "";
     }
 } The above code is exactly equal to the following, notice less nesting. if(isset($$field))
{
     $query.=""`"".$field.""`="";

     $query.=""'"".$this->removeQuotes($$field,$lang_flag).""' , "";
 }
 else if(isset($GLOBALS[""$field""]))
 {
         $query.=""`"".$field.""`="";
         $query.=""'"".$this->removeQuotes($GLOBALS[""$field""],$lang_flag).""' , "";
 } Personal preference This is completely subjective, but something to think about. if(stristr($k,$arr_types[$p])!="""") equal to if(stristr($k,$arr_types[$p]) == true) equal to if(stristr($k,$arr_types[$p])) Considering the above, this: while (list($k,$v)=each($_GET)) 
{
    for($p=0;$p < count($arr_types);$p++)
    {
        if(stristr($k,$arr_types[$p])!="""")
        {
            $k = str_replace($arr_types[$p],"""",$k);
        }
    }
    ${strtolower($k)}=$v;
} Is exactly the same as: while (list($k,$v)=each($_GET)) 
{
    $count = count($arr_types);
    for($p=0; $p<$count; $p++);
    {
        $k = str_replace($arr_types[$p],"""",$k);
    }
    ${strtolower($k)}=$v;
} Which would you rather test and/or work with?"
725,"I'm assuming you're using PHP5, in which case do you have a good reason not to use existing libraries like Doctrine2 DBAL the defacto standard for database abstraction, or Pear_MDB2 ? In this day and age of open source libraries, rolling your own home made (and possible error prone class) to solve already thoroughly solved problems is doing yourself and the PHP community at large more harm than good don't you think? These libraries are well documented (not so much in the case of Pear_MDB2), thoroughly tested and have 1000s of hours of production use in a myriad of environments. And shoudl you find an issue or have a suggestion you'd be helping the PHP community. At the very least have a look at these fantastic projects, you might learn something and possible even answer some of your own questions should you insist on doing your own way. Admittedly Pear_MDB2 is a bit behind the times now, but it does a solid job"
726,"I'm assuming from looking the code you're using Zend Framework. I've solved similar issues in Zend and Symfony using php partials. You could create a partial _list_item.phtml <li class=""ui-content"">
    <div style=""float: left; width: 200px;"">
        <span class=""ui-icon ui-icon-trash ui-button ui-state-active"" style=""float: left; margin:3px;""></span>
        <input name=""dates[]"" class=""datebox"" style=""width: 120px;"" type=""text"" value=""<?php echo $date ?>"" />
    </div>
    <div style=""padding-left: 200px;"">
        <input name=""contents[]"" type=""text"" value=""<?php echo $message ?>"" style=""width: 100%;"" />
    </div>
</li> Then in your view: <?php foreach ($this->events as $event): ?>
    <?php echo $this->partial('list_item.phtml', array(
        'date' => $event->GetDate()->format('Y-m-d'),
        'message' => $event->GetMessage(),
    )); ?>
<?php endforeach; ?> Then for your javascript: function AddNewEvent()
{
    var today, html, temp;
    // call str_replace because javascript doesn't like new lines in strings
    html = '<?php echo str_replace(PHP_EOL, ""\n"", $this->partial('list_item.phtml', array(
        'date' => $event->GetDate()->format('Y-m-d'),
        'message' => '',
    ))); ?>';
    $(this).after(html);
    temp = $(this).next();
    CreateDateboxes($('.datebox', temp));
    $('.ui-icon-trash', temp).click(RemoveParent);
} Viola! No template duplication because the affected code is in a partial. No excess javscript templating libraries, although if this kind of thing is prevalent in your application I'd suggest some refactoring and implementing such a templating library. This approach will have the least impact on your work flow, little to no learning curve, and a short investment in development time for big decrease duplication (bosses love hearing that kind of thing)."
729,"You can avoid the overloading by using the common superclass on ToolStripItem : static private void Translate(ToolStripItem o, string lang)
{
   string str = TranslateString(o.Name, lang);
   if (str != null)
      c.Text = str;
} Unfortunately that only works for those two component types since it looks like Component does not have the Name and Text attributes."
730,"In short, in my opinion, I think you've done too much. It seems like your design has gone beyond a design for the initial interview question and into an exercise of your own. However , I don't have the book you're reading, so you may be going off more than just that snippet in your question. Based on the principle: Do the simplest thing that could
  possibly work. The basics I pulled from that question were: We need a way to represent the three different kinds of employees. We need a way of representing a call. We need a way of choosing an employee to handle a call (the getCallHandler method). i.e. I think the question is just after an implementation of GetCallHandler and some basic definitions of the types involved. I came up with the following: public class Call
{
    // TODO: Implement Call.
}

public enum EmployeePosition
{
    Fresher,
    TechnicalLead,
    ProductManager
}

public class CallCentre
{
    private IList<IEmployee> employees;

    public IEmployee GetCallHandler(Call call)
    {
        return employees.Where(e => e.CanHandle(call))
                        .OrderBy(e => e.Position)
                        .FirstOrDefault();
    }

    public CallCentre(IList<IEmployee> employees)
    {
        if (employees == null)
        {
            throw new ArgumentNullException(""employees"");
        }

        this.employees = employees;
    }
}

public interface IEmployee
{
    EmployeePosition Position { get; }
    Boolean CanHandle(Call call);
}

public class Fresher : IEmployee
{
    public EmployeePosition Position { get { return EmployeePosition.Fresher; } }

    public Boolean CanHandle(Call call)
    {
        // TODO: Logic for handling a call.
    }
}

// Similar implementations of IEmployee for TechnicalLead and ProductManager. That would be the starting point based on what the question says. After this would usually be a period of interaction between interviewee and interviewer(s) in which assumptions could be addressed and the design discussed/updated with more detail, such as employees being in a busy state etc. I think your design is a step beyond that. The combination of class and enumeration for the different employee types is something we both went for. However, I chose an interface over a base class. I don't think your base class provides a lot of value - just code to assign a Rank property. My proposal has the benefit that someone's not going to break implementation for some employees inadvertantly by altering the base class. The interface contains no implmentation. Using an interface also allows the employee classes to use a different base class in the future if needs be. One point for further discussion might be where it states: If a fresher cant handle the call, he
  or she must escalate the call to
  technical lead. This may suggest that they want a fresher object to communicate directly with their superior like in your design (as opposed to my implementation, where employees don't need to know each other even exist - similar to many workplaces!). This could be clarified in the interview. However, I prefer my design because of the looser coupling between employees. As far as multithreading goes, I'd expect quite a bit of discussion on how it might be implemented potential issues with different threading models potential bottlenecks typical call volume before it got added to any code. But like I say, it does seem like your design is more than just an answer to the interview question."
731,"Avoiding sub-queries in named scopes. I use named scopes all over the place. When I have a named scope that deals with two different tables, I tend to query the second table in a sub-query. That way, if I mix and match with other tables I don't need to worry about reusing a table alias or having ambiguous column names that only appear in bizarre scenarios. For example, suppose I have a posts table that is one-to-many related to a tags table. I might add a with_tags scope on my Post model like this: named_scope :with_tags, lambda { |tags|
  tags = [tags] if tags.kind_of? String
  {:conditions => [""id IN (SELECT post_id FROM tags WHERE name IN (?))"", tags]}
} However, that doesn't seem ideal. Many databases can use a join more efficiently than they can use a sub-query. A query that looks like this might perform better: SELECT DISTINCT posts.* FROM posts JOIN tags ON posts.id = tags.post_id WHERE tags.name IN (?) How do other people do this? Do you use the :include/:join parameters cleverly to know what the aliases ActiveRecord will use?"
732,"Implementation of GroupBy<TKey, TElement> in .NET. I've implemented the GroupBy extension method for IEnumerable<T> type as an excersise to deep a little more into LINQ . What do you think about the source code? Code: static IEnumerable<IGrouping<TKey,TElement>> GroupBy<TKey,TElement>(this IEnumerable<TElement> source, Func<TElement,TKey> keySelector)
{
    //Grouping elements in the dictionary according to the criteria
    var dict = new Dictionary<TKey, List<TElement>>();

    //Filling the dictionary. It will contain: [Key -> List<Values>]
    foreach (var x in source)
    {
        var key = keySelector(x);
        if (dict.Keys.Contains(key))
        {
            dict[key].Add(x);
        }
        else
        {
            dict.Add(key, new List<TElement> { x });
        }
    }

    //For each group...
    foreach (var x in dict)
    {
        yield return new Grouping<TKey, TElement>(x.Key, x.Value);
    }
}

class Grouping<TKey, TElement> : IGrouping<TKey, TElement>
{
    private TKey _key;
    private IEnumerable<TElement> _elements;

    public Grouping(TKey key, IEnumerable<TElement> elements)
    {
        _key = key;
        _elements = elements;
    }

    public IEnumerator<TElement> GetEnumerator()
    {
        return _elements.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public TKey Key
    {
        get { return _key; }
    }
}"
733,"It looks like it may be a good idea to provide the solution from the book just to establish a frame of reference: public class CallHandler 
{
    static final int LEVELS = 3; // we have 3 levels of employees
    static final int NUM_FRESHERS = 5; // we have 5 freshers
    ArrayList<Employee>[] employeeLevels = new ArrayList[LEVELS];

    // queues for each calls rank
    Queue<Call>[] callQueues = new LinkedList[LEVELS];

    public CallHandler() { ... }

    Employee getCallHandler(Call call) 
    {
        for (int level = call.rank; level < LEVELS - 1; level++) 
        {
            ArrayList<Employee> employeeLevel = employeeLevels[level];
            for (Employee emp : employeeLevel) 
            {
                if (emp.free) 
                {
                    return emp;
                }
            }
        }
        return null;
    }

    // routes the call to an available employee, or adds to a queue

    void dispatchCall(Call call) 
    {
        // try to route the call to an employee with minimal rank
        Employee emp = getCallHandler(call);
        if (emp != null) 
        {
            emp.ReceiveCall(call);
        } else {
            // place the call into queue according to its rank
            callQueues[call.rank].add(call);
        }
    }

    void getNextCall(Employee e) {...} // look for call for es rank
}

class Call 
{
    int rank = 0; // minimal rank of employee who can handle this call
    public void reply(String message) { ... }
    public void disconnect() { ... }
}

class Employee 
{
    CallHandler callHandler;
    int rank; // 0- fresher, 1 - technical lead, 2 - product manager
    boolean free;
    Employee(int rank) { this.rank = rank; }
    void ReceiveCall(Call call) { ... }
    void CallHandled(Call call) { ... } // call is complete
    void CannotHandle(Call call) 
    { // escalate call
        call.rank = rank + 1;
        callHandler.dispatchCall(call);
        free = true;
        callHandler.getNextCall(this); // look for waiting call
    }
}

class Fresher extends Employee 
{
    public Fresher() { super(0); }
}

class TechLead extends Employee 
{
    public TechLead() { super(1); }
}

class ProductManager extends Employee 
{
    public ProductManager() { super(2); }
} The solution of the book is similar similar in design and extent... there is no additional information besides what is provided by the quote above. My evaluation is that: I did not actually make a method called GetCallHandler() , I converted it to a property of the Call . There might have been a specific reason why a GetCallHandler() method is needed, i.e. necessary for another component of the system. I do have a justification for my design compared to the Author's design: It's more efficient to maintain a queue of free employees than to actually go through a list of employees and check which one is free every time a call comes through. The behavior in response to a call is defined by particular implementation of Employee , rather than an Employee ""expert"" (i.e. each employee knows what they're supposed to do, rather than the system telling each employee what to do). If a GetCallHandler method is needed in another system, then the question would have been more specific as to the signature of the method. Judging on the solution, GetCallHandler is only called by the CallHandler class itself, so that supports #3. Nobody outside of CallHandler seems to use it."
734,"foreach (var x in dict)
{
    yield return new Grouping<TKey, TElement>(x.Key, x.Value);
} Could change to: return dict.Select(x => new Grouping<TKey, TElement>(x.Key, x.Value)); It's a little thing, but I would make _key and _elements in Grouping readonly."
735,"Using XSLT to turn content of WYSIWYG stored in XML into HTML. The CMS I use uses the Xalan XSLT processor which is a XSLT version 1.0 processor. Editors who use WYSIWYG fields within the CMS can save content that will look like either: <story>
    <p>Story Text which may have <em>formatting</em>.</p>
</story> or: <story>Story Text which may have <em>formatting</em>.</story> or even: <story>
    <div>Story Text which may<br /> have <em>formatting</em>.</div>
</story> In order to handle those varying cases I've been using: <?xml version=""1.0"" encoding=""UTF-8""?>
<xsl:stylesheet version=""1.0"" xmlns:xsl=""http://www.w3.org/1999/XSL/Transform"">
<xsl:output method=""html""/> 
<xsl:template match=""/system-index-block"">
    <xsl:for-each select=""story"">
        <xsl:choose>
            <!-- If wrapped in an element -->
            <xsl:when test=""./p|./div"">
                <!-- copy what is inside story, allow for text outside of elements -->
                <xsl:copy-of select=""./text()|./*""/>
            </xsl:when>
            <!-- wrap the content in a paragraph tag -->
            <xsl:otherwise>
                <p>
                    <!-- copy text and tags from inside story -->
                    <xsl:copy-of select=""./text()|./*""/>
                </p>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:for-each>
</xsl:template>
</xsl:stylesheet> Is there a better way of producing well formed HTML from this data? Is there a way to simply this?"
736,"Sorry if there is a lack of pleasantries, but I am going to get down to it. Source at time of review: enum EStatus{ HANDLING, ESCALATED, QUEUED }
enum ERank{ FRESHER, TECH_LEAD, PROD_MANAGER }

abstract class Employee
{
    public ERank Rank{get; private set;}

    public Employee(ERank rank)
    {
        Rank = rank;
    }

    public abstract EStatus ServiceCall(Call call);
}

class Fresher:Employee
{
    private TechLead _superior;

    public Fresher(TechLead superior):base(ERank.FRESHER)
    {
        _superior = superior;
    }

    public override EStatus ServiceCall(Call call)
    {
        if(CanService(call))
        {
            call.Service(this);
            return EStatus.HANDLING;
        }
        else
        {
            _superior.ServiceCall(call);
            return EStatus.ESCALATED;
        }
    }

    private bool CanService(Call call)
    {
        // some logic to determine if the call can be serviced 
    }
}

class TechLead:Employee
{
    private Call _activeCall;
    private ProductManager _superior;

    public TechLead(ProductManager superior):base(ERank.TECH_LEAD)
    {
        _activeCall = null;
        _superior = superior;
    }

    public override EStatus ServiceCall(Call call)
    {
        if(_activeCall == null && CanService(call))
        {
            HandleCall(call);
            return EStatus.HANDLING;
        }
        else
        {
            _superior.ServiceCall(call);
            return EStatus.ESCALATED;
        }
    }

    private bool CanService(Call call)
    {
        // some logic to determine if the call can be serviced 
    }

    private HandleCall(Call call)
    {
        _activeCall = call;
        call.OnCallServiced += new Call.CallServicedDelegate(OnCallServiced);
        call.Service(this);
    }

    private void OnCallServiced(Call call)
    {
        if(call!=_activeCall)
        {
            // TODO: this call was never accepted
        }
        else
        {
            _activeCall = null;
        }
    }
}

class ProductManager:Employee
{
    private Call _activeCall;
    private Queue<Call> _callQueue;

    public ProductManager():base(ERank.PROD_MANAGER)
    {
        _activeCall = null;
        _callQueue = new Queue<Call>();
    }

    public override EStatus ServiceCall(Call call)
    {
        if(_activeCall == null)
        {
            HandleCall(call);
            return EStatus.HANDLING;
        }
        else
        {
            _callQueue.Enqueue(call);
            return EStatus.QUEUED;
        }
    }

    private HandleCall(Call call)
    {
        _activeCall = call;
        call.OnCallServiced += new Call.CallServicedDelegate(OnCallServiced);
        call.Service(this);
    }

    private void OnCallServiced(Call call)
    {
        if(call!=_activeCall)
        {
            // TODO: this call was never accepted
        }
        else
        {
            if(_callQueue.Count==0)
            {
                _activeCall = null;
            }
            else
            {
                HandleCall(_callQueue.Dequeue());
            }
        }
    }
}

class Call
{
    public delegate void CallServicedDelegate(Call call);
    public event CallServicedDelegate OnCallServiced;

    public Employee CallHandler{get; private set;}

    public Call()
    {
        CallHandler = null;
    }

    public void Service(Employee callHandler)
    {
        CallHandler = callHandler;

        // Invoke the notification when the call is complete
        OnCallServiced(this);
    }

    public void Disconnect()
    {
        // Disconnect the call
    }
}

class CallCenter
{
    private bool _running;
    private BlockingQueue<Call> _callQueue;
    private Queue<Employee> _freeFreshers;
    private List<Employee> _busyFreshers;
    private readonly TechLead _techLead;

    public CallCenter(int numEmployees)
    {
        // create the tech lead and a supervising product manager
        _techLead = TechLead(new ProductManager());

        _callQueue = new BlockingQueue<Call>();
        _freeFreshers = new Queue<Employee>();
        _busyFreshers = new List<Employee>();

        for(int i = 0; i < numEmployees; i++)
        {
            _freeFreshers.Enqueue(new Fresher(_techLead));
        }
    }

    public void AcceptCall(Call call)
    {
        _callQueue.Enqueue(call);
    }

    // Assuming that threading will be handled
    public void StartCallService()
    {
        _running = true;

        while(_running)
        {
            Call call = _callQueue.Dequeue();

            // Subscribe for the on call serviced delegate
            call.OnCallServiced += new Call.CallServicedDelegate(OnCallServiced);

            if(_freeFreshers.Count>0)
            {
                // Block until a fresher is available
                 Employee e = _freeFreshers.Dequeue();

                 // Assign the call to a free fresher
                switch(e.ServiceCall(call))
                {
                    case EStatus.HANDLING:
                        _busyFreshers.Add(e);
                        break;
                    case EStatus.ESCALATED:
                        _freeFreshers.Enqueue(e);
                        break;
                    case EStatus.QUEUED:
                    default:
                        break;
                }
            }
            else
            {
                _techLead.ServiceCall(call);
            }
        }
    }

    // Assuming that threading will be handled
    public void StopCallService()
    {
        _running = false;
    }

    private void OnCallServiced(Call call)
    {
        switch(call.CallHandler.Rank)
        {
            case ERank.FRESHER:
                _busyFreshers.Remove(call.CallHandler);
                _freeFreshers.Enqueue(call.CallHandler);
                break;
            case ERank.TECH_LEAD:
            case ERank.PROD_MANAGER:
            default:
                // nothing to do if it's a tech lead or prod manager
                break;
        }
    }
} Observation on chain of command. First thing to address is that ""chain of command"" behaves in a way other then what is specified in the problem. The problem states: An incoming telephone call must be allocated to a fresher who is free. The defined ""chain of command"" behavior... If there are no free freshers, then the tech lead automatically gets the call. ...stands in opposition to that. Additionally, in the way the solution is implemented it then follows that if the tech lead is busy then the call gets bumped to product manager. If the product manager is busy then the call is placed in his personal call queue, to wait until he is free. This behavior has the consequence of filling the PMs personal call queue with unscreened calls whenever all freshers and the tech is busy. This makes the PM responsible for screening all of those calls, even if at some point a fresher were to become free. Suggested improvement. Implement the base caller class in such a way that it have to it assigned a queue^ of calls to watch. This would allow for 2 things: All freshers could watch the same queue^ of new calls. When a new call is received, it then could be added to a common fresher queue^. The tech lead and project manager could each be assigned their own queues^ where escalated calls could wait for them to become available. This allows for all new calls to wait for a fresher to be free, and for the TL and PM to only have calls queued to them that they need answer. ^Queues could be lists. Read on... Observation on queuing behaviors. In the implementation I counted 3 queues and a bonus list. _callQueue in CallCenter. Intended to contain new calls. _freeFreshers in CallCenter. Holds freshers without calls. _callQueue in ProductManager. Holds PMs calls or unserviced calls (see chain of command). _busyFreshers* in CallCenter. This is not really a queue but it holds freshers from the _freeFreshers queue when they are not free. Q1: In design, this queue holds the incoming calls. In practice, Q1 keeps the while(_running) loop in the StartCallService method from eating up as much cpu as possible. As soon as a call is added to Q1 it is promptly dequeued and handled by (A)a free caller, (B) the tech lead, (C) the project manager, or (D) thrown in the PMs queue. Nothing ever stays in Q1 . Q2 & Q4: Q2 and Q4 are simply keeping track of the freshers busy state. Q4 only exists so that busy freshers are not lost? This also enforces a set behavior of choosing which free fresher takes a call. Q3: This queue behaves like a queue. Callers wait here for the attention of the project manager. Suggested improvement. I am struggling with what to write here because, minus a few design flaws in other places, these queues are perfectly functional. But, what really should be asked is, is the function of a queue really wanted? In the case of Q2 & Q4, which are holding the free state and dictating who gets the next call. It makes more sense to add a IsBusy property to employee. That way CallCenter can simply have a _freshers list. To determine if a fresher is busy you just ask. To get a free fresher you are no longer stuck with whoever pops out of Q2. You may simply ask for the employee that fits the any criteria you like. In the same way Q1 could be replaced by a list. When a new call comes in it is assigned to the best free fresher. If no fresher is available it is added to the unanswered calls list. When a fresher finishes a call a check to the unanswered calls list is made. This allows for the elimination of the while(_running) loop, and I love eliminating loops , really love , really . Observation on use of enums The defined enums... enum EStatus{ HANDLING, ESCALATED, QUEUED }
enum ERank{ FRESHER, TECH_LEAD, PROD_MANAGER } ...really end up being just duplicated information. ERank can be determined by class, and EStatus can be determined by which queue or employee has the call. Suggested improvement. Just get rid of them. OH, getCallHandler() At this point this seems like a silly (and somewhat mysteriously defined) thing to implement. Maybe another user why this is a sensible thing to implement? But, a requirement is a requirement. And, your Call.CallHandler, property has the right idea. I would just make it a method called getCallHandler() to play by the letter of the law, and null seems like a reasonable value to return if no one has handled the call yet. As always, I too welcome comments or criticisms. Cheers!"
737,"Here is a running revision of my solution (based on all the answers): enum ERank{ FRESHER = 0, TECH_LEAD = 1, PROD_MANAGER = 2 }

abstract class Employee
{
    // Properties
    public ERank Rank{get; private set;}
    public bool Busy{get; priavte set;}

    // Fields
    protected static readonly CallService _callService = new CallService(SOME_GLOBAL_VALUE);

    // Constructors
    public Employee(ERank rank)
    {
        Rank = rank;
        Busy = false;
    }

    public void ServiceCall(Call call)
    {
        if(CanService(call))
        {
            Busy = true;
            call.Service(this);
        }
        else
        {
            // Only escalate if there is a superior rank available
            if(!Busy && (Rank != ERank.PROD_MANAGER))
            {
                call.Escalate();
            }

            // Put the call back onto the queue
            _callService.AcceptCall(call);
        }
    }

    public void OnCallServiced(Call call)
    {
        if(this != call.CallHandler)
        {
            // TODO: this call was never accepted
            // somebody is innapropriately calling this method
        }
        else
        {
            Call nextCall = _callService.GetNextCall();
            if(nextCall == null)
            {
                Busy = false;
            }
        }
    }

    protected abstract bool CanService(Call call);
}

class Fresher:Employee
{
    public Fresher():base(ERank.FRESHER){}
    private override bool CanService(Call call){ /*...*/ }
}

class TechLead:Employee
{    
    public TechLead():base(ERank.TECH_LEAD){}
    private override bool CanService(Call call){ /*...*/ }
}

class ProductManager:Employee
{    
    public ProductManager():base(ERank.PROD_MANAGER){}
    private override bool CanService(Call call){ /*...*/ }
}

class Call
{    
    public Employee CallHandler{get; private set;}
    public ERank AcceptableRank{get; private set;}

    public Call()
    {
        CallHandler = null;
        AcceptableRank = ERank.FRESHER;
    }

    public void Service(Employee callHandler)
    {
        CallHandler = callHandler;

        // notify the call handler when the call is serviced
        CallHandler.OnCallServiced(this);
    }

    public void Escalate()
    {
        if((in)AcceptableRank < (int)ERank.PROD_MANAGER)
        {
            AcceptableRank = ERank(((int)AcceptableRank)+1);
        }
    }
}

class CallCenter
{
    private Employee[][] _employees;
    private Queue<Call>[] _rankedCallQueue;

    public CallCenter(int numEmployees)
    {
        _prodManager = new ProductManager();
        _techLead = new TechLead();

        _rankedCallQueue = new Queue<Call>[((int)ERank.PROD_MANAGER)+1];
        _employees = new Employee[((int)ERank.PROD_MANAGER)+1][];

        for(int rank = 0; rank <= (int)ERank.PROD_MANAGER; rank++)
        {
            _rankedCallQueue[rank] = new Queue<Call>();
            switch((ERank)rank)
            {
                case ERank.Fresher:
                    _employees[rank] = new Employee[numEmployees];
                    for(int i = 0; i < numEmployees; i++)
                    {
                        _employees[rank][i] = new Fresher();
                    }
                    break;
                case ERank.TECH_LEAD:
                    _emlpoyees[rank] = new Employee[]{new TechLead()};
                    break;
                case ERank.PROD_MANAGER:
                    _employees[rank] = new Employee[]{new ProductManager()};
                    break;
                default:
                    break;
            }
        }
    }

    public Employee GetCallHandler(Call call)
    {
        int rank = (int)call.AcceptableRank;
        for(int i = 0; i < _employees[rank].Length; i++)
        {
            if(!_employees[rank][i].Busy)
            {
                return _employees[rank][i];
            }
        }
        return null;
    }

    public void AcceptCall(Call call)
    {
        Employee employe = GetCallHandler(call);
        if(employee == null)
        {
            _rankedQueue[(int)call.AcceptableRank].Enqueue(call);
        }
        else
        {
            employee.ServiceCall(call);
        }
    }

    public Call GetNextCall(ERank rank)
    {
        if(_callQueue[(int)rank].Count == 0)
        {
            return null;
        }
        else
        {
            return _callQueue[(int)rank].Dequeue();
        }
    }
}"
739,"First Cut: Since every row contains the same set of fields, you can clean up the code considerably by skipping the inner loop. $question_array = array();
foreach ($quiz_data as $row) {
    $qId = $row['question_id'];
    $aId = $row['answer_id'];
    $answer = array(
            'id' => $aId,
            'text' => $row['answer'],
            'hint' => $row['hint'],
            'correct' => $row['correct'],
        );
    if (!array_key_exists($qId, $question_array)) {
        $question_array[$qId] = array(
                'id' => $qId,
                'text' => $row['question'],
                'explanation' = $row['explanation'],
                'sort' = $row['sort_order'],
            );
    }
    $question_array[$qId]['answers'][$aId] = $answer;
} Second Cut: Use objects instead of arrays. While it may seem to have little payoff at first, as you start performing more complex operations on questions and answers you'll gain much from the encapsulation. $question_array = array();
foreach ($quiz_data as $row) {
    $qId = $row['question_id'];
    $answer = new Answer($row['answer_id'], $row['answer'], $row['hint'], $row['correct']);
    if (!array_key_exists($qId, $question_array)) {
        $question_array[$qId] = $question 
                = new Question($qId, $row['question'], $row['explanation'], $row['sort_order']);
    }
    else {
        $question = $question_array[$qId];
    }
    $question->addAnswers($answer);
} Here are the most basic definitions for the Question and Answer classes to get you started. class Question {
    private $id;
    private $text;
    private $explanation;
    private $sortOrder;
    private $answers = array();
    public function __construct($id, $text, $explanation, $sortOrder) {
        $this->id = $id;
        $this->text = $text;
        $this->explanation = $explanation;
        $this->sortOrder = $sortOrder;
    }
    public addAnswer(Answer $answer) {
        $this->answers[$answer->getId()] = $answer;
    }
    ... property accessors and other methods ...
}

class Answer {
    private $id;
    private $text;
    private $hint;
    private $correct;
    public function __construct($id, $text, $hint, $correct) {
        $this->id = $id;
        $this->text = $text;
        $this->hint = $hint;
        $this->correct = $correct;
    }
    ... property accessors and other methods ...
}"
740,"If you want to duplicate GroupBy semantics exactly, there are several things missing: Eager error checking on parameters instead of deferred The correct order of the groups ( GroupBy guarantees that the groups are ordered by the relative order of the group's first element in the source) Allowing keys that are null You may be interested in Jon Skeet's recent blog postings ."
741,"Pull that block of code out into its own method if it isn't already, and then just do: if (runPart1.Checked && (cmdPart1 != ""done"")) return;
if (runPart2.Checked && (cmdPart2 != ""done"")) return;
if (runPart3.Checked && (cmdPart3 != ""done"")) return;
if (runPart4.Checked && (cmdPart4 != ""done"")) return;

allDone(); This isn't C. We don't have to be afraid of early returns anymore."
742,"You could do a simple map , instead of the code you have there in your self-answer: var numArray = $(':input[name^=""ticket_fields""]').map(function(){
    fieldId = this.name.replace(/\D/g, """");
    if ($.inArray(fieldId,numArray) === -1) return fieldId;
}).get(); Also using this.name instead of $(this).attr('name') , which is massively inefficient ."
743,"Since you are writing Django code, you don't need lambdas at all (explanation below). In other Python code, you might want to use list comprehensions, as other commenters have mentioned. lambda s are a powerful concept, but they are extremely crippled in Python, so you are better off with loops and comprehensions. Now to the Django corrections. tasks = Task.objects.all() tasks is a QuerySet . QuerySet s are lazy-evaluated, i.e. the actual SQL to the database is deferred to the latest possible time. Since you are using lambdas, you actually force Django to do an expensive SELECT * FROM ... and filter everything manually and in-memory, instead of letting the database do its work. contexts_to_display = ... If those contexts are Django model instances, then you can be more efficient with the queries and fields instead of separate methods: # tasks = Task.objects.all()
# tasks = filter(lambda t: t.matches_contexts(contexts_to_display), tasks)    
# tasks = filter(lambda t: not t.is_future(), tasks)
# tasks = sorted(tasks, Task.compare_by_due_date)
qs = Task.objects.filter(contexts__in=contexts_to_display, date__gt=datetime.date.today()).order_by(due_date)
tasks = list(qs) The last line will cause Django to actually evaluate the QuerySet and thus send the SQL to the database. Therefore you might as well want to return qs instead of tasks and iterate over it in your template."
744,"Applying filters to a table. I've written a lengthy procedure that I call a few times to apply filters defined by the customer to a table, as I didn't see how I could turn my column name string into a LINQ column and how I could turn my action string into an action on a string in such way that the function can be used in the LINQ query like: private void applyFilterAction(ref IQueryable<TempArticle> products, FilterAction action)
{
    products = from p in products where MAGIC(p, action.Column).ToLower().MAGIC2(action.Action, action.Value) == action.AddOrKill select p;
} I wrote this instead as a temporary solution: private void applyFilterAction(ref IQueryable<TempArticle> products, FilterAction action)
{
    var actionValue = action.Value.ToLower();
    var column = action.Column;

    if (action.Action.Equals(""StartsWith""))
    {
        if (column.Equals(""Description""))           products = from p in products where p.Description.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""LongDescription""))  products = from p in products where p.LongDescription.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Provider""))         products = from p in products where p.Provider.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""ProviderCode""))     products = from p in products where p.ProviderCode.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Publisher""))        products = from p in products where p.Publisher.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""PublisherCode""))    products = from p in products where p.PublisherCode.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom1""))          products = from p in products where p.Custom1.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom2""))          products = from p in products where p.Custom2.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom3""))          products = from p in products where p.Custom3.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""EanCode""))          products = from p in products where p.EanCode.ToLower().StartsWith(actionValue) == action.AddOrKill select p;
    }

    else if (action.Action.Equals(""EndsWith""))
    {
        if (column.Equals(""Description""))           products = from p in products where p.Description.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""LongDescription""))  products = from p in products where p.LongDescription.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Provider""))         products = from p in products where p.Provider.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""ProviderCode""))     products = from p in products where p.ProviderCode.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Publisher""))        products = from p in products where p.Publisher.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""PublisherCode""))    products = from p in products where p.PublisherCode.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom1""))          products = from p in products where p.Custom1.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom2""))          products = from p in products where p.Custom2.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom3""))          products = from p in products where p.Custom3.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""EanCode""))          products = from p in products where p.EanCode.ToLower().EndsWith(actionValue) == action.AddOrKill select p;
    }

    else if (action.Action.Equals(""Contains""))
    {
        if (column.Equals(""Description""))           products = from p in products where p.Description.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""LongDescription""))  products = from p in products where p.LongDescription.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Provider""))         products = from p in products where p.Provider.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""ProviderCode""))     products = from p in products where p.ProviderCode.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Publisher""))        products = from p in products where p.Publisher.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""PublisherCode""))    products = from p in products where p.PublisherCode.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom1""))          products = from p in products where p.Custom1.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom2""))          products = from p in products where p.Custom2.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom3""))          products = from p in products where p.Custom3.ToLower().Contains(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""EanCode""))          products = from p in products where p.EanCode.ToLower().Contains(actionValue) == action.AddOrKill select p;
    }

    else if (action.Action.Equals(""Exact""))
    {
        if (column.Equals(""Description""))           products = from p in products where p.Description.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""LongDescription""))  products = from p in products where p.LongDescription.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Provider""))         products = from p in products where p.Provider.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""ProviderCode""))     products = from p in products where p.ProviderCode.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Publisher""))        products = from p in products where p.Publisher.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""PublisherCode""))    products = from p in products where p.PublisherCode.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom1""))          products = from p in products where p.Custom1.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom2""))          products = from p in products where p.Custom2.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""Custom3""))          products = from p in products where p.Custom3.ToLower().Equals(actionValue) == action.AddOrKill select p;
        else if (column.Equals(""EanCode""))          products = from p in products where p.EanCode.ToLower().Equals(actionValue) == action.AddOrKill select p;
    }
} It filters products based on an action object that contains: column : Column of the product table that needs to be filtered. action : The action to perform on the strings coming from that column. value : The value to compare against using the action. Could I write this in a better way? I didn't get the switch statements in the MAGIC functions to LINQify."
745,"There are built in mechanisms for automatically switching an entire form to use text from culture-specific resource files and it is more powerful than just setting the text property (ToolTips for example). The only times you should need to manually load from the resource file are for things like message boxes, but unless you need your application to block while displaying an alert you might as well use balloon tips which are localizable as well. This is an easy place to start. It will also be more efficient as the controls themselves are localization aware so there's no need to loop through anything."
746,"Todo app for displaying a list of tasks. The main view in my (toy!) Todo app is, of course, to display the list of tasks.  These are grouped by some criterion, and the tasks structure below is actually a list of pairs (header, list of tasks). {% for tasks in tasks %}
    <p class=""list-header"">{{ tasks.0 }}:</p>
    <ul>
    {% for t in tasks.1 %}
        <li>
            <span class=""
                {% if t.priority >= 1 %}prio-medium{% endif %}
                {% if t.priority >= 2 %}prio-high{% endif %}
                "">
                {{ t.description }}
            </span>
            {% if t.due_date %}
                due, 
                <span class=""
                    {% if t.days_to_due_date < 15 %}date-soon{% endif %}
                    {% if t.days_to_due_date < 3 %}date-very-soon{% endif %}
                    {% if t.days_to_due_date < 0 %}date-overdue{% endif %}
                    "">
                    {{ t.relative_due_date }}
                </span>
            {% endif %}
            - 
            {% if not t.done %}
                <a href=""/yata/{{ t.id }}/mark_done/"">Done!</a>
            {% else %}
                <a href=""/yata/{{ t.id }}/mark_not_done/"">Not done!</a>
            {% endif %}
            - 
            <a href=""/yata/{{ t.id }}/edit/"">Edit</a>
        </li>
    {% endfor %}
    </ul>
{% empty %}
    <p class=""list-header"">Cool! Nothing to do...</p>
{% endfor %} In particular, I'm wondering if deciding which CSS class to assign is considered to be the view function's role, or if it's correct to put it in the template. Similarly, I'm also wondering about the presence of several URLs in the template. Would they be better in the tasks structure itself?  Or should they be provided through some methods in the Task class? After all, relative_due_date is already a function that's only used for display (it returns a string like 'Yesterday', 'Tomorrow' or 'In 3 days'). And shouldn't I use reverse() ?"
747,"I don't see anything LINQ related that could be done here... but it looks to me like all the contents of all the IF statements are the same. Perhaps that should be extracted into a method? Also: ToLower().StartsWith(actionValue) == action.AddOrKill Should be StartsWith(actionValue, StringComparison.CurrentCultureIgnoreCase) == action.AddOrKill Using ToLower for case insensitive string comparisons doesn't respect the culture of the current system, and will give wrong results for several languages (particularly those with 3 cases rather than 2). Plus, it's slower, because you're converting the entire string, rather than simply running comparisons on the beginning of the string. EDIT: I see the difference between the IF blocks now. It's been a while since I've played with C#, so I'm not entirely sure this will compile out of the box, but it should give you the idea. Basically you pass around a functor rather than replicating the if block over and over again: private void applyFilterAction(ref IQueryable<TempArticle> products, FilterAction action)
{
    var actionValue = action.Value.ToLower();
    var column = action.Column;
    Func<string, string, bool> comparer;

    if (action.Action.Equals(""StartsWith""))
    {
        comparer = (a, b) => a.StartsWith(b, StringComparison.CurrentCultureIgnoreCase);
    }
    else if (action.Action.Equals(""EndsWith""))
    {
        comparer = (a, b) => a.EndsWith(b, StringComparison.CurrentCultureIgnoreCase);
    }
    else if (action.Action.Equals(""Contains""))
    {
        comparer = (a, b) => a.Contains(b, StringComparison.CurrentCultureIgnoreCase);
    }
    else if (action.Action.Equals(""Exact""))
    {
        comparer = (a, b) => a.Equals(b, StringComparison.CurrentCultureIgnoreCase);
    }

    if (column == ""Description"")           products = from p in products where comparer(p.Description, actionValue) == action.AddOrKill select p;
    else if (column == ""LongDescription"")  products = from p in products where comparer(p.LongDescription, actionValue) == action.AddOrKill select p;
    else if (column == ""Provider"")         products = from p in products where comparer(p.Provider, actionValue) == action.AddOrKill select p;
    else if (column == ""ProviderCode"")     products = from p in products where comparer(p.ProviderCode, actionValue) == action.AddOrKill select p;
    else if (column == ""Publisher"")        products = from p in products where comparer(p.Publisher, actionValue) == action.AddOrKill select p;
    else if (column == ""PublisherCode"")    products = from p in products where comparer(p.PublisherCode, actionValue) == action.AddOrKill select p;
    else if (column == ""Custom1"")          products = from p in products where comparer(p.Custom1, actionValue) == action.AddOrKill select p;
    else if (column == ""Custom2"")          products = from p in products where comparer(p.Custom2, actionValue) == action.AddOrKill select p;
    else if (column == ""Custom3"")          products = from p in products where comparer(p.Custom3, actionValue) == action.AddOrKill select p;
    else if (column == ""EanCode"")          products = from p in products where comparer(p.EanCode, actionValue) == action.AddOrKill select p;
} Like I said, it's been a while since I've messed with C#, so this might not work :)"
748,"One thing that stands out is your Dictionary usage. When checking existence and using a value you should use TryGetValue like so: List<TElement> tmpList;
if (!dict.TryGetValue(key, out tmpList))
{
    dict.Add(key, tmpList = new List<TElement>());
}
tmpList.Add(x); Also, in regard to the LINQ change mentioned by mjcopple, there's no need to use Select; it's less efficient and provides no benefit over your yield return in this case. I could understand if it even promoted more readability, but in this case it doesn't and I would stick to your first solution for the sake of efficiency. No biggie, but since you're just decorating the enumeration of elements, you might as well use it's implementation of the non-generic IEnumerable which will save you a method on the call stack (not much). There's also a chance that the underlying implementation has a more efficient non-generic enumerator than wrapping the generic one (though this is generally uncommon and not the case for List) IEnumerator IEnumerable.GetEnumerator()
{
    return ((IEnumerable)_elements).GetEnumerator();
} Stephen Cleary makes relevant comments on the completeness of your implementation so I thought I'd just toss out code pointers."
749,"YOU HAVE A LOT OF CODE REPEATING ITSELF - it definitely means something. Basically you have two fields to consider - action and column . Since all your columns are considered to be strings so you can separate a) logic which determines which column to take and b) logic which determines how to filter columns. This will lead to dramatical changes in your code. Here is a sample: private void applyFilterAction(ref IQueryable<TempArticle> products, FilterAction action)
{
    var actionValue = action.Value.ToLower();
    var column = action.Column;

    Func<TempArticle, string> valueExtractor;
    // determining field
    if (column.Equals(""Description"")) valueExtractor = p => p.Description;
    else if (column.Equals(""LongDescription"")) valueExtractor = p => p.LongDescription;
    else if (column.Equals(""Provider"")) valueExtractor = p => p.Provider;
    else if (column.Equals(""ProviderCode"")) valueExtractor = p => p.ProviderCode;
    else if (column.Equals(""Publisher"")) valueExtractor = p => p.Publisher;
    else if (column.Equals(""PublisherCode"")) valueExtractor = p => p.PublisherCode;
    else if (column.Equals(""Custom1"")) valueExtractor = p => p.Custom1;
    else if (column.Equals(""Custom2"")) valueExtractor = p => p.Custom2;
    else if (column.Equals(""Custom3"")) valueExtractor = p => p.Custom3;
    else if (column.Equals(""EanCode"")) valueExtractor = p => p.EanCode;
    else throw new NotSupportedException(column);

    Predicate<string> filteringPredicate;

    // determining predicate
    if (action.Action.Equals(""StartsWith"")) filteringPredicate = s => s.StartsWith(actionValue);
    else if (action.Action.Equals(""EndsWith"")) filteringPredicate = s => s.EndsWith(actionValue);
    else if (action.Action.Equals(""Contains"")) filteringPredicate = s => s.Contains(actionValue);
    else if (action.Action.Equals(""Exact"")) filteringPredicate = s => s.Equals(actionValue);
    else throw new NotSupportedException(action.Action);

    products = from p in products where filteringPredicate(valueExtractor(p).ToLower()) == action.AddOrKill select p;
} This approach is much better but I would go even further. Instead of this if blocks I would use dictionaries which will map input string into corresponding delegates . It has nothing to do with LINQ yet, only common sense. This was the main part. My other points are: UpperCamelCase ? action.AddOrKill looks very strange. It took me a while to understand what are you trying to achieve with it. It looks very weird and should be rewritten in some other, more developer-friendly way. I would not use such a method signature - void with ref parameter. It doesn't look solid with existing LINQ methods and there is no point in having such a signature. I would use regular LINQ IQueryable MethodName(IQueryable<> source, ...other parameters) . I believe in such cases you should create fluent interface - it will improve code readability a lot. Especially in implementing NOT functionality."
750,"// keep track of visited nodes so we don't visit them twice
std::vector<node> visited_nodes;
auto visited = [&visited_nodes] (node n) {
    return std::find(visited_nodes.begin(), visited_nodes.end(), n) != visited_nodes.end();
}; Every time you have to check whether a point has been visited, this is going to scan over the entire list of visited_nodes. Better to do a std::set // path is currently from end to start, so reverse it
std::copy(path.rbegin(), path.rend(), ret.second); Rather then constructing the path and reversing it, you could construct the path backwards. When it comes to constructing all of the child nodes, I think your approach is confusing. You'd be better of constructing a new node rather then reusing the node. As it is, its not clear what you are doing. That section of code is also repetitive. I'd do something like int x_dir = {0, 0, 1, -1}
int y_dir = {1, -1, 0, 0}

for(int pos = 0; pos < 4; pos++)
{
    node child = parent;
    child.first += x_dir[pos];
    child.second += y_dir[pos];
    ...
} Other notes: The use of map is going to O(log), if you use a multidimensional array to hold the information for each point you can do it in O(1) time. Using pairs to hold co-ordinates is easy. However, I suggest that its better to have a point class with x and y members. I think it makes what is going on clearer. Additionally, the point class can encapsulate the neighboring cell logic."
751,"If you can edit the TempArticle class, the best way would be to add an indexer to the class that switches on the column name and returns the value of that column. Your filter code would then be private void applyFilterAction(ref IQueryable<TempArticle> products, FilterAction action)
{
    if (action.Action == ""StartsWith"")
    {
        products = from p in products where p[action.Column].StartsWith(action.Value, StringComparison.CurrentCultureIgnoreCase) == action.AddOrKill select p;
    }
    else
    {
        products = from p in products where p[action.Column].EndsWith(action.Value, StringComparison.CurrentCultureIgnoreCase) == action.AddOrKill select p;
    }
} In case you can't change TempArticle 's definition and assuming action.Column equals the name of the corresponding property in TempArticle , you can use compiled Expressions as accessors: static class PropertyAccessor<T>
{
    static Dictionary<string, Func<T, object>> propGetters;
    static Dictionary<string, Func<T, object>> PropGetters
    {
        get
        {
            if (propGetters == null)
            {
                Initialize();
            }
            return propGetters;
        }
    }

    static Dictionary<string, Action<T, object>> propSetters;
    static Dictionary<string, Action<T, object>> PropSetters
    {
        get
        {
            if (propSetters == null)
            {
                Initialize();
            }
            return propSetters;
        }
    }

    static void Initialize()
    {
        propGetters = new Dictionary<string, Func<T, object>>();
        propSetters = new Dictionary<string, Action<T, object>>();

        var type = typeof(T);

        foreach (var pi in type.GetProperties(BindingFlags.Public | BindingFlags.GetProperty | BindingFlags.Instance))
        {
            if (pi.CanRead)
            {
                var parameter = Expression.Parameter(type, ""instance"");

                Expression<Func<T, object>> lambda;

                if (pi.PropertyType.IsValueType)
                {
                    lambda = Expression.Lambda<Func<T, object>>(Expression.TypeAs(Expression.Property(parameter, pi.Name), typeof(object)), parameter);
                }
                else
                {
                    lambda = Expression.Lambda<Func<T, object>>(Expression.Property(parameter, pi.Name), parameter);
                }

                propGetters.Add(pi.Name, lambda.Compile());
            }

            if (pi.CanWrite)
            {
                var paramExpT = Expression.Parameter(type, ""instance"");
                var paramExpObj = Expression.Parameter(typeof(object), ""value"");
                var setterLambda = Expression.Lambda<Action<T, object>>(Expression.Call(paramExpT, pi.GetSetMethod(), Expression.ConvertChecked(paramExpObj, pi.PropertyType)), paramExpT, paramExpObj);
                propSetters.Add(pi.Name, setterLambda.Compile());
            }
        }
    }

    public static object Get(T instance, string propName)
    {
        return PropGetters[propName](instance);
    }

    public static string[] GetAccessorKeys
    {
        get
        {
            return PropGetters.Keys.ToArray();
        }
    }

    public static void Set(T instance, string propName, object value)
    {
        PropSetters[propName](instance, value);
    }

    public static string[] SetAccessorKeys
    {
        get
        {
            return PropSetters.Keys.ToArray();
        }
    }
} applyFilterAction : private void applyFilterAction(ref IQueryable<TempArticle> products, FilterAction action)
{
    if (action.Action == ""StartsWith"")
    {
        products = from p in products where ((string)PropertyAccessor<TempArticle>.Get(p, action.Column)).StartsWith(action.Value, StringComparison.CurrentCultureIgnoreCase) == action.AddOrKill select p;
    }
    else
    {
        products = from p in products where ((string)PropertyAccessor<TempArticle>.Get(p, action.Column)).EndsWith(action.Value, StringComparison.CurrentCultureIgnoreCase) == action.AddOrKill select p;
    }
} The accessors are compiled only once for each type, but are slightly slower than direct access, partly because of the type casting. (You can use string instead of object if you filter by pi.PropertyType in the initialize loop.) Other than that, I agree with Snowbear on the coding style and pattern use. This interface looks quite counterintuitive and it's definitely never a good idea to name a flag <Action>or<Opposite> . Part of the accessor code taken from: Fast Dynamic Property Access with C# (Comments) Edit: If you want more speed, you should use HyperDescriptor instead: It writes IL directly and is really fast. In .NET 4, you need to fix the security permissions ."
752,"Some general tips Mind your nesting. Indent at new block-level tags always, and at line-level when it aids legibility Wrap where it makes sense: between arguments, at attributes, etc Be consistent! For example, this chunk <?php // Create and run custom loop
        $custom_posts = new WP_Query();
        $custom_posts->query('post_type=page_content&page_sections=ThemeCL');
        while ($custom_posts->have_posts()) : $custom_posts->the_post();
    ?>  <div class=""float-left"">
            <a href=""<?php the_permalink(); ?>"" title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>"" rel=""bookmark""><?php the_post_thumbnail(); ?></a>
            <p><?php the_excerpt(); ?></p>
        </div>
    <?php endwhile; ?> I would rewrite like so <?php // Create and run custom loop
  $custom_posts = new WP_Query();
  $custom_posts->query('post_type=page_content&page_sections=ThemeCL');
  while ($custom_posts->have_posts()) : $custom_posts->the_post();
?>
  <div class=""float-left"">
    <a href=""<?php the_permalink(); ?>""
       title=""<?php printf( esc_attr__( 'Permalink to %s', 'twentyten' ), the_title_attribute( 'echo=0' ) ); ?>""
       rel=""bookmark""><?php the_post_thumbnail(); ?></a>
    <p>
      <?php the_excerpt(); ?>
    </p>
  </div>
<?php endwhile; ?>"
753,"I would move that conditional logic in the span tags to the view. Have your view pass the template a modified version of tasks.1 , where each task instead of being the original datum is now the modified version that the template could use raw. For example, instead of passing your template t.priority as an integer, pass it as the actual CSS class that you'll be using. Same as t.days_to_due_date . Personally, I hate editing templates, because I haven't configured my text editor to play nice with them yet :-). As a consequence, I usually move everything out of the template and into the view that I can. Same situation with your URL's. I'm not sure if this is best practice, but I like to leave my template as clean as possible. As for your question about reverse() , I'd have to have more context to answer."
754,"I would suggest moving the CSS selection logic to a custom template tag or even a filter, e.g. <span class=""{{ t|due_date_color }}"">{{ t.relative_due_date }}</span> . After that your templates will look much cleaner and that logic would still belong to the presentation part of MVT (Model, View, Template). You can split your tuple in the definition of the loop so that you don't redefine the tasks variable. {% for header, task_list in tasks %} ... . Use reverse URLs, no question about it. You'd hate the day you have to change them otherwise :) Go even further, use URL namespaces."
755,"I'd only add one thing to rassie's great list: while choosing which CSS class to assign to tasks that are due ""soon"" certainly belongs to the presentation layer (view or template), the fact that tasks due between 4 and 14 days from now are due ""soon"" belongs to the model. If each task here is an object, you can add isDueSoon() , isDueVerySoon() , and isOverdue() to encapsulate this logic in one logical place. You'll be happy you did this when you write unit tests for your task class and again when your boss asks you to build a REST API for working with tasks from a native iPhone app."
756,"Just to add in conversation: IMHO Checked Exception are included for a reason. A method with a reasonable chance of failure should throw a checked Exception. e.g. IO classes rely on IO Devices which might not available at the time and thus throw a checked exception, IOException. The benefit of declaring IOException as checked is that Java enforces providing error handling or alternative solution. This is not enforced in the case of exceptions derived from RuntimeException. IMHO this enforcement encourages coders to write robust code which is better then not having an extra throws clause."
757,"I would write some helper extension methods: public static class FilterActionHelper {
    private static Dictionary<string, Func<string, Func<string, bool>>> actions = new Dictionary<string, Func<string, Func<string, bool>>>() {
        { ""StartsWith"", x => y => x.StartsWith(y) },
        { ""EndsWith"", x => y => x.EndsWith(y) },
        { ""Contains"", x => y => x.Contains(y) }
    };

    private static Dictionary<string, Func<TempArticle, string>> propertySelectors = new Dictionary<string, Func<TempArticle, string>>() {
        { ""Description"", x => x.Description },
        { ""LongDescription"", x => x.LongDescription },
        { ""Provider"", x => x.Provider },
        { ""ProviderCode"", x => x.ProviderCode },
        { ""Publisher"", x => x.Publisher },
        { ""PublisherCode"", x => x.PublisherCode },
        { ""Custom1"", x => x.Custom1 },
        { ""Custom2"", x => x.Custom2 },
        { ""Custom3"", x => x.Custom3 },
    };

    public static bool HasAction(string actionName) {
        return actions.ContainsKey(actionName);
    }

    public static Func<string, bool> GetAction(this string str, string actionName) {
        return actions[actionName](str);
    }

    public static bool HasProperty(string propertyName) {
        return propertySelectors.ContainsKey(propertyName);
    }

    public static string GetProperty(this TempArticle product, string propertyName) {
        return propertySelectors[propertyName](product);
    }
} which would allow the more succinct code: private void ApplyFilterAction(ref IQueryable<TempArticle> products, FilterAction action) {
    var actionValue = action.Value.ToLower();
    var column = action.Column;

    if (!FilterActionHelper.HasAction(action.Action)) {
        return;
    }

    if (!FilterActionHelper.HasProperty(column)) {
        return;
    }

    products = from p in products
               where p.GetProperty(column).ToLower().GetAction(action.Action)(actionValue) == action.AddOrKill
               select p;
} The use of dictionaries makes it easy to add new properties and actions. The extension methods then make it a lot easier to use those dictionaries in a way that reads well. Another solution you may find easier is to make FilterAction generic: public class FilterAction<T> {
    public string Value { get; set; }
    public Func<T, string> GetProperty { get; set; }
    public Func<string, string, bool> Action { get; set; }
    public bool AddOrKill { get; set; }

    public bool Matches(T t) {
        var filterValue = Value.ToLower();
        var propertValue = GetProperty(t).ToLower();
        return (Action(propertyValue, filterValue)) == AddOrKill);
    }
}



FilterAction<TempArticle> filter = new FilterAction<TempArticle>();
filter.Value = ""foo"";
filter.GetProperty = x => x.Custom1;
filter.Action = x, y => x.StartsWith(y);
filter.AddOrKill = false;

var products = from p in products where filter.Matches(p) select p;"
758,"You should change your mindset when working with XSLT: look at it as a functional language, where you declare rules for the transformation of elements. Think about it in terms of events: when a p element is found in input, I expect this and that in the output. First, regarding the definition of your data. You should ask for (or create) a more formal description of the data. There are different formats available to describe the structure (grammar), DTD and XML Schema being the more common. There are more simple alternatives such as RELAX NG and Schematron . My guess, from your stylesheet and your descriptions: there is always a <system-index-block> at the top there is a list of <story> elements in <system-index-block> there is mixed HTML contents in <story> , with <p> , <div> , <br> , <em> and text allowed I am not sure about the last part: is it possible to have both text and div or paragraph at the top level in a story? <story>
  Text before a <p>Paragraph</p> in between or <div>Div</div> even after ?
</story> You should break your unique template rule into several template rules, one or several for each element. Then to direct the flow from rule to rule, do not use for-each but rather apply-templates: <xsl:template match=""system-index-block"">
  <!-- Note:
       You probably need to create the basic HTML structure Here: html, head, body
  -->
  <xsl:apply-templates /> <!-- you can specify select=""story"" but it is not required -->
</xsl:template>

<xsl:template match=""story[p|div]""> <!-- If wrapped in an element -->
   <xsl:apply-templates mode=""copy"" />
</xsl:template>

<xsl:template match=""story""> <!-- wrap the content in a paragraph tag -->
  <p>
    <xsl:apply-templates mode=""copy"" />
  </p>
</xsl:template> Note that I used the mode ""copy"" above: you can now create different rules for the same nodes depending on the mode, for example: <xsl:template match=""text()"" /> <!-- ignore text in normal mode, probably whitespace -->

<xsl:template match=""text()"" mode=""copy"">
    <xsl:copy />
</xsl:template> Also, you will probably get into trouble because you only declared a namespace for the xsl prefix. You typically need a prefix/namespace declaration for the input and output formats. You will then need to use the prefix in match/select expressions and in the tag names for the output, for example, with input prefix bound to your input namespace and html bound to the html namespace: <xsl:template match=""input:story""> <!-- wrap the content in a paragraph tag -->
  <html:p>
    <xsl:apply-templates mode=""copy"" />
  </html:p>
</xsl:template> To go further, here are pointers that you will probably find useful: Namespaces and XSLT Stylesheets Identity transformation"
759,"Inserting and updating time spans in XML. I need help to refactor my code. I usually had a hard time figuring out how to make my code reusable. I have an XML file that hold the data for each Tag element. Tag element should have child nodes LastClocked, and TotalClocked. I first thought of creating Tag object and do serialization. But, I found Linq to XML is much easier. I would really appreciate if you guys can tell me what to improve for my code. namespace StopWatch.Models
{
    public class TagCollection
    {
        private XElement doc;
        private IEnumerable<XElement> tagElements;

        public TagCollection()
        {
            if(File.Exists(""TagsData.xml""))
            {
               doc = XElement.Load(""TagsData.xml"");
            }
            else
            {
                //TODO: Create XML
            }
        }

        public void Save(TimeSpan clocked, string tags)
        {
            tagElements = from t in doc.Elements(""Tag"")
                          where (string)t.Attribute(""Name"") == tags
                          select t;

            TimeSpan lastClocked = TimeSpan.Parse((string)
                                   (from lc in tagElements.Descendants(""LastClocked"")
                                    select lc).First());

            lastClocked = lastClocked.Add(clocked);

            if (!tagElements.Any())
            {
                Insert(clocked, tags);
            }
            else
            {
                Update(clocked, lastClocked);
            }

            doc.Save(""TagsData.xml"");
        }

        private void Update(TimeSpan clocked, TimeSpan lastClocked) 
        {
            foreach(XElement tagElement in tagElements)
            {
                tagElement.SetElementValue(""LastClocked"", clocked.ToString());
                tagElement.SetElementValue(""TotalClocked"", lastClocked.ToString());
            }
        }

        private void Insert(TimeSpan clocked, string tags) 
        {
            XElement newTag = new XElement(""Tag"",
                                    new XAttribute(""Name"", tags),
                                    new XElement(""LastClocked"", clocked.ToString()),
                                    new XElement(""TotalClocked"", clocked.ToString()));

            doc.Add(newTag);
        }
    }
}"
760,"Your code seems very procedural - you're worrying about implementing how things will be done before you think about what those things are and how you'd like to use them.  You don't have any properties, just methods, which I don't particularly like. From what I understand you want to write a reusable wrapper from some XML, that's going to fit in a consistent format.  Do you have a class that represents that object? public TagElement
{
    private XElement tagXml
    public string Name
    public DateTime LastClocked
    public DateTime TotalClocked
} Now I'd simply make each of those properties point into the private XML object get / set their values. public TagElement(string name, DateTime initialValue)
{        
    tagXml = new XElement(""Tag"", 
                 new XAttribute(""Name"", name),
                 new XElement(""LastClocked"", initialValue),
                 new XElement(""TotalClocked"", initialValue));
}

public DateTime LastClocked
{
    get
    {
        return tagXml.Descendents(""LastClocked"").Single().Value;
    }
    set
    {
        tagXml.Descendents(""LastClocked"").Single() = value;
    }
} You can still have a Save method that persists the XElement to a file.  You probably also want a collection class that wraps the individual TagElements. public TagCollection
{
    public List<TagElement> TagElements { get; set; }
} So you can then use var collection = new TagCollection(""myFile.xml"");
// constructor for TagCollection needs to parse the XML, and create TagElements

var fooElement = collection.TagElements.Single(tag => tag.Name == ""foo"");
fooElement.LastClocked = DateTime.Now;

collection.TagElements.ForEach(tag => tag.TotalClocked = DateTime.Now); In summary, prefer to use properties to get and set values than using methods.  Abstract away the XML so that when you're using the class you do not know or care that it is being persisted to XML."
762,"Better ways to build a linq specification for querying or is this the only way?. The code pretty much explains what I am doing here. Just wondering if anyone can think of a better way. public class AttachmentQuery
{
    /// <summary>
    /// Initializes a new instance of the <see cref=""AttachmentQuery""/> class.
    /// </summary>
    /// <param name=""type"">The type.</param>
    /// <param name=""status"">The status.</param>
    /// <param name=""sort"">The sort.</param>
    /// <param name=""order"">The order.</param>
    /// <param name=""page"">The page.</param>
    public AttachmentQuery(string type, string status, SortAttachment sort, SortOrder order, int? page)
    {
        IAttachmentSpecification specification = null;

        if (!string.IsNullOrEmpty(type))
        {
            specification = new AttachmentFileTypeSpecification(type);
        }

        if (!string.IsNullOrEmpty(status))
        {
            if (specification == null)
            {
                specification = new AttachmentStatusSpecification(status.AsEnum<AttachmentStatus>());
            }
            else
            {
                var spec = new AndSpecification<Attachment>(
                    specification, 
                    new AttachmentStatusSpecification(status.AsEnum<AttachmentStatus>())
                );

                specification = spec as IAttachmentSpecification;
            }
        }

        if (specification == null)
        {
            specification = new AttachmentSpecification();
        }

        specification.Page = page;
        specification.Limit = Setting.AttachmentPageLimit.Value;
        specification.Sort = sort;
        specification.Order = order;

        this.Specification = specification;
    }

    /// <summary>
    /// Gets or sets the specification.
    /// </summary>
    /// <value>The specification.</value>
    public IAttachmentSpecification Specification
    {
        get;
        private set;
    }
} Source . How it is used ."
763,"Two FizzBuzz solutions. Below are two solutions to the FizzBuzz problem in Python. Which one of these is more ""Pythonic"" and why is it more ""Pythonic"" than the other? Solution One: fizzbuzz = ''

start = int(input(""Start Value:""))
end = int(input(""End Value:""))

for i in range(start,end+1):
    if i%3 == 0:
        fizzbuzz += ""fizz""
    if i%5 == 0:
        fizzbuzz += ""buzz""
    if i%3 != 0 and i%5 != 0:
        fizzbuzz += str(i)

    fizzbuzz += ' '

print(fizzbuzz) Solution Two: fizzbuzz = []

start = int(input(""Start Value:""))
end = int(input(""End Value:""))

for i in range(start,end+1):
    entry = ''
    if i%3 == 0:
        entry += ""fizz""
    if i%5 == 0:
        entry += ""buzz""
    if i%3 != 0 and i%5 != 0:
        entry = i

    fizzbuzz.append(entry)

for i in fizzbuzz:
    print(i)"
764,"From my brief experience with Python, I would say the second is more Pythonic as it takes advantage of the Python lists and the first is just appending to strings which causes the output to be a wee bit ugly and clumped together.  Although you could eliminate an entire extra iteration by appending to a temporary string within the first for loop, printing at the end of the loop and resetting the value so that the values don't need to be stored for more than one iteration."
765,"There is no difference in how ""Pythonic"" those solutions are. Both are perfectly acceptable. If the fizzbuzz string gets very long, using a list is preferable, as you don't have to make a copy of the string in every iteration, but that's a very minor issue."
766,"Most definitely solution two.  However, you could further improve that solution by dumping the string concatenation altogether.  Remember, string concatenation is expensive.  Because strings are immutable, every time you concatenate, a new string is created.  While the garbage collector can pick up the trash later, you're still having to go through the expense of copying a string. Instead, I'd recommend making a format string and then inserting the items in via string formatting, then appending them to your fizzbuzz list."
767,"How about adding an extension method to IAttachmentSpecification, such as public static class AttachmentSpecificationExtensions
{
     public static IAttachmentSpecification And(this IAttachmentSpecification orig, IAttachmentSpecification spec)
     {
         if (orig is NullAttachmentSpecification))
         {
             return spec ?? orig;
         }

         if (spec == null || spec is NullAttachmentSpecification)
         {
             return orig;
         }

         return (IAttachmentSpecification) new AndSpecification<Attachment>(specification, orig);
     }
}

public class NullAttachmentSpecification : AttachmentSpecification
{
} Now you can write your AttachmentQuery constructor as public AttachmentQuery(string type, string status,
    SortAttachment sort, SortOrder order, int? page)
{
    var statusSpec = string.IsNullOrEmpty(status) 
            ? new NullAttachmentSpecification()
            : new AttachmentStatusSpecification(status.AsEnum<AttachmentStatus>())
    var typeSpec = string.IsNullOrEmpty(type) 
            ? new NullAttachmentSpecification()
            : new AttachmentFileTypeSpecification(type)

    Specification = statusSpec.And(typeSpec);

    Specification.Page = page;
    Specification.Limit = Setting.AttachmentPageLimit.Value;
    Specification.Sort = sort;
    Specification.Order = order;
} It would seem more obvious to me what the intent was here. Plus it would seem more extensible if you add other types of AttachmentSpecification later."
768,"As has already been pointed out, creating a list is preferable as it avoids the concatenation of large strings. However neither of your solutions is the most pythonic solution possible: Whenever you find yourself appending to a list inside a for-loop, it's a good idea to consider whether you could use a list comprehension instead. List comprehensions aren't only more pythonic, they're also usually faster. In this case the body of the loop is a bit big to fit into a list comprehension, but that's easily fixed by refactoring it into its own function, which is almost always a good idea software design-wise. So your code becomes: def int_to_fizzbuzz(i):
    entry = ''
    if i%3 == 0:
        entry += ""fizz""
    if i%5 == 0:
        entry += ""buzz""
    if i%3 != 0 and i%5 != 0:
        entry = i
    return entry

fizzbuzz = [int_to_fizzbuzz(i) for i in range(start, end+1)] However, while we're at it we could just put the whole fizzbuzz logic into a function as well. The function can take start and end as its argument and return the list. This way the IO-logic, living outside the function, is completely separated from the fizzbuzz logic - also almost always a good idea design-wise. And once we did that, we can put the IO code into a if __name__ == ""__main__"": block. This way your code can be run either as a script on the command line, which will execute the IO code, or loaded as a library from another python file without executing the IO code. So if you should ever feel the need to write a GUI or web interface for fizzbuzz, you can just load your fizzbuzz function from the file without changing a thing. Reusability for the win! def fizzbuzz(start, end):
    def int_to_fizzbuzz(i):
        entry = ''
        if i%3 == 0:
            entry += ""fizz""
        if i%5 == 0:
            entry += ""buzz""
        if i%3 != 0 and i%5 != 0:
            entry = i
        return entry

    return [int_to_fizzbuzz(i) for i in range(start, end+1)]

if __name__ == ""__main__"":
    start = int(input(""Start Value:""))
    end = int(input(""End Value:""))
    for i in fizzbuzz(start, end):
        print(i) (Note that I've made int_to_fizzbuzz an inner function here, as there's no reason you'd want to call it outside of the fizzbuzz function.)"
769,"I would definitely write it differently but exact result depends on whether your AndSpecification supports only two parameters or it can accept IEnumerable of attachments. If it has two parameters and you expect to nest those AndSpecifications if you will have more specs to compose then I would write something like this: var typeSpecification = string.IsNullOrEmpty(type) ? null : new AttachmentFileTypeSpecification(type);
var statusSpecification = string.IsNullOrEmpty(status) ? null : new AttachmentStatusSpecification(status.AsEnum<AttachmentStatus>());
var specificationsToCompose = new IAttachmentSpecification[] {typeSpecification, statusSpecification};

var composedSpecification = specificationsToCompose
                     .Aggregate((IAttachmentSpecification) null, (accumulator, currentSpec) =>
                         {
                             if (accumulator != null && currentSpec != null) return new AndSpecification<Attachment>(accumulator, currentSpec);
                             return accumulator ?? currentSpec;
                         })
                      ?? new AttachmentSpecification();

...

this.Specification = composedSpecification;"
770,"I have read a good solution with decorator, and I think it is a pythonic way to achieve a FizzBuzz solution: @fizzbuzzness( (3, ""fizz""), (5, ""buzz"") )
def f(n): return n Generators are also a good pythonic way to get a list of numbers."
771,I would suggest to take a different approach. It is complicated to get a callback for the complete loading of a CSS stylesheet loaded dynamically: see this Stack Overflow question for reference: Is there anyway to listen to the onload event for a  element? Do not use JavaScript to set the content position: it is part of styling and should be done in CSS instead. Isn't the role of your CSS skins to modify the appearance of the page?
772,"How to break up long lines of code. (Example Line: Results of method call added to list.). Often I generate long lines of code such as the following... shippedItems.AddRange(OrderItem.Fetch(market: this.MARKET, shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE, orderPlacedAfter: serverTime.AddDays(-7), orderPlacedBefore: serverTime.AddHours(-85))); ... which adds the results of a method call to an existing list. Adding white space to this line could improve readability. At one point in time or another have rationalized almost every possible behavior between: Leave everything on a single line and let the editor wrap where it feels is best. Put even shippedItems.AddRange( on a line by itself. While over time I feel that the clarity and readability of the code that I write has improved -- and lets hope for reasons other then white space -- I have never come to peace with how to break long lines. I will up vote any answer that does NOT include as the solution: shorter variable names. disregarding named parameters (at least for this example). creation of variables only used once."
773,"I would break it up something like this: shippedItems.AddRange(
    OrderItem.Fetch(market: this.MARKET,
                    shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,
                    orderPlacedAfter: serverTime.AddDays(-7),
                    orderPlacedBefore: serverTime.AddHours(-85))); Depending on previous indentation, some lines might flow over the ""max line length"", but I think that characters per line is more of a suggestion and there are good times to break that rule because breaking it leads to code that is more readable than code that doesn't. Rules that I find helpful: New line after an open paren. Line breaks after commas. Indent the inner method calls. Line up parameters to a method that are on new lines. Break ""max line length"" rules if it means the code is more readable."
774,"As a follow up to @Thomas Owens, another rule I personally like to follow is: Either put all parameters for a method on the same line, or put each parameter on its own line. So I would write the code as follows.  I like this because it makes reading the parameters more consistent, and doesn't indent them quite as far. shippedItems.AddRange(
    OrderItem.Fetch(
        market: this.MARKET,
        shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,
        orderPlacedAfter: serverTime.AddDays(-7),
        orderPlacedBefore: serverTime.AddHours(-85)));"
775,"This is what I would do: shippedItems.AddRange(
   OrderItem.Fetch(market: this.MARKET,
                   shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,
                   orderPlacedAfter: serverTime.AddDays(-7),
                   orderPlacedBefore: serverTime.AddHours(-85))
); I feel that just as with brackets ( {} ) the closing parenthesis should be on its own line when a method call spans multiple lines. It seems more consistent to me. Alternatively, you could line up the : 's: market:           this.MARKET,
shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE but that it difficult to maintain. Another option: shippedItems.AddRange(OrderItem.Fetch(market: this.MARKET,
                                      shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,
                                      orderPlacedAfter: serverTime.AddDays(-7),
                                      orderPlacedBefore: serverTime.AddHours(-85))); That uses fewer lines , but is longer horizontally. Also, at first glance it looks like the arguments are to AddRange , not Fetch ."
776,"Object Paradigm for PHP, Practice in Design. I've created and I manage a point of sale web application built in PHP which has thus far followed no clear guidelines or methodology for development; it's operation is completely procedural. In turn, because the department that's using it requests new and different features like it's a Las Vegas buffet, the software has become a mess which I'm terrified of (don't look it in the eyes). Thankfully, I'm the only developer and so no one else must feel the wrath of the beast I've created. I've always had a hard time wrapping my head around OOP, but I think I'm finally beginning to understand the whole point behind encapsulating methods, protecting fields, and class inheritance. This brings me to my question: Given the object scheme posted below, am I doing this right? It works like it should and doesn't return any errors, but in terms of object design, I feel like a baby deer with wobbly legs, uncertain of the world around me. To be a little more specific, should I have a separate class that encapsulates MySQL parameters - and where should it be included/inherited if many child classes, perhaps even on separate server requests, will need it? Should these two classes be one? I thought to separate them for sake of file length - Is excessive file size a good indicator of when a class might need to be broken up? Abstract, private, protected - I understand how this works in literal behavior, but in regard to use, I'm just swinging in the dark. Anyone care to shed a light on what I've done and whether it makes sense? I think that is the summation of my fears and concerns. Here is the code in question - Your replies will help guide my redesign/refactoring of everything I've spent the last 6 months on. filterReports.class.php date_default_timezone_set('America/Chicago'); // For use by 'date()' and 'strtotime()'

/*
*   First, we will create our appropriate file names for the dates in question,
*   then we will determine if today is a day to run said reports. If today is in fact
*   a fine day to create a report, we should then check to see if the desired
*   report has already been created. If it has not, we will create and save it.
*/

abstract class filterReports
{

    protected $reportFilenames = array(); // Store all file names in array, because it's fun
    protected $reportDirs = array(
        'daily-orders' => 'reports/daily/orders/',
        'weekly-orders' => 'reports/weekly/orders/',
        'monthly-orders' => 'reports/monthly/orders/',
        'daily-volume' => 'reports/daily/volume/',
        'weekly-volume' => 'reports/weekly/volume/',
        'monthly-volume' => 'reports/monthly/volume/',
    ); // Folders where we plan to store these reports

    protected function createFilenames()
    {

        // Comprehensive Order Data
        $this->reportFilenames['daily-orders']      = 'store-report-'
                                                    . date('Ymd', strtotime('-1 day'))
                                                    . '.csv'; // Yesterday's Report
        $this->reportFilenames['weekly-orders']     = 'store-report-'
                                                    . date('Ymd', strtotime('-8 days'))
                                                    . '-'
                                                    . date('Ymd', strtotime('-1 day'))
                                                    . '.csv'; // Last 7 Days
        $this->reportFilenames['monthly-orders']    = 'store-report-'
                                                    . date('Ymd', strtotime('first day of last month'))
                                                    . '-'
                                                    . date('Ymd', strtotime('last day of last month'))
                                                    . '.csv'; // Last Month

        // General Product Volume Data
        $this->reportFilenames['daily-volume']      = 'store-volume-'
                                                    . date('Ymd', strtotime('-1 day'))
                                                    . '.csv'; // Yesterday's Report
        $this->reportFilenames['weekly-volume']     = 'store-volume-'
                                                    . date('Ymd', strtotime('-8 days'))
                                                    . '-'
                                                    . date('Ymd', strtotime('-1 day'))
                                                    . '.csv'; // Last 7 Days
        $this->reportFilenames['monthly-volume']    = 'store-volume-'
                                                    . date('Ymd', strtotime('first day of last month'))
                                                    . '-'
                                                    . date('Ymd', strtotime('last day of last month'))
                                                    . '.csv'; // Last Month

    }

    protected $reportsToCreate = array();   // Based on what day it is, a different report may need to be created

    protected function chooseReports()
    {

        $this->reportsToCreate['daily-orders'] = TRUE; // Because 'every day' occurs every day.
        $this->reportsToCreate['daily-volume'] = TRUE;

        if (date('N', time()) == '1') { // If today is Monday, create weekly report
            $this->reportsToCreate['weekly-orders'] = TRUE;
            $this->reportsToCreate['weekly-volume'] = TRUE;
        } else {
            $this->reportsToCreate['weekly-orders'] = FALSE;
            $this->reportsToCreate['weekly-volume'] = FALSE;
        }

        if (date('j', time()) == '1') { // If today is the first day of the month, create monthly report
            $this->reportsToCreate['monthly-orders'] = TRUE;
            $this->reportsToCreate['monthly-volume'] = TRUE;
        } else {
            $this->reportsToCreate['monthly-orders'] = FALSE;
            $this->reportsToCreate['monthly-volume'] = FALSE;
        }

    }

    protected $reportsExist = array(); // Now let's see which reports have already been created

    protected function searchReports()
    {

        foreach ($this->reportsToCreate as $key => $val) {

            if ($val != FALSE) {                
                if (!file_exists($this->reportDirs[$key] . $this->reportFilenames[$key])) {
                    $this->reportsExist[$key] = FALSE;
                } else {
                    $this->reportsExist[$key] = TRUE;
                }
            }           

        }

    }

} manageReports.class.php include('filterReports.class.php');

/*
*   As an extension of the previous class 'filterReports', if a desired report has
*   not been found, we will create and save it.
*/

class manageReports extends filterReports
{

    public $newReport;

    private $dbConfig = array();
    private $con;   

    private function dbParams() // This should all probably go somewhere else, but I haven't decided where just yet
    {

        $this->dbConfig = array(
            'host' => 'hostname',
            'user' => 'username',
            'pass' => 'password',
            'name' => 'database',
        );
        $this->con = mysql_connect(
            $this->dbConfig['host'],
            $this->dbConfig['user'],
            $this->dbConfig['pass']
        ) or die('MySQL Error: ' . mysql_errno() . ' - ' . mysql_error());

    }

    private function createDailyOrdersReport() // Collect data and build the report body
    {

        // Do things to create $dataHeading and $dataContent strings
        $this->newReport = $dataHeading . $dataContent;

    }

    private function createDailyVolumeReport()
    {
        $this->newReport = $dataHeading . $dataContent;
    }

    private function createWeeklyOrdersReport()
    {
        $this->newReport = $dataHeading . $dataContent;
    }

    private function createWeeklyVolumeReport()
    {
        $this->newReport = $dataHeading . $dataContent;
    }

    private function createMonthlyOrdersReport()
    {
        $this->newReport = $dataHeading . $dataContent;
    }

    private function createMonthlyVolumeReport()
    {
        $this->newReport = $dataHeading . $dataContent;
    }

    private function writeReport($key)
    {

        // Save the report to its appropriate folder
        $writeReportName = $this->reportDirs[$key] . $this->reportFilenames[$key]; // I don't know why this works, seems to me to be out of scope for these array fields
        $writeReportOpen = fopen($writeReportName, 'w');
        fwrite($writeReportOpen, $this->newReport) or die('Unable to write file: ' . $writeReportName);
        fclose($writeReportOpen);

    }

    public function createReports() // Finally, resolve which reports should be created - then create them.
    {

        parent::createFilenames();  // Create the report file names
        parent::chooseReports();    // Decide whether a report should be run
        parent::searchReports();    // Find out if the report exists already

        foreach ($this->reportsExist as $key => $val) { // Any reports that should be created today, T or F for 'exists'
            if ($val != TRUE) {
                if ($key = 'daily-orders') {
                    $this->createDailyOrdersReport();
                    $this->writeReport($key);
                }
                if ($key = 'daily-volume') {
                    $this->createDailyVolumeReport();
                    $this->writeReport($key);
                }
                if ($key = 'weekly-orders') {
                    $this->createWeeklyOrdersReport();
                    $this->writeReport($key);
                }
                if ($key = 'weekly-volume') {
                    $this->createWeeklyVolumeReport();
                    $this->writeReport($key);
                }
                if ($key = 'monthly-orders') {
                    $this->createMonthlyOrdersReport();
                    $this->writeReport($key);
                }
                if ($key = 'monthly-volume') {
                    $this->createMonthlyVolumeReport();
                    $this->writeReport($key);
                }
            }
        }

    }

} Finally, I do this to make it go. include('manageReports.class.php');

$initReports = new manageReports;
$initReports->createReports(); I preemptively appreciate any and all assistance you can provide as it will undoubtedly make me less bogus of a web developer. EDIT: Another question I just thought of in after-thought; Should I even bother declaring my fields and methods in filterReports as protected , seeing as though this class cannot be instantiated in the first place? EDIT: I have made some revisions to my code based on responses. For now, forget about the above two classes - Here is my new code. The first class instantiates each of my report generating sub-classes and executes a public function contained in each of them. The second class is a single report generation class. manageReports.class.php include('store/library/reports/dailyOrdersReport.class.php');

/*
* Having included the desired reporting classes,
* we now need a uniform process for access and
* execution of these classes.
*/

class manageReports
{

    private $reports = array();

    public function __construct()
    {

        $this->createReports();

    }

    private function createReports()
    {

        $this->createReport('dailyOrdersReport');

    }

    private function createReport($class)
    {

        $this->reports[] = new $class;

    }

    public function go()
    {

        foreach ($this->reports as $report) {
            $report->execReport();
        }

    }

} dailyOrdersReport.class.php include('store/library/dbConfig.class.php'); // May need these parameters for dependent methods

/*
* Validates the need for specified report creation,
* and if true - does so.
*/

class dailyOrdersReport extends dbConfig
{

    private $newReport; // Variable to store report data

    private $reportPath;
    private $reportName;

    private $reportTestResult = FALSE;

    public function __construct() // Preprocess validation answers, ""Should we create this report?""
    {

        parent::__construct(); // MySQL Parameters

        $this->reportPath   = 'store/reports/daily/orders/';
        $this->reportName   = 'store-orders_'
                            . date('Ymd', strtotime('-1 day'))
                            . '.csv';
        $this->reportTest();

    }

    private function reportTest() // We don't need to test against the date for this report, just if it's already been created
    {

        if (!file_exists($this->reportPath . $this->reportName)) {
            $this->reportTestResult = TRUE;
        } else {
            return;
        }

    }

    private function createReport()
    {

        // About 100 lines of csv report generating madness
        $this->newReport = $dataHeading . $dataContent;

    }

    private function writeReport()
    {

        // Save the report to its appropriate folder
        $writeReportName = $this->reportPath . $this->reportName;
        $writeReportOpen = fopen($writeReportName, 'w');
        fwrite($writeReportOpen, $this->newReport) or die('Unable to write file: ' . $writeReportName);
        fclose($writeReportOpen);

    }

    public function execReport()
    {

        if ($this->reportTestResult) { // Evaluates to 'true' if report aught be generated and saved to file
            $this->createReport();
            $this->writeReport();
        } else {
            return;
        }

    }

} Once again, the trigger. error_reporting(E_ALL);

date_default_timezone_set('America/Chicago'); // For use by 'date()' and 'strtotime()'

include('store/library/manageReports.class.php');

$manageReports = new manageReports;
$manageReports->go(); Is this perfect yet, or are there still miles to go before I sleep?"
779,"From the C++ tag wiki on Stack Overflow : What is C++? C++ is a statically-typed, free-form, (usually) compiled, multi-paradigm, intermediate-level, general-purpose programming language not to be confused with C. It was developed in the early 1980's by Bjarne Stroustrup as a set of extensions to the C programming language. Building on C, C++ improved type-safety and added support for automatic resource management, object-orientation, generic programming, and exception handling, among other features. New to C++? Whether you are new to programming or are coming to C++ from another programming language, it is highly recommended to have a good book from which to learn the language.  Stack Overflow keeps a detailed list of books . If you are looking for a good compiler, g++ is the most commonly used compiler on Linux and other platforms, clang is the official compiler on Mac and FreeBSD, and Microsoft Visual C++ is the most commonly used on Windows. Online compilers Coliru Wandbox IdeOne CodePad rextester (Can also compile with MSVC) ELLCC (LLVM and more, can output assembly) Other online tools Godbolt Compiler Explorer (compare machine code from a variety of compilers) Quick-bench (benchmark C++ code using Google Benchmark ) FAQs C++ FAQ : formerly C++ FAQ Lite C++ Templates FAQ Bjarne Stroustrup's C++ Style and Technique FAQ Other Resources C++ Core Guidelines - a semi-official project collecting many guidelines for coding practice, headed by Bjarne Stroustrup and Herb Sutter, but contributed to by many. Under active ""development"" as of 2017 (hence it's on GitHub). ISO C++ website C++ Reference ISO's C++ Standards Committee's Papers Guru of the Week : article series on high-quality, exception-safe C++ code Revised Guru of the Week (for C++14) SGI's Standard Template Library Programmer's Guide More C++ Idioms Boost C++ Libraries Where do I find the current C or C++ standard documents? Code Review Snippets As an experiment I am starting to collect snippets of common Code Review things that happen repeatedly here: Code Review"
780,"C++ is a statically typed, free-form, multi-paradigm, compiled, general-purpose programming language. This tag should be used for any question which requires knowledge or expertise with the C++ programming language. This is a general tag which is used for any of the C++ language standards (C++98, C++11, C++17, etc.). The question should identify the compiler being used, the operating system, and which of the C++ standards is being targeted."
781,"The first comment is that you have six functions in manageReports which are identical, which each call a seventh one, createReports . While I understand that you mean to have logical function naming, given that you have all the logic as to when each program should be made located in the chooseReports and createReports function, you might as well leave off all the unnecessary ones. For a more general answer, it doesn't seem like these two classes need to be separate. Class length isn't the main thing to consider here; you want to group things intelligently. Broadly speaking, you subclass only when you're making a more specific instance of the superclass. In your case, if you find that different types of reports require different functionality, could subclass different types of reports."
784,"Parser for CNF formulas. I have a parser for CNF formulas in Dimacs format , which is very slow. Any suggestion on how to improve its speed? I did some profiling and I might have to replace Scanner . Is there anything faster? A possible input for the parser is: c A sample .cnf file.
p cnf 3 2
1 -3 0
2 3 -1 0 The code: /**
 * Parses a stream for a CNF instance.                                                                  
 *
 * @param source input stream                                                                           
 * @return read skeleton
 * @throws ParseException if stream contains an invalid instance                                        
 */
private static Skeleton parseStream(final InputStream source)                                           
    throws IOException, ParseException {                                                                
  Scanner scanner = new Scanner(source);                                                                

  // Skip comments
  try {                                                                                                 
    String token = scanner.next();                                                                      
    while (token.equals(""c"")) {                                                                         
      scanner.nextLine();
      token = scanner.next();                                                                           
    }
    if (!token.equals(""p"")) {
      throw new ParseException(                                                                         
          ""Excepted 'p', but '"" + token + ""' was found"");                                               
    }
  } catch (NoSuchElementException e) {
    throw new ParseException(""Header not found"");                                                       
  }

  // Reads header
  int numVariables, numClauses;                                                                         
  try {
    String cnf = scanner.next();                                                                        
    if (!cnf.equals(""cnf"")) {                                                                           
      throw new ParseException(                                                                         
          ""Expected 'cnf', but '"" + cnf + ""' was found"");                                               
    }
    numVariables = scanner.nextInt();                                                                   
    numClauses = scanner.nextInt();
  } catch (NoSuchElementException e) {
    throw new ParseException(""Incomplete header"");                                                      
  }
  logger.debug(""p cnf "" + numVariables + "" "" + numClauses);                                             

  // Reads clauses
  Skeleton skeleton = new Skeleton(numVariables);
  try {
    while (numClauses > 0) {
      int literal = scanner.nextInt();
      skeleton.cnf.add(literal);
      if (literal == 0) {
        numClauses--;
      }
    }
  } catch (NoSuchElementException e) {
    throw new ParseException(
        ""Incomplete problem: "" + numClauses + "" clauses are missing"");
  }

  return skeleton;                                                                                      
}"
785,"Interesting to see the range of responses. I would tend towards a different answer from any of those so far: shippedItems.AddRange(OrderItem.Fetch(
    market: this.MARKET,
    shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,
    orderPlacedAfter: serverTime.AddDays(-7),
    orderPlacedBefore: serverTime.AddHours(-85)
)); This to me reads more intuitively as ""add the fetched order items to shippedItems, using the following block of arguments to fetch"". One piece of advice from someone who has been through the same dilemma for a while now: don't try to put rules on it. Take each example on its own merit and try to write it in the way that you would want it to be written if you were someone else trying to figure out what it does. Sometimes it is a good idea to have a use-once variable to make something more readable. For example, if AddRange above had a second argument, where would you put it? Even this simple case reads badly shippedItems.AddRange(
    OrderItem.Fetch(
        market: this.MARKET,
        shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,
        orderPlacedAfter: serverTime.AddDays(-7),
        orderPlacedBefore: serverTime.AddHours(-85)
    ),
    2
); However, this reads just fine var orderItems = OrderItem.Fetch(
    market: this.MARKET,
    shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,
    orderPlacedAfter: serverTime.AddDays(-7),
    orderPlacedBefore: serverTime.AddHours(-85)
);
shippedItems.AddRange(orderItems, 2); Each case on its own merit."
787,"When I see a bunch of repeated if tests of a value against several constants, I think ""make these classes."" You have a Report base class screaming to get out with one subclass per report type. If you think of each report in a general way, you'll start to see what operations it needs to support: Decide if it should be run given the date Check if it exists on disk Generate its file name and title Extract the data from MySQL into a text block Write itself to disk Here are the above requirements in an abstract base class, one designed to be extended by subclasses to fill out the specifics. abstract class AbstractReport {
    private $directory;
    private $date;

    public function __construct($directory, $date) {
        $this->directory = 'reports/' . $directory;
        $this->date = $date;
    }

    public abstract function getTitle() ;
    public abstract function getFileName() ;
    public abstract function isNeeded() ;

    public function hasBeenRun() {
        return file_exists($this->key . $this->getFileName();
    }

    public function runIfNeeded() {
        if ($this->isNeeded() && !$this->hasBeenRun()) {
            $this->run();
        }
    }

    public function run() {
        $this->connectToDatabase();
        file_put_contents($this->getTitle(), $this->buildReport());
    }

    protected function connectToDatabase() {
        // ... mysql_connect() ...
    }

    protected abstract function buildReport() ;

    protected function formatDate($offset, $format='Ymd') {
        return date($format, strtotime($offset, $this->date));
} Here is an example subclass for one of the reports. class DailyOrdersReport extends AbstractReport {
    public function __construct($date) {
        parent::__construct('daily/orders/', $date);
    }

    public function getTitle() {
        return 'Daily Orders';
    }

    public function getFileName() {
        return 'store-report-' . $this->formatDate('-1 day');
    }

    public function isNeeded() {
        return true;  // or use $this->date to make determination
    }

    protected abstract function buildReport() {
        // ... pull data from database and return formatted text ...
    }
} Hopefully this gives you a start on some OOness. :) I highly recommend the book Clean Code as it's a great help as you work to answer these questions for yourself. Edit As you write the report classes, you may find that all orders reports share some functionality in common that volume reports don't and vice versa. If it's significant you may want to create more abstract classes AbstractOrdersReport and AbstractVolumeReport . If the only difference between the time frames is the dates passed to the database queries, you could gain a lot from this. Of course what's missing now is a way to run the reports! The following is more procedural than OO, but it could be driven by a file or something similar. class ReportManager {
    private $reports = array();

    public function __construct($date) {
        $this->date = $date;
        $this->createReports();
    }

    public function createReports() {
        // could read these from disk or a table
        $this->createReport('DailyOrders');
        $this->createReport('DailyVolume');
        $this->createReport('WeeklyOrders');
        $this->createReport('WeeklyVolumn');
        $this->createReport('MonthlyOrders');
        $this->createReport('MonthlyVolumn');
    }

    protected function createReport($class) {
        $this->reports[] = new $class($this->date);
    }

    public function runIfNeeded() {
        foreach ($this->reports as $report) {
            $report->runIfNeeded();
        }
    }

    public function run() {
        foreach ($this->reports as $report) {
            $report->run();
        }
    }
}

// ... and to kick it off ...

$date = time();
$manager = new ReportManager();
$manager->runIfNeeded();"
788,"Use a BufferedInputStream to speed up the disk access. If that's not enough, you can read the file line-by-line and use split() to break it into individual numbers."
789,"The answer that I was looking for, was very straight forward. All was required was to put JQuery in synchronis mode by placing using $.ajaxSetup({async:false}); and then doing the ajax calls using $.post(""... then just turning it on again $.ajaxSetup({async:true});"
790,"Simple C Implementation for Unix ""tail"" Command. The following is like the Unix ""tail"" program. It was assigned as an exercise in Chapter 5 of Kernighan & Ritchie's The C Programming Language . Because I've only read through most of Chapter 5, I'm still unfamiliar with certain topics, such as malloc(), which may have been more appropriate to use, I don't know. I've done a little bit of programming before, but not enough to consider myself very experienced, so any kind of advice is welcome. : ) #include <stdio.h>
#include <stdlib.h>

#define DEFLINES 10
#define MAXBUFF  20000

int findTail(char *lines[][2], int nlines, char buff[], int maxbuff);

/* main() processes optional cli argument '-n', where n is a number of lines.
 * The default is 10.  findTail finds the last n lines from the input so that
 * they can be printed. */

main(int argc, char *argv[])
{
  int nlines; char *endptr;

  endptr = NULL;
  nlines = DEFLINES;
  if (argc > 2) {
    printf(""error: too many arguments.\n"");
    return EXIT_FAILURE;
  }
  else if (argc == 2) {
    if (*argv[1] == '-') {
      nlines = strtol(argv[1] + 1, &endptr, 10);
      if (*endptr != '\0') {
        printf(""error: not a number of lines: %s\n"", argv[1] + 1);
        return EXIT_FAILURE;
      }
    }
    else {
      printf(""error: malformed argument: %s\n"", argv[1]);
      return EXIT_FAILURE;
    }
  }

  int i;
  char *lines[nlines][2], buff[MAXBUFF];

  findTail(lines, nlines, buff, MAXBUFF);
  for (i=0; i < nlines; ++i) {
    if (lines[i][0] != NULL)
      printf(lines[i][0]);
    if (lines[i][1] != NULL)
      printf(lines[i][1]);
  }
}

#define TRUE     1
#define FALSE    0

void shift(char *lines[][2], int nlines);
void testForRoom(char *lines[][2], int index, char *buffp);

/* findTail stores characters from stdin in the buffer 'buff'. When it finds
 * the end of a line, it stores the pointer for the beginning of that line in
 * 'lines'. once nlines have been found, pointers to previous lines are shifted
 * off of the end of 'lines'. If there is space at the start of 'buff' not
 * pointed to by 'lines', then the end of a line that hits the end of the
 * buffer can continue its storage at the beginning of the buffer. This makes
 * the best use of a fixed-sized buffer for long input. */

int findTail(char *lines[][2], int nlines, char buff[], int maxbuff)
{
  char *buffp, *linestart;
  int i, c, wrap, nfound;

  for (i=0; i < nlines; ++i) {
    lines[i][0] = NULL; // [0] for storing line, or beginning of wrapped line
    lines[i][1] = NULL; // [1] for storing second half of a wrapped line
  }

  nfound = 0;
  wrap = FALSE;
  linestart = buffp = buff;
  while ((c=getchar()) != EOF) {
    if (buffp == linestart && wrap == FALSE) {
      if (nfound < nlines)
        ++nfound;
      shift(lines, nlines);
    }

    if (buffp - buff == maxbuff - 1) {
      *buffp = '\0';
      lines[nlines - 1][0] = linestart;
      wrap = TRUE;
      linestart = buffp = buff;
    }

    testForRoom(lines, nlines - nfound, buffp);

    *buffp++ = c;
    if (c == '\n') {
      *buffp++ = '\0';
      lines[nlines - 1][wrap] = linestart;
      wrap = FALSE;
      if (buffp - buff >= maxbuff - 1)
        buffp = buff;
      linestart = buffp;
    }

  }
  // this is in case the input ended without a newline.
  if (c == EOF && buffp != buff && buffp[-1] != '\0') {
    testForRoom(lines, nlines - nfound, buffp);
    *buffp = '\0';
    lines[nlines - 1][wrap] = linestart;
  }

}

/* shift is used upon finding a character that starts a new line. It shifts
 * line pointers in the pointer array to the left, making room for new line
 * pointer(s) and forgetting the pointer(s) for the oldest line in memory. */

void shift(char *lines[][2], int nlines)
{
  int i;
  for (i=0; i < nlines - 1; ++i) {
    lines[i][0] = lines[i + 1][0];
    lines[i][1] = lines[i + 1][1];
  }
  lines[nlines - 1][0] = NULL;
  lines[nlines - 1][1] = NULL;
}

/* testForRoom tests to see if the location for (or the location following the)
 * next character that would be placed in the buffer is pointed to by a line in
 * the lines pointer array. */

void testForRoom(char *lines[][2], int index, char *buffp) {
  if (buffp == lines[index][0]
      || buffp + 1 == lines[index][0]) {
    printf(""error: not enough room in buffer.\n"");
    exit(EXIT_FAILURE);
  }
}"
791,"Interesting design.  Performance could probably be improved by allocating a couple of large buffers, and reading large blocks of input alternately into the two buffers until EOF is encountered.  At that point, count backward through the two blocks until the proper number of newlines have been found, and then print everything from there to the end. If the input happens to be a disk file, one could seek to a spot near the end and count the number of newlines from that point on; if there aren't enough, seek back some distance and count the number of newlines between that point to the previous seek point.  This would allow ""tail"" to operate efficiently even if the input is a multi-gigabyte disk file."
794,"Print sum of numbers 1 to 200 except mults of 4 or 7 in Python. I had a question about using the modulus operator in Python and whether I have used it in a understandable way. This is how I've written the script: #sum numbers 1 to 200 except mults of 4 or 7
def main():
    sum = 0
    for x in range(200+1):
        if (x % 4 and x % 7): #is this bad???
            sum = sum + x
    print sum


if __name__ == '__main__':
    main() So my questions are: Should I spell out the modulo more clearly? ie if x % 4 != 0 and x % 7 != 0 Should I be approaching this in a very different way?"
795,"I think your use of % is fine, but that could be simplified to: def main():
    print sum([i for i in range(201) if i % 4 and i % 7])

if __name__ == '__main__':
    main() Edit: Since I had a bug in there, that's a pretty clear indication that the % is a tripwire. Instead, I'd probably do: def divisible(numerator, denominator):
    return numerator % denominator == 0

def main():
    print sum(i for i in range(201) if not(divisible(i, 4) or divisible(i, 7)))"
799,"You are using some C99 features, such as declaring variables part way through a block of code and VLAs, but not obeying some C99 constraints, such as ensuring that the main() function has an explicit return type of int . Because you're using C99, you are allowed to leave off the return(0); (or return 0; ) from the end of main() .  I think that was one of the less good decisions in C++ that was then echoed in C, and don't take that liberty myself; but I can't criticize your code when the standard allows it. It might be better to use enum instead of #define for the constants; enum makes debugging easier because the values are in the symbol table, whereas #define constants are typically not. enum { DEFLINES =    10 };
enum { MAXBUFF  = 20000 }; Your design only reads from standard input.  That's not bad, though it is lightly limiting. Your code includes: printf(lines[i][0]); This is a very dangerous way to use printf() - it is the ultimate format string vulnerability.  The trouble is that if my input to you contains: %s%n%13$s then printf() is going to be reading and writing values on the stack which you didn't put there, which leads to great unhappiness.  At minimum, use: printf(""%s"", lines[i][0]); Alternatively, use: fputs(lines[i][0], stdout); (Do not use puts() because it adds newlines to the end of your data - unless you remove the newlines from the input.) When I compile your code using my default options, I get two warnings about the printf() - confirmation of what I'd already observed - plus a warning that findTail() does not return a value even though it is declared to return an int .  That's best fixed by making it into a void function. /usr/bin/gcc -g -std=c99 -Wall -Wextra -Wmissing-prototypes \
      -Wstrict-prototypes  cr.c -o cr That's a pretty stringent set of warning options, and your code is good to generate just those three.  I wish all the code I dealt with was as clean. When I run the program on its own source code, it works fine.  When I run it with: $ perl -e 'for $i (1..12) { print ""A"" x 2047, ""\n""; }' | ./cr
error: not enough room in buffer.
$ That's OK - you did say you weren't using malloc() to do dynamic memory allocation.  As a general guideline, though, your error messages should include the name of the program, as found in argv[0] , so that if there are multiple processes in a pipeline, for instance, you can tell which of the processes generated the error.  I do this by using a function call err_setarg0(argv[0]); at the start of main() .  This records the program name for use in subsequent error messages.  I then use function calls such as err_error(""error: not enough room in the buffer\n""); to report the messages.  A minimal implementation of these two functions is: #include <stdio.h>
#include <stdarg.h>

static const char *err_arg0 = ""unknown"";

void err_setarg0(const char *arg0)
{
    err_arg0 = arg0;
}

void err_error(const char *fmt, ...)
{
    va_list args;
    fprintf(stderr, ""%s: "", err_arg0);
    va_start(args, fmt);
    vfprintf(stderr, fmt, args);
    va_end(args);
    exit(1);
} I have a fairly complex file with many variations on this theme that provides simple-to-use error reporting, including variations reporting on the system error (via errno ) and including time stamps and process ID and ... all selectable based on program design. Closer scrutiny shows that at any one time, at most one line will be wrapped - it means that the line starts just before the end of the buffer and has to wrap around to the start of the buffer. Overall, a pretty good program.  Well done (and I don't say that lightly). I'm not sure how easily it will adapt to handle dynamic memory allocation - my suspicion is that you will end up with a rather different scheme for managing memory.  This would remove the issues with lots of very long lines at the end of the file overflowing your buffer.  Depending on your platform, you might be able to use the POSIX getline() function which will allocate memory for you as it reads lines.  Or you might decide to write an emulation of that code.  You then only need a simple circular buffer of character pointers to keep the last N lines, and you discard the old one (with free() ) before storing the next line."
800,"Strongly-typed reading values from CSV DataTable. Is there a way to do this using parameters so the value is automatically converted to whatever datatype the keyfield has in the datatable? This code should be reusable for future bulk update applications hence the constant and the check on multiple datatypes. private const string DBKEYFIELDNAME = ""CustomerNr"";

...    
for (int i = 1; i <= csvLines.Length - 1; i++) // i=1 => skip header line
{
    string[] csvFieldsArray = csvLines[i].Split(';');
    int indexKeyField = csvHeaders.IndexOf(CSVKEYFIELDNAME.ToLower());

    object csvKeyValue = csvFieldsArray[indexKeyField];

    // ... some more code here that is not relevant

    // Find the matching row for our csv keyfield value
    Type keyType = parameters.DataTableOriginal.Columns[DBKEYFIELDNAME].DataType;
    DataRow[] rowsOriginal = null;
    if (keyType.IsAssignableFrom(typeof(string)))
        rowsOriginal = parameters.DataTableOriginal.Select(DBKEYFIELDNAME + ""='"" + csvKeyValue.ToString() + ""'"");
    else if (keyType.IsAssignableFrom(typeof(Int16)) || keyType.IsAssignableFrom(typeof(Int32)) || keyType.IsAssignableFrom(typeof(Int64)) || keyType.IsAssignableFrom(typeof(bool)))
        rowsOriginal = parameters.DataTableOriginal.Select(DBKEYFIELDNAME + ""="" + csvKeyValue);

    if (rowsOriginal != null && rowsOriginal.Length == 1)
    {
        // Do some processing of the row here
    }
}"
801,"A few comments: This method does way too much.  It is difficult to understand and will be difficult to debug and maintain.  Break it down into smaller methods that each have a single responsibility. Use curly braces after your if and else statements.  This improves readability of the code and makes it less likely for other code to sneak in there in the future. Can't your else statement just be a plain else with no if after it?  It seems like you want to put quotes around a string, and use the plain value for everything else.  Are there other requirements here? The type of csvKeyValue could just be string, since it's pulling a value out of a string[] No need for the call to .ToString() in your if branch I would try to write the call to parameters.DataTableOriginal.Select only once.  Consider using your if/else to set a delimeter variable to either string.Empty or ' , then write your query once like so: DataRow[] rowsOriginal = parameters.DataTableOriginal.Select(
    DBSLEUTELVELDNAAM + ""="" + delimeter + csvKeyValue + delimeter);"
802,"Securely handling a password protected application. I have some small applications that I want to secure.  I've been using the following setup that I think is fairly safe, but I've never been able to set my mind at ease that it really is. Could you give me some reviews on the security of this?  It doesn't need super-security like credit card data, but I suppose secure is secure. Cookie-based Sessions. User table is: Username field (cleartext) Random/unique salt field (created with mt_rand() at signup Password field (SHA256 hash) (among other stuff) Login method takes username, looks for the DB row, gets the salt, adds it to the end of the posted password, calcs a SHA256 hash for that string, and compares that to the password field in the DB. auth.php include at beginning of app <?php
session_start();
if(!isset($_GET['logout']) && isset($_SESSION['user']) && $_SESSION['ipadd'] == $_SERVER['REMOTE_ADDR']) {
    // currently logged in
        // setup data 
    require_once('lib/functions.php');
    $db = new ezSQL_sqlite('./','main.db');
    $user = new user($db,$_SESSION['user']);
    return;

}


// build login form

$head = '<html><head><title>Please login</title>
<style type=""text/css"">h2 { margin-top: 75px; margin-left: 100px; }</style>
</head><body>';

$form = '<form method=""post"" action=""'.$_SERVER['PHP_SELF'].'"" id=""userLogin"">
    <table><tr>
    <td>UserName:</td><td><input type=""text"" name=""username"" value=""'.$_POST['username'].'""></td>
    </tr><tr>
    <td>Password:</td><td><input type=""password"" name=""pass"" /></td>
    </tr><tr>
    <td>Remember me on this computer</td>
    <td><input type=""checkbox"" name=""remember"" value=""1"" /></td>
    </tr><tr>
    <td>&nbsp;</td>
    <td><input type=""hidden"" name=""loggingin"" value=""true"" />
    <input type=""submit"" value=""login"" />
    </td></tr></table>
    </form></body></html>';

$msg[1] = '<h2>You\'ve logged out.</h2>';
$msg[3] = '<h2>That username and password didn\'t match anything on record.</h2>';
$msg[4] = '<h2>You must login to use this application</h2>';


// used logout button
if($_GET['logout'] == 'true') {
    setcookie('SaveMe','',time()-3600);
    session_unset();
    die($head.$msg[1].$form);


// trying to login from form or returning with 'save me' cookie
} elseif ($_POST['loggingin'] == 'true' || isset($_COOKIE['SaveMe'])) {

    require_once('lib/functions.php');
    $db = new ezSQL_sqlite('./','main.db');
$loginName = (isset($_POST['username'])) ? $_POST['username'] : $_COOKIE['worshipSaveMe'];

    // ADDED: escaping of posted/cookie data;
$loginName = mysql_real_escape_string($loginName);


        // try to create new user object, error on fail
    try {
        $user = new user($db,$_POST['username']);
    } catch (Exception $e) {
        die($head.'<h2>'.$e->getMessage().'</h2>'.$form);
    }


        // try to login with user object, die on fail
    if( ! $user->login($_POST['pass'])) 
        die($head.$msg[3].$form);
    else {
                // if remember me box was checked
        if($_POST['remember'] == 1)
            setcookie('worshipSaveMe',$_POST['username'],time()+60*60*24*365); 
        return;
    }

// no post data, no save me cookie, just got here
} else { 
    die($head.$msg[4].$form);
} And the relevant part of the user class: class user
{
    private $username;
    protected $ID;
    private $created;
    private $salt;
    private $password;
    private $db;

    function __construct ( ezSQL_sqlite $db, $postedUsername ) {

        if( !$user = $db->get_row(""SELECT * FROM users WHERE uname = '$postedUsername';""))
            throw new Exception ('That username didn\'t match anything on record.');
        else {
            $this->db = $db;
            $this->username = $postedUsername;
            $this->ID = $user->user_id;
            $this->created = date('Y-m-d',$user->createdDate);
            $this->salt = $user->salt;
            $this->password = $user->pword;
        }

    }

    /** check password for match
     * @param user input from a posted form
     * @return boolean 
     */
    private function verifyPassword($postedPass) {

        $pHash = hash('sha256',$postedPass . $this->salt);

        if($this->password != $pHash)
            return FALSE;
        else
            return TRUE;
    }

    /** This relies on cookie based sessions, and so 
     * must be called before any output to browser.
     * @return bool
     */
    public function login($postedPassword) {
        if( ! $this->verifyPassword($postedPassword) ) {
            return FALSE;
        } else {
            if( isset( $_COOKIE[""PHPSESSID""] )) { //be sure session was initialized
                $_SESSION['user'] = $this->username;
                $_SESSION['ipadd'] = $_SERVER['REMOTE_ADDR'];
                return TRUE;
            } else {
                die('Session must be initialized before calling login method.');
            }

        }
    }"
803,"Displaying the multiples of a given number. Here's a method I made that's supposed to print out multiples of any numbers up to any quantity: def DisplayMultiples(multiplesOf, count)
  i = multiplesOf
  while i <= count
    if i % multiplesOf == 0
      puts i
    end
    i += 1
  end
end Any suggestions on how to improve the code to something more fitting to the Ruby style? I'm coming from a C# background so I'd like to switch things up a bit."
805,"One important note regarding naming in ruby: The syntax in ruby is that constants (including class and module names) have to start with capital letters and local variables have to start with lower case letters. Instance, class and global variables must start with their respective sigil followed by a letter in any case. Method names must start with a letter in any case, but if they start with a capital letters, they must be called with () when there are no arguments. The naming convention in ruby is to use snake_case for method names and variables, PascalCase for class and module names and ALL_CAPS for constants other than class and module names. For method names the convention is to use snake_case for all methods except ""constructor""-style functions (e.g. Integer() , Array() , Hash() ) where the name of the function is the same as that of the constructed class. Generally using PascalCase for method names is a bad idea because: It's against convention and will make people think it's a constructor-style function If you define a method without arguments, you'll trip yourself up because you'll try to call it as MyMethod instead of MyMethod() which does not work if the method name starts with a capital letter. General notes on your code: Using a while loop is usually unidiomatic ruby. Using a while loop to iterate from one number to another number with a constant step-size is always unidiomatic ruby. If the step-size is 1, you can just use each on a range and if it is something else you can use step . So your code would just be written as: def display_multples(multiples_of, count)
  (multiples_of .. count).each do |i|
    if i % multiples_of == 0
      puts i
    end
  end
end Now as pdr points out, this is not the optimal algorithm to do this. Instead of iterating between all integers between multiples_of and count and printing those which are divisible by multiples_of , you can just iterate between the numbers between multiples_of and count with a step size of multiples_of , i.e. only iterate over the multiples of multiples_of . However his code contains an unnecessary each (which will also make the code not work on ruby 1.8.6, though that's thankfully becoming less of an issue these days). So the code should just be: def display_multiples(multiples_of, count)
  (multiplesOf..count).step(multiples_of) do |i|
    puts i
  end
end However this code still contains one major, non-ruby-specific design-smell: You're mixing the logic to generate the multiples with the code printing it. Generally IO and logic should be separated as much as possible. So what you should do is define a method multiples which generates the multiples and a method print_multiples which prints them. In ruby the best way to write a method which generates a sequence of values is to write an ""iterator method"", i.e. a method which yields the elements. That would look like this: def multiples(multiples_of, count)
  (multiples_of .. count).step(multiples_of) do |i|
    yield i
  end
end

def print_multiples(multiples_of, count)
  multiples(multiples_of, count) do |i|
    puts i
  end
end You can also define multiples as: def multiples(multiples_of, count, &blk)
  (multiples_of .. count).step(multiples_of, &blk)
end In 1.8.7+ this also has the benefit of returning an Enumerator if no block is given. so if you don't just want to print it, you can also use Enumerable methods like map , select etc. on it."
806,"Yup, that method does definitely need breaking down into smaller pieces. You may like to use an iterator method to loop through the lines. Something along the lines of : IEnumerable<string> EachCSVKey(string[] csvLines)
{
    int indexKeyField = csvHeaders.IndexOf(CSVKEYFIELDNAME.ToLower());

    for (int i = 1; i <= csvLines.Length - 1; i++) // i=1 => skip header line
    {
        string[] csvFieldsArray = csvLines[i].Split(';');
        yield return csvFieldsArray[indexKeyField];
    }
} Then in your method : foreach ( var csvKeyValue in EachCSVKey ( csvLines) )
{ 
  ... I find (in my opinion) that this makes the intent clearer. Note also you should get the indexKeyField value outside of the loop. This value won't change, and so it is unnecessary to keep getting it."
807,"This may be a sign you need to factor out the Fetch into a new method: ....
shippedItems.AddRange( LastWeeksMarketItems() );
....

private OrderItems LastWeeksMarketItems ()
{
    return OrderItem.Fetch(market: this.MARKET,   
                           shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,    
                           orderPlacedAfter: serverTime.AddDays(-7), 
                           orderPlacedBefore: serverTime.AddHours(-85));
} The method name gives you further clarity about what it is you are trying to add."
808,"Retrieving list of flight numbers from flight path. The below is \$O(n^3)\$. I'm sure there is a way to improve this.. //vector<string> flight_path; given as parameter
//vector<int> flight_number; need to fill
//vector<segment> flight_segments; known, contains segments (dep, arr, flightnum)

//Purpose of the function is to take in a flight_path and give back a list of
// flight numbers for each segment
//
// Input: New York, London, Kolkata
// Output: 101 201 301, 102 939

vector<string> get_flight_numbers (vector<string> flight_path) {

    vector<int> flight_number;

    for (int i = 0; i < flight_path.size() - 1; i++) {

        string dep = flight_path.at(i);
        string arr = flight_path.at(i+1);

        for (int j = 0; j < flight_segments.size(); j ++) {
            if (flight_segments.at(j).departure == dep && flight_segments.at(j).arrival == arr) {
                for (int k = 0; k < flight_segments.at(j).segment_numbers.size(); k++) {
                    flight_numbers.push_back(atoi(flight_segments.at(j).segment_numbers.at(k).c_str()));
                }
            }
        }

    }
}"
809,"Assuming that you also have user authenticated application behavior check against the open session before it executes, your security process appears reasonably solid. I would personally feel a little uncomfortable storing my salt in the user's cookie - though excluding it in your setup may prove problematic if each user has a unique string. From your description, it sounds like you are already retrieving the user's salt from the db during authentication and not from the cookie. Lastly, your variable $postedUsername kinda has me worried. You are escaping or removing unsafe (for MySQL) characters before your query, aren't you?"
810,"Review the vimrc for a Python programmer. I am primarily a Python programmer and have finally ditched the IDE in favour of vim and I will admit, I am loving it ! My vimrc file looks like this: autocmd BufRead,BufNewFile *.py syntax on
autocmd BufRead,BufNewFile *.py set ai
autocmd BufRead *.py set smartindent cinwords=if,elif,else,for,while,with,try,except,finally,def,class
set tabstop=4
set expandtab
set shiftwidth=4
filetype indent on Any changes I should make to make my Python vim experience more pleasant?"
811,"If I understand this, you have a directed graph that consists of a series of flight segments. You are given a series of flight segments, say, A -> B -> C, that makes up a flight path. In addition, you have a group of flight numbers. The flight numbers correspond to paths. Flight number 1 will be tagged as [A,B,1], for example. Time is not an issue, all flights are assumed to be available at all times. Can you, in less than \$O(n^3)\$ time, figure out what flight numbers can take you from one segment to the next? Well, on approach might be to go through the array exactly once in order to separate out all the flights that depart from your first departure gate, your second departure gate, and so forth. That's order n. Then go through each of those lists (once) and remove all the flights that don't have the right destination gate. That's order n again. At that point, you're pretty much done. So think your big mistake here is going through your big loop (the flights) INSIDE your little loop (your flight path). You'd be much better off going through the small loop inside the big loop and breaking if you find a match. This loop only nests once, also, instead of twice. If you really really wanted to, you could check each departure as you find it to see if it matches an arrival. In psuedo-code: for (i in each flight) do
    for (j in each pathpoint except the last one) do
        if flight[i][departure][i] == pathpoint[j] then
            if flight[j][arrival] == pathpoint[j+1]
                put flight in the good flights vector
            end if
        end if
    end for
end for That's \$O(n*m)\$, where \$m\$ is the length of the path and n is the number of flights. This should be, in any reasonable world, \$O(n)\$."
812,"Getting lists of values from a CSV. I have a function that takes a column title, and a response.body from a urllib GET (I already know the body contains text/csv), and iterates through the data to build a list of values to be returned. My question to the gurus here: have I written this in the cleanest, most efficient way possible? Can you suggest any improvements? def _get_values_from_csv(self, column_title, response_body):
    """"""retrieves specified values found in the csv body returned from GET
    @requires: csv
    @param column_title: the name of the column for which we'll build a list of return values.
    @param response_body: the raw GET output, which should contain the csv data
    @return: list of elements from the column specified.
    @note: the return values have duplicates removed. This could pose a problem, if you are looking for duplicates.
    I'm not sure how to deal with that issue.""""""
    dicts = [row for row in csv.DictReader(response_body.split(""\r\n""))]
    results = {}
    for dic in dicts:
        for k, v in dic.iteritems():
            try:
                results[k] = results[k] + [v] #adds elements as list+list
            except: #first time through the iteritems loop.
                results[k] = [v]

    #one potential problem with this technique: handling duplicate rows
    #not sure what to do about it.
    return_list = list(set(results[column_title]))
    return_list.sort()
    return return_list"
814,"My suggestions: def _get_values_from_csv(self, column_title, response_body):
    # collect results in a set to eliminate duplicates
    results = set()

    # iterate the DictReader directly
    for dic in csv.DictReader(response_body.split(""\r\n"")):
        # only add the single column we are interested in
        results.add(dic[column_title])

    # turn the set into a list and sort it
    return_list = list(results)
    return_list.sort()
    return return_list"
816,"I like to add the following: "" Allow easy use of hidden buffers.
"" This allows you to move away from a buffer without saving
set hidden

"" Turn search highlighting on
set hlsearch

"" Turn on spelling
"" This auto spell checks comments not code (so very cool)
set spell

"" tabstop:          Width of tab character
"" expandtab:        When on uses space instead of tabs
"" softtabstop:      Fine tunes the amount of white space to be added
"" shiftwidth        Determines the amount of whitespace to add in normal mode
set tabstop     =4
set softtabstop =4
set shiftwidth  =4
set expandtab"
817,"Here's a shorter function that does the same thing. It doesn't create lists for the columns you're not interested in. def _get_values_from_csv(self, column_title, response_body):
    dicts = csv.DictReader(response_body.split(""\r\n""))
    return sorted(set(d[column_title] for d in dicts))"
819,"Composable Locks using LINQ. Can anyone see any problem with this ?. I was playing around with LINQ and I came up with the following idea for composing locks taking advantage of C# Monadic syntax. It seems too simple, so I thought let me post it on StackExchange and see if anyone can quickly spot any major problems with this approach. If you comment the lock inside the atomic implementation you'll see the accounts getting corrupted. This idea is about being able to compose operations on the accounts without explicit locking. using System;
using System.Collections.Generic;
using System.Linq;

namespace AtomicLinq
{
    public static class AccountCombinators
    {
        public static IAtomic<Unit> TransferAndReverse(this Account accA, 
                                                      Account accB, 
                                                      double amount)
        {
            return from a in accA.TransferTo(accB, amount)
                   from b in accB.TransferTo(accA, amount)
                   select new Unit();
        }

        public static IAtomic<Unit> TransferTo(this Account accA, 
                                              Account accB, 
                                              double amount)
        {
            return from a in accA.Withdraw(amount)
                   from b in accB.Deposit(amount)
                   select new Unit();
        }

        public static IAtomic<double> Withdraw(this Account acc, double amount)
        {
            return Atomic.Create(() => acc.Amount -= amount);
        }

        public static IAtomic<double> Deposit(this Account acc, double amount)
        {
            return Atomic.Create(() => acc.Amount += amount);
        }
    }

    static class Program
    {
        static void Main(string[] args)
        {
            var accA = new Account(""John"") { Amount = 100.0 };
            var accB = new Account(""Mark"") { Amount = 200.0 };

            var syncObject = new object();
            Enumerable.Range(1, 100000).AsParallel().Select(_ => accA.TransferAndReverse(accB, 100).Execute(syncObject)).Run();

            Console.WriteLine(""{0} {1}"", accA, accA.Amount);
            Console.WriteLine(""{0} {1}"", accB, accB.Amount);

            Console.ReadLine();
        }        
    }    

    public class Account
    {
        public double Amount { get; set; }
        private readonly string _name;

        public Account(string name)
        {
            _name = name;
        }

        public override string ToString()
        {
            return _name;
        }
    }

    #region Atomic Implementation

    public interface IAtomic<T>
    {
        T Execute(object sync);
    }

    public static class Atomic
    {
        public static IAtomic<T> Create<T>(Func<object, T> f)
        {
            return new AnonymousAtomic<T>(f);
        }

        public static IAtomic<T> Create<T>(Func<T> f)
        {
            return Create(_ => f());
        }

        public static IAtomic<T> Aggregate<T>(this IEnumerable<IAtomic<T>> xs)
        {
            return xs.Aggregate((x, y) => from a in x
                                          from b in y
                                          select b);
        }

        public static IAtomic<K> SelectMany<T, V, K>(this IAtomic<T> m, Func<T, IAtomic<V>> f, Func<T, V, K> p)
        {
            return Create(sync =>
                              {
                                  var t = m.Execute(sync);
                                  var x = f(t);
                                  return p(t, x.Execute(sync));
                              });
        }
    }

    public class AnonymousAtomic<T> : IAtomic<T>
    {
        private readonly Func<object, T> _func;

        public AnonymousAtomic(Func<object, T> func)
        {
            _func = func;
        }

        public T Execute(object sync)
        {
            lock (sync)  // Try to comment this lock you'll see that the accounts get corrupted
                return _func(sync);
        }
    }

    #endregion Atomic Implementation   
}"
821,My program is the shortest possible: print 12942 Use the formula of inclusion/exclusion. There should be 200-(200/4)-(200/7)+(200/28) (Using integer division) = 200-50-28+7 = 129 terms in the sum. The sum must be s(200) - 4*s(200/4) - 7*s(200/7) + 28*s(200/28) where s(n) = sum from 1 till n = n*(n+1)/2 . This evaluates to 0.5* (200*201 - 4*50*51 - 7*28*29 + 28*7*8) = 0.5*(40200 - 10200 - 5684 + 1568) = **12942** . Why write a program if you can use math? (I'll admit I used a calculator to multiply and add the numbers)
822,"Since you're using C99, you may be interested in the <stdbool.h> header, this includes three macro definitions, similar to ones you've already defined. This header has at least the following macro definitions on any conforming implementation: #define bool _Bool
#define true 1
#define false 0 In C99, _Bool is a native Boolean data type, it contains only 0, or 1. When converting any scalar type to _Bool , it will convert to 0 if the scalar type is equal to 0, otherwise it will convert to 1. Also, in C99, the implicit int  has been removed, so you must give every function a return type, even main . In older C, functions without an explicit return type would default to int type (as would arguments, I think)."
823,"Handling SIGINT signal for a server program. I have created a small server program that encrypts text using a named pipe: #define UNICODE
#define WIN32_WINNT 0x0500
#include <stdio.h>
#include <windows.h>
#include <signal.h>



HANDLE hPipe;
DWORD WINAPI ServerProc(LPVOID lpVoid)
{


    hPipe = CreateNamedPipe(L""\\\\.\\pipe\\testpipe"", PIPE_ACCESS_DUPLEX, PIPE_TYPE_BYTE | PIPE_READMODE_BYTE |PIPE_WAIT, 1, 256, 256, 0, NULL);
    if(!hPipe)
        return wprintf(L""ERROR : Cannot create pipe.\n"");

    while(ConnectNamedPipe(hPipe, NULL))
    {
        WCHAR szText[80] = {0};
        DWORD dwSize;
        INT i;

        ReadFile(hPipe, szText, 158, &dwSize, NULL);

        for(i = 0; i < dwSize; i++)
            szText[i] ^= '#';

        WriteFile(hPipe, szText, 158, &dwSize, NULL);
        FlushFileBuffers(hPipe);
            DisconnectNamedPipe(hPipe);
    }

    CloseHandle(hPipe);

    return 0;
}

void SignalHandler(int signal)
{
    DisconnectNamedPipe(hPipe);
    CloseHandle(hPipe);
    printf(""Application closing...\n"");
    exit(0);
}


int wmain(void)
{
    HANDLE hThread;

    signal(SIGINT, SignalHandler);  

    hThread = CreateThread(NULL, 0, ServerProc, NULL, 0, NULL);

    WaitForSingleObject(hThread, INFINITE);

    CloseHandle(hThread);
} In this code I have created a hPipe handle as global because my program thread and the signal handler both need the handle. Is this a correct way to handle signals?"
824,"Looking for improvements on my jQuery-UI tagging widget. I am looking for any possible improvements on this tagging widget. I ask for special attention to be paid to my blur handler in the event of a autocomplete option being specified but any optimizations or critiques are welcome. Demo: http://webspirited.com/tagit Js File: http://webspirited.com/tagit/js/tagit.js Css File: http://webspirited.com/tagit/css/tagit.css Code: (function($) {
    $.widget(""ui.tagit"", {

        // default options
        options: {
            tagSource:   [],
            triggerKeys: ['enter', 'space', 'comma', 'tab'],
            initialTags: [],
            minLength:   1
        },

        _keys: {
            backspace: 8,
            enter:     13,
            space:     32,
            comma:     44,
            tab:       9
        },

        //initialization function
        _create: function() {

            var self = this;
            this.tagsArray = [];

            //store reference to the ul
            this.element = this.element;

            //add class ""tagit"" for theming
            this.element.addClass(""tagit"");

            //add any initial tags added through html to the array
            this.element.children('li').each(function() {
                self.options.initialTags.push($(this).text());
            });

            //add the html input
            this.element.html('<li class=""tagit-new""><input class=""tagit-input"" type=""text"" /></li>');

            this.input = this.element.find("".tagit-input"");

            //setup click handler
            $(this.element).click(function(e) {
                if (e.target.tagName == 'A') {
                    // Removes a tag when the little 'x' is clicked.
                    $(e.target).parent().remove();
                    self._popTag();
                }
                else {
                    self.input.focus();
                }
            });

            //setup autcomplete handler
            this.options.appendTo = this.element;
            this.options.source = this.options.tagSource;
            this.options.select = function(event, ui) {
                self._removeTag();
                self._addTag(ui.item.value);
                return false;
            }
            this.input.autocomplete(this.options);

            //setup keydown handler
            this.input.keydown(function(e) {
                var lastLi = self.element.children("".tagit-choice:last"");
                if (e.which == self._keys.backspace)
                    return self._backspace(lastLi);

                if (self._isInitKey(e.which)) {
                    e.preventDefault();
                    if ($(this).val().length >= self.options.minLength)
                        self._addTag($(this).val());
                }

                if (lastLi.hasClass('selected'))
                    lastLi.removeClass('selected');

                self.lastKey = e.which;
            });

            //setup blur handler
            this.input.blur(function(e) {
                self._addTag($(this).val());
                $(this).val('');
                return false;
            });

            //define missing trim function for strings
            String.prototype.trim = function() {
                return this.replace(/^\s+|\s+$/g, """");
            };

            this._initialTags();

        },
        _popTag: function() {
            return this.tagsArray.pop();
        }
        ,

        _addTag: function(value) {
            this.input.val("""");
            value = value.replace(/,+$/, """");
            value = value.trim();
            if (value == """" || this._exists(value))
                return false;

            var tag = """";
            tag = '<li class=""tagit-choice"">' + value + '<a class=""tagit-close"">x</a></li>';
            $(tag).insertBefore(this.input.parent());
            this.input.val("""");
            this.tagsArray.push(value);
        }
        ,

        _exists: function(value) {
            if (this.tagsArray.length == 0 || $.inArray(value, this.tagsArray) == -1)
                return false;
            return true;
        }
        ,

        _isInitKey : function(keyCode) {
            var keyName = """";
            for (var key in this._keys)
                if (this._keys[key] == keyCode)
                    keyName = key

            if ($.inArray(keyName, this.options.triggerKeys) != -1)
                return true;
            return false;
        }
        ,

        _removeTag: function() {
            this._popTag();
            this.element.children("".tagit-choice:last"").remove();
        }
        ,

        _backspace: function(li) {
            if (this.input.val() == """") {
                // When backspace is pressed, the last tag is deleted.
                if (this.lastKey == this._keys.backspace) {
                    this._popTag();
                    li.remove();
                    this.lastKey = null;
                } else {
                    li.addClass('selected');
                    this.lastKey = this._keys.backspace;
                }
            }
            return true;
        }
        ,

        _initialTags: function() {
            if (this.options.initialTags.length != 0) {
                for (var i in this.options.initialTags)
                    if (!this._exists(this.options.initialTags[i]))
                        this._addTag(this.options.initialTags[i]);
            }
        }
        ,

        tags: function() {
            return this.tagsArray;
        }
        ,

        destroy: function() {
            $.Widget.prototype.destroy.apply(this, arguments); // default destroy
            this.tagsArray = [];
        }

    });
})(jQuery);"
825,"It depends on what you want the server to do when an interrupt is sent. If you really want the program to stop when it is sent an interrupt, even though it is a service (Windows) or daemon (Unix), then what you did works.  If, however, the program was run with settings to ignore interrupts, your code overrides that.  The canonical sequence for setting a signal handler (for signal number signum ) is: if (signal(signum, SIG_IGN) != SIG_IGN)
    signal(signum, sighandler); If the program was ignoring the signal, it continues to do so.  Otherwise, it sets its own handler to handle the signal. On Unix, you usually use SIGTERM to do a controlled stop of a program, and for daemons, you typically use SIGHUP to indicate that the daemon should revisit its configuration. Also, in the POSIX world, it is generally recommended to use sigaction() rather than signal() because it gives different and better guarantees about what happens. If your program needed to continue after receiving the signal, you would have to reset the signal handler in the signal handler - and there's a small window of vulnerability which means that if two signals are sent fast enough, the program stops despite your handler.  Using sigaction() avoids this timing vulnerability."
826,"This is not actually an answer to your question, but since you mentioned that you come from C# to Ruby, I just wanted to point out that the idiomatic Ruby solution that @sepp2k presented is pretty much indentical to what an idiomatic C# solution would have looked like: class Multiples : IEnumerable<int>
{
    private readonly int _multiplesOf;
    private readonly int _limit;

    public static Multiples Of(int multiplesOf = 1, int limit = int.MaxValue) =>
        new Multiples(multiplesOf, limit)

    Multiples(int multiplesOf = 1, int limit = int.MaxValue)
    {
        _multiplesOf = multiplesOf;
        _limit = limit;
    }

    public IEnumerator<int> GetEnumerator()
    {
        var i = 0;
        while ((i += _multiplesOf) <= _limit) yield return i;
    }

    IEnumerator IEnumerable.GetEnumerator() =>
        GetEnumerator()
} It might not be immediately obvious that those two examples are the same, but they mostly are. The main difference is that .NET's libraries are much weaker than Ruby's, so we had to implement some stuff manually that was provided for us by the Ruby libraries. You would use both versions pretty much the same way: // C#
foreach (var n in Multiples.Of(7, 50)) Console.WriteLine(n);
Multiples.Of(7, 50).ToList().ForEach(Console.WriteLine);
Console.WriteLine(Multiples.Of(7, 50).ToArray());

# Ruby
multiples(7, 50) {|n| puts n }
multiples(7, 50, &method(:puts))
puts *multiples(7, 50) In fact, the C# version I presented here is slightly more powerful, since it allows the client to choose the termination condition more freely. For example, what if I don't want the multiples of 7 below 50, but rather the first 50 multiples? Easy: Multiples.Of(7).Take(50) Implementing this for the Ruby version is left as an exercise to the reader :-)"
827,"Implementing a fast 'split' function on a stream of characters in Java. I was writing a piece of code (a custom EntityProcessor for Solr, but that isn't too relevant) designed to break lines of input based on a string delimiter ( toMatch below). Characters are read from a stream and then passed to addChar . The assumption is that each character comes in a stream and look-ahead isn't allowed - the break needs to happen after the last character of a match is passed in. I wrote two implementations below addChar and addChar2 . The first is a simple, dumb, keep a buffer and compare it each iteration, the second is a simple state machine and the latter is slightly faster. import java.util.Iterator;
import java.util.LinkedList;

public class CharStreamMatcher {
    protected char[] toMatch = null;


    public MagicCharStreamMatcher(char[] match){
        toMatch = match;
        for(int i=0;i<match.length;i++) li.add((char)0);
    }

    public void clear(){
        correspondences.clear();
    }

    LinkedList<Character> li = new LinkedList<Character>();
    public boolean addChar2(char c){
        li.addLast(c);
        li.removeFirst();
        int i=0;
        for(Character ch : li){
            if(ch.charValue() != toMatch[i++])
                return false;
        }
        return true;
    }


    private class MutableInteger{
        public int i;
        public MutableInteger(int i){
            this.i = i;
        }
    }

    LinkedList<MutableInteger> correspondences = new LinkedList<MutableInteger>();
    public boolean addChar(char c){
        boolean result = false; 

        if(c == toMatch[0])
            correspondences.add(new MutableInteger(-1));

        Iterator<MutableInteger> it = correspondences.iterator();
        while(it.hasNext()){
            MutableInteger mi = it.next();
            mi.i++;

            // check the match
            if(c != toMatch[mi.i]){
                it.remove();
            }
            // are we done? 
            else if(mi.i == toMatch.length-1){
                result = true;
                it.remove();
            }
        }

        return result;
    }   
}"
828,"Calculation of prime numbers making use of Parallel.ForEach. In my spare time I decided to write a program that would systematically identify prime numbers from 2 to 18,446,744,073,709,551,615.  This is for fun and learning, as I know it will take too long to actually ever reach the upward value, but I'm using this to explore parallel processing.  I know this is not a traditional question but I very much would like the critique of my peers.  I know this can been torn apart, so please do, but if you do, do so constructively. The program is designed to run until the user hits the esc key; at which time it will generate a file with all of the prime numbers discovered.  The path to this file needs to be configured to a value for your directory structure.  When I restart the program it will accept, as an argument, a primes text file, reading it in and starting from where it left off.  The parallel processing portion and implementing the sieve for finding primes is what I was interested in woodshedding. using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Threading.Tasks;

namespace Prime
{
    public class Program
    {
        public static void Main(string[] args)
        {
            List<UInt64> primes = new List<UInt64>();
            primes.Add(2);
            UInt64 numberToCheck = 3;

            if (args.Count() > 0)
            {
                numberToCheck = ReadPrimesToList(args[0].ToString(), out primes) +2;
            }

            try
            {
                bool quit = false;
                Console.WriteLine(""Prime Number Search"");

                while (!quit)
                {
                    if (Console.KeyAvailable)
                        quit = Console.ReadKey().Key == ConsoleKey.Escape;

                    Console.Write(""Processing: "" + numberToCheck);

                    if (CheckForPrime(numberToCheck, primes))
                    {
                        primes.Add(numberToCheck);
                        Console.WriteLine("" Prime Found!"");
                    }
                    else
                        Console.WriteLine("" Not Prime :("");

                    if (numberToCheck < UInt64.MaxValue)
                        numberToCheck+=2;
                    else
                        break;
                }

                Console.WriteLine(""Exiting"");
                WritePrimesToFile(primes);
                Console.WriteLine(""< Press Any Key To Exit >"");
                Console.ReadKey();
            }
            catch
            {
                if (primes.Count > 0)
                    WritePrimesToFile(primes);
            }
        }

        private static UInt64 ReadPrimesToList(string fileName, out List<UInt64> primes)
        {
            primes = new List<UInt64>();
            FileInfo file = new FileInfo(fileName);
            StreamReader reader = new StreamReader(file.OpenRead());

            String lineIn = String.Empty;
            while (!reader.EndOfStream)
            {
                lineIn = reader.ReadLine();
                String[] numberStrings = lineIn.Split(new char[] {' '}, StringSplitOptions.RemoveEmptyEntries);
                foreach (String numberString in numberStrings)
                {
                    primes.Add(UInt64.Parse(numberString));
                }
            }

            return primes[primes.Count() - 1];
        }

        private static void WritePrimesToFile(List<UInt64> primes)
        {
            String dateAndTime = DateTime.Now.ToString(""yyyyMMddhhmm"");
            String fileName = String.Format(@""<substitute your path here>\primes [{0}].txt"", dateAndTime);
            FileInfo file = new FileInfo(fileName);
            using (StreamWriter writer = file.CreateText())
            {
                int maxLength = primes[primes.Count - 1].ToString().Length;

                String line = String.Empty;
                const int maxColumn = 16;
                int column = 0;


                foreach (UInt64 number in primes)
                {
                    string numberString = number.ToString();
                    int numberLength = numberString.Length;

                    line += numberString.PadLeft(maxLength, ' ') + ((column < (maxColumn-1)) ? "" "" : String.Empty);

                    column++;

                    if (column == maxColumn)
                    {
                        writer.WriteLine(line);
                        line = string.Empty;
                        column = 0;
                    }
                }

                if (line.Length > 0)
                    writer.WriteLine(line);

                writer.Flush();
                writer.Close();
            }
        }

        private static bool CheckForPrime(UInt64 numberToCheck, List<UInt64> primes)
        {
            if ((numberToCheck % 2) == 0)
                return false;

            UInt64 halfway = (UInt64)(Math.Ceiling((float)numberToCheck / 2F));

            bool isprime = false;
            UInt64 factor = 0;

            Parallel.ForEach<UInt64>(primes, (prime, loopState) =>
            {
                if (prime > halfway)
                {
                    isprime = true;
                    loopState.Stop();
                }

                if ((numberToCheck % prime) == 0)
                {
                    factor = prime;
                    isprime = false;
                    loopState.Stop();
                }
            });

            return (isprime && factor == 0);
        }
    }
}"
829,"Hmmmm... To speed it up, I'd look into alternate Prime Number tests, like Miller Rabin Test or AKS Test Here is a sample of code for the Miller Rabin algorithm written in C#.  Maybe it can be parallelized and work faster than the method you currently have?"
830,"Clickable icon for expanding/collapsing content. The general idea of the code is that I have a + or - icon ( "".trigger"" ) that is click-able and will expand or collapse the content ( "".cont"" ) directly following it (there are many of there expand/collapse pairs).  I also have a span ( ""#expandAll"" ) that, when clicked, will expand or collapse every block. Please review my first usage of jQuery and help me put my head into a more jQuery state.  Where can the code be improved?  Are there any problems with it?  Is there a better way to do it? (To be perfectly honest, I have no idea what the $() function really does.) var expandAll = function () {
    $("".cont"").removeClass(""hid"");
    $(""#expandAll"").html(""Colapse All"");
    $(""#expandAll"").unbind(""click"", expandAll);
    $("".trigger"").html(""-"");
    $(""#expandAll"").click(colapseAll);
}
var colapseAll = function () {
    $("".cont"").addClass(""hid"");
    $(""#expandAll"").html(""Expand All"");
    $(""#expandAll"").unbind(""click"", colapseAll);
    $("".trigger"").html(""+"");
    $(""#expandAll"").click(expandAll);
}
$(document).ready(function () {
    $("".trigger"").click(function (event) {
        $this = $(this);
        $this.html($this.text() == '+' ? '-' : '+');
        $($this.nextAll("".cont"").get(0)).toggleClass(""hid"");
    });
    $(""#expandAll"").click(expandAll);
}); Please let me know if you need more/less info."
831,"I've refactored your code and added comments to explain certain things. // We can shorten this from document.ready(...) to $(...) 
// Internally, jQuery will add the passed in function to a list
// of handlers that will be invoked when the document is ready.
$(function() {
    // Since the $ function will query the document with the 
    // specified selector we want to cache these.
    // Doing this from within the ready callback allows us 
    // to keep these references hidden.
    // I've also added the 2 function variables to keep them
    // hidden as well.
    var expandAll, colapseAll,
        expandAllElement = $(""#expandAll""),
        contElements = $("".cont""),
        triggerElements = $("".trigger"");

    expandAll = function() {
        contElements.removeClass(""hid"");
        triggerElements.html(""-"");
        // Notice how we can chain these calls together?
        // jQuery was designed with a fluent interface.
        expandAllElement.html(""Colapse All"").one(""click"", colapseAll);
    };

    colapseAll = function() {
        contElements.addClass(""hid"");
        triggerElements.html(""+"");
        expandAllElement.html(""Expand All"").one(""click"", expandAll);
    };

    triggerElements.click(function(event) {
        // Always define a variable so the 'name' 
        // is not defined in the global object,
        var $this = $(this);
        $this.html($this.text() == '+' ? '-' : '+');
        $($this.nextAll("".cont"").get(0)).toggleClass(""hid"");
    });

    // Using the one function allows you to skip 
    // unbinding the event handler for each click.
    expandAllElement.one(""click"", expandAll);
});"
832,"I'm trying to compile your code: What kind of class is Unit? Do I need to reference an additional assembly? Run at the end of Enumerable.Range(1, 100000).AsParallel().Select(_ => accA.TransferAndReverse(accB, 100).Execute(syncObject)).Run(); seems to be unnecessary."
833,"Just one small comment in addition to those provided by Saeed and Mongus, you have defined a constant called CSVKEYFIELDNAME but in the only place it is (shown to be) used, you call ToLower() on it. Should the constant be provided as lower case to begin with, or should you be doing a case insensitive search?"
834,"Traversing a multidimensional structure and applying strip() to all strings. I'm trying to apply string.strip() to all the leafs that are strings in a multidimensional collection, but my Python is a bit rusty (to say the least). The following is the best I've come up with, but I suspect there's a much better way to do it. def strip_spaces( item ):
    if hasattr( item, ""__iter__"" ):
        if isinstance( item, list ):
            return [strip_spaces( value ) for value in item]
        elif isinstance( item, dict ):
            return dict([(value,strip_spaces(value)) for value in item])
        elif isinstance( item, tuple ):
            return tuple([ strip_spaces( value ) for value in item ])
    elif isinstance( item, str ) or isinstance( item, unicode ):
        item = item.strip()
    return item"
836,"Is ToIEnumerable<T> good practice?. I have an extension method that does this: public static IEnumerable<T> ToIEnumerable<T>(this T source) where T : new()
{
    return new[] { source };
} I need to be able to convert any object to an IEnumerable . For example when I use the .NET Except method: public static IEnumerable<TSource> Except<TSource>(this IEnumerable<TSource> first) I can call Except by doing the following: return objects.Except(this.ToIEnumerable()); Is ToIEnumerable<T> good practice or should I solve the problem in differently?"
837,"Displaying all single posts. I think there are some confusing and weird indentation problems in this WordPress file (single.php). Any suggestions on improving indentation and readability? <?php
/**
 * The Template for displaying all single posts.
 *
 * @package WordPress
 * @subpackage Starkers
 * @since Starkers 3.0
 */

get_header(); ?>

<?php get_sidebar(); ?>

<div id=""content"">
    <?php // Set and display custom field
        $intro_image = get_post_meta($post->ID, 'Intro Image', true); ?>
        <div class=""block-1"">
            <img src=""<?php echo $intro_image; ?>"" alt="""" />
        </div> <?php
    ?>

    <?php // Start The Loop
        if ( have_posts() ) while ( have_posts() ) : the_post();
    ?>  <div class=""block-2 padding-top no-overlay"">
            <?php the_content(); ?>
        </div><!-- .entry-content -->
    <?php endwhile; // end of the loop. ?>

    <?php //  Display previous and next posts thumbnails ?>
        <div class=""block-2 border-top"">
        <?php // Set and display custom field
            $mainbar_left_title = get_post_meta($post->ID, 'Mainbar Left Title', true);
            $mainbar_left_image = get_post_meta($post->ID, 'Mainbar Left Image', true); ?>
            <div class=""float-left"">
                <h2><?php echo $mainbar_left_title; ?></h2>
                <img src=""<?php echo $mainbar_left_image ?>"" alt="""" />
            </div> <?php
        ?>

        <?php // Set and display custom field
            $mainbar_right_title = get_post_meta($post->ID, 'Mainbar Right Title', true);
            $mainbar_right_image = get_post_meta($post->ID, 'Mainbar Right Image', true); ?>
            <div class=""float-right"">
                <h2><?php echo $mainbar_right_title; ?></h2>
                <img src=""<?php echo $mainbar_right_image ?>"" alt="""" />
            </div> <?php
        ?>
    </div>

    <?php // Set and display custom field
        $mainbar_right_title = get_post_meta($post->ID, 'Mainbar Right Title', true);
        $mainbar_right_image = get_post_meta($post->ID, 'Mainbar Right Image', true); ?>
        <div class=""block-3 border-top"">
            <h2><?php echo $mainbar_right_title; ?></h2>
            <img src=""<?php echo $mainbar_right_image ?>"" alt="""" />
        </div> <?php
    ?>

    <?php // Start The Loop
        if ( have_posts() ) while ( have_posts() ) : the_post();
    ?>  <div class=""block-4 border-top"">
            <?php the_content(); ?>
        </div><!-- .entry-content -->
    <?php endwhile; // end of the loop. ?>

    <?php get_sidebar('secondary'); ?>
</div><!-- #content -->

<?php get_footer(); ?>"
839,"I don't see why not. If you wanted to be 'monadically pure', you could call it Return (because in monads, the function which performs 'a -> M 'a is called return ). (See this question : FromSingleItem , or AsEnumerable - someone there also suggested using the existing Enumerable.Repeat(T item, int count) )"
840,"<?php // Start The Loop
   if ( have_posts() ) while ( have_posts() ) : the_post();
?>  <div class=""block-2 padding-top no-overlay"">
        <?php the_content(); ?>
    </div><!-- .entry-content -->
<?php endwhile; // end of the loop. ?> That could become: <?php // Start The Loop
   if (have_posts()) {
      while (have_posts()) : the_post(); ?>
         <div class=""block-2 padding-top no-overlay"">
            <?php the_content(); ?>
         </div><!-- .entry-content -->
      <?php endwhile; // end of the loop.
   } ?> Still a bit confusing, but I'll keep thinking about it. Another idea, that uses more <?php> tags: <?php if (have_posts()) { // Start the loop ?>
   <? while (have_posts()) : the_post(); ?>
      <div class=""block-2 padding-top no-overlay"">
         <?php the_content(); ?>
      </div><!-- .entry-content -->
   <?php endwhile; // end of the loop. ?>
<?php } ?> Another section change: <?php // Set and display custom field
   $mainbar_right_title = get_post_meta($post->ID, 'Mainbar Right Title', true);
   $mainbar_right_image = get_post_meta($post->ID, 'Mainbar Right Image', true);
?>
<div class=""float-right"">
   <h2><?php echo $mainbar_right_title; ?></h2>
   <img src=""<?php echo $mainbar_right_image ?>"" alt="""" />
</div> There's a seemingly useless <?php \n ?> sitting there. It looks like the idea was to close a code block, but it doesn't do anything. I removed that and changed the indentation so it didn't look like a block."
841,"While I don't see why ToIEnumerable is bad practice, in this specific case I think it is. You're comparing with only one object; why not just attach a where clause on to things? I.e. return objects.Where((other) => other != this); or possibly return objects.Where((other) => !Object.ReferenceEquals(other, this)); Not only will this perform better than Except here, but it's easier to understand, and avoids the entire ToIEnumerable thing entirely."
843,"elif isinstance( item, dict ):
    return dict([(value,strip_spaces(value)) for value in item]) This will transform { '  a  ': '  b  ' } into {'  a  ': 'a' } , which I suspect is not what you want. How about: return dict([(key, strip_spaces(value)) for key, value in item.items()])"
844,"I don't understand why you are checking for an __iter__ attribute, as you don't seem to use it. However I would recommend a couple of changes: Use Abstract Base Classes in the collections module to test duck types, such as ""Iterable"" Use types.StringTypes to detect string types . import collections
import types

def strip_spaces( item ):
    if isinstance( item, types.StringTypes ):
        return item.strip()

    if isinstance( item, collections.Iterable ):
        if isinstance( item, list ):
            return [ strip_spaces( value ) for value in item ]

        elif isinstance( item, dict ):
            return dict([ ((strip_spaces(key), strip_spaces(value)) \
                                    for key, value in item.iteritems() ])

        elif isinstance( item, tuple ):
            return tuple( [ strip_spaces( value ) for value in item ] )

    return item"
845,sepp2k's critique is incorrect - assoc on a vector takes O(log n) time not O(n) time because Clojure uses persistent vectors. You should avoid using assoc! because it is Clojure style to avoid needless destructive behavior. For more on persistent vectors see: http://blog.higher-order.net/2009/02/01/understanding-clojures-persistentvector-implementation/
846,"The disadvantage I see in your design is that you have decoupled the lock from the actual objects that should not be changed by another thread during the critical section. In your case only the two accounts of a transaction should be locked but you created a global lock syncObject that practically turns your parallel execution into a serial one. In other word if you had an accC and accD in Main you could not do a transfer between accC and accD in parallel with a transfer between accA and accB . You might be able to hack this by creating a series of lock objects and pass them somehow one-by-one in the proper order to Execute but if the call to the paralell execution is made from a much higher abstraction level then the manipulated objects are on you probably won't be able to pass the proper lock objects to Execute . Your only option would be to use a global lock for that AsParallel() ""session"" and that would defeat the purpose of using it."
847,"Is there a way to do this using
  parameters so the value is
  automatically converted to whatever
  datatype the keyfield has in the
  datatable? You could use something like this: object csvKeyValue = Convert.ChangeType(csvKeyValue, keyType); to convert a string to the type of the datatable column."
849,"I noticed this code: parameters.DataTableOriginal.Select(DBKEYFIELDNAME + ""='"" + csvKeyValue.ToString() + ""'"") . Just putting quotes around an user-input screams SQL Injection to me. The problem is that your code assumes that csvKeyValue has no quotes in it. That assumption is never checked anywhere, while csvKeyValue is read from an external file so cannot be trusted. Suppose the csvKeyValue equals ""a' or TRUE or 'x' ='x"". Do you really want to execute that select? Although I cannot judge whether this is a real danger, I thought I should mention it."
850,"Guessing game - am I using the concept of objects in Java properly?. I'm new to Java and find it hard to grasp the concept of objects. I wrote a simple guessing game to practice the concept of OO programming but I am not sure if I am doing it correctly. The objective of the game is to guess a number from 0-9 with 3 players and the first player who guesses it correctly will win the game. Player public class Player {

    private String playerName;
    private int number;

    public int getNumber() {
        return number;
    }

    public String getPlayerName() {
        return playerName;
    }

    public void setPlayerName(String playerName) {
        this.playerName = playerName;
    }

    public void guessNumber(){
        number = Integer.parseInt(JOptionPane.showInputDialog(playerName 
            + ""'s Turn\nGuess the Number""));
        JOptionPane.showMessageDialog(null, playerName+ ""'s GUESS is "" + number);
    }
} GuessGame public class GuessGame {

    private int numberToGuess;
    private Player p1;
    private Player p2;
    private Player p3;

    public void startGame(){
        numberToGuess = (int) (Math.random()*10);
        p1 = new Player();
        p2 = new Player();
        p3 = new Player();

        p1.setPlayerName(JOptionPane.showInputDialog(""Enter Player 1 Name: ""));
        p2.setPlayerName(JOptionPane.showInputDialog(""Enter Player 2 Name: ""));
        p3.setPlayerName(JOptionPane.showInputDialog(""Enter Player 3 Name: ""));

        int flagWinner = 0;
        while(0==flagWinner){
            p1.guessNumber();
            if (p1.getNumber()==numberToGuess){
                flagWinner = 1;
                break;
            }
            JOptionPane.showMessageDialog(null, p1.getPlayerName()
                + ""'s Guess is Wrong!"");
            p2.guessNumber();
            if (p2.getNumber()==numberToGuess){
                flagWinner = 2;
                break;
            }
            JOptionPane.showMessageDialog(null, p2.getPlayerName()
                + ""'s Guess is Wrong!"");
            p3.guessNumber();
            if (p3.getNumber()==numberToGuess){
                flagWinner = 3;
                break;
            }
            JOptionPane.showMessageDialog(null, p3.getPlayerName()
                + ""'s Guess is Wrong!"");
        }
        if (1 == flagWinner){
            JOptionPane.showMessageDialog(null,p1.getPlayerName()+ "" Wins!"");
        } else if (2 == flagWinner){
            JOptionPane.showMessageDialog(null,p2.getPlayerName()+ "" Wins!"");
        } else JOptionPane.showMessageDialog(null,p3.getPlayerName()+ "" Wins!"");
    }
} And I have a gameLauncher where I have the main() method which creates the game. Am I doing it correctly especially in the Player class where I created a method guessNumber() instead of setter setNumber(int number) ? Am I violating any object-oriented concepts in my code? How can I improve my code?"
851,"The layout felt very C++ and very connected to ""functions"" instead of objects. Though you seem to got a nice idea of how it's work and do a lot better at objects than most people do. I would do it like this (dirty version, should be improved, but it was a quick redesign): public class Player {
    private String playerName;
    private int number;

    public Player(String name){
      this.playerName = name;
    }

    public int guessNumber() {
        return Integer.parseInt(JOptionPane.showInputDialog(playerName
            +""'s Turn\nGuess the Number""));
        JOptionPane.showMessageDialog(null, playerName+ ""'s GUESS is "" + number);
    }

    public String getPlayerName() {
        return playerName;
    }
}

public class GuessGame {

    private int numberToGuess;
    private Player p1;
    private Player p2;
    private Player p3;

    //Would probably made amount of players dynamic as well.
    public GuessGame(String player1, String player2, String player3){
        numberToGuess = (int) (Math.random()*10);
        p1 = new Player(player1);
        p2 = new Player(player2);
        p3 = new Player(player3);
    }

    //Would probably split this up in submethods too.
    //The flagging is quite ugly too but I don't got time to edit it.
    public void startGame(){
        int flagWinner = 0;
        while(0==flagWinner){
            if (p1.guessNumber()==numberToGuess){
                flagWinner = 1;
                break;
            }
            JOptionPane.showMessageDialog(null, p1.getPlayerName()
                + ""'s Guess is Wrong!"");
            if (p2.guessNumber()==numberToGuess){
                flagWinner = 2;
                break;
            }
            JOptionPane.showMessageDialog(null,p2.getPlayerName()
                + ""'s Guess is Wrong!"");
            if (p3.guessNumber()==numberToGuess){
                flagWinner = 3;
                break;
            }
            JOptionPane.showMessageDialog(null,p3.getPlayerName()
                + ""'s Guess is Wrong!"");
        }
        if (1 == flagWinner){
            JOptionPane.showMessageDialog(null,p1.getPlayerName()+ "" Wins!"");
        } else if (2 == flagWinner){
            JOptionPane.showMessageDialog(null,p2.getPlayerName()+ "" Wins!"");
        } else JOptionPane.showMessageDialog(null,p3.getPlayerName()+ "" Wins!"");
    }

    public static void main(String[] e){
        GuessGame gg = new GuessGame(
            JOptionPane.showInputDialog(""Enter Player 1 Name: ""),
            JOptionPane.showInputDialog(""Enter Player 2 Name: ""),
            JOptionPane.showInputDialog(""Enter Player 3 Name: "")
        );
        gg.startGame();
    }
}"
852,"To start with, spot the inconsistency. For the name you create it in your main loop and then use a setter; for the number you have a method in the Player object to acquire the guess. The latter is more in line with the message-passing philosophy of OO. (Many people seem to think that using getters and setters is being OO. They're often - not always - a sign of non-OO thinking). However, it doesn't take it as far as it could. The number guessed isn't a property of the player - it's a property of the guess. Guessing a number isn't the same thing as displaying it - either rename the method or, probably better - a method should do one thing - move that out. Next up, the flagWinner is a big red flag. Its sole purpose is to identify one of the objects p1 , p2 , p3 , or none of the above. What's the OO way to do that? Use the object to identify itself. I'd be inclined to factor out the IO as an object too, to be a bit less procedural. So without going into a full over-patterned architecture we have public class IO {
    public void output(String msg) {
        JOptionPane.showMessageDialog(null, msg);
    }

    public String input(String prompt) {
        return JOptionPane.showInputDialog(prompt)
    }

    public int inputInt(String prompt) {
        return Integer.parseInt(input(prompt));
    }
}

public class Player {
    private String playerName;

    private Player(String name) {
        playerName = name;
    }

    public static Player createPlayer(IO io, String prompt) {
        String name = io.input(""Enter "" + prompt + "" Name: "");
        return new Player(name);
    }

    public String getPlayerName() {
        return playerName;
    }

    public int guessNumber(IO io) {
        return io.inputInt(playerName +""'s Turn\nGuess the Number""));
    }
}

public class GuessGame {

    private final IO io;
    private final int numPlayers;
    private int numberToGuess;
    private List<Player> players = new LinkedList<Player>();

    public GuessGame(IO io, int numPlayers) {
        this.io = io;
        this.numPlayers = numPlayers;
    }

    public void init() {
        numberToGuess = (int) (Math.random()*10);
        for (int i = 0; i < numPlayers; i++) {
            players.add(Player.createPlayer(io, ""Player "" + (i+1)));
        }
    }

    public void runGame(){
        init();

        Player winner = null;
        Iterator<Player> it = players.iterator();
        while (winner == null) {
            if (!it.hasNext()) {
                it = players.iterator();
            }

            Player turnPlayer = it.next();
            String playerName = turnPlayer.getPlayerName();

            int guess = turnPlayer.guessNumber(io);
            io.output(playerName+ ""'s GUESS is "" + number);

            if (guess == numberToGuess) {
                winner = turnPlayer;
            }
            else {
                io.output(playerName + ""'s Guess is Wrong!"");
            }
        }

        io.output(winner.getPlayerName()+ "" Wins!"");
    }
}"
854,"I think you are unwise to reject creation of variable used only once.  The forced line breaks you seem to be requesting are difficult if not impossible to implement in an aesthetically satisfactory way in an automated formatter - and if you're not using an automated formatter, you're wasting time. var state = ORDERITEMSHIPCONFIRMSTATE.NONE;
var start = serverTime.AddDays(-7);
var end = serverTime.AddHours(-85);
var range = OrderItem.Fetch(market: MARKET, shipConfirmState: state, orderPlacedAfter: start, orderPlacedBefore: end);
shippedItems.AddRange(range);"
855,"""Consecutive Heads"" program. So... I have a program in which I want to flip heads three times in the row. What I'm asking for is for proposals of other solutions for this program, in pro way, as You do in natural sense. That's my code as Java novice. /*
 * File: ConsecutiveHeads.java
 * ----------------
 * This program flips a coin repeatly until three consecutive heads
 * are tossed.
 */

import acm.program.*;
import acm.util.*;

public class ConsecutiveHeads extends ConsoleProgram {
    /* Run the program */
    public void run() {
        println(""This program flips a coin until there are three"" +
                ""heads in the row."");
        while(counter != 3) {
            FlipACoin();
        }
        println(""Yupii! There are already three same heads in the row :)"");
    }

    /* Flip a coin. Then if heads are tossed, increment our counter.
     * In tails case, zero counter. */
    private void FlipACoin() {
        boolean rank = rgen.nextBoolean();
        if(rank) {
            println(""heads"");
            counter++;
        } else {
            println(""tails"");
            counter = 0;
        }
    }

    /* Create an instance variable for the random number generator */
    private RandomGenerator rgen = new RandomGenerator();

    /* Create an instance variable for counter detecting three heads in row */
    private int counter = 0;
}"
856,"Unit-testing function. I've got this javascript function which was written a bit ad-hoc and I'm not really sure how to go about refactoring and improving it. It's basically an implementation of draft Unit-Testing/1.1 specification. // Runs the object as a test. The async paramater is an optional function
// To be passed in if the test is to be run async.
// notRoot is an internal paramater
var run = function(object, async, notRoot) {
    // if its the root call then cache the async func for us in _pushTests
    if (!notRoot) {
        func = async;
    }
    // tests to run
    var tests = [];
    // Assert constructor to be used is either on the object or from assert
    var Assert = object.Assert || assert.Assert;
    var failures = 0;
    // Push the tests to the tests array
    _pushTests(object, tests);
    var len = tests.length;
    // function that runs the test
    var testRunner;
    // If async Do I have to document it? It's full of the hacks.
    if (async) {
        // results object stores the calls to pass/fail/error
        var results = {};
        results.passes = [];
        results.fails = [];
        results.errors = [];
        // tests passed in the test object
        var testsPassed = 0;
        testRunner = function(val, key) {
            // Local assert object
            var _assert = new Assert;
            // Forward the mute property to the assert
            if (object.mute === true) {
                _assert.mute = true;    
            }
            // cache pass, fail & error
            var _pass = _assert.pass;
            var _fail = _assert.fail;
            var _error = _assert.error;
            // Wrap pass. Push the pass massge to the results object
            _assert.pass = function(message) {
                _pass.apply(_assert, arguments);
                results.passes.push(message);
                // If an assert passed after done then throw an error in 
                // assert.error
                if (doneCalled) {
                    _assert.error(new Error(
                        ""assertion passed after done was called"" + 
                        ""for test : "" + key + "" and message was : "" +
                        message
                    ));
                }
            }
            // Wrap fail. Push the fail message to the results object
            _assert.fail = function(message) {
                _fail.apply(_assert, arguments);
                results.failures.push(message);
                // Throw an error if assertion failed after done has been
                // called
                if (doneCalled) {
                    _assert.error(new Error(
                        ""assertion failed after done was called"" + 
                        ""for test : "" + key + "" and message was : "" +
                        message
                    ));
                }
            }
            // Wrap error. Log calls to error
            _assert.error = function(error) {
                _error.apply(_assert, arguments);
                results.errors.push(error);
            }
            // Done has not been called
            var doneCalled = false;
            var done = function() {
                // If its not been called then set it to be called
                if (!doneCalled) {
                    doneCalled = true;
                    // Increment the number of tests that have passed
                    // If we have passed all then call the async function
                    // with the results
                    if (++testsPassed === len) {
                        async(results, object.name);    
                    };
                } else {
                    // Done has already been called thrown an error
                    _assert.error(new Error(
                        ""done already called for test : "" + key
                    ));
                }
            };
            // Try running the test function.
            try {
                val(_assert, done);    
            } catch(e) {
                // If a failure occurs log it when its an AssertionError
                if (e instanceof assert.AssertionError) {
                    console.log(""failed : "" + e.message);
                } else {
                    // and throw if its another error
                    _assert.error(e);
                }
                failures++;
            }
        };
    } else {
        // the test runner takes the test function as a paramater
        testRunner = function(val) {
            // create a local assert
            var _assert = new Assert;
            // If we want to mute it then pass mute to the assert
            if (object.mute === true) {
                _assert.mute = true;    
            }
            // Try the test
            try {
                val(_assert);
            } catch(e) {
                // If it throws an assertion error then log it
                if (e instanceof assert.AssertionError) {
                    console.log(""failed : "" + e.message);
                } else {
                    // Other error thrown so pass it to assert.error
                    _assert.error(e);    
                }
                failures++;
            }
        };
    }
    // For each test run it.
    _.each(tests, testRunner);
    // If the object had a name and was not async then print a message
    // saying we've finishe
    if (object.name && !async) {
        var string = ""Completed "" + len + 
            "" tests. Finished : "" + object.name +
            "" with "" + failures + "" tests failing"";
        console.log(string);        
    }
    // Return the count of failures (Kind of useless for async).
    return failures;
}; For more information the full file can be found here . It also relies on assert object which is documented here . There are some (limited) unit tests and they can be run in the browser here . Please tell me if more information is needed. I was going to write some proper high level documentation on how to use it because the commonJS spec is a bit vague. I'll edit when that's done."
857,"Some things you could consider make the starting class a simple program which calls other methods and/or classes to do most of the work. if you want something more general, you could use an abstract output stream so it can be captured or even use a Listener interface. make fields which are not intended to change final this can improve clarity. is it conventional to place fields then constructors then methods as the class order. you could restructure the fields/method calls to be thread safe if that might be an issue. e.g. SimpleDateFormat is not thread-safe and causes no end of concern."
858,"Function pointers and switch statements. I feel like I can make my switch statements more elegant with a function pointer, i.e. I'd like to set the digestLength and a pointer to a function in the same switch statement instead of setting the length, declaring the result array, then calling the function. - (NSString *)hashWithDigestType:(NSStringDigestType)type {
    const char *s = [self UTF8String];
    int digestLength;

    switch (type) {
        case NSStringDigestTypeMD5:
            digestLength = CC_MD5_DIGEST_LENGTH;
            break;
        case NSStringDigestTypeSHA1:
            digestLength = CC_SHA1_DIGEST_LENGTH;
            break;
        case NSStringDigestTypeSHA512:
            digestLength = CC_SHA512_DIGEST_LENGTH;
            break;
    }

    unsigned char result[digestLength]; 

    switch (type) {
        case NSStringDigestTypeMD5:
            CC_MD5(s, strlen(s), result);
            break;
        case NSStringDigestTypeSHA1:
            CC_SHA1(s, strlen(s), result);
            break;
        case NSStringDigestTypeSHA512:
            CC_SHA512(s, strlen(s), result);
            break;
    }

    NSMutableString *digest = [NSMutableString stringWithCapacity:(digestLength * 2)];
    for (NSUInteger i = 0; i < digestLength; i++)
        [digest appendFormat:@""%02x"",result[i]];

    return [NSString stringWithString:digest];
}"
859,"Cocky comment saying that this is almost max-optimized deserves a harsh review. I don't know anything about the $.widget , from my brief look of it none of my comments can be ignored because it's ""Something you need to do to play nicely with the $.widget"". Admittedly there are no obvious mistakes. Most of it is well structured and the code is readable. There are various nit picks all over the place though. Half of them can be ignored under the motto of that's a style specific comment. Over all the code was pretty good. Here are the main points: Redundant: this.element = this.element; That's just plain redundant. if (lastLi.hasClass('selected'))
     lastLi.removeClass('selected'); jQuery is clever enough to not remove a class that doesn't exist. The hasClass check is just as expensive as the removeClass call. _popTag: function() {
    return this.tagsArray.pop();
} That particular abstraction feels redundant when tagsArray is public aswell. tags: function() {
    return this.tagsArray;
} again it feels like a redundant abstractions when tagsArray is public. You do know tagsArray is public right? HTML Strings versus DOM manipulation this.element.html('<li class=""tagit-new""><input class=""tagit-input"" type=""text"" /></li>'); As mentioned in the comments I don't like messing with HTML directly. Use DOM manipulation methods instead. this.input = $(document.createElement(""input""));
this.input.addClass(""tagit-input"");
this.input[0].type = ""text"";
var li = $(""<li></li>"");
li.addClass(""tagit-new"");
li.append(this.input);
this.element.empty();
this.element.append(li); This can actaully be improved on with jQuery 1.4 this.input = $(document.createElement(""input""), {
     ""class"": ""tagit-input"",
     ""type"": ""text""
});
var li = $(document.createElement(""li""), {
     ""class"": ""tagit-new""
});
this.element.empty().append(li.append(this.input)); === vs == if (e.target.tagName == 'A') Always use === end of. name duplication this.options.appendTo = this.element;
this.options.source = this.options.tagSource; Why do this? Why have the same thing mapped under different names? It's just hard to read and makes maintenance more of a pain. Also harder to refactor. Return from a function or use if-else if (e.which == self._keys.backspace)
     return self._backspace(lastLi);
if (self._isInitKey(e.which)) { Might as well use else if here instead of returning. Avoid returning multiple times. There are some exceptions like guard statements or trivial functions. Code smells self.lastKey = e.which; Storing the last key that was pressed? That smells. Refactor or abstract this away. _removeTag: function() {
    this._popTag();
    this.element.children("".tagit-choice:last"").remove();
} You have both a remove and pop function. Refactor this so you only have one. Caching self._addTag($(this).val());
$(this).val(''); Really aught to cache it var $this = $(this) . Get into this habit some calls to $ are really expensive. Extending native prototypes String.prototype.trim Don't do it. Simple as. You'll break everyone else's code. The problem is code like this: for (var c in ""foo"") {
     console.log(someString[c]); 
}
""f""
""o""
""o""
""function() { ... "" This is why we check for hasOwnProperty in for in loops. Personally I prefer to just assume no-one extends native prototypes and shout anyone that does that rather then use hasOwnProperty. Not to mention there's lots of 3rd party code you use that doesn't check for it. if (x) return true if (this.tagsArray.length == 0 || $.inArray(value, this.tagsArray) == -1)
     return false;
return true; Ignoring the fact that if statements without brackets make me rage. This really aught to be return this.tagsArray.length !== 0 && $.inArray(value, this.tagsArray) !== -1; widget destroy function destroy: function() {
    $.Widget.prototype.destroy.apply(this, arguments); // default destroy
    this.tagsArray = [];
} The reason the widget makes call to .destroy is because there is no garbage collector for the DOM. Your supposed to clean up the dom. Your supposed to remove this.element , detach any event handlers. And whatever else needs cleaning up. You do not need to clean up javascript. JS has a garbage collector. Here is the full code annotated: just ctrl-f //* (function($) {
    $.widget(""ui.tagit"", {

        // default options
        options: {
            tagSource:   [],
            triggerKeys: ['enter', 'space', 'comma', 'tab'],
            initialTags: [],
            minLength:   1
        },

        _keys: {
            backspace: 8,
            enter:     13,
            space:     32,
            comma:     44,
            tab:       9
        },

        //initialization function
        _create: function() {

            var self = this;
            this.tagsArray = [];

            //store reference to the ul
            //* WTF? Seriously? you know theres only one this object right?
            this.element = this.element;

            //add class ""tagit"" for theming
            this.element.addClass(""tagit"");

            //add any initial tags added through html to the array
            this.element.children('li').each(function() {
                self.options.initialTags.push($(this).text());
            });

            //add the html input
            //* Style issue. i don't like passing html strings around.
            /*
                this.input = $(""<input></input>"");
                this.input.addClass(""tagit-input"");
                this.input[0].type = ""text"";
                var li = $(""<li></li>"");
                li.addClass(""tagit-new"");
                li.append(this.input);
                this.element.empty();
                this.element.append(li);
            */
            this.element.html('<li class=""tagit-new""><input class=""tagit-input"" type=""text"" /></li>');

            this.input = this.element.find("".tagit-input"");

            //setup click handler
            //*WTF this.element is already a jQuery object.
            $(this.element).click(function(e) {
                //*WTF use ""===""
                if (e.target.tagName == 'A') {
                    // Removes a tag when the little 'x' is clicked.
                    //* Refactor this to ._popTag()
                    /*
                        self._popTag(e.target);
                    */
                    $(e.target).parent().remove();
                    self._popTag();
                }
                else {
                    self.input.focus();
                }
            });

            //setup autcomplete handler
            //*WTF Why map it to .appendTo. Feels like an annoying abstraction
            this.options.appendTo = this.element;
            //*WTF renaming it for no good reason
            this.options.source = this.options.tagSource;
            this.options.select = function(event, ui) {
                // Remove and add a tag? Feels like it could use a comment
                // or a swap/switch tags method
                self._removeTag();
                self._addTag(ui.item.value);
                return false;
            }
            this.input.autocomplete(this.options);

            //setup keydown handler
            this.input.keydown(function(e) {
                var lastLi = self.element.children("".tagit-choice:last"");
                if (e.which == self._keys.backspace)
                    //*WTF don't return use else if statements.
                    return self._backspace(lastLi);

                if (self._isInitKey(e.which)) {
                    e.preventDefault();
                    //*WTF if the string in val is bigger then minLength?
                    // Too code specific give a high level explanation.
                    if ($(this).val().length >= self.options.minLength)
                        self._addTag($(this).val());
                }
                //*WTF Why are you removing the selected class from the last
                // li on every key down press? This really could use a comment.
                if (lastLi.hasClass('selected'))
                    lastLi.removeClass('selected');

                //*WTF storing the lastKey is a code smell. Reffactor this away
                self.lastKey = e.which;
            });

            //setup blur handler
            this.input.blur(function(e) {
                //*WTF always cache
                /*
                    var $this = $(this);
                */
                self._addTag($(this).val());
                //* WTF duplication. The input is already cleared in the
                // addtag.
                $(this).val('');
                return false;
            });

            //define missing trim function for strings
            //*WTF don't extend native prototypes. Your evil. Evil evil evil.
            // Theres a perfectly good $.trim. Use it!
            String.prototype.trim = function() {
                return this.replace(/^\s+|\s+$/g, """");
            };

            this._initialTags();

        },
        //*WTF Feels like a useless abstraction. _popTag is ""internal"" because
        // it starts with ""_"" but this.tagsArray is public. 
        _popTag: function() {
            return this.tagsArray.pop();
        }
        ,

        _addTag: function(value) {
            this.input.val("""");
            value = value.replace(/,+$/, """");
            //*The extension! use var value = $.trim(value)
            value = value.trim();
            //* use ""==="" here. There's no reason why not to. 
            if (value == """" || this._exists(value))
                return false;

                var tag = """";
            //* Ew more string generated HTML. use the jquery or native DOM 
            // manipulation instead
            tag = '<li class=""tagit-choice"">' + value + '<a class=""tagit-close"">x</a></li>';
            $(tag).insertBefore(this.input.parent());
            //*WTF Sure. lets call it again? You know, just in case someone
            // managed to edit the input whilst where running IO blocking
            // javascript code.
            this.input.val("""");
            //* Personally I would take the tagsArray and overwrite it's 
            // .push methods with the _addTag function. That way you can just
            // call this.tagsArray.push everywhere. Make sure to document it.
            // put it in the init function if you want.
            /*
                var _push = this.tagsArray.push;
                this.tagsArray.push = function(value) {
                    _push.apply(this, arguments);   
                    // do stuff here.
                };
            */
            this.tagsArray.push(value);
        }
        ,

        _exists: function(value) {
            //* check with === !!! Replace this with
            /*
                return this.tagsArray.length !== 0 &&
                    $.inArray(value, this.tagsArray) !== -1;
            */
            if (this.tagsArray.length == 0 || $.inArray(value, this.tagsArray) == -1)
                return false;
            return true;
        }
        ,

        _isInitKey : function(keyCode) {
            var keyName = """";
            for (var key in this._keys)
                //* Refactor this to 
                /*
                    if (this._keys[key] === keyCode) {
                        return $.inArray(key, this.options.triggerKeys) !== -1;
                    }
                */
                if (this._keys[key] == keyCode)
                    keyName = key//*WTF don't forget that semi colon.
            //* unneccesary if refactored.
            if ($.inArray(keyName, this.options.triggerKeys) != -1)
                return true;
            return false;
        }
        ,
        //*WTF It feels so wrong from a design point of view to have both
        // a popTag and a removeTag function. What's the difference?
        // Why do you remove it from the tagList but not from the DOM?
        _removeTag: function() {
            this._popTag();
            this.element.children("".tagit-choice:last"").remove();
        }
        ,
        //*WTF the whole backspace in lastKey things means you backspace has 
        // two meanings when pressed byt eh user. It either selects it or
        // removes it. This just seems like bad design. Get rid of it.
        _backspace: function(li) {
            if (this.input.val() == """") {
                // When backspace is pressed, the last tag is deleted.
                if (this.lastKey == this._keys.backspace) {
                    //*WTF why not just call _removeTag!!!
                    this._popTag();
                    li.remove();
                    this.lastKey = null;
                } else {
                    li.addClass('selected');
                    this.lastKey = this._keys.backspace;
                }
            }
            return true;
        }
        ,

        _initialTags: function() {
            //*WTF use a > 0 check. checking for not 0 is just annoying,
            // Length can never be negative.
            if (this.options.initialTags.length != 0) {
                //*WTF avoid a for in loop on an array just use a standard
                /*
                    var len = this.options.initialTags.length;
                    for (var i=0;i < len;i++) {
                        var tag = this.options.initialTags[i];
                        if (!this._exists(tag)) {
                            this._addTag(tag);
                        }
                    }
                */
                for (var i in this.options.initialTags)
                    //*WTF you already check for existance in the addTag 
                    // function. Why do it here? Choose to do it either before
                    // calling or in the function not both.
                    if (!this._exists(this.options.initialTags[i]))
                        this._addTag(this.options.initialTags[i]);
            }
        }
        ,

        //*WTF why have both a tags & a tagsArray. Why? There both public.
        // It just a useless abstraction
        tags: function() {
            return this.tagsArray;
        }
        ,
        //*WTF What is this? C++. We have a garbage collector. if tagsArray
        // is no longer referenced anywhere then we don't need to null it on
        // purpose. 
        // From a $.widget point of view you want destroy to act as a garbage collector
        // for the DOM. Remove stuff from the DOM. The JS has it's own garbage
        // collector. 
        destroy: function() {
            $.Widget.prototype.destroy.apply(this, arguments); // default destroy
            this.tagsArray = [];
        }

    });
})(jQuery);"
860,"String interpolation library. I was bored over the last couple of days and wrote up a string interpolation library for JavaScript. I'm very pleased with its functionality, it passes it 79 tests cross browser and the comments and README seem fine too. My main concern here are the regular expressions.  I'm not a real pro in that area so I suspect there could be some enhancement to them. Another thing is readability of the code as well as how good the comments are.  I'd like to have ""unclear"" sections of the code pointed out so I can improve the naming / comments. The library brings with it the Formatter factory and the FormatError . Basic usage > format = Formatter()
> format('Good {} Sir {}.', 'morning', 'Lancelot')
'Good morning Sir Lancelot.'

> format('Good {time} Sir {name}.', 'morning', 'Lancelot')
'Good morning Sir Lancelot.'

> format('Good {0} Sir {1}.', ['morning', 'Lancelot'])
'Good morning Sir Lancelot.' Source (function(undefined) {
    'use strict';

    // Formatter factory
    function Formatter(formats) {
        function f() {
            return format(f.formats, arguments);
        }
        f.formats = formats || {};
        return f;
    }

    // Default formatters
    Formatter.formats = {
        repeat: repeat,

        join: function(value, str) {
            return value.join(str || ', ');
        },

        upper: function(value) {
            return value.toUpperCase();
        },

        lower: function(value) {
            return value.toLowerCase();
        },

        lpad: function(value, length, str) {
            return pad(value, length, str, 'l');
        },

        rpad: function(value, length, str) {
            return pad(value, length, str, 'r');
        },

        pad: function(value, length, str) {
            return pad(value, length, str);
        },

        surround: function(value, left, right) {
            return left + value + (right || left);
        },

        hex: function(value, lead) {
            return (lead ? '0x' : '') + value.toString(16);
        },

        bin: function(value, lead) {
            return (lead ? '0b' : '') + value.toString(2);
        }
    };

    function repeat(value, count) {
        return new Array((count || 0) + 1).join(value || ' ');
    }

    function pad(value, length, str, mode) {
        value = '' + value;
        str = str || ' ';

        var len = length - value.length;
        if (len < 0) {
            return value;

        } else if (mode === 'l') {
            return repeat(str, len) + value;

        } else if (mode === 'r') {
            return value + repeat(str, len);

        } else {
            return repeat(str, len - ~~(len / 2))
                   + value
                   + repeat(str, ~~(len / 2));
        }
    }

    // match {} placholders like {0}, {name}, {} and the inner ""{{foo}}""
    // {} can be escaped with \
    var replaceExp = /([^\\]|^)\{([^\{\}]*[^\\^\}]|)\}/g,

        // match things like: foo[0].test[""test""]['test]
        accessExp = /^\.?([^\.\[]+)|\[((-?\d+)|('|"")(.*?[^\\])\4)\]/,

        // match :foo and :foo(.*?)
        formatExp = /\:([a-zA-Z]+)(\((.*?)\))?(\:|$)/,

        // match arguments: ""test"", 12, -12, 'test', true, false
        // strings can contain escaped characters like \""
        argumentsExp = /^(,|^)\s*?((true|false|(-?\d+))|('|"")(.*?([^\\]|\5))\5)/;

    // Main formatting function
    function format(formatters, args) {

        // Setup magic!
        var string = args[0],
            first = args[1],
            argsLength = args.length - 2,
            type = first != null ? {}.toString.call(first).slice(8, -1) : '',
            arrayLength = first ? first.length - 1 : 0,
            autoIndex = 0;

        function replace(value, pre, form) {

            // Extract formatters
            var formats = [], format = null, id = form;
            while (format = form.match(formatExp)) {
                if (formats.length === 0) {
                    id = form.substring(0, format.index);
                }
                form = form.substring(format[0].length - 1);
                formats.push(format);
            }

            // In case of a valid number use it for indexing
            var num = (isNaN(+id) || id === '') ? null : +id;

            // Handle objects
            if (type === 'Object' && id !== '') {

                // Handle plain keys
                if (id.indexOf('.') === -1 && id.indexOf('[') === -1) {
                    if (first[id] !== undefined) {
                        value = first[id];

                    // fall back to obj.toString()
                    } else {
                        value = args[1 + autoIndex];
                    }

                // Access properties
                } else {
                    value = getProperty(first, id);
                }

            // Handle given array indexes
            } else if (type === 'Array' && num !== null) {
                value = first[num >= 0 ? num : arrayLength + num];

            // Handle given arguments indexes
            } else if (num !== null) {
                value = args[1 + (num >= 0 ? num : argsLength + num)];

            // Handle automatic arguments indexes
            } else {
                value = args[1 + autoIndex];
            }
            autoIndex++;

            // Apply formats
            while (format = formats.shift()) {
                var method = (formatters[format[1]] ? formatters : Formatter.formats)[format[1]];
                if (method) {
                    value = method.apply(undefined,
                                         getArguments(value, format[3] || ''));

                } else {
                    throw new FormatError(
                        replace, 'Undefined formatter ""{}"".', format[1]
                    );
                }
            }
            return pre + value;
        }
        return string.replace(replaceExp, replace);
    }

    // Get a specific peoperty of an object based on a accessor string
    function getProperty(obj, id) {
        var m, pos = 0;
        while (m = id.substring(pos).match(accessExp)) {
            // .name  / [0] / [""test""]
            var prop = m[1] || (m[3] ? +m[3] : m[5].replace('\\' + m[4], m[4]));
            if (obj === undefined) {
                throw new FormatError(
                    getProperty,
                    'Cannot access property ""{}"" of undefined.', prop
                );

            } else {
                obj = obj[prop];
            }
            pos += m[0].length;
        }
        return obj;
    }

    // Convert a string like:
    //   true, false, -1, 34, 'foo', ""bla\"" foo""
    //
    // Into a  list of arguments:
    //   [true, false, -1, 34, 'foo', 'bla"" foo']
    function getArguments(value, string) {
        var m, pos = 0, args = [value];
        while (m = string.substring(pos).match(argumentsExp)) {
            // number
            args.push(m[4] ? +m[4]
                           // boolean
                           : (m[3] ? m[3] === 'true'
                                   // string
                                   : m[6].replace('\\' + m[5], m[5])));

            pos += m[0].length;
        }
        return args;
    }

    // Formatting error type
    function FormatError(func, msg, value) {
        this.name = 'FormatError';
        this.message = format(Formatter.formats, [msg, value]);
        if (Error.captureStackTrace) {
            Error.captureStackTrace(this, func);
        }
    }
    FormatError.prototype = new Error();

    // Exports
    var exp = typeof window === 'undefined' ? exports : window;
    exp.Formatter = Formatter;
    exp.FormatError = FormatError;
})();"
861,"Your function is called FlipACoin() , but you are doing more than just flipping the coin. A more appropriate name might be FlipACoinAndCountConsecutiveHeadRolls() . I would suggest keeping the function as simple as the name suggests and return a string (or boolean) from FlipACoin() , then examine the result outside the function. This will also allow you to make the counter a local variable to the run function, which will make the class smaller."
862,"I can't write the code in Objective-C, but in C, you could create yourself a structure type to get the information in one move.  I don't know whether the NSStringDigestTypeXXX values are conveniently numbered compactly from 0 or 1, so I'm taking the pessimistic view that they are not.  You can simplify the code below if they are compact and small. struct Digestifier  // Declaration in a header (probably)
{
    int      hashtype;
    void   (*hash)(const char *source, size_t length, char *result);
    size_t   hashlen;
};
static const struct Digestifier digests[] =
{
    { NSStringDigestTypeSHA1,   CC_SHA1,   CC_SHA1_DIGEST_LENGTH   },
    { NSStringDigestTypeMD5,    CC_MD5,    CC_MD5_DIGEST_LENGTH    },
    { NSStringDigestTypeSHA512, CC_SHA512, CC_SHA512_DIGEST_LENGTH },
};
{ enum NUM_DIGESTS = sizeof(digests) / sizeof(digests[0]) }; You can then write a lookup function for this: const struct Digestifier *digest_lookup(int hashtype)
{
    for (i = 0; i < NUM_DIGESTS; i++)
    {
        if (digests[i].hashtype == hashtype)
            return &digests[i];
    }
    assert(i != NUM_DIGESTS);  // Or other error handling!
    return 0;
} And in your function: - (NSString *)hashWithDigestType:(NSStringDigestType)type {
    const char *s = [self UTF8String];
    const struct Digestifier *digest = digest_lookup(type);

    // Error check digest if digest_lookup() does not do it for you!
    unsigned char result[digest->hashlen];
    digest->hash(s, strlen(s), result);

    NSMutableString *digest = [NSMutableString stringWithCapacity:(digest->hashlen * 2)];
    for (NSUInteger i = 0; i < digestLength; i++)
        [digest appendFormat:@""%02x"",result[i]];

    return [NSString stringWithString:digest];
} Note that you could also write the hash function invocation as: (*digest->hash)(s, strlen(s), result); To some of us old-school (pre-standard) C programmers, that might perhaps be clearer. Also, if Objective-C supports the C99 designated initializer notation, you could make the initializer for the digests[] array more robust (and render the hashtype member superfluous except for a cross-check): static const struct Digestifier digests[] =
{
    [NSStringDigestTypeSHA1]   =
           { NSStringDigestTypeSHA1,   CC_SHA1,   CC_SHA1_DIGEST_LENGTH   },
    [NSStringDigestTypeMD5]    =
           { NSStringDigestTypeMD5,    CC_MD5,    CC_MD5_DIGEST_LENGTH    },
    [NSStringDigestTypeSHA512] =
           { NSStringDigestTypeSHA512, CC_SHA512, CC_SHA512_DIGEST_LENGTH },
}; This initializer correctly places the three rows in the array regardless of which member of the enumeration is mapped to 0, 1, 2. With the additional information that the NSStringDigestTypeXXX values are 0, 1, 2, you can simplify the digest_lookup() function by: Ensuring that the rows in the digests array are in the correct (0, 1, 2) sequence. Changing from a search loop to a direct array lookup. Probably asserting that the value is under control. For the purposes of the code below, I'm assuming that NSStringDigestTypeMD5 is 0 and NSStringDigestTypeSHA512 is 2, but the ordering of the names is arbitrary; just choose the equivalent of 0 for the first name in the assert and 2 for the second. const struct Digestifier *digest_lookup(NSStringDigestType hashtype)
{
    assert(hashtype >= NSStringDigestTypeMD5 &&
           hashtype <= NSStringDigestTypeSHA512);
    assert(digest[hashtype].hashtype == hashtype);
    return &digests[hashtype];
} The first assertion ensures that the value is in range.  The second assertion ensures that the table is properly sequenced and you are getting back the entry your expect."
863,"You could you PHP alternate syntax <?php
/**
 * The Template for displaying all single posts.
 *
 * @package WordPress
 * @subpackage Starkers
 * @since Starkers 3.0
 */
?>

<?php get_header(); 
<?php get_sidebar(); ?>

<div id=""content"">
    <?php $intro_image = get_post_meta($post->ID, 'Intro Image', true); ?>
    <div class=""block-1"">
        <img src=""<?php echo $intro_image; ?>"" alt="""" />
    </div>

    <?php if ( have_posts() ? while ( have_posts() ) : the_post()): ?>  
        <div class=""block-2 padding-top no-overlay"">
            <?php the_content(); ?>
        </div>
    <?php endwhile; ?>

    <div class=""block-2 border-top"">
        <?php $mainbar_left_title = get_post_meta($post->ID, 'Mainbar Left Title', true); ?>
        <?php $mainbar_left_image = get_post_meta($post->ID, 'Mainbar Left Image', true); ?>
        <div class=""float-left"">
            <h2><?php echo $mainbar_left_title; ?></h2>
            <img src=""<?php echo $mainbar_left_image ?>"" alt="""" />
        </div>

            <?php $mainbar_right_title = get_post_meta($post->ID, 'Mainbar Right Title', true); ?>
            <?php $mainbar_right_image = get_post_meta($post->ID, 'Mainbar Right Image', true); ?>
        <div class=""float-right"">
            <h2><?php echo $mainbar_right_title; ?></h2>
            <img src=""<?php echo $mainbar_right_image ?>"" alt="""" />
        </div>
    </div>

    <?php $mainbar_right_title = get_post_meta($post->ID, 'Mainbar Right Title', true); ?>
    <?php $mainbar_right_image = get_post_meta($post->ID, 'Mainbar Right Image', true); ?>
    <div class=""block-3 border-top"">
        <h2><?php echo $mainbar_right_title; ?></h2>
        <img src=""<?php echo $mainbar_right_image ?>"" alt="""" />
    </div>

    <?php if ( have_posts() ? while ( have_posts() ) : the_post()): ?>
        <div class=""block-4 border-top"">
            <?php the_content(); ?>
        </div>
    <?php endwhile; ?>

    <?php get_sidebar('secondary'); ?>
</div>

<?php get_footer(); ?> This follows all WP coding standards from what I can tell and is readable.
I would also suggest changing sections like this: <?php $mainbar_right_title = get_post_meta($post->ID, 'Mainbar Right Title', true); ?>
<?php $mainbar_right_image = get_post_meta($post->ID, 'Mainbar Right Image', true); ?>
<div class=""block-3 border-top"">
    <h2><?php echo $mainbar_right_title; ?></h2>
    <img src=""<?php echo $mainbar_right_image ?>"" alt="""" />
</div> To: <div class=""block-3 border-top"">
    <h2><?php echo get_post_meta($post->ID, 'Mainbar Right Title', true); ?></h2>
    <img src=""<?php echo get_post_meta($post->ID, 'Mainbar Right Image', true) ?>"" alt="""" />
</div> Although that's just personal preference, I find it much more readable."
864,"Here's some 2 cents. You should never use identifiers beginning with NS , as this prefix is reserved for Apple only. In fact, recently Apple has begun discouraging the use of two- or three-letter prefixes entirely. [I'm not sure about this approach, but] consider implementing each hash calculation as separate methods; and simply using selectors instead of function pointers: - (NSString *) hashWithDigestType:(StringDigestType) type
{
    SEL digestMethods[] = {
        @selector(hashWithMD5),
        @selector(hashWithSHA1),
        @selector(hashWithSHA256)
    };

    return [self performSelector:digestMethods[type]];
} Consider also validating the type variable and the possibility of using designated initialisers, so that you can directly map the enum values to the appropriate selectors."
865,"// If you use selectors multiple times, always cache them into variables, else jQuery has to search for them multiple times.
var $cont      = $('.cont'),
    $expandAll = $('#expandAll'),
    $trigger   = $('.trigger');

function expandAll() {
    $cont.removeClass('hid');
    $trigger.text('-');
    // Use .text() instead of .html().
    // You can chain these calls together.
    // If you use .one(), you don't have to unbind the previous event handler next time, jQuery does it for you.
    $expandAll.text('Collapse All').one('click', collapseAll);
}
function collapseAll() {
    $cont.addClass('hid');
    $trigger.text('-');
    $expandAll.text('Expand All').one('click', expandAll);
}

// You can pass a function to jQuery itself  it's a shorthand for $(document).ready().
$(function() {
    // There's no need to pass the event argument, because
    // 1. You didn't use it there
    // 2. jQuery normalizes the event object, so you don't have to pass it as an argument. If you want a shorthand for it, do it inside the function:
    // var e = event;
    $trigger.click(function() {
        // Always use var to declare variables, to prevent polluting the global scope.
        var $this = $(this);
        // Again: use .text() instead of .html().
        $this.text($this.text() == '+' ? '-' : '+');
        // There's no need to do this:
        // $($this.nextAll("".cont"").get(0)).toggleClass(""hid"");
        // You can simply do this:
        $this.nextAll('.cont').toggleClass('hid');
    });
    $expandAll.one('click', expandAll);
});"
866,"HTML Review of template for site - Is this ok for HTML5?. Writing a new site, has anyone got any comments on the HTML here?  Is it all semantically correct?  Thanks!  This will basically be the template, so I want to make sure it's pretty perfect. <!DOCTYPE html>
<html>
<head>
    <title>Welcome to Scirra.com</title>
    <meta name=""description"" content=""Construct 2 is a free open source HTML5 games creator."" />
    <meta charset=""UTF-8"" />

    <link rel=""stylesheet"" href=""css/default.css"" type=""text/css"" />
    <script type=""text/javascript"" src=""http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js""></script>
    <script type=""text/javascript"" src=""js/common.js""></script>

    <script type=""text/javascript"" src=""plugins/coin-slider/coin-slider.min.js""></script>
    <link rel=""stylesheet"" href=""plugins/coin-slider/coin-slider-styles.css"" type=""text/css"" />

    <link href=""plugins/jquery.twit.0.2.0/twit.css"" type=""text/css"" rel=""stylesheet"" />
    <script type=""text/javascript"" src=""plugins/jquery.twit.0.2.0/twit.min.js""></script>

    <script type=""text/javascript"">
        $(document).ready(function() {
            $('#coin-slider').coinslider({ width: 470, height: 261, spw: 8, sph: 4, delay: 7000, effect: 'straight', hoverPause: true });

            $('#twitterFeed').twit('Scirra', {
              limit: 5,
              label: '',
              icon: false,
              count: 20
            });
        });
    </script>

    </head>

<body>

<div class=""topBar""></div>
<div class=""mainBox"">
    <div class=""headWrapper"">
        <div class=""searchBox"">
            <div class=""searchContent"">
                <input type=""text"" id=""SearchBox"" />
                <div class=""s searchIco""></div>
            </div>
        </div>
    </div>
    <div class=""topMenu"">
        <a href=""#"" class=""topNormal"">Main Link</a>
        <a href=""#"" class=""topNormal"">Mainy Link</a>
        <a href=""#"" class=""topSelWrapper"">Main Link</a>
        <a href=""#"" class=""topNormal"">Main Link</a>
    </div>
    <div class=""subMenu"">
        <a href=""#"" class=""subSelWrapper"">Another Sub Link</a>
        <a href=""#"" class=""subNormal"">Sub Link</a>
        <a href=""#"" class=""subNormal"">Sub Link</a>
        <a href=""#"" class=""subNormal"">Sub Link</a>
        <a href=""#"" class=""subNormal"">Sub Link</a>
    </div>
    <div class=""contentWrapper"">
        <div class=""wideCol"">
            <div class=""s slideShowWrapper"">
                <div id='coin-slider'>
                    <a href=""#"" target=""_blank"">
                        <img src='images/screenshot1.jpg' >
                        <span>
                            Scirra software allows you to bring your imagination to life
                        </span>
                    </a>
                    <a href=""#"">
                        <img src='images/screenshot2.jpg' >
                        <span>
                            Export your creations to HTML5 pages
                        </span>
                    </a>
                    <a href=""#"">
                        <img src='images/screenshot3.jpg' >
                        <span>
                            Another description of some image
                        </span>
                    </a>
                    <a href=""#"">
                        <img src='images/screenshot4.jpg' >
                        <span>
                            Something motivational to tell people
                        </span>
                    </a>
                </div>
            </div>
            <div class=""newsWrapper"">
                <h1>Latest from Twitter</h1>
                <div id=""twitterFeed""></div>
            </div>
        </div>
        <div class=""thinCol"">
            <h1>Main Heading</h1>
            <p>Some paragraph goes here.  It tells you about the picture.  Cool!  Have you thought about downloading Construct 2?  Well you can download it with the link below.  This column will expand vertically.</p>
            <a class=""blueLinkBox"" href=""#"">Learn More</a><div class=""clear""></div>
            <h2>Help Me!</h2>
            <p>This column will keep expanging and expanging.  It pads stuff out to make other things look good imo.</p>
            <a class=""blueLinkBox"" href=""#"">Learn More</a><div class=""clear""></div>
            <h2>Why Download?</h2>
            <p>As well as other features, we also have some other features.  Check out our <a href=""#"">other features</a>.  Each of our other features is really cool and there to help everyone suceed.</p>
            <a href=""#"" class=""s downloadBox"">
                <div class=""downloadHead"">Download</div>
                <div class=""downloadSize"">24.5 MB</div>
            </a>

        </div>
        <div class=""clear""></div>

        <h1>This Weeks Spotlight</h1>
        <div class=""halfColWrapper"">
            <img src=""images/spotlight1.png"" class=""spotLightImg"" />
            <p>Our spotlight member this week is Pooh-Bah.  He writes good stuff.  Read it.</p>
            <a class=""blueLinkBox"" href=""#"">Learn More</a>
        </div>
        <div class=""halfColSpacer"">&nbsp;</div>
        <div class=""halfColWrapper"">
            <img src=""images/spotlight2.png"" class=""spotLightImg"" />
            <p>Killer Bears is a scary ass game from JimmyJones.  How many bears can you escape from?</p>
            <a class=""blueLinkBox"" href=""#"">Learn More</a>
        </div>
        <div class=""clear""></div>
    </div>
</div>

<div class=""footer"">
    <div class=""footerContent"">
        <div class=""footerItem"">
            <h3>Community</h3>
            <a href=""#"">The Blog</a><br />
            <a href=""#"">Community Forum</a><br />
            <a href=""#"">RSS Feed</a><br />
            <a class=""s footIco facebook"" href=""http://www.facebook.com/ScirraOfficial"" target=""_blank""></a>
            <a class=""s footIco twitter"" href=""http://twitter.com/Scirra"" target=""_blank""></a>
            <a class=""s footIco youtube"" href=""http://www.youtube.com/user/ScirraVideos"" target=""_blank""></a>
        </div>
        <div class=""footerItem"">
            <h3>About Us</h3>
            <a href=""#"">Contact Information</a><br />
            <a href=""#"">Advertising</a><br />
            <a href=""#"">History</a><br />
            <a href=""#"">Privacy Policy</a><br />
            <a href=""#"">Terms and Conditions</a>
        </div>
        <div class=""footerItem"">
            <h3>Want to Help?</h3>
            You can contribute to Scirra software as it is <a href=""#"">Open Source</a>.  We welcome all contributions, and there are lots of ways to join in!<br />
            <div class=""ralign"">
            <a href=""#""><strong>Learn More</strong></a>
            </div>
        </div>
        <div class=""clear""></div>
    </div>
</div>
<div class=""copyright"">
    Copyright &copy; 2011 Scirra.com.  All rights reserved.
</div>
</body>
</html> Looks great in all browsers, but want to check it's valid markup and as perfect as it could be."
868,"Calculating entropy of a string. We're calculating entropy of a string a few places in Stack Overflow as a signifier of low quality. I whipped up this simple method which counts unique characters in a string, but it is quite literally the first thing that popped into my head. It's the ""dumbest thing that works"". /// <summary>
/// returns the # of unique characters in a string as a rough 
/// measurement of entropy
/// </summary>
public static int Entropy(this string s)
{
  var d = new Dictionary<char, bool>();
  foreach (char c in s)
      if (!d.ContainsKey(c)) d.Add(c, true);
  return d.Count();
} Is there a better / more elegant / more accurate way to calculate the entropy of a string? Efficiency is also good, though we never call this on large strings so it is not a huge concern."
869,"public static int Entropy(this string s)
{
    HashSet<char> chars = new HashSet<char>(s);
    return chars.Count;
}"
870,"Won't this work too? string name = ""lltt"";
int uniqueCharacterCount = name.Distinct().Count(); will return 2"
871,"You can probably expand this to something like bi-grams and tri-grams to get things like ""sdsdsdsdsdsdsdsdsdsd"" (although yours would catch this as well). Would a bayesian approach like spam filters do be appropriate for something like what you're trying to achieve?"
872,"I don't understand the point of the bool. You never appear to set it to false, so we can use a List<T> instead. Given that you want just unique items, we can just use HashSet<T> instead. Haven't tested, but this method should be equivalent and faster: /// <summary>
/// returns the # of unique characters in a string as a rough 
/// measurement of entropy
/// </summary>
public static int Entropy(this string s)
{
    var hs = new HashSet<char>();
    foreach (char c in s)
        hs.Add(c);
    return hs.Count();
}"
874,"I'm going to assume this is English (seeing as that's all we do).  Wouldn't it be better to keep a HashSet<string> of stop words (the most common words in English that don't convey meaning), tokenize the string into words, and count the number of words that aren't stop words?"
876,"Looks like a lot of extra <div> s, as far as I can see. Why do you have .footer and .footerContent ? Generally a <div> without any siblings can be killed. And that header looks really out of control. Any reason for wrapping the input and search icon in 4 lonely <div> s? You should also avoid this: class=""blueLinkBox"" . Because what happens when you change your design to be orange? Would you then rename all your link boxes, or just try to remember that blueLinkBox are those orange boxes? Name your classes by their content. .importantLink or .readMoreLink might be better names. You also have some links without any content or title attribute, which is bad for screen readers, seo and other stuff that can't ""see"" your website. It's not a good idea to have multiple <h1> s on one page. There are of course exceptions (eg: scrolling-for-navigation), but this page doesn't seem to fit... Because what you're saying now is that ""this weeks spotlight"" is as important as the main features of your product, which I'm guessing (hoping) is not the case."
877,"Some things that come to mind: Load .css resources before .js resource for faster loading Don't use inline javascript Use an <ul> with <li> items for a menu, this is semantically more correct Always use an alt tag on <img> Don't use <br> tags, use <p> if we're talking about text. Use css (display:block) if you want to force an element to the next line. Use IDs when there is only one occurence per page, e.g. <div id=""footer"">"
878,"in theory you can measure entropy only from the point of view of a given model. For instance the PI digits are well distributed, but actually is the entropy high? Not at all since the infinite sequence can be compressed into a small program calculating all the digits. I'll not dig further in the math side, since I'm not an expert in the field. But I want to suggest to you a few things that can make a very simple but practical model. Short strings To start, distribution. Comparing characters that are the same is exactly this in some way, but the generalization is to build a frequency table and check the distribution. Given a string of length N, how many A chars should I expect in average, given my model (that can be the english distribution, or natural distribution)? But then what about ""abcdefg""? No repetition here, but this is not random at all.
So what you want here is to take also the first derivative, and check the distribution of the first derivative. it is as trivial as subtracting the second char from the first, the thrid from the second, so in our example string this turns into: ""abcdefg"" => 1,1,1,1,1,1 Now what aobut ""ababab""... ? this will appear to have a better distribution, since the derivative is 1,-1,1,-1,... so what you actually want here is to take the absolute value. Long strings If the string is long enough the no brainer approach is: try to compress it, and calculate the ratio between the compression output and the input."
879,"Why not divide the number of unique characters in the given string by the total number of characters in that string. That would give a more accurate measure of entropy. For example, going by your formula, an entropy of 3 for a string of 5 characters should be fine but an entropy of 3 for a string of 8 characters is poor. But, your formula wouldn't be able to differentiate between the two results. Whereas, the above given formula would do so to give a more accurate measure."
880,"I think antirez is right in suggesting that an entropy approach needs a model. So assuming we're talking English, then examining the string's character distribution and how closely it aligns with ""average"" will likely show that the text is mostly English. But is this what you want to achieve? Presumable many things are code or pseudo-code. Compression is a great idea, but this'll give the highest entropy for random text - is high entropy bad? Low entropy would indicate lots of repetition, maybe verbosity, but one can write long drawn out sentences with frilly words and transmit little information (e.g. this comment)."
881,"Is there a better way to output a javascript array from ASP.net?. I often run into the problem of producing a javascript array on an ASP.net page from an IEnumerable and I was wondering if there was an easier or clearer way to do it than <% bool firstItem = true;
   foreach(var item in items){
      if(firstItem)
      {
         firstItem = false;
      }
      else
      {%>
        ,
      <%}%>
     '<%:item%>'
  %> The whole thing is made much more verbose because of IE's inability to handle a hanging comma in an array or object."
882,"You're right, there's a lot of work going on here. You probably need to be a bit more granular in your use of _init methods. You have navigation, ACL, view configuration and plugin registration all wrapped up in the _initView method. Try breaking these up into their own _init methods. Try to limit each _init method to a single purpose. Personally, I prefer to limit the Bootstrap to a ""spark plug"" rolle , and move this kind of logic into Resource Plugins: http://framework.zend.com/manual/en/zend.application.theory-of-operation.html#zend.application.theory-of-operation.resources I divide those plugins into components that I'm likely to reuse on other projects, and components that are specific to the project under development. I store these in separate ""namespaced"" folders in the application library. Externalise parameters (like $standardSystems ) into ini|php|xml files where possible - this will help you swap parameters based on application environment where required (i.e. database connectors). If I have a lot of sequential logic in a class, I tend to use one function for traffic control duties - but keep the details in separate methods. Currently, I feel that there are too many points of potential failure in the _initView method which will make debugging tricky."
883,"I would try to count each character and verify that it roughly matches the normal frequency of English letters. It could be more precise (on sufficiently large inputs) than counting the number of letters. If you sort letters by their number of appearences, you should, statistically speaking, get something like ETAONRISHDLFCMUGYPWBVKXJQZ . You could use the edit distance between this string and the letters sorted by order of appearance to give a rough measurement of entropy. Also, you could possibly catch non-English posts that way. (If you do go this way, I recommend you exclude code fragments from the count...)"
884,"If you are going with HTML5, I would suggest a few more things: Lose the type=""text/javascript"" from the script tags - you don't need them in HTML5 Same goes with type=""text/css"" on link tags Keep your self-closing XML syntax consistent - on some tags you have the closing />, on some you don't (it doesn't matter which way, just make it consistent) Consider placing .js files at the bottom of the document - that way the page can start rendering before it's downloaded them all. Often these are required for post-rendering functions anyway - so do your users a favor and put them at the bottom of the document."
885,"I'd avoid Singletons - you can limit access by using a dependency injector like YADIF, which makes writing tests against components that rely on the connection easier to create (as well as testing the class itself) This is a tricky question - DBAL (Database Abstraction Layers) is a deceptively short acronym for a very broad (and hotly debated) topic. If you want to keep it light, you can write a Transaction script: http://martinfowler.com/eaaCatalog/transactionScript.html Basically an OOP wrapper for your apps most common queries (i.e. saveCompanyEmployees , deleteEmployee , selectEmployee etc.). You can take this up a notch and use assemble queries programmatically, in which case your methods may become more like this: select($table,$id) , selectWhere($table,$condition) - this is more of a Data Access Object than a Transaction Script If you find yourself moving towards a fluent interface, or class representations of tables - then you may well want to consider an ORM of some description (it's not really worth writing your own, although it has the advantage of being more tailored to your app and possibly more lightweight, and of course you learn the hard way - which is often the best way...), although these can be a mixed blessing - and personally I think it's slightly perverse to be so averse to SQL to hide it entirely in this manner. I'd reserve your direct SQL execution as a ""back door"" method you can resort to when all else fails - since having to write the SQL in your application logic kinda ruins the encapsulation benefits of OOP"
886,"How about actually computing entropy?  Also, it's not clear that character-level entropy will help, but here goes.  It's in my mother tongue C++, but surely you can convert this to Java using Array instead of std::vector. float CharacterEntropy(const char *str) {
  std::vector<unsigned> counts(256);
  for (const char *i = str; *i; ++i)
    ++counts[static_cast<unsigned char>(*i)];
  unsigned int total = 0;
  for (unsigned i = 0; i < 256; ++i)
    total += counts[i];
  float total_float = static_cast<float>(total);
  float ret = 0.0;
  for (unsigned i = 0; i < 256; ++i) {
    float p = static_cast<float>(counts[i]) / total_float;
    ret -= p * logf(p);
  }
  return p * M_LN2;
}"
887,"With a bit of help from System.Linq this becomes quite easy. var array = [ <%= 
    string.Join("","", items.Select(v => ""'"" + v.ToString() + ""'"").ToArray())  
%> ];"
888,"Am I overlooking anything with this asynchronous read/write loop?. Here's my code: public static void CopyStream(Stream input, Stream output)
{
    var size = 8192;

    var inBuffer = new byte[size];
    var outBuffer = new byte[size];

    IAsyncResult writeAsync = null;

    int count;
    while (true)
    {
        var readAsync = input.BeginRead(inBuffer, 0, size, null, null);

        if (writeAsync != null)
        {
            output.EndWrite(writeAsync);
            writeAsync = null;
        }

        count = input.EndRead(readAsync);
        inBuffer.CopyTo(outBuffer, 0);

        if (count > 0)
        {
            writeAsync = output.BeginWrite(outBuffer, 0, count, null, null);
        }
        else
        {
            break;
        }
    }
} This really is my first piece of code using the Begin/End asynchronous model.  I'm just wondering if I have any glaring issues. Or, are there any improvements that you can see to make this even better?"
889,"Data validation for preventing blank entries. I want to create a validation wherein blank entries will not be accepted. So if I call this code: entry[i].setName(JOptionPane.showInputDialog(""Enter Name: ""));
if the entry is blank, it will not be accepted and an error will prompt: it cannot accept blank entries. Of course it could easily remedied with this code: String name = JOptionPane.showInputDialog(""Enter Name: "");
 while (name.equals("""")){
       JOptionPane.showMessageDialog(null, ""Cannot accept blank entries!"");
       name = JOptionPane.showInputDialog(""Enter Name: "");
 } but if I want to validate 100 fields that I don't want to have a blank entry, then my code will be messy and long. How could I do it better? I've read about using getters and setters or the try-catch methods to do the validation but I don't know if this kind of validation is applicable. And I don't know how I can do it. And if it is applicable, would I be violating the Model-View-Controller concept if I included a JOption message dialog box on my getter and setter methods? What code does programmers usually use in doing blank entries validation?"
890,"Extract the input code into a method: String getNonBlankInput(String prompt) {
   String input = JOptionPane.showInputDialog(prompt);

   while (input.equals("""")) {
      JOptionPane.showMessageDialog(null, ""Cannot accept blank entries!"");
      input = JOptionPane.showInputDialog(prompt);
   }

   return input;
} Usage: String name = getNonBlankInput(""Enter name: "");"
892,"Improving HashMap in C++. I have created a HashMap<string,int> in C++. I would like help determining if it is good or bad. I have not handled the errors or successes with messages. I have also not implemented the load factor in this map. As of now, once the size limit is reached, no more keys are accepted. I have written this code for just educational purpose only.  I would like to know few things to make it better. How can I implement the load factor concept?  The hash function O/P is dependent on the previous table size. If we are to change the table size, the old <key, value> pair will be lost. How can I make this generic? i.e. instead of <string,int> , is it possible to write a template code for both key and the value? Implementing a hash function will not be a problem, since the hash function can be overloaded. What about the storage? In case of Java, the key and value will be treated as Object . Is there any option similar to that in C++? Any other important (or mandatory) feature this map is missing? #include <string>
#include <vector>

using namespace std;

typedef struct Node {
string key;
int value;
struct Node * left;
struct Node * right;
}doubly;


class myHashStrKey{

private:
int currentCount;
int hashsize; // Default n = 2000. So 701 slots will be initialized.
vector<doubly *> table;

//hash function taken from net and modified.
size_t hash(const std::string data) {
    size_t h(0);
    for (int i=0; i<data.length(); i++){
        h = (h << (31-i) ^ (h >> i) ^ data[i]);
    }
    h = h%hashsize;
    return h;
}

//Inserts the key and value. If the key is already present, the value is updated.
//Checks if the currentCount < (hashsize+1)*3
void insertNode(doubly ** root, int Value, const string Key){

    if(*root ==NULL){
        if(myHashStrKey::currentCount >= ((hashsize+1)*3))
            return;
        doubly * newNode = new doubly();
        newNode->value = Value;
        newNode->left = NULL;
        newNode->right = NULL;
        newNode->key = (Key);
        *root = newNode;
        myHashStrKey::currentCount++;
        return;
    }

    doubly * prev = NULL;
    doubly * current = *root;
    while(current != NULL && ((current)->key).compare(Key)){
        prev = current;
        current = current->right;
    }

    if(current ==NULL){
        if(myHashStrKey::currentCount >= ((hashsize+1)*3))
            return;
        doubly *newNode = new doubly();
        newNode->value = Value;
        newNode->key = Key;
        newNode->left = prev;
        newNode->right = NULL;
        prev->right = newNode;
        myHashStrKey::currentCount++;
    }
    else{
        (current)->value = Value;
    }
}

//Return the corresponding value for the given key from the table
int getNodeValue(doubly * root, string key){
    while(root != NULL){
        if(!key.compare(root->key)){
            return root->value;
        }
        root = root->right;
    }
    return -1;
}

//Removes the node from bucket if present and reduces the currentcount
//else nothing.
void removeNode(doubly ** root, string Key){
    doubly * toRemove;
    doubly * head = *root;

    //Check to see if the first element is the target.
    if((head != NULL) &&!(head->key).compare(Key)){
        toRemove = head;
        *root = head->right;
        if(head->right != NULL)
            head->right->left = NULL;
        delete toRemove;
        myHashStrKey::currentCount--;
        return;
    }
    //First element is not the target.
    else{
        if(head == NULL)
            return;

        while((head != NULL) &&(head->key).compare(Key)){
            head = head->right;
        }
        //Element not present. return
        if(head == NULL)
            return;

        //Element found. Remove the element and decrement currentCount.
        toRemove = head;

        head->left->right = head->right;
        if(head->right !=NULL)
            head->right->left = head->left;

        myHashStrKey::currentCount--;
        delete toRemove;
        return;
    }
}

public:
//Constructor for default size.
//I am considering that hash table size to have default value of 701.
//The average elements per bucket is 3.
//THe total allowed elements will be 701*3 i.e. tablesize*3.
myHashStrKey(){
    myHashStrKey::currentCount=0;
    myHashStrKey::hashsize = 701;
    myHashStrKey::table.insert(myHashStrKey::table.begin(),hashsize,((doubly *)NULL));
}

//Constructor for the user given size
//Hashsize is calculated to be size/3 +1 (average elements per bucket is 3)
myHashStrKey(int size){
    myHashStrKey::currentCount=0;
    myHashStrKey::hashsize = size/3 +1;
    myHashStrKey::table.insert(myHashStrKey::table.begin(),hashsize,((doubly *)NULL));
}


//Adds entry to the HashMap
void addKeyValue(const string &key,int value ){
    size_t keyHash = hash(key);
    insertNode(&(table[keyHash]), value, key);
}

//Gets the corresponding value for the key if present else nothing
int getValue(const string &key ){
    size_t keyHash = hash(key);
    int result = getNodeValue(table[keyHash],key);
    return result;
}

//Deletes the key if present else nothing.
void deleteKey(const string &key){
    size_t keyHash = hash(key);
    removeNode(&(table[keyHash]),key);
}
};"
893,"It's not entirely clear what your goals are with this bit of code.  Three possibilities that come to mind: CopyStream should be asynchronous.  As written, it does not meet this goal since it blocks on the results of EndRead and EndWrite.  If this is your goal, you need to use callback methods and not call the End methods until your callbacks have been called.  You also need to modify CopyStream's signature to return IAsyncResult and take a callback and state as parameters. CopyStream should hide the details of the underlying asynchronous calls from its users, but is itself synchronous.  Your code accomplishes this goal, but there are a few things that could use cleaning up. CopyStream should hide the details of the underlying asynchronous calls, and also maximize performance by making sure the writer is kept busy at all times and never sitting around idle waiting for reads, to the extent possible.  It seems like this may have been your goal due to the attempt to read/write in parallel, but by only allowing a single outstanding read or write, you're not really getting much out of it.  In order to implement this correctly, you need to use a reader thread and a writer thread, with a queue of items to be written.  The reader reads as fast as it can and inserts chunks of data into the queue, which the writer then writes as fast as it can or as fast as they show up. EDIT: As an example of how to write this code using a queue, see the following.  Note that I didn't need to spin up a thread because I can just make use of the EndRead/EndWrite callbacks and have the original thread wait for a signal to be raised.  Also, this is a lightly-tested first draft, so beware that there could be bugs lurking in there.  This type of code is complex and difficult to get right, and should only be used when really necessary for valid perf reasons.  If the complexity is not justified, I would just use the synchronous Read and Write methods to simplify the code as much as possible. public static void CopyStream(Stream input, Stream output)
{
    AutoResetEvent completed = new AutoResetEvent(false);
    BeginRead(new CopyStreamState(completed, input, output));

    completed.WaitOne();
}

private static void BeginRead(CopyStreamState state)
{
    const int bufferSize = 8192;

    state.InputBuffer = new byte[bufferSize];
    state.Input.BeginRead(state.InputBuffer, 0, bufferSize, ReadCallback, state);
}

private static void ReadCallback(IAsyncResult ar)
{
    CopyStreamState state = (CopyStreamState)ar.AsyncState;

    int bytesRead = state.Input.EndRead(ar);
    if (bytesRead > 0)
    {
        byte[] dataToWrite = state.InputBuffer;

        if (bytesRead < state.InputBuffer.Length)
        {
            dataToWrite = new byte[bytesRead];
            Array.Copy(state.InputBuffer, dataToWrite, bytesRead);
        }

        EnqueueWriteData(state, dataToWrite);
        BeginRead(state);
    }
    else
    {
        state.FinishedReading = true;
    }

    BeginWriteOrComplete(state);
}

private static void EnqueueWriteData(CopyStreamState state, byte[] data)
{
    lock (state)
    {
        state.WriteQueue.Enqueue(data);
    }
}

private static void BeginWriteOrComplete(CopyStreamState state)
{
    lock (state)
    {
        if (!state.WriteInProgress)
        {
            if (state.WriteQueue.Count > 0)
            {
                byte[] outputBuffer = state.WriteQueue.Dequeue();
                state.WriteInProgress = true;
                state.Output.BeginWrite(outputBuffer, 0, outputBuffer.Length, WriteCallback, state);
            }
            else if (state.FinishedReading)
            {
                state.Completed.Set();
            }
        }
    }
}

private static void WriteCallback(IAsyncResult ar)
{
    CopyStreamState state = (CopyStreamState)ar.AsyncState;
    state.Output.EndWrite(ar);

    lock (state)
    {
        state.WriteInProgress = false;
        BeginWriteOrComplete(state);
    }
}

private class CopyStreamState
{
    public CopyStreamState(
        AutoResetEvent completed, 
        Stream input, 
        Stream output)
    {
        this.Completed = completed;
        this.Input = input;
        this.Output = output;
        this.WriteQueue = new Queue<byte[]>();
    }

    public AutoResetEvent Completed { get; private set; }
    public Stream Input { get; private set; }
    public Stream Output { get; private set; }
    public Queue<byte[]> WriteQueue { get; private set; }

    public byte[] InputBuffer { get; set; }
    public bool FinishedReading { get; set; }
    public bool WriteInProgress { get; set; }
}"
894,"Please change the validating condition like this. while ("""".equals(input.trim())) {
      JOptionPane.showMessageDialog(null, ""Cannot accept blank entries!"");
      input = JOptionPane.showInputDialog(prompt);
} This type of validation may also check only blanks as input & any other value also. 1. String name = JOptionPane.showInputDialog(""Enter Name: ""); contains spaces.
2. String name = JOptionPane.showInputDialog(""Enter Name: ""); contains null."
895,"Just a quick note: If I'm following your code correctly, I just can't see how the last if (writeAsync != null) could ever be true."
896,"I really like Mongus Pong's answer , but I have a couple of things to add. The name of the extracted method should reflect the actual meaning of the magic numbers (-7 and -85) inside the method. The magic numbers themselves should probably be turned into named constants, for added clarity. The extracted method should be put where it belongs. I would suggest using the repository pattern , but in this specific case it would probably be a good idea to put it next to the Fetch method, inside the OrderItem class. (The OrderItem class looks like a domain entity to me, so this would break SRP , but I digress.) If all usages of Fetch could be replaced by methods like this, Fetch could eventually be made non-public. Something like this: shippedItems.AddRange(OrderItem.FetchLastWeeksOrderItems(MARKET, serverTime));

public class OrderItem
{
    public static IEnumerable<OrderItem> FetchLastWeeksOrderItems(
        string market, DateTime serverTime)
    {
        return OrderItem.Fetch(
            market: market,
            shipConfirmState: ORDERITEMSHIPCONFIRMSTATE.NONE,
            orderPlacedAfter: serverTime.AddDays(-7),
            orderPlacedBefore: serverTime.AddHours(-85));
    }

    private static IEnumerable<OrderItem> Fetch( ... )
    {
        ...
    }
}"
897,"You're using a decent hash, with a unique salt per user. So it's pretty solid. You might consider adding some password stretching, but it is by no means necessary. Step 1: Hash the password and salt.
Step 2: Add the salt to the hash, and rehash
Step 3: Repeat step 2 x number of times."
898,"It is a matter of style and taste but I'd rather go with public long getRunTime() {
   if(processRunning)
     return System.currentTimeMillis() - time; 

     return time;
} I just think this reads easier, and its easier to comment this. Now set me on fire for multiple return statements :D"
899,"Interrupt lengthy for loops. I have this piece of code I would like some help with. I'm running a lengthy process that I want to interrupt at any time. The thing is, as you can see in the code, I have if(stop) everywhere, also in the methods inside the for (since they have for loops also). stop is a member variable of the class, and the Stop() method is called from the UI from a different thread. I don't think making it multithreading would be a good option since would be more complex to keep state and to communicate between threads. Can you think of a better way to solve this, making the code cleaner? public void Start()
{
    for(int i = 0; i < Length; i++)
    {
        if(stop)
            return;

        LengthyMethodA();

        if(stop)
            return;

        LengthyMethodB();

        if(stop)
            return;

        LengthyMethodC();
    }
}

public void Stop()
{
    stop = true;
}"
900,"Capitalize words in sentence. public static class StringHelpers
{
    public static string CapitalizeEachWord(this string sentence)
    {
        CultureInfo cultureInfo = Thread.CurrentThread.CurrentCulture;
        TextInfo textInfo = cultureInfo.TextInfo;

        if (String.IsNullOrEmpty(sentence))
        {
            return String.Empty;
        }

        return textInfo.ToTitleCase(sentence);
    }

    public static string CapitalizeFirstWord(this string sentence)
    {
        if (String.IsNullOrEmpty(sentence))
        {
            return String.Empty;
        }

        var words = sentence.Split();
        StringBuilder resultBuilder = new StringBuilder();

        var letters = words[0].ToCharArray();
        List<string> lettersHolder = new List<string>();
        lettersHolder.Add(letters[0].ToString().ToUpper());
        for (int i = 1; i < letters.Length; i++)
        {
            lettersHolder.Add(letters[i].ToString().ToLower());
        }

        foreach (var letter in lettersHolder)
        {
            resultBuilder.Append(letter);                   
        }

        resultBuilder.Append("" "");

        for (int i = 1; i < words.Length; i++)
        {
            resultBuilder.Append(words[i].ToLower());
            resultBuilder.Append("" "");
        }

        return resultBuilder.ToString();
    }
} The first method, is supposed to correctly capitalize each word in a sentence. I don't think there's much room for improvement in that one. The second method, seems a little confusing and even after I've written it and tested it, I cannot seem to fully put what it's doing into my buffer. That's a sign of code smell. If I kinda get it now, what will happen down the line when I have to change it or something."
901,"Any answer given will be completely conditional. Can you be sure that stopping after step B will not have dire consequences related to the fact that step A was completed successfully? I recommend you break each section into work that must be completed with a chance to terminate before entering. Then I recommend you switch to AutoResetEvent which is thread safe. Unfortunately this really won't lead to less code but it will make your code more robust. private readonly AutoResetEvent _stopRunning = new AutoResetEvent(false);

public void Start()
{
    for(int i = 0; i < Length; i++)
    {    
        if (_stopRunning.WaitOne(1)) return;
        WorkThatMustRunToCompletion();
    }
}

public void Stop()
{
    _stopRunning.Set();    
}"
902,"Conversion from/to roman numbers. I wrote as an exercise in Test-Driven Development a piece of Python code that contains two functions: roman2dec(roman) , that converts a roman number (string) into a decimal number (int) dec2roman(dec) , that converts a decimal number (int) into a roman number (string) I'd like to read your comments on this code, if there are bad practices, if you would sign it for shipping or if you'd change anything. import re
import math

# Regular expression used to validate and parse Roman numbers
roman_re = re.compile(""""""^
   ([M]{0,9})   # thousands
   ([DCM]*)     # hundreds
   ([XLC]*)     # tens
   ([IVX]*)     # units
   $"""""", re.VERBOSE)

# This array contains valid groups of digits and encodes their values.
# The first row is for units, the second for tens and the third for
# hundreds. For example, the sixth element of the tens row yields the
# value 50, as the first is 0.
d2r_table = [
    ['', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX'],
    ['', 'X', 'XX', 'XXX', 'XL', 'L', 'LX', 'LXX', 'LXXX', 'XC'],
    ['', 'C', 'CC', 'CCC', 'CD', 'D', 'DC', 'DCC', 'DCCC', 'CM']]


def roman2dec(roman):
    """"""Converts a roman number, encoded in a string, to a decimal number.""""""
    roman = roman.upper()
    match = roman_re.match(roman)

    if not match:
        raise ValueError

    thousands, hundreds, tens, units = match.groups()
    result = 1000 * len(thousands)
    result += d2r_table[2].index(hundreds) * 100
    result += d2r_table[1].index(tens) * 10
    result += d2r_table[0].index(units)

    return result


def dec2roman(dec):
""""""Converts a positive decimal integer to a roman number.""""""
    if dec == 0:
        return ''

    digit = 0
    rem = dec
    result = ''

    # Length in digits of the number dec
    dec_len = int(math.ceil(math.log10(dec)) + 1)

    # Scan the number digit-by-digit, starting from the MSD (most-significant
    # digit)
    while dec_len > 0:
        # Let's take the current digit
        factor = 10 ** (dec_len - 1)
        digit = rem / factor

        # And remove it from the number
        rem = rem - digit * factor

        if dec_len >= 4:
            # Thousands
            result = result + digit * 'M'
        else:
            # Look in the look-up table
            result = result + d2r_table[dec_len - 1][digit]

        dec_len -= 1

    return result EDIT : Here is the test suite for dec2roman: class DecToRoman(unittest.TestCase):
    def testZeroIsEmpty(self):
        self.checkString(0, """")

    def testSingleDigits(self):
        self.checkString(1, ""I"")
        self.checkString(10, ""X"")
        self.checkString(50, ""L"")
        self.checkString(100, ""C"")
        self.checkString(500, ""D"")
        self.checkString(1000, ""M"")

    def testSimpleRepeats(self):
        self.checkString(1, ""I"")
        self.checkString(2, ""II"")
        self.checkString(3, ""III"")
        self.checkString(10, ""X"")
        self.checkString(20, ""XX"")
        self.checkString(30, ""XXX"")

    def testSubtraction(self):
        self.checkString(4, ""IV"")
        self.checkString(9, ""IX"")
        self.checkString(40, ""XL"")
        self.checkString(90, ""XC"")

    def testOther(self):
        self.checkString(89, ""LXXXIX"")
        self.checkString(145, ""CXLV"")
        self.checkString(691, ""DCXCI"")
        self.checkString(1983, ""MCMLXXXIII"")
        self.checkString(2412, ""MMCDXII"")
        self.checkString(3309, ""MMMCCCIX"")

    def checkString(self, decimal, expected_string):
        self.assertEqual(expected_string, new_dec2roman(decimal))"
903,"You're right, your second method is way too complicated. It also doesn't handle the case where the string starts with a space (in which case words[0] will be the empty string and letters[0] will be out of bounds). Since all your method seems to be doing is to capitalize the first letter of the string and lower case everything else, why not just do that? public static string CapitalizeFirstWord(this string sentence)
{
    if (String.IsNullOrEmpty(sentence))
    {
        return String.Empty;
    }

    String firstLetter = sentence.Substring(0,1);
    String rest = sentence.Substring(1);
    return firstLetter.ToUpper() + rest.ToLower();
}"
904,"You say that Start is running in a thread other than the UI thread and that the Stop method is called from the UI thread. That being the case, why not just call Abort on the thread Start is running in? This throws a ThreadAbortException in the Start thread and causes your code to fall through as you intend."
905,"First of all you should document the fact that your code does not work with numbers above 9999. Then I think your code will become a bit simpler, if you add a fourth row to your d2r_table for the thousands. To avoid repetition you can use a list comprehension: d2r_table = [
    ['', 'I', 'II', 'III', 'IV', 'V', 'VI', 'VII', 'VIII', 'IX'],
    ['', 'X', 'XX', 'XXX', 'XL', 'L', 'LX', 'LXX', 'LXXX', 'XC'],
    ['', 'C', 'CC', 'CCC', 'CD', 'D', 'DC', 'DCC', 'DCCC', 'CM'],
    ['M' * i for i in xrange(0,10) ]] This allows you to not treat the thousands as a special case. So instead of: thousands, hundreds, tens, units = match.groups()
result = 1000 * len(thousands)
result += d2r_table[2].index(hundreds) * 100
result += d2r_table[1].index(tens) * 10
result += d2r_table[0].index(units) you can write: thousands, hundreds, tens, units = match.groups()
result =  d2r_table[3].index(thousands) * 1000
result += d2r_table[2].index(hundreds) * 100
result += d2r_table[1].index(tens) * 10
result += d2r_table[0].index(units)
return result Now you can easily notice the common pattern here: For each number from 0 to 3 you're taking the i th row of d2r_table , calling index on it with the 3-i th element of groups as the argument, then multiplying it with 10**i and lastly summing the results. You can abstract the common pattern like this if you want: def value_for_group(i):
    group = match.groups[3-i]
    return d2r_table[i].index(group) * 10**i

return sum(value_for_group(i) for i in xrange(0,4)) You can also replace the magic numbers 3 and 4, with something more meaningful: num_rows = len(d2r_table)

def value_for_group(i):
    group = match.groups[num_rows - 1 - i]
    return d2r_table[i].index(group) * 10**i

return sum(value_for_group(i) for i in xrange(0, num_rows)) This way your code will work without modification if you ever change d2r_table to account for extended roman numerals. In your dec2roman function you're using integer arithmetic to iterate over the digits of the number. I think it'd be easier and clearer to just convert the number to a string and iterate over the digits with a for loop. By reversing the d2r_table , you can use zip to iterate over the table and the digits in parallel without any index based loops. This way your dec2roman function would look like this: result = ''
# Make digits four digits long so it has the same number of digits
# as d2r_table has rows, then convert each digit to an int
digits = [int(digit) for digit in ""%04d"" % dec]

for digit, d2r_row in zip(digits, reversed(d2r_table)):
    result += d2r_row[ digit ]

return result You can also use join with a generator expression instead of updating result imperatively: digits = [int(digit) for digit in ""%04d"" % dec]
table = reversed(d2r_table)
return ''.join( d2r_row[ digit ] for digit, d2r_row in zip(digits, table) ) Again you might also want to replace the 4 in %04d with len(d2r_table) , so your code will automatically adapt to a longer d2r_table ."
906,"Analyzing genetic tags. I've gone back and forth a few times recently on my Perl coding style when it comes to module subroutines. If you have an object and you want to call the method bar with no arguments, then you can either do $foo->bar() or $foo->bar . At one point I started favoring the latter because I felt it cleaned up the code and made it more readable. However, sometimes I question whether it would be better to be fully explicit, especially considering the possibility that someone else will have to look at my code later  someone who almost certainly will not be an expert Perl programmer. For example, consider this block of code. For the method calls that require arguments ( get_tag_values and has_tag ), there is no question about the parentheses. But what about next_feature and primary_tag ? Is the readability I gain from dropping the parens worth losing the explicit syntax? Is one better than the other for long term maintainability? Or is this simply a subjective judgment call? while( my $feature = $gff3->next_feature )
{
  if($type eq ""cds"")
  {
    if( $feature->primary_tag eq ""mRNA"" )
    {
      my($gene_id) = $feature->get_tag_values(""Parent"");
      my($mRNA_id) = $feature->get_tag_values(""ID"");
      next unless( $list eq '' or $genes_to_extract->{$gene_id} );
      $subseq_locations->{ $feature->seq_id }->{ $mRNA_id } = Bio::Location::Split->new();
    }
    elsif( $feature->primary_tag eq ""CDS"" )
    {
      my($mRNA_id) = $feature->get_tag_values(""Parent"");
      if( $subseq_locations->{ $feature->seq_id }->{ $mRNA_id } )
      {
        $subseq_locations->{ $feature->seq_id }->{ $mRNA_id }->add_sub_Location( $feature->location );
      }
    }
  }
  else
  {
    if( $feature->primary_tag eq $type )
    {
      my $feat_id;
      if( $list ne '')
      {
        ($feat_id) = $feature->get_tag_values(""ID"") if($feature->has_tag(""ID""));
        next unless( $feature->has_tag(""ID"") and $genes_to_extract->{$feat_id} );
      }
      $subseq_locations->{ $feature->seq_id }->{ $feat_id } = Bio::Location::Split->new();
      $subseq_locations->{ $feature->seq_id }->{ $feat_id }->add_sub_Location( $feature->location );
    }
  }
}"
907,"You could always set up a list of Actions that need to be worked on, and then loop through them checking for Stop each time. Something like : List<Action> actions = new List<Action> {
  () => LengthyMethodA(),
  () => LengthyMethodB(),
  () => LengthyMethodC() };

  for(int i = 0; i < Length; i++)
  {    
    foreach (Action action in actions)
    {
       action();
       if(stop)
            return;
    }  
  } This may or may not be better. It depends on the actual code. The actions list would represent an ordered set of transactional units of code - each unit must be completed, but the whole set can be broken apart and cancelled if necessary."
908,"Creating a tab plugin. I am creating a tab plugin. I want to know if there is a better way of doing this or if what I have is good. It works just fine, but there may be some shortcuts or a more optimized way of accomplishing this. I plan to replace the startTab variable with an options set, but I am not quite there yet. View the current updated version here Here is what I have so far: <!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"">
<html xmlns=""http://www.w3.org/1999/xhtml"">
<head>
<meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" />
<title>Untitled Document</title>
<style>
ul.tabNavigation {
    list-style: none;
    margin: 0;
    padding: 0;
}
ul.tabNavigation li {
    display: inline;
}
ul.tabNavigation li a {
    text-decoration: none;
    color:#000;
}
.tabViews {
    width: 100%;
    border: #8db2e3 solid 1px;
    clear:both;
    height:18px;
    margin-top: -12px;
    background: url(css/tabs/images/tabs_Lower_Header_Background.png) repeat-x;
}
.tab {
    height: 25px;
    font-family:'Trebuchet MS', Arial, Helvetica, sans-serif;
    font-size:14px;
    float:left;
    padding-left: 4px;
    position: relative;
    top: 1px
}
.tab .right {
    float:left;
    background:url(css/tabs/images/tab_Selected_Right.png) no-repeat;
    height:25px;
    width: 8px;
}
.tab .content {
    float:left;
    background:url(css/tabs/images/tab_Selected_Content.png) repeat-x;
    height:25px;
    text-align: center;
    padding-left: 5px;
    padding-right: 5px;
    padding-top: 4px;
}
.tab .left {
    float:left;
    background:url(css/tabs/images/tab_Selected_Left.png) no-repeat;
    height:25px;
    width: 6px;
}
.tabHover {
    height: 25px;
    font-family:'Trebuchet MS', Arial, Helvetica, sans-serif;
    font-size:14px;
    float:left;
    padding-left: 4px;
    position: relative;
    top: 1px;
    cursor: pointer;
}
.h1 {
    float:left;
    height:25px;
    width: 14px;
}
.h2 {
    float:left;
    height:25px;
    text-align: center;
    padding-left: 7px;
    padding-right: 5px;
    padding-top: 4px;
}
.h3 {
    float:left;
    height:25px;
    width: 10px;
}
.tabHover:hover .h1 {
    background:url(css/tabs/images/tab_Hover_Right.png) no-repeat;
}
.tabHover:hover .h2 {
    background:url(css/tabs/images/tab_Hover_Content.png) repeat-x;
}
.tabHover:hover .h3 {
    background:url(css/tabs/images/tab_Hover_Left.png) no-repeat;
}
</style>
<script type=""text/javascript"" src=""javascript/jquery/jquery.js""></script>
<script>

$.fn.tabs = function(startTab){
    //Set currentIndex
    var currentIndex = 0;

    //Get all tab views
    var tabViews = $('.tabViews > div',$(this));

    //Current tab container
    var tabsContainer = $(this);
    //Hide all tabView containers
    tabViews.hide();


    //Get all tabs
    var $tabs = $('ul > li', tabsContainer);


    $tabs.each(function(index){
        $('a',$(this)).click(function(){
            changeTab(index);

        });


    });

     //call the changeTab method for the first time and selected the starting tab.
    changeTab(startTab);

    function changeTab(selectedIndex){

        if(selectedIndex != currentIndex){
            switchClass(selectedIndex);
            var previousSelectedTab = $('a',$tabs[currentIndex]);
            var currentSelectedTab = $('a',$tabs[selectedIndex]);

            $(previousSelectedTab.attr('href')).hide();            
            $(currentSelectedTab.attr('href')).show();
            currentIndex = selectedIndex;
        }


    }

     //Method to switch the calles for selected and non selected tabs.
    function switchClass(selectedIndex){        
        $tabs.each(function(index){
                            //Get Child Left, Content, right divs
                            var classBuilder = $('div  > div',$(this))

                            //Current Selected Tab
                            if(index == selectedIndex){
                                var tabContainer = $('a > div',$(this))
                                tabContainer.removeClass('tabHover');
                                tabContainer.addClass('tab');
                                $(classBuilder[0]).removeClass('h3');
                                $(classBuilder[0]).addClass('left');
                                $(classBuilder[1]).removeClass('h2');
                                $(classBuilder[1]).addClass('content');
                                $(classBuilder[2]).removeClass('h1');
                                $(classBuilder[2]).addClass('right');


                            }
                            //Previously selected tab
                            if(index == currentIndex){
                                var tabContainer = $('a > div',$(this))
                                tabContainer.removeClass('tab');
                                tabContainer.addClass('tabHover');

                                $(classBuilder[0]).removeClass('left');
                                $(classBuilder[0]).addClass('h3');
                                $(classBuilder[1]).removeClass('content');
                                $(classBuilder[1]).addClass('h2');
                                $(classBuilder[2]).removeClass('right');
                                $(classBuilder[2]).addClass('h1');
                            }
                            });
    }

}

$(function() {
  $('#rfiTabs').tabs(0);
}); 

</script>
</head>
<body>
<div id=""rfiTabs"">
  <ul class=""tabNavigation"">
    <li><a href=""#rfiBasic"">
      <div class=""tab"">
        <div class=""left""></div>
        <div class=""content"">Basic</div>
        <div class=""right""></div>
      </div>
      </a></li>
    <li><a href=""#rfiHome"">
      <div class=""tabHover"">
        <div style="""" class=""h3""></div>
        <div style="""" class=""h2"">Home</div>
        <div class=""h1""></div>
      </div>
      </a></li>
  </ul>
  <div class=""tabViews"" style="""">
    <div id=""rfiBasic"">Test</div>
    <div id=""rfiHome"">test this</div>
  </div>
</div>
</body>
</html> I realized I can optimize the left, content, and center part of the tabs by updating the CSS and jQuery for the hover section: .tabHover .right {
    float:left;
    height:25px;
    width: 14px;
}
.tabHover .content {
    float:left;
    height:25px;
    text-align: center;
    padding-left: 7px;
    padding-right: 5px;
    padding-top: 4px;
}
.tabHover .left {
    float:left;
    height:25px;
    width: 10px;
}
.tabHover:hover .right {
    background:url(css/tabs/images/tab_Hover_Right.png) no-repeat;
}
.tabHover:hover .content {
    background:url(css/tabs/images/tab_Hover_Content.png) repeat-x;
}
.tabHover:hover .left {
    background:url(css/tabs/images/tab_Hover_Left.png) no-repeat;
}

function switchClass(selectedIndex){        
        $tabs.each(function(index){
                            //Get Child Lef, Content, right divs
                            var classBuilder = $('div  > div',$(this))


                            if(index == selectedIndex){
                                var tabContainer = $('a > div',$(this))
                                tabContainer.removeClass('tabHover');
                                tabContainer.addClass('tab');
                                //$(classBuilder[0]).removeClass('h3');
//                                $(classBuilder[0]).addClass('left');
//                                $(classBuilder[1]).removeClass('h2');
//                                $(classBuilder[1]).addClass('content');
//                                $(classBuilder[2]).removeClass('h1');
//                                $(classBuilder[2]).addClass('right');


                            }

                            if(index == currentIndex){
                                var tabContainer = $('a > div',$(this))
                                tabContainer.removeClass('tab');
                                tabContainer.addClass('tabHover');

                                //$(classBuilder[0]).removeClass('left');
//                                $(classBuilder[0]).addClass('h3');
//                                $(classBuilder[1]).removeClass('content');
//                                $(classBuilder[1]).addClass('h2');
//                                $(classBuilder[2]).removeClass('right');
//                                $(classBuilder[2]).addClass('h1');
                            }
                            });
    }"
909,"I also came up with this, based on Shannon entropy . In information theory, entropy is a measure of the uncertainty associated with a random variable. In this context, the term usually refers to the Shannon entropy, which quantifies the expected value of the information contained in a message, usually in units such as bits. It is a more ""formal"" calculation of entropy than simply counting letters: /// <summary>
/// returns bits of entropy represented in a given string, per 
/// http://en.wikipedia.org/wiki/Entropy_(information_theory) 
/// </summary>
public static double ShannonEntropy(string s)
{
    var map = new Dictionary<char, int>();
    foreach (char c in s)
    {
        if (!map.ContainsKey(c))
            map.Add(c, 1);
        else
            map[c] += 1;
    }

    double result = 0.0;
    int len = s.Length;
    foreach (var item in map)
    {
        var frequency = (double)item.Value / len;
        result -= frequency * (Math.Log(frequency) / Math.Log(2));
    }

    return result;
} Results are: ""abcdefghijklmnop"" = 4.00
""Hello, World!"" = 3.18
""hello world"" = 2.85
""123123123123"" = 1.58
""aaaa"" = 0"
910,"You could remove tab navigation from html and create it dynamically in plugin so the html will look like this: <div id=""rfiTabs"">
  <div class=""tabViews"" style="""">
    <div id=""rfiBasic"">Test</div>
    <div id=""rfiHome"">test this</div>
  </div>
</div>
</body>
</html> you don't need to call var tabsContainer = $(this); this is already jQuery object inside switchClass function you call $(this) 3 times you can call it once and stor the value var $this = $(this); you get element from jQuery object and then wrap it again. $(classBuilder[0]).removeClass('h3'); you could use eq jquery method classBuilder.eq(0).removeClass('h3'); instead if(index == selectedIndex){

} 
if(index == currentIndex){

} use if(index == selectedIndex){

} else if(index == currentIndex){

} you don't need to check if index == currentIndex if index == selectedIndex this code is repeaded twice but with different class names create a function for it (it looks almost the same  if you see something like this always create new function) $(classBuilder[0]).removeClass('h3');
$(classBuilder[0]).addClass('left');
$(classBuilder[1]).removeClass('h2');
$(classBuilder[1]).addClass('content');
$(classBuilder[2]).removeClass('h1');
$(classBuilder[2]).addClass('right'); and you can chain jquery methods: classBuilder.eq(0).removeClass('h3').addClass('left');
classBuilder.eq(1).removeClass('h2').addClass('content');
classBuilder.eq(2).removeClass('h1').addClass('right'); you don't need to iterate over $tabs function switchClass(selectedIndex){ 
   $tabs.eq(selectedIndex) and I think that this: var classBuilder = $tabs.eq(selectedIndex).find('div  > div'); will be the same as var classBuilder = $('div  > div',$(this)) and this: if(index == currentIndex){
    var tabContainer = $('a > div',$(this))
    tabContainer.removeClass('tab');
    tabContainer.addClass('tabHover'); is the same as $tabs.eq(currentIndex).find('a > div').removeClass('tab').addClass('tabHover'); and at the end of the script you should return this so it could be chained $('#rfiTabs').tabs(0).css('background-color', 'red'); you can also do this: return this.each(function() {
      var $this = $(this);
      //and create your tabs here
   }); so if you call it $('.myalltabs').tabs(0); it will create tabs for every element that have .myalltabs class Update if you your jquery object have multiple elements (But this is Something Completely Different) $.fn.tabs = function(n) {

    var = tabcontainer = $('<div/>').attr('class', 'mainTabClass')
             .appendTo($('body'));

    var nav = $('<ul>').addClass('navigation').appendTo(tabcontainer);
    this.each(function() {
       var $this = $(this);
       var id = $this.attr('id');
       $('<li>').append('<a>').appendTo(nav).children().
          attr('href', '#' + id).html($this.attr('name'));
    }).addClass('tabContent').detach().appendTo(tabcontainer);

    nav.find('li a').click(function() {
      tabcontainer.find('tabContent').removeClass('selected');
      tabcontainer.find($(this).attr('href')).addClass('selected');
    }).eq(n).addClass('selected');
}; in this case you need only .selected {
   display: block;
}
.mainTabClass .tabContent {
   display: none;
}

  ....
  <div id=""home"" name=""Home Page"">this is home</div>
  ....
  <div id=""about"" name=""About me"">this is about</div>
  .... name attribute in case you won't different name than id. $('#home, #about').tabs(1); and you will have <div class=""mainTabClass"">
  <ul class=""navigation"">
    <li><a href=""#home"">Home Page</a></li>
    <li><a href=""#about"">About me</a></li>
  </ul>
  <div class=""tabContent"" id=""home"">this is home</div>
  <div class=""tabContent selected"" id=""about"">this is about</div>
</div> I don't know why you have repeated left , right and content for every tab, if you need to use those - create one instance and change it on click (in case you will have 100 tabs you will have 3 DOM elements instead of 300)"
911,"Because either is technically acceptable, you are right that it is a style issue and simply a case of choosing a coding convention. However, I think that you have hit a very important point. So few other languages that use parentheses for functions allow a parameterless function call without parentheses that it can be very surprising for developers unfamiliar to perl. This point would sway me in favour of always using them and, indeed, I always do so out of habit because I use other languages a lot and it just comes naturally."
912,"Optimized thumbnail generation. Here is a snippet of code that generates a thumbnail from a given file.  It works well, but is much slower than desired.  Without using an external library (which I'm trying to avoid for learning purposes), is there anything that can be done to increase the speed? I know the fastest way would be to retrieve the stored thumbnail.  I've looked into reading for any EXIF thumbnail data by parsing out the embedded information, but gave up since it was taking me a lot of effort with no finished end result.  Again, I'd prefer not to rely on a library specifically because I want to learn more about the format itself. I know many will state right away I shouldn't be messing with EXIF data unless I use an external library, so as an alternative, what can be done specifically with this snippet to make things (significantly) faster? Feel free to give me feedback about my coding style as well, except for the use of JavaDoc comments. class ThumbIcon extends ImageIcon implements Runnable {
   public int    thumbWidth;
   public int    thumbHeight;

   Image         image;
   Graphics2D    g2dBuffer;
   ThumbButton   parent;
   BufferedImage scaledImage;

   public ThumbIcon(final ThumbButton theParent) {
      super();
      parent = theParent;
   } // End ThumbIcon(ThumbButton, String)

   public void run() {
                         image   = Toolkit.getDefaultToolkit().getImage(filePath);
      final MediaTracker tracker = new MediaTracker(new Container());
      tracker.addImage(image, 0);
      try {
         tracker.waitForID(0);
      } catch (InterruptedException e) {
         System.out.println(""Interrupted getting thumb"");
      } // End try

      // Get dimensions from the now-loaded image
      final int width   = image.getWidth(null);
      final int height  = image.getHeight(null);

      // Use the width to determine if the image is legitimate and loaded
      // Limit importable images to <54MiB or <51.5MP (9000px x 6000px)
      if ((width > 0) && (width * height < 54000000)) {
         // This is an actual image, so display on screen

         // Set the thumbnail size depending on image orientation
         // We are assuming a square thumbnail
         if (width > height) { // Landscape
            thumbWidth  = THUMBS_SIZE;
            thumbHeight = (int)((double)height / (double)width * THUMBS_SIZE);
         } else {              // Portrait
            thumbWidth  = (int)((double)width / (double)height * THUMBS_SIZE);
            thumbHeight = THUMBS_SIZE;
         } // End if

         scaledImage = new BufferedImage(thumbWidth, thumbHeight,
                                         BufferedImage.TYPE_INT_RGB);

         // Simultaneously load image into g2d buffer and scale to desired size
         g2dBuffer = scaledImage.createGraphics();
         g2dBuffer.setRenderingHint(RenderingHints.KEY_INTERPOLATION,
                                    RenderingHints.VALUE_INTERPOLATION_NEAREST_NEIGHBOR);

         //g2dBuffer.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
         //                           RenderingHints.VALUE_ANTIALIAS_ON);

         // Size image (no matter initial size) to destWidth x destHeight
         g2dBuffer.drawImage(image, 0, 0, thumbWidth, thumbHeight, null);
         ...
         // Create the thumbnail
         setImage(Toolkit.getDefaultToolkit().createImage(scaledImage.getSource()));
         scaledImage.flush();
         image.flush();
         //g2dBuffer.finalize();
         g2dBuffer = null;
      } else {
         ...
      } // End if
   } // End run()
   ...
} // End ThumbIcon I shaved off some time by disabling anti-aliasing.  It looks nasty, but it serves its purpose."
913,"Looks like so long as you aren't calling more than these three methods, what you have is better for clarity's sake.  And the cost of the conditionals is pretty cheap as far as compilation goes."
914,"To me, it is a no-brainer (for all it is a style question); retain the empty parentheses for the function call. The language I've used that allows (requires?) functions with no arguments to be called without parentheses was Pascal, and I always found such calls confusing - doubly so when invoked in the argument list to another function. Perl no longer requires the & in front of functions as it once did.  I think it is still worth distinguishing between a variable reference and a function call by providing the parentheses, at least when the call could be confused with a variable reference."
916,"Processing an API's JSON response. I am using the JSON output of the MediaWiki API documented here and here , and I have found that for Boolean values, it often returns an empty string if true and omits it if false. Thus, I want to ""rationalize"" the response. (Historical context: This was before a new output format was added that uses native JSON true and false .) My current code to do so (written some months ago) is located in a giant anonymous function: user = query.users[0];
invalid = typeof user.invalid != ""undefined"";
missing = typeof user.missing != ""undefined"";
groups = (typeof user.groups == ""object"") ? user.groups : [];
editcount = (typeof user.editcount == ""number"") ? user.editcount : null;
registration = (typeof user.registration == ""string"") ?
    UserinfoJsParseDate(user.registration) : null;
blocked = typeof user.blockedby != ""undefined"";
gender = (typeof user.gender == ""string"") ? user.gender : null;
lastEdited = (typeof query.usercontribs[0] == ""object"") &&
    (typeof query.usercontribs[0].timestamp == ""string"") ?
    UserinfoJsParseDate(query.usercontribs[0].timestamp) : null; I am trying to clean this up, breaking the script's main components into separate functions: /**
 * Extract relevant information from the server's response.
 * @param data The server's response to the AJAX request
 * @return An object containing the user's information
 */
function processResponse( data ) {
    var query = data.query, info = {};

    if ( query && query.users && query.users[0] ) {
        var user = query.users[0];

        info.invalid = 'invalid' in user;
        info.missing = 'missing' in user;
        info.groups = user.groups || [];
        info.editcount = ( 'editcount' in user ) ? user.editcount : null;
        info.registration = ( 'registration' in user ) ? parseDate( user.registration ) : null;
        info.blocked = 'blockexpiry' in user;
        info.gender = ( 'gender' in user && user.gender != 'unknown' ) ? user.gender : null;

        info.lastEdited = null;
        if ( query.usercontribs && query.usercontribs[0] ) {
            var contribs = query.usercontribs[0];
            if ( contribs.timestamp ) {
                user.lastEdited = parseDate( contribs.timestamp );
            }
        }

    }

    return info;
} Is this better, or have I just written more messy code?"
917,"Generating readable text in a human language from machine-readable data. I have been generating English-language text from some machine-readable data, but now I want internationalization of my script to be relatively easy. The challenge is that some data might be missing and thus should be omitted from the output, possibly precluding any approach involving just ""plugging in"" numbers. Currently, I have functions like these, the output concatenated together in the main program: function UserinfoJsFormatQty(qty, singular, plural) {
    return String(qty).replace(/\d{1,3}(?=(\d{3})+(?!\d))/g, ""$&,"") + ""\u00a0"" + (qty == 1 ? singular : plural);
}

function UserinfoJsFormatDateRel(old) {
    // The code below requires the computer's clock to be set correctly.
    var age = new Date().getTime() - old.getTime();
    var ageNumber, ageRemainder, ageWords;
    if(age < 60000) {
        // less than one minute old
        ageNumber = Math.floor(age / 1000);
        ageWords = UserinfoJsFormatQty(ageNumber, ""second"", ""seconds"");
    } else if(age < 3600000) {
        // less than one hour old
        ageNumber = Math.floor(age / 60000);
        ageWords = UserinfoJsFormatQty(ageNumber, ""minute"", ""minutes"");
    } else if(age < 86400000) {
        // less than one day old
        ageNumber = Math.floor(age / 3600000);
        ageWords = UserinfoJsFormatQty(ageNumber, ""hour"", ""hours"");
        ageRemainder = Math.floor((age - ageNumber * 3600000) / 60000);
    } else if(age < 604800000) {
        // less than one week old
        ageNumber = Math.floor(age / 86400000);
        ageWords = UserinfoJsFormatQty(ageNumber, ""day"", ""days"");
    } // ...
    return ageWords;
} It is supposed to generate output like: A reviewer and rollbacker, 2 years 9 months old, with 8,624 edits. Last edited 7 hours ago. The age, edit count, date of last edit, or all of them could be missing. How could I improve my current design without resorting to a tabular display format? (All the information needs to nicely fit into a single status line.)"
919,"I prefer to make a distinction on semantic level: there are no functions or methods, but instead there are properties and actions. Every property is an object (in real-world sense) and an action is something done on an object. A good mnemonic is probably to read () as do it! . Consider a variable: $document You know by the name it's an object, since it's a noun. $document->author Even though author is probably a function/method, an author is an object and a noun, so it's a property and thus no parens here. $document->send()
$document->author->write_book() Again, send and write_book are functions/methods, but since those are actions (as designated by verbs), we write parens behind them. $document->author_count
$document->has_reviews Again, a function/method, but a property of a document object, not an action, so no parens. A boolean value or an integer is strictly speaking not a real-world object, but it's more like an object than an action."
920,"Converting objects to type Bool. The following extension method is being used in our code base: public static bool ToBool(this object src)
{
    return src != null && ((string) src).ToBool(false);
} It leverages off another extension method: public static bool ToBool(this string src, bool defaultValue)
{
    if (src.IsEmpty())
        return defaultValue;

    if (src.IsNumeric())
        return src.ToInt() != 0;

    var ret = false;
    if (bool.TryParse(src, out ret))
        return ret;
    return defaultValue;
} (where the ToInt and all the Is* methods are wrappers around the appropriate objects IsNullEmpty / Parse method) This does not 'feel' right but I cannot explain it to the author. Besides for the obvious problem of passing an object that cannot be cast to a string what other reasons are there to justify this as bad code? Are there any other concrete reasons why this code may be good or bad?"
921,"I'd criticize: Extension methods on ""object"" should be avoided because of the broad scope, except for special cases (which such a ""ToBool"" method is not one). It also feels like an overuse of extension methods. The first one takes an ""object"", but really wants a string, and will blow up with an InvalidCastException at runtime. The second one does not check for null (which wouldn't be a problem in itself, but having overloads for default values with differing behavior is bad)."
922,"Creating and extension method for object that will throw an exception if the actual object isn't a string is asking for trouble. Also, the general approach looks very much like an attempt to create a dynamic type system where you can use any type and call ToXxx to convert to whatever type you need using ""sensible"" rules. Is that really what you want in a strongly typed language like C#? Do you have any guarantees that ToBool will not throw exceptions even if it is passed a string? What if IsNumeric returns true but ToInt throws an exception? None of this code seems to take culture settings into account even though it parses strings to number and may break unexpectedly if run in a different culture."
924,"How to implement the load factor concept, because the hash function o/p is dependent on the previous table size. If we are to change the table size, the old <key, value> pair will be lost. You will need to rehash when the table size changes, removing the nodes from the old table and inserting them in their new locations in the new table. I would suggest that you remove the line h = h%hashsize; from the hash function, and apply the modulo operation when you're actually doing the table lookup, for two reasons: The hash function will no longer be dependent on the hash table, and can be made a static or non-member function You can store the raw hash value in the node, so you won't need to recalculate when you rehash. How to make this generic ? i.e. instead of <string,int> , is it possible to write a template code for both key and the value ? You can make it generic by turning it into a class template, with template parameters to specify the key and value types: template <typename Key, typename Value>
class MyHashMap
{
    struct Node
    {
        Key key;
        Value value;
        ...
    };
    ...
}; Then find where you're using string as a key type and replace it with Key ; similarly, replace int as a value type with Value . You'll then need to make sure you're always using generic rather than type-specific operations on them. In particular, your (slightly odd) string comparisons will need to change from, for example, !(head->key).compare(key) to head->key == key - which is rather more readable anyway, in my opinion. Finally, as you say, you'll need hash functions for each key type. The best way to support this is to move the hash function outside the class; then any user of the hash template can overload it for their own types. Any other important (or mandatory )feature this map is missing ? You do not have a destructor, so when the map is destroyed any memory allocated for the nodes will be lost. There are two choices here: Add a destructor to walk through all remaining nodes and delete them. Add a copy constructor and assignment operator (or declare them private), to prevent shallow copying leading to double deletion. Use a memory-managed container to store the nodes; remove the left and right pointers, and change the type of table from vector<Node*> to vector<vector<Node> > . In my opinion, this would be the better option, as it removes the responsibility for memory management from your class."
925,"I see you check for sql injection of the loginname: $loginName = mysql_real_escape_string($loginName); Do you filter bad content for the submitted password? Now that I look at it, you are sending the POSTed login name straight to the SQL, aren't you? This: new user($db,$_POST['username']); Should be this: new user($db,$loginName); If I'm reading this correctly - you need to sanitize the password also! This is generally very important. You are also using MySQL functions to sanitize SQLite data.  That's probably okay, but I wouldn't bet the farm on it!"
926,"Similar to zngu's answer , I think better than just counting the number of characters would be calculating the character-entropy of the message : public double CalculateEntropy(string entropyString)
{
    Dictionary<char, int> characterCounts = new Dictionary<char, int>();
    foreach(char c in entropyString.ToLower())
    {
        if(c == ' ') continue;
        int currentCount;
        characterCounts.TryGetValue(c, out currentCount);
        characterCounts[c] = currentCount + 1;
    }

    IEnumerable<double> characterEntropies = 
        from c in characterCounts.Keys
        let frequency = (double)characterCounts[c]/entropyString.Length
        select -1*frequency*Math.Log(frequency);

    return characterEntropies.Sum();
} It seems to work well with both code and text, but note that it is not calculating the actual entropy of the string, only the entropy of the character-distribution; sorting the characters within the string should reduce the entropy of the string, but it does not reduce the result of this function. Here are some tests: private void CalculateEntropyTest(object sender, EventArgs e)
{
    string[] testStrings = {
        ""Hello world!"",
        ""This is a typical english sentence containing all the letters of the english language - The quick brown fox jumped over the lazy dogs"",
        String.Join("""", ""This is a typical english sentence containing all the letters of the english language - The quick brown fox jumped over the lazy dogs"".ToCharArray().OrderBy(o => o).Select(o => o.ToString()).ToArray()),
        ""Won't this work too?\nstring name = \""lltt\"";\nint uniqueCharacterCount = name.Distinct().Count();\nwill return 2"",
        ""Pull the entropy finding source from any compression algotithm, i.e. Huffman"",
        ""float CharacterEntropy(const char *str) {\n  std::vector<unsigned> counts(256);\n  for (const char *i = str; *i; ++i)\n    ++counts[static_cast<unsigned char>(*i)];\n  unsigned int total = 0;\n  for (unsigned i = 0; i < 256; ++i)\n    total += counts[i];\n  float total_float = static_cast<float>(total);\n  float ret = 0.0;\n  for (unsigned i = 0; i < 256; ++i) {\n    float p = static_cast<float>(counts[i]) / total_float;\n    ret -= p * logf(p);\n  }\n  return p * M_LN2;\n}"",
        ""~~~~~~No.~~~~~~"",
        ""asdasdasdasdasdasd"",
        ""abcdefghijklmnopqrstuvwxyz"",
        ""Fuuuuuuu-------"",                
    };
    foreach(string str in testStrings)
    {
        Console.WriteLine(""{0}\nEntropy: {1:0.000}\n"", str, CalculateEntropy(str));
    }
} Results: Hello world! Entropy: 1.888 This is a typical english sentence containing all the letters of the english language - The quick brown fox jumped over the lazy dogs Entropy: 2.593 -TTaaaaaaabccccddeeeeeeeeeeeeeeffgggggghhhhhhhiiiiiiiijk
  lllllllmnnnnnnnnnooooooppqrrrsssssssttttttttuuuvwxyyz Entropy: 2.593 Won't this work too?
  string name = ""lltt"";
  int uniqueCharacterCount = name.Distinct().Count();
  will return 2 Entropy: 2.838 Pull the entropy finding source from any compression algotithm, i.e. Huffman Entropy: 2.641 float CharacterEntropy(const char *str) {
    std::vector counts(256);
    for (const char *i = str; *i; ++i)
    ++counts[static_cast(*i)];
    unsigned int total = 0;
    for (unsigned i = 0; i < 256; ++i)
      total += counts[i];
    float total_float = static_cast(total);
    float ret = 0.0;
    for (unsigned i = 0; i < 256; ++i) {
      float p = static_cast(counts[i]) / total_float;
      ret -= p * logf(p);
    }
    return p * M_LN2;
  } Entropy: 2.866 ~~~~~~No.~~~~~~ Entropy: 0.720 asdasdasdasdasdasd Entropy: 1.099 abcdefghijklmnopqrstuvwxyz Entropy: 3.258 Fuuuuuuu------- Entropy: 0.892 Actually, I think it would be better to do some frequency analysis, but I don't know anything about the frequencies of symbols used in code.  The best place to determine that would be the stackoverflow data-dump - I'll have to get back to you after it finishes downloading, in 2 years."
927,"One note for anyone else researching this issue: The modules in this application need to be WPF User Control Library projects. Simply replace the XAML in the empty UserControl objects with @Scott's Ribbon Tab XAML shown above. There is no need to wrap the RibbonTab object in a UserControl . In this specific case, I don't share @Snowbear's concern about deriving the Ribbon Tab 'view' from a RibbonTab control. I agree with his point in a more general situation, but the Ribbon Tab that we are inserting into the Ribbon isn't really a view, per se. In other words, it's not a composite of several different UI controls meant to present a UI or a part of a UI to a user. The Ribbon Tab is a lot more specific than that--it is literally a RibbonTab object--a single control--and it can be nothing else."
928,"IEnumerable of classes that implement a given interface at runtime. I am implementing the command pattern in a project that I am working on and I have an interface, ICommandFactory that all of my commands are implementing. When I run the application I want to dynamically gather all classes in the current assembly that implement that interface, thus producing a list of all possible commands. So I came up with the method below. This was the first thing that I could get to work. Is there a better way to do this? private static IEnumerable<ICommandFactory> GetAvailableCommands()
    {
        var interfaceType = typeof (ICommandFactory);
        var implementors = Assembly.GetExecutingAssembly().GetTypes().Where(
            i => interfaceType.IsAssignableFrom(i) && i != interfaceType);

        var commands = new List<ICommandFactory>();

        foreach(var implementor in implementors)
        {
            var ctor = implementor.GetConstructor(Type.EmptyTypes);
            if (ctor == null) continue;
            var instance = ctor.Invoke(null) as ICommandFactory;
            if (instance == null) continue;
            commands.Add(instance);
        }

        return commands;
    }"
929,"It depends on the purpose. I prefer parenthesis for ""real"" methods, doing something. For properties with at most small getter/setter and simple checks I use the shorter version."
930,"Consider using mysqli instead of mysql: mysqli Mysqli (the ""i"" stands for ""improved"") is more OO-friendly and has better security.  It also seems like the standard mysql functions are being deprecated (some of them anyway)."
931,"Deep nesting when looping over an object model coming from a 3rd part. I am stuck with this horrible object model coming back from a 3rd party product.  It's six levels of objects deep, and I have to loop through the collection in each level, to get the values I need, in order to produce a small object model that I actually require. The code ends up looking like this (with variable and type names changed). How can I clean up this mess when I can't modify the structure of the rootObject ? (This is .NET 3.5.) var levelOneEnumerator = rootObject.GetEnumerator();
while (levelOneEnumerator.MoveNext())
{
    var levelOneItem = levelOneEnumerator.Current as Foo_LevelOneItem;
    if (levelOneItem == null) continue;

    var levelTwoItemsEnumerator = levelOneItem.LevelTwoItems.GetEnumerator();
    while (levelTwoItemsEnumerator.MoveNext())
    {
        var LevelTwoItemsItem = levelTwoItemsEnumerator.Current as Foo_LevelTwoItem;
        if (LevelTwoItemsItem == null) continue;

        var foobars = new List<FooBar>();

        var levelThreeItemsEnumerator = LevelTwoItemsItem.LevelThreeItems.GetEnumerator();
        while (levelThreeItemsEnumerator.MoveNext())
        {
            var levelThreeItem = levelThreeItemsEnumerator.Current as Foo_LevelThreeItem;
            if (levelThreeItem == null) continue;

            var levelFourItemsEnumerator = levelThreeItem.LevelFourItems.GetEnumerator();
            while (levelFourItemsEnumerator.MoveNext())
            {
                var levelFourItem = levelFourItemsEnumerator.Current as Foo_LevelFourItem;
                if (levelFourItem == null) continue;

                var levelFiveItemsEnumerator = levelFourItem.LevelFiveItems.GetEnumerator();
                while (levelFiveItemsEnumerator.MoveNext())
                {
                    var levelFiveItem = levelFiveItemsEnumerator.Current as Foo_LevelFiveItem;
                    if (levelFiveItem == null) continue;

                    var levelSixItemsEnumerator = levelFiveItem.LevelSixItems.GetEnumerator();
                    while (levelSixItemsEnumerator.MoveNext())
                    {
                        var levelSixItem = levelSixItemsEnumerator.Current as Foo_LevelSixItem;
                        if (levelSixItem == null) continue;

                        var levelSixKey = levelSixItem.Key;
                        var foobar = foobars.Where(x => x.Key == levelSixKey).FirstOrDefault();
                        if (foobar == null)
                        {
                            foobar = new FooBar
                                          {
                                              LevelSixKey = levelSixKey,
                                              TransDate = levelFiveItem.TransDate,
                                              PaidAmount = 0
                                          };
                            foobars.Add(foobar);
                        }

                        // * -1 because value should be positive, while product reports a negative (and vice versa)
                        foobar.PaidAmount += (levelFiveItem.PaidAmount ?? 0) * -1; 
                    }
                }
            }
        }

        yield return new FooBarsCollection
                         {
                             Prop1 = levelTwoItemsItem.Prop1,
                             Prop2 = levelTwoItemsItem.Prop2,
                             Prop3 = levelTwoItemsItem.Prop3,
                             FooBars = foobars
                         };
    }
}"
932,Don't ever pass data directly into a query.  You are just opening yourself to SQL Injection. Always use bind variables when you can.
933,"Your code seems to do what it is supposed to do. I'm worried about the fact that you're hinting at the possibility of having multiple CommandFactory classes. Why would you want that? (I'm just asking. You might have very valid reasons.) I'm also wondering if you actually meant Factory , since the variable name you use for the list inside your method is just commands , which makes me believe that you are looking for just that: types that implement ICommand , not ICommandFactory ."
934,"If you extract the innermost nested part as its own method that takes a LevelSixKey as its parameter, then create your own Enumerator over levelSixItems, the product of which is the same as all your nesting (and, honestly, simply moved all the nesting into it - or added to a list at the inside of the innermost loop, and returned that list's enumerator), then what you see for the foobar-building is simply iterating over the enumerator and doing what you do - and all the ugly nested stuff is hidden away out of sight.  It doesn't exactly solve the problem, but maybe it makes it more manageable."
935,"Developing a multistep form. I implemented a multistep form with the method described by Ryan Bates in ep217 but I had some weird behavior when refreshing or moving between the steps Acts_as_good_style (old but still good) has a tip redirect when moving on that lead me to the change in the code that follows. In a nutshell, it says that if you're in the create action you should not render new (as I was doing). This solved the problem. But I had to manage the case of errors in the form, so I ended up with this code. #profiles_controller.rb

def create
  # [...] save etc [...]

  # render
  if @profile.new_record?  
    # render 'new' # OLD
    session[:profile_valid] = @profile.errors.blank?  # NEW
    redirect_to new_profile_path # NEW
  else 
    # [...]
  end
end 


def new  
  @profile = Profile.new(session[:profile_params])  
  # [...]

  # rebuild errors (see create)
  # check false because first time is nil and no error have to be displayed
  @profile.valid? if session[:profile_valid] == false
  session[:profile_valid] = true
end Where in the new action I reload the errors otherwise lost depending on session[:profile_valid] , that works fine. BUT this way doesn't look very good to me and I would appreciate to have your opinion, OR how do you manage your controllers in multispets forms? What was the strange behavior? Refreshing or going back and forth through the steps sometimes you jump to the wrong page, not clear what the logic is, probably depends on the validations in the model and the params hash."
936,"I have not looked at your regexes in detail. Could you please explain them? The rest of the code could use better documentation as well. I did find two serious code correctness issues: Your :join() formatter will not work with the empty string as the delimiter. return value.join(str || ', ');    // Boolean('') === false Your :pad() formatter, when used for center padding, will not correctly add an odd number of padding characters, as the padding on either side is rounded down. } else {
    return repeat(str, len - ~~(len / 2))
           + value
           + repeat(str, ~~(len / 2));
} In general, using tricks such as ~~ tends to reduce the code's clarity, and this is an excellent example of that. You should use the Math.floor() and Math.ceil() functions instead if that is what you intend. Fix these issues, and of course add corresponding tests. Also document the fact that :pad() and the other padding functions are only intended to work with a single padding character."
937,"You can use an anonymous class and DataContractJsonSerializer and do something like this: var toSerialize = items.Select(x => new { JSProp = x.ItemProp }).ToList();

var serializer = new DataContractJsonSerializer(toSerialize.GetType());
MemoryStream ms = new MemoryStream();
serializer.WriteObject(ms, myPerson);
string json = Encoding.Default.GetString(ms.ToArray()); I like this approach because you can create complex javascript types in a simply way. Sorry if it does not compile but I'm not with a dev machine."
938,"I would probably refactor out the two innermost loops into a method returning a FooBarCollection . You could then collapse the other loops with LINQs SelectMany : foreach (var level2 in rootObject.SelectMany(l1 => l1.LevelTwoItems)) {
    var items = level2.LevelThreeItems
        .SelectMany(l3 => l3.LevelFourItems)
        .SelectMany(l4 => l4.LevelFiveItems);
    yield return CollectFooBars(level2, items);
} Edit: I took out the filtering for null values because that seem to be a result of non-generic enumerators in your example (and I assume there aren't any null values in those arrays)."
939,You can use the Activator to create an instance: commands.Add( Activator.CreateInstance(implementor) as ICommandFactory ); or even a fancy Compiled Lamdba Expression .
940,"Erlang code to list all IP addresses. This is some Erlang code I wrote to output a string of all the IP addresses of the machine. The string is simply printed to the user for him to read. -module(ip).
-export([get_ip_address_string/0]).

get_ip_address_string() ->
    {ok, IPAddress} = inet:getif(),
    filter_ip_address(IPAddress).

filter_ip_address(IPAddress) ->
    filter_ip_address(IPAddress, []).

filter_ip_address([], Acc) ->
    Acc;
filter_ip_address([{{127,0,0,1}, _Broadcast, _Mask} | Tail], Acc) ->
    %Do not include the loopback address.
    filter_ip_address(Tail, Acc);
filter_ip_address([Head | Tail], Acc) ->
    {{Oct1, Oct2, Oct3, Oct4}, _Broadcast, _Mask} = Head,
    IPString = io_lib:format(""~b.~b.~b.~b "", [Oct1, Oct2, Oct3, Oct4]),
    filter_ip_address(Tail, IPString ++ Acc). Comments on how to write this in a more Erlang way, make it more readable, or anything you would do different are welcome."
942,"First of all, I would realise that var levelOneEnumerator = rootObject.GetEnumerator();
while (levelOneEnumerator.MoveNext())
{
    var levelOneItem = levelOneEnumerator.Current as Foo_LevelOneItem;
    if (levelOneItem == null) continue; is equivalent to the much shorter foreach (var levelOneItem in rootObject.OfType<Foo_LevelOneItem>())
{ Then you will realise that you have several nested foreach loops which make for nicely-readable single-line nestings. So factor all the multi-line code into methods of its own. The end-result I got looks like this: foreach (var levelOneItem in rootObject.OfType<Foo_LevelOneItem>())
    foreach (var levelTwoItem in levelOneItem.LevelTwoItems.OfType<Foo_LevelTwoItem>())
        yield return new FooBarsCollection
        {
            Prop1 = levelTwoItem.Prop1,
            Prop2 = levelTwoItem.Prop2,
            Prop3 = levelTwoItem.Prop3,
            FooBars = getFoobars(levelTwoItem)
        };

[...]

private static List<FooBar> getFoobars(Foo_LevelTwoItem levelTwoItem)
{
    var foobars = new List<FooBar>();

    foreach (var levelThreeItem in levelTwoItem.LevelThreeItems.OfType<Foo_LevelThreeItem>())
        foreach (var levelFourItem in levelThreeItem.LevelFourItems.OfType<Foo_LevelFourItem>())
            foreach (var levelFiveItem in levelFourItem.LevelFiveItems.OfType<Foo_LevelFiveItem>())
                foreach (var levelSixItem in levelFiveItem.LevelSixItems.OfType<Foo_LevelSixItem>())
                    processLevelSixItem(foobars, levelFiveItem, levelSixItem.Key);

    return foobars;
}

private static void processLevelSixItem(List<FooBar> foobars, Foo_LevelFiveItem levelFiveItem, Foo_LevelSixItemKey levelSixKey)
{
    var foobar = foobars.Where(x => x.Key == levelSixKey).FirstOrDefault();
    if (foobar == null)
    {
        foobar = new FooBar
        {
            LevelSixKey = levelSixKey,
            TransDate = levelFiveItem.TransDate,
            PaidAmount = 0
        };
        foobars.Add(foobar);
    }

    // * -1 because value should be positive, while product reports a negative (and vice versa)
    foobar.PaidAmount += (levelFiveItem.PaidAmount ?? 0) * -1;
} Of course, you could further change this into a much more LINQy expression involving either SelectMany or the from query syntax, but to be honest, in your particular case I would leave it like this. It is very clear. In case you still want the query syntax, here is just getFoobars to give you the idea: private static List<FooBar> getFoobars(Foo_LevelTwoItem levelTwoItem)
{
    var foobars = new List<FooBar>();

    var query =
        from levelThreeItem in levelTwoItem.LevelThreeItems.OfType<Foo_LevelThreeItem>()
        from levelFourItem in levelThreeItem.LevelFourItems.OfType<Foo_LevelFourItem>()
        from levelFiveItem in levelFourItem.LevelFiveItems.OfType<Foo_LevelFiveItem>()
        from levelSixItem in levelFiveItem.LevelSixItems.OfType<Foo_LevelSixItem>()
        select new { LevelFiveItem = levelFiveItem, Key = levelSixItem.Key };

    foreach (var info in query)
        processLevelSixItem(foobars, info.LevelFiveItem, info.Key);

    return foobars;
}"
943,"How to increase download speed using the following method?. I have written an Android application which downloads pdf files through web service. I am using kSoap2 android library to parse the response of web service which basically contains file name & file data. I have written following code. Please review & tell how to increase the speed I think there is some small defect in code which reduces the speed. I am using version 2.5.1 of kSoap2. public void downloadPdfFiles(File fileDocsDir, int noOfFiles)
            throws NullPointerException, SoapFault, XmlPullParserException,
            FileNotFoundException, IOException, Exception {

        System.gc();

        // Download files from web service and save them in the folder.
        soapObject = new SoapObject(NAMESPACE, METHOD_NAME);
        soapObject.addProperty(""startingFile"", noOfFiles);
        soapObject.addProperty(""deviceId"", deviceId);
        soapObject.addProperty(""loginId"", loginId);
        soapObject.addProperty(""byoinId"", ""1"");

        envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(soapObject);

        // Calling the web service
        System.gc();
        androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.call(SOAP_ACTION, envelope);

        // Getting Response through xml mainly generated as soap:reponse.
        responseBean = (SoapObject) envelope.getResponse();

        // Array of PDFInfoBean.
        list = (SoapObject) responseBean.getProperty(0);

        FileOutputStream outputStream = null;
        BufferedOutputStream bufferedOutputStream = null;
        // Get Individual PDF Details from Array.
        SoapObject pdfDetails = null;

        mIncrement = noOfFiles;
        // Log.i(""Increment Values"", String.valueOf(mIncrement));

        File pdfFile = null;
        for (int i = 0; i < list.getPropertyCount(); i++) {
            pdfDetails = (SoapObject) list.getProperty(i);

            // Get PDF File Name.
            pdfDocName = pdfDetails.getProperty(1).toString();
            Log.i(TAG, ""File Name: "" + pdfDocName);

            // Check for last file.
            if (pdfDocName.equalsIgnoreCase(""EOF"")) {
                mFlag = false;
                break;
            }

            // Creating PDF File.
            pdfFile = new File(fileDocsDir, pdfDocName);

            // Writing PDF file received through web service.
            if (pdfFile.exists()) {
                Log.i(TAG, pdfFile.getName() + "" File Already Exists"");
            } else {
                outputStream = new FileOutputStream(pdfFile);
                bufferedOutputStream = new BufferedOutputStream(outputStream);

                bufferedOutputStream.write(Base64Coder.decode(pdfDetails
                        .getProperty(0).toString()));

                mIncrement = mIncrement + 1;

                bufferedOutputStream.close();
                outputStream.close();

                bufferedOutputStream = null;
                outputStream = null;
            }
            pdfDetails = null;
            pdfDocName = null;
            pdfFile = null;
            System.gc();
        }
        soapObject = null;
        envelope = null;
        responseBean = null;
        list = null;
        androidHttpTransport = null;

        System.gc();
    }"
944,"First of all your variable IPAddress is misnamed. It sounds as if it contained a single IP address, but in fact it contains a list of multiple triples, where each one does not only contain an IP address, but also the corresponding broadcast address and netmask. You should probably call it something like IPTriples . If you look at your code it's basically doing three things: Filtering out localhost Replacing each ip address with a string representation Concatenating the thus created list of strings, separating them with spaces. For each of these 3 steps there's already an erlang function, which can be used to do it: lists:filter which takes a predicate and a list and returns a list only containing elements that match this predicate. lists:map which takes a function and a list and returns a list containing the result of the function for each element. string:join which takes a list of strings and a separator and returns a string with each item in the list separated by the separator. Usually it it is good style to reuse existing functionality as much as possible instead of reimplementing it. So using these functions, your get_ip_address_string can be rewritten to something like this: get_ip_address_string() ->
    {ok, IPTriples} = inet:getif(),
    FilteredIPTriples = lists:filter(fun is_not_localhost/1), IPTriples),
    IPAddresses = lists:map(fun ip_triple_to_string/1, FilteredIPTriples),
    string:join(IPAddresses, "" "").

is_not_localhost({{127,0,0,1}, _Broadcast, _Mask}) -> false;
is_not_localhost({_IP, _Broadcast, _Mask})         -> true.

ip_triple_to_string({{Oct1, Oct2, Oct3, Oct4}, _Broadcast, _Mask}) ->
    io_lib:format(""~b.~b.~b.~b"", [Oct1, Oct2, Oct3, Oct4]). Note that this has also the benefit that the logic for filtering out localhost, the logic for turning the IP addresses into strings and the logic for building the result string from that are now no longer intertwined, which should make the code more manageable."
945,"My solution is close to sepp2k's: First a simpler conversion routine: ip_triple_to_string(Tup) ->
    io_lib:format(""~b.~b.~b.~b"", tuple_to_list(Tup)). Then the meat: get_ip_address_string() ->
    {ok, IPTriples} = inet:getif(), Not much you can do here. You have to assert that you really got data from the getif/0 call. Strings = [ip_triple_to_string(IP) || {IP, _, _} <- IPTriples,
                IP =/= {127,0,0,1}],
    string:join(Strings, "" ""). The list comprehension captures the map and filter in one go over the list. Otherwise, it is much like the other definition."
946,"Refactoring a bunch of and statements. Trying to refactor this code and can't seem to think of a way to make it cleaner. Type is  a property in my Person class. foreach (var item in list)
{
    if (person.Type != PersonType.Employee && person.Type != PersonType.Manager && person.Type != PersonType.Contractor && person.Type != PersonType.Executive)
    {
        DoSomething();
    }
}

public enum PersonType : int {
   Employee = 0,
   Manager = 1,
   Contractor = 2,
   President = 3,
   Executive = 4
} I should note that there are other types in the PersonType class which I don't want to show."
947,"I would probably go with code that looked like this. list.ForEach(c => 
                {
                    if (DoAction(c.Type))
                    {
                        DoSomething();
                    }
                });


private static bool DoAction(PersonType personType)
        {
            switch (personType)
            {
                case PersonType.Employee:            
                case PersonType.Manager:            
                case PersonType.Contractor:           
                case PersonType.Executive:
                    return false;
                default:
                    return true;
            }
        }"
949,"You could use Enum.IsDefined. It has some disadvantages. It can be slow, and it is not strongly typed, but I do like how it reads. foreach (var item in list)
{
    if (!Enum.IsDefined(typeof(PersonType), person.Type))
    {
        DoSomething();
    }
}"
950,"[Edit] Corrected given edit to question Try something more like this [Flags]
public enum PersonType
{
    None = 0,
    Employee = 1 << 0,
    Manager = 1 << 1,
    Contractor = 1 << 2,
    President = 1 << 3,
    Executive = 1 << 4
}

foreach (var item in list)
{
    if ((person.Type & PersonType.President) == 0)
    {
        DoSomething();
    }
} You can now also add combined values such as [Flags]
public enum PersonType
{
    None = 0,
    Employee = 1 << 0,
    Manager = 1 << 1,
    Contractor = 1 << 2,
    President = 1 << 3,
    Executive = 1 << 4,
    NotPresident = Employee | Manager | Contractor | Executive,
    Boss = Manager | President | Executive
} Given this enumeration, this NUnit test passes [Test]
public void TestEnum()
{
    var personType = PersonType.Manager | PersonType.Contractor;
    Assert.That(personType == PersonType.None, Is.Not.True);
    Assert.That((personType & PersonType.Manager) != 0, Is.True);
    Assert.That((personType & PersonType.Boss) != 0, Is.True);
    Assert.That((personType & PersonType.Employee) != 0, Is.Not.True);
}"
951,"What we have here is a tree data structure. Unfortunately it is an implicit tree structure which means we can't easily write some generic code to search the tree. Make the tree structure explicit So, what we first need is an adapter that can help to make things more generic. I don't know if these classes share a common base class, so everything will have to use object . If there is a common base class this will make things much tidier.. We can have a class like so : public static class BranchExtensions
{
    public static Dictionary<Type, Func<object, IEnumerable>> NextLevels = new Dictionary<Type, Func<object, IEnumerable>> ();

    private static IEnumerable NextLevel ( object branch )
    {
        Func<object, IEnumerable> nextLevel;
        if (NextLevels.TryGetValue(branch.GetType (), out nextLevel))
            return nextLevel ( branch );
        else
            return null;
    }
} Then we need some initialization code somewhere : BranchExtensions.NextLevels.Add ( typeof ( Foo_LevelOneItem ), level => ( (Foo_LevelOneItem) level ).Level2Items );
BranchExtensions.NextLevels.Add ( typeof ( Foo_LevelTwoItem ), level => ( (Foo_LevelTwoItem) level ).Level3Items ); Now, given any item in the heirarchy I can call NextLevel and get an Enumerator for its next level. Write some general utility functions This enables us to write some generic code. What we need to do is walk the tree, collecting the objects we want along the way. When we read a leaf node, we want to process. So we add the following to our BranchExtensions : private static IEnumerable<Dictionary<Type, object>> Flatten ( object branch, Predicate<object> collect, Dictionary<Type, object> collection )
    {
        IEnumerable nextLevel = NextLevel ( branch );
        if ( nextLevel != null )
        {
            foreach ( object next in nextLevel )
            {
                if ( next != null )
                {
                    // Do we want to collect this type
                    if ( collect ( next.GetType () ) )
                        collection[next.GetType ()] = next;

                    if ( NextLevel ( next ) == null )
                    {
                        // This is a leaf node.
                        yield return collection;
                        collection.Remove (next.GetType ());
                    }
                    else
                    {
                        // This is a branch, so recurse down the tree.
                        foreach ( var more in Flatten ( next, collect, collection ) )
                        {
                            if ( more != null )
                            {
                                yield return more;
                                collection.Remove ( more.GetType () );
                            }
                        }
                    }
                }
            }
        }
    }

    public static IEnumerable<Dictionary<Type, object>> Flatten ( this Predicate<object> collect, object branch )
    {
        return Flatten ( branch, collect, new Dictionary<Type, object> () );
    }

    public static Predicate<object> Collect ( Predicate<object> collect )
    {
        return collect;
    } The first Flatten method does all the work. It is pretty horrendous and I'm sure it could be tidied up and refactored, I just hacked it together to demonstrate the point. The second Flatten method is the entry point method. This creates a new Dictionary to collect our values and passes the call along. It should do some validation here as well really. As a slight frill - this is an extension method on Predicate. The Collect method following is even stranger and does nothing really. It is just there to enable a more fluent interface when coming to use it. Use the code The Nested loops can then be converted to something like the following : foreach ( var collection in BranchExtensions.Collect( type => type == typeof(Foo_LevelFiveItem) || type == typeof(Foo_LevelSixItem)).Flatten ( rootObject ) )
{
    var levelFiveItem = collection[typeof(Foo_LevelFiveItem)] as Foo_LevelFiveItem;
    var levelSixItem = collection[typeof(Foo_LevelSixItem)] as Foo_LevelSixItem

    // Do stuff on our items...
} It looks like a lot of work to acheive a small thing. It all depends on how much you need to use this stuff. If you have only got a single nested loop in your entire application, then none of this makes sense and I would just suck up the nested loop and carry on. But, If you have nested loops all over your code, then a few utility methods like this would make a lot of sense to abstract the complexity away and allow you to focus on the meaning of what you are trying to do."
952,"If this is just a one shot test, then I would use something like this. If this was used in multiple places, I would probably use flags like pdr. PersonType[] ignoredPersonTypes = 
{
    PersonType.Employee,
    PersonType.Manager,
    PersonType.Contractor,
    PersonType.Executive,
}

foreach (var item in list)
{
    if (ignoredPersonTypes.Contains(person.Type) == false)
    {
        DoSomething();
    }
}"
953,"If the allowedness of a PersonType value is specific to the particular algorithm you are writing, I usually write this as an array: var disallowedTypes = new[] {
    PersonType.Employee,
    PersonType.Manager,
    PersonType.Contractor,
    PersonType.Executive
};

foreach (var item in list.Where(p => !disallowedTypes.Contains(p.Type)))
    DoSomething(item); If this set of disallowed types is central to your application (or to a particular class), I would declare it as a static field in a static class (or the relevant class). That way your entire program (or that class) has convenient access to it, and you only need to update it in a single place if the business logic changes: public static class Data
{
    public static readonly PersonType[] DisallowedTypes = {
        PersonType.Employee,
        PersonType.Manager,
        PersonType.Contractor,
        PersonType.Executive
    };
}

// [ ... ]

foreach (var item in list.Where(p => !Data.DisallowedTypes.Contains(p.Type)))
    DoSomething(item); If the set of disallowed types is inherent in the semantics of the PersonType enum itself, I would make this very explicit by using custom attributes in the enum type itself. Of course you should think up a more descriptive name than IsAllowed and fix the XML comment on the attribute type to explain what it really means: /// <summary>Specifies that a <see cref=""PersonType""/> value is allowed.</summary>
public sealed class IsAllowedAttribute : Attribute { }

public enum PersonType
{
    Employee,
    Manager,
    Contractor,
    Executive,

    [IsAllowed]
    President
}

public static class Data
{
    /// <summary>This array is automatically prefilled with the
    /// PersonType values that do not have an [IsAllowed] custom attribute.
    /// To change this array, change the custom attributes in the
    /// <see cref=""PersonType""/> enum instead.</summary>
    public static readonly PersonType[] DisallowedTypes;

    static Data()
    {
        DisallowedTypes = typeof(PersonType)
            .GetFields(BindingFlags.Public | BindingFlags.Static)
            .Where(f => !f.IsDefined(typeof(IsAllowedAttribute), false))
            .Select(f => f.GetValue(null))
            .ToArray();
    }
} This way the information whether any particular enum value is allowed or not is stored in the enum itself and no-where else. That makes the code very explicit, easy to follow, and easy to modify in obviously-correct ways."
954,"I only have a few minor comments about your code: This code: var ctor = implementor.GetConstructor(Type.EmptyTypes);
if (ctor == null) continue; has the potential to mask a bug. Imagine you add a constructor to one of your command-factory types and accidentally forget that this implicitly removes the default constructor. This code will then silently swallow this mistake and simply not list that particular command factory. It would be preferable to throw in this case so that you notice it immediately. Even better, of course, would be to use a post-build event to turn this error into a compile-time check so that you cant even run the program when it is invalid. This code: var instance = ctor.Invoke(null) as ICommandFactory;
if (instance == null) continue; has exactly the same problem, but the consequences are much more subtle. The if (instance == null) condition should never fire because the code was written so that the instance cannot be of any other type. Imagine you have a bug in that code. This code swallows this bug and you wont notice it directly. You will only notice some subtle/weird effects that occur much later, and it will be a pain to trace it back to this code here. You could make it throw like above, but personally I think you should change this to var instance = (ICommandFactory) ctor.Invoke(null); so that it will automatically throw if its not of the right type. Your code does not allow for a class that implements ICommandFactory but is not intended to appear in your UI. If you are sure that you dont want that to be possible, then your code is fine. Otherwise, I would declare a custom attribute  either one that allows you to explicitly exclude an ICommandFactory from appearing in the UI, or one that is required on all the ICommandFactory types to be included . Very very minor nitpick: i => interfaceType.IsAssignableFrom(i) && i != interfaceType You should perform the simpler check first: i => i != interfaceType && interfaceType.IsAssignableFrom(i)"
955,"This is such a perfect match for the Replace Conditional with Polymorphism Refactoring that it even looks as if it was specifically designed to demonstrate the Replace Conditional with Polymorphism Refactoring. I mean, the field it is basing its behavior on is even called Type ! interface Person { void DoSomething(); }

class PrivilegedPerson : Person {
    public void DoSomething() {
        // do something
    }
}

class UnprivilegedPerson : Person {
    public void DoSomething() {} // literally do nothing
}

class Employee   : UnprivilegedPerson {}
class Manager    : UnprivilegedPerson {}
class Contractor : UnprivilegedPerson {}
class President  : UnprivilegedPerson {}
class Executive  : UnprivilegedPerson {}"
956,"Implementation of costreams. I am not very good with thread-safety and often fall prey to subtle issues in concurrency. Therefore, I hope that someone here might be able to tell me whether there is a subtle concurrency issue (race condition etc.) in the following code, or whether its fine. In particular, have I used Monitor.Wait and Monitor.PulseAll correctly? Of course, if you can reason about the code and come to the conclusion that it is already correct, that would be a welcome answer too. This code is intended to implement the costreams pattern (I invented that name, so you wont find it in Google). It runs two methods (passed in as delegates) in parallel. It provides one of those methods with a write-only stream and the other with a read-only stream. The idea is for one of them to generate data and write it to the stream, and the other one to read from the stream and consume the data. (The reading/writing methods intended to be passed in could be anything that reads to/writes from a stream; they are not likely to be specifically written to be used with costreams. If they were, they could probably be rewritten so that they wouldnt need to use streams at all.) While reviewing the Read method, remember that the contract for Stream.Read is slightly counterintuitive: it is allowed to read and return fewer bytes than requested (as long as it returns the number of bytes actually read). Thus the fact that it sometimes returns fewer bytes than the count parameter requests is not a bug. Of course it must not return 0 except when the end of the stream is reached. using System;
using System.Collections.Generic;
using System.IO;
using System.Threading;

namespace MyLibrary
{
    public static class Costreams
    {
        /// <summary>Runs the two specified processes in parallel, allowing one to generate data by writing it to a stream, and the other to consume the data by reading it from a stream.</summary>
        /// <param name=""writingAction"">An action that generates data and writes it to a stream.</param>
        /// <param name=""readingAction"">An action that will want to read information from a stream.</param>
        public static void RunCostreams(Action<Stream> writingAction, Action<Stream> readingAction)
        {
            // Everything the writingAction writes will be enqueued in here and dequeued by the readingAction
            var queue = new Queue<byteChunk>();

            writingCostream writer = new writingCostream(queue);
            readingCostream reader = new readingCostream(queue);

            // Start reading in a new thread. The first call to reader.Read() will block until there is something in the queue to read.
            var thread = new Thread(() => readingAction(reader));
            thread.Start();

            // Start writing. Calls to writer.Write() will place the data in the queue and signal the reading thread.
            writingAction(writer);

            // Insert a null at the end of the queue to signal to the reader that this is where the data ends.
            queue.Enqueue(null);

            // Wait for the reader to consume all the remaining data.
            thread.Join();
        }

        private sealed class byteChunk
        {
            public byte[] Buffer;
            public int Offset;
            public int Count;
        }

        private sealed class readingCostream : Stream
        {
            private Queue<byteChunk> _queue;
            public readingCostream(Queue<byteChunk> queue) { _queue = queue; }

            public override bool CanRead { get { return true; } }
            public override bool CanSeek { get { return false; } }
            public override bool CanWrite { get { return false; } }
            public override void Flush() { }
            public override long Length { get { throw new NotSupportedException(); } }
            public override long Position { get { throw new NotSupportedException(); } set { throw new NotSupportedException(); } }
            public override long Seek(long offset, SeekOrigin origin) { throw new NotSupportedException(); }
            public override void SetLength(long value) { throw new NotSupportedException(); }
            public override void Write(byte[] buffer, int offset, int count) { throw new NotSupportedException(); }

            public override int Read(byte[] buffer, int offset, int count)
            {
                lock (_queue)
                {
                    // If there is no data waiting to be read, wait for it.
                    while (_queue.Count == 0)
                        Monitor.Wait(_queue);

                    var peeked = _queue.Peek();

                    // A null element in the queue signals the end of the stream. Don't dequeue this item.
                    if (peeked == null)
                        return 0;

                    if (peeked.Count <= count)
                    {
                        // If we can return the complete item, dequeue it
                        Buffer.BlockCopy(peeked.Buffer, peeked.Offset, buffer, offset, peeked.Count);
                        _queue.Dequeue();
                        return peeked.Count;
                    }
                    else
                    {
                        // If we can only return part of the item, modify it accordingly
                        Buffer.BlockCopy(peeked.Buffer, peeked.Offset, buffer, offset, count);
                        peeked.Offset += count;
                        peeked.Count -= count;
                        return count;
                    }
                }
            }
        }

        private sealed class writingCostream : Stream
        {
            private Queue<byteChunk> _queue;
            public writingCostream(Queue<byteChunk> queue) { _queue = queue; }

            public override bool CanRead { get { return false; } }
            public override bool CanSeek { get { return false; } }
            public override bool CanWrite { get { return true; } }
            public override void Flush() { }
            public override long Length { get { throw new NotSupportedException(); } }
            public override long Position { get { throw new NotSupportedException(); } set { throw new NotSupportedException(); } }
            public override int Read(byte[] buffer, int offset, int count) { throw new NotSupportedException(); }
            public override long Seek(long offset, SeekOrigin origin) { throw new NotSupportedException(); }
            public override void SetLength(long value) { throw new NotSupportedException(); }

            public override void Write(byte[] buffer, int offset, int count)
            {
                // Ignore zero-length writes
                if (count == 0)
                    return;

                lock (_queue)
                {
                    // We have to take a copy of the data because the calling thread might re-use the same buffer multiple times.
                    var bufferCopy = new byte[count];
                    Buffer.BlockCopy(buffer, offset, bufferCopy, 0, count);

                    // Put the data in the queue
                    _queue.Enqueue(new byteChunk { Buffer = bufferCopy, Offset = 0, Count = count });

                    // Signal the reading thread(s) that the queue has changed (in case it's waiting)
                    Monitor.PulseAll(_queue);
                }
            }
        }
    }
}"
958,"Generating a sequential number for app-wide use. I have to generate a sequential number for groovy-grails app wide use and came up with the following.  However, is there a better way to do this? Domain classes: class RoastIdCounter {
    int counter =0
    static constraints = {
    }
} This one has no views or controller associated with it.  It's purely for db interaction in a service class. class RoastId {
    Family family
    Integer nextId
    long timeCreated = new Date().time

    static constraints = {
        family()
        nextId()
    }
    static belongsTo = [ Family ]
}

class Family  extends {

    String farmId;
    String welcome;
    String familyName;
    String ourFarm;
    String howMuchDoWeGetPaid;

    SortedSet pictureAlbums;
    SortedSet pictures;

    Integer pictureAlbumsCount = 0;
    Integer picturesCount = 0;

    Date dateCreated = new Date()
    Date lastUpdated = new Date()

    static hasMany = [ roastIds : RoastId, pictureAlbums : PictureAlbum, pictures : Picture ]

    static constraints = {
        farmId()
        familyName( )
        welcome( widget:'textarea' )
        ourFarm( widget:'textarea' )
        howMuchDoWeGetPaid( widget:'textarea' )

        dateCreated()
        lastUpdated()
}

    String toString() { ""$farmId - $familyName"" }

} // Family Service class for dealing with the number generation: class RoastIdCounterService {

    static transactional = true

    def getNextRoastId() {

        def ric = RoastIdCounter.list()[-1]

        if( ric != null ){
            ric.lock()
            ric.counter = ric.counter + 1
            ric.save()
            return ric.counter
        } else {
            return -1 
        }
    }
} Controller: Here I'm just sending the object all pre-populated: def create = {
    def roastIdInstance = new RoastId()
    roastIdInstance.properties = params
    roastIdInstance.nextId = roastIdCounterService.getNextRoastId()
    return [roastIdInstance: roastIdInstance]
} Environment: Grails 1.3.7, PostgreSql 8.4 Would there be a better way to do this? What potential problems am I overlooking?"
959,"Depends what you're trying to do. Is it really possible to have multiple Read threads, as the comment suggests? If so then you're going to run a risk of having several Reads released at once and return in the wrong order. If not then why use PulseAll as opposed to Pulse ? It feels wrong to me that if Read is called and there are items on the Queue then further calls to Write are locked out, but if Read Waits until Write releases it, then Write is called again, Write will be able to lock the Queue and use it. That said, it shouldn't be a problem given that Read will be dealing with another item at the time. But that raises the question, why bother with the Wait? Why not replace the whole thing with a ManualResetEvent ? That way, you only have to lock the queue while you're updating it, so that you can Set the event when you add data, Reset it when you remove the last item. I haven't tested it, but it will look a lot like this: public static class Costreams
{
    /// <summary>Runs the two specified processes in parallel, allowing one to generate data by writing it to a stream, and the other to consume the data by reading it from a stream.</summary>
    /// <param name=""writingAction"">An action that generates data and writes it to a stream.</param>
    /// <param name=""readingAction"">An action that will want to read information from a stream.</param>
    public static void RunCostreams(Action<Stream> writingAction, Action<Stream> readingAction)
    {
        // Everything the writingAction writes will be enqueued in here and dequeued by the readingAction
        var queue = new Queue<byteChunk>();
        using (var hasData = new ManualResetEvent(false))
        {
            writingCostream writer = new writingCostream(queue, hasData);
            readingCostream reader = new readingCostream(queue, hasData);

            // Start reading in a new thread. The first call to reader.Read() will block until there is something in the queue to read.
            var thread = new Thread(() => readingAction(reader));
            thread.Start();

            // Start writing. Calls to writer.Write() will place the data in the queue and signal the reading thread.
            writingAction(writer);

            // Insert a null at the end of the queue to signal to the reader that this is where the data ends.
            lock(queue)
            {
                queue.Enqueue(null);
                hasData.Set();
            }

            // Wait for the reader to consume all the remaining data.
            thread.Join();
        }
    }

    private sealed class byteChunk
    {
        public byte[] Buffer;
        public int Offset;
        public int Count;
    }

    private sealed class readingCostream : Stream
    {
        private Queue<byteChunk> _queue;
        private ManualResetEvent _hasData;

        public readingCostream(Queue<byteChunk> queue, ManualResetEvent hasData)
        {
            _queue = queue;
            _hasData = hasData;
        }

        public override bool CanRead { get { return true; } }
        public override bool CanSeek { get { return false; } }
        public override bool CanWrite { get { return false; } }
        public override void Flush() { }
        public override long Length { get { throw new NotSupportedException(); } }
        public override long Position { get { throw new NotSupportedException(); } set { throw new NotSupportedException(); } }
        public override long Seek(long offset, SeekOrigin origin) { throw new NotSupportedException(); }
        public override void SetLength(long value) { throw new NotSupportedException(); }
        public override void Write(byte[] buffer, int offset, int count) { throw new NotSupportedException(); }

        public override int Read(byte[] buffer, int offset, int count)
        {
            // If there is no data waiting to be read, wait for it.
            _hasData.WaitOne();

            byteChunk peeked;
            lock(_queue)
                peeked = _queue.Peek();

            // A null element in the queue signals the end of the stream. Don't dequeue this item.
            if (peeked == null)
                return 0;

            if (peeked.Count <= count)
            {
                // If we can return the complete item, dequeue it
                Buffer.BlockCopy(peeked.Buffer, peeked.Offset, buffer, offset, peeked.Count);
                lock(_queue)
                {
                    _queue.Dequeue();
                    // If this has emptied the queue, tell the next call to read
                    if (_queue.Count == 0)
                        _hasData.Reset();
                }

                return peeked.Count;
            }

            // If we can only return part of the item, modify it accordingly
            Buffer.BlockCopy(peeked.Buffer, peeked.Offset, buffer, offset, count);
            peeked.Offset += count;
            peeked.Count -= count;
            return count;
        }
    }

    private sealed class writingCostream : Stream
    {
        private Queue<byteChunk> _queue;
        private ManualResetEvent _hasData;
        public writingCostream(Queue<byteChunk> queue, ManualResetEvent _hasData)
        {
            _queue = queue;
            _hasData = hasData;
        }

        public override bool CanRead { get { return false; } }
        public override bool CanSeek { get { return false; } }
        public override bool CanWrite { get { return true; } }
        public override void Flush() { }
        public override long Length { get { throw new NotSupportedException(); } }
        public override long Position { get { throw new NotSupportedException(); } set { throw new NotSupportedException(); } }
        public override int Read(byte[] buffer, int offset, int count) { throw new NotSupportedException(); }
        public override long Seek(long offset, SeekOrigin origin) { throw new NotSupportedException(); }
        public override void SetLength(long value) { throw new NotSupportedException(); }

        public override void Write(byte[] buffer, int offset, int count)
        {
            // Ignore zero-length writes
            if (count == 0)
                return;

            // We have to take a copy of the data because the calling thread might re-use the same buffer multiple times.
            var bufferCopy = new byte[count];
            Buffer.BlockCopy(buffer, offset, bufferCopy, 0, count);

            // Put the data in the queue
            lock (_queue)
            {
                _queue.Enqueue(new byteChunk { Buffer = bufferCopy, Offset = 0, Count = count });

                // Inform the reading thread that the queue now has data
                _hasData.Set();
            }
        }
    }
} A couple of other comments from a Review standpoint: Microsoft's Naming Standards for C# suggest that class names should be PascalCase You might also want to look at another ManualResetEvent for memory overloads - if Write gets called many times and you run out of memory, you may want to wait until Read has removed some data from the Queue, rather than failing with an OutOfMemoryException"
960,Use the JavaScriptSerializer from System.Web.Extensions <%: new JavaScriptSerializer().Serialize(items) %>
963,"Assuming you don't want to turn PersonType into an actual polymorphic class, a simple cleanup is: foreach (var item in list)
{
    switch (person.Type) {
    case PersonType.Employee:
    case PersonType.Manager:
    case PersonType.Contractor:
    case PersonType.Executive:
        // Do nothing.
        break;
    default:
        DoSomething();
    }
} You have to be careful with enums, though. If a new PersonType is added, is DoSomething() the correct behavior for that type? A safer implementation won't rely on default ."
966,"Is this Recursion + Linq example inefficient?. I have a hierarchy of of groups, and I want to get a collection of all the lowest level groups (or leaves if we'll look at this as a tree). I wrote the following code. Is it inefficient? public static class FeatureWeightGroupExtensions
{
    public static IEnumerable<IFeatureWeightGroup> GetLeafGroups(this IFeatureWeightGroup featureWeightGroup)
    {
        return GetLeafGroupsRecursive(featureWeightGroup).ToList();
    }

    private static IEnumerable<IFeatureWeightGroup> GetLeafGroupsRecursive(IFeatureWeightGroup featureWeightGroup)
    {
        if (!featureWeightGroup.ChildGroups.Any())
            return Enumerable.Repeat(featureWeightGroup, 1);

        return featureWeightGroup.ChildGroups.Aggregate(Enumerable.Empty<IFeatureWeightGroup>(),
                                                        (allGroups, group) =>
                                                        allGroups.Concat(GetLeafGroupsRecursive(group)));
    }
}"
968,"Substitution of different occurrences of a string with changing patterns. I need to parse an invalid JSON string in which I find many repetitions of the same key, like the following snippet: [...]
""term"" : {""Entry"" : ""value1"", [.. other data ..]},
""term"" : {""Entry"" : ""value2"", [.. other data ..]},
[...] I thought of appending a suffix to each key, and I do it using the following code: word = ""term""
offending_string = '""term"" : {""Entry""'
replacing_string_template = '""%s_d"" : {""Entry""'

counter = 0
index = 0
while index != -1:
    # result is the string containing the JSON data
    index = result.find(offending_string, index)
    result = result.replace(offending_string,
                replacing_string_template % (word, counter), 1)
    counter += 1 It works, but I'd like to know if it is a good approach and if you would do this in a different way."
969,"return featureWeightGroup.ChildGroups.Aggregate(Enumerable.Empty<IFeatureWeightGroup>(),
                                                    (allGroups, group) =>
                                                    allGroups.Concat(GetLeafGroupsRecursive(group))); It looks like it can be replaced with: return featureWeightGroup.ChildGroups
           .SelectMany(g => GetLeafGroupsRecursive(group)); Which probably will not be much better from performance point of view, but looks cleaner."
972,"JavaScript portion of regexp tester. I'm quite new to JavaScript, and I'd like a review of the code structure and syntax. It serves this little online regexp test (still a work in progress). The whole code (JavaScript, CSS & HTML) is on GitHub . application.js: function update_result_for(input, regexp_value) {
  var input_value   = input.val();
  var result_spans  = input.parent().children('span');        
  if(!input_value || !$('#regexp').val()) {
    result_spans.hide();
  } else {
    var regexp = new RegExp(regexp_value);
    var result = regexp.exec(input_value);
    if(result) {
      var matched_string = result.shift();

      var submatches_list_string = jQuery.map(result, function(submatch, index) {
        return '$' + (index + 1) + ' = ' + submatch;
      }).join('; ');

      var regexp_to_highlight_matched_string          = new RegExp('(.*)' + matched_string + '(.*)');
      var regexp_to_highlight_matched_string_result   = regexp_to_highlight_matched_string.exec(input_value);
      var before_matched_string                       = regexp_to_highlight_matched_string_result[1];
      var after_matched_string                        = regexp_to_highlight_matched_string_result[2];
      var input_value_with_matched_string_highlighted   = 'matched: ' + before_matched_string + '<span class=""matched"">' + matched_string + '</span>' + after_matched_string;

      result_spans.filter("".submatches"").text(submatches_list_string);
      result_spans.filter("".match"").html(input_value_with_matched_string_highlighted);
      result_spans.filter("".ok"").show('fast');            
      result_spans.filter("".not_ok"").hide();
    } else {
      result_spans.filter("".not_ok"").show('fast');
      result_spans.filter("".ok"").hide();
    }
  }
}       

// from http://www.scottklarr.com/topic/126/how-to-create-ctrl-key-shortcuts-in-javascript/
var isCtrl = false;
$(document).keyup(function (e) {
    if(e.which === 17) isCtrl=false;
}).keydown(function (e) {
    if(e.which === 17) isCtrl=true;
    if(e.which === 69 && isCtrl) {
    $('#regexp').focus();          
        return false;
    }
});

$(document).ready(function() {
  $('#regexp').focus();
  $('span.result').hide();
  $('input:not(#regexp)').live(""keyup"", function() {
    update_result_for($(this), $('#regexp').val());
  });        
  $('input#regexp').keyup(function() {
    $('input:not(#regexp)').each(function(i) {
      update_result_for($(this), $('#regexp').val());
    });          
  });
  $('a.add_example').click(function() {
    new_example = $('div#examples p:last').clone();
    new_example.children('input').attr('value', '');
    new_example.children('span').hide();
    new_example.insertBefore($(this));
    new_example.children(""input"").focus();
  });
});"
973,"As already pointed out by Snowbear and my comment on his answer, you can improve the performance and readability by using SelectMany instead of Concat . However, I notice that you are using ToList() at the end anyway. This pulls into question the benefit of using LINQ and all those SelectMany iterators in the first place. Using LINQ sacrifices performance at the benefit of lazy evaluation, but you are not using the lazy-evaluation aspect. Therefore, if performance is what you are after, then dont use LINQ that much: public static class FeatureWeightGroupExtensions
{
    public static IEnumerable<IFeatureWeightGroup> GetLeafGroups(this IFeatureWeightGroup featureWeightGroup)
    {
        var list = new List<IFeatureWeightGroup>();
        populateList(list, featureWeightGroup);
        return list;
    }

    private static void populateList(List<IFeatureWeightGroup> list, IFeatureWeightGroup featureWeightGroup)
    {
        if (!featureWeightGroup.ChildGroups.Any())
            list.Add(featureWeightGroup);
        else
            foreach (var childGroup in featureWeightGroup.ChildGroups)
                populateList(list, childGroup);
    }
} This is the most performance-optimised way I can think of, while at the same time also being significantly easier to read than the original or the SelectMany alternative."
974,"import json

def fixup(pairs):
   return pairs

decoded = json.loads(bad_json, object_pairs_hook = fixup) object_pairs_hook is a more recent addition. If you have an older version of python you may not have it. The resulting python object will contain lists of pairs (including duplicates) rather then dictionaries."
975,"Separating and organising modules with objects?. As I'm creating a 3D Tic-Tac-Toe game, I'm having several modules inside my JavaScript application. For example, there is a 3D module which handles perspective calculations, whereas a Multiplayer module manages everything with relation to online playing. Is it good practice to put functions of each module in its separate object? I currently have: multiplayer.js: var Multiplayer = {
    socket: new Socket(""ws://192.168.0.100:123/test""), // Relevant variables concerning multiplayer stuff

    createSession:
    function() {
       //...
    }
} renderer.js: var Renderer = {
    f: 200, // Relevant variables concerning 3D rendering stuff
    g: 200;

    render:
    function() {
        //...
    }
} and so on. Is this a good practice of organising my project? Or is there a more efficient way?"
976,"I would recommend you use a closure like this: var Obj = (function() {
    var privateState = null;
    return {
        A: 1,
        B: true,
        C: function() {
            return privateState;  
        }    
    };
})(); The biggest reason why this is a good idea is that it adds the ability to keep private state within the closure. Normally you can define private properties by convention but as the complexity of an object increases the better it is to keep certain things private."
977,"Ruby on rails complex select statement...there has to be a better way!. I am building a query that could end up look like this: SELECT ""patients"".* FROM ""patients"" 
INNER JOIN ""users"" ON ""users"".""id"" = ""patients"".""user_id"" 
WHERE (users.username LIKE '%Bob%' AND users.last_name LIKE '%Smith%' 
AND users.active = '1' AND users.disabled = '1') 
ORDER BY users.first_name DESC LIMIT 10 OFFSET 0 Below is code to create a complex query such as: conditions = []
where = ''
where_parameters = []
order = 'users.last_name ASC'
per_page = 20

if is_admin?
  if defined?(params[:username]) and !params[:username].blank?
    where += 'users.username LIKE ? AND '
    where_parameters.push(""%#{params[:username]}%"")
  end

  if defined?(params[:last_name]) and !params[:last_name].blank?
    where += 'users.last_name LIKE ? AND '
    where_parameters.push(""%#{params[:last_name]}%"")
  end

  if defined?(params[:active]) and !params[:active].blank?
    where += 'users.active = ? AND '
    where_parameters.push(params[:active])
  end

  if defined?(params[:disabled]) and !params[:disabled].blank?
    where += 'users.disabled = ? AND '
    where_parameters.push(params[:disabled])
  end

  if !where.empty?
    where = where[0, where.length - 5]
    conditions = [where, *where_parameters]
  end

  if defined?(params[:order_by]) and !params[:order_by].blank?
    order = params[:order_by] + ' '
  end

  if defined?(params[:order]) and !params[:order].blank?
    order += params[:order]
  end

  if defined?(params[:per_page]) and !params[:per_page].blank?
    per_page = params[:per_page].to_i
  end
  @patients = Patient.joins(:user).paginate(:all, :include =>:user, :conditions => conditions, :order => order, :page => params[:page], :per_page => per_page) Is there a better way to do this, this is just ugly?"
978,"Rails view to list users in a zebra-striped table. <% i = 0 %> 
<% @patients.each do |patient| %> 
 <tr class=""<%= i % 2 == 0 ? 'Even' : 'Odd' %>"">
    <td><%= link_to patient.id, patient %></td>
    <td><%= patient.user.username %></td>
    <td><%= patient.user.first_name %></td>
    <td><%= patient.user.last_name %></td>
    <td><%= patient.user.email %></td>
    <td><%= patient.user.active %></td>
    <td><%= patient.user.disabled %></td>
    <td>
      <ul class=""Horizlist"">
        <li><%= link_to 'Detail', patient %></li>
      </ul>
    </td>
  </tr>
<% i += 1 %> I don't like that I have to define an i variable, is there a better way?"
979,"First of all be very careful when building queries from request data. When building your where string, you're using parametrized queries, so that's fine. But in your order string, you're building actual SQL code from data you directly take out of params . Do NOT do that. This is a big risk of SQL injection. What you should do instead is take the order string apart (splitting at the comma), then check that each element is a column name optionally followed by ASC or DESC , then put the string back together accordingly. A method for this could look something like this: def safe_order_from_param(collection, order_string)
  tokens = order_string.split(/ *, */)
  tokens.each do |token|
    column, direction = token.match(/^(\w+)(? +(\w+))?$/).captures
    if Patient.column_names.include? column
      # if direction is nil, it will just be turned into the empty
      # string, so no problem there
      collection = collection.order(""#{column} #{direction}"")
    else
      raise ArgumentError, ""No such column: #{column}""
    end
  end
end Second of all defined?(params[:foo]) does is check that params is defined. It does not check that params is a hash and has the key :foo . Since params will always exist, there really is no need for the check. Checking params[:foo].blank? is entirely sufficient. Now to the main part of your question: the ugly building of the query string: I assume from the fact that you're using the joins method that this is rails 3. In rails 3 options like :include , :conditions and :order are deprecated in favor of the corresponding query methods. The beauty of those methods is that they're chainable. So instead of building a query string using concatenation, it is much cleaner to just chain together multiple where s. if is_admin?
  @patients = Patient.joins(:user).includes(:user).order('users.last_name ASC')

  unless params[:username].blank?
    @patients = @patients.where(""users.username LIKE ?"", params[:username])
  end

  # same for :last_name

  unless params[:active].blank?
    @patients = @patients.where(""users.active"" => params[:active])
  end

  # same for disabled

  unless params[:order_by].blank?
    @patients = safe_order_from_param(@patients, params[:order_by])
  end

  # same for order

  per_page = params[:per_page].blank? ? 20 : params[:per_page].to_i
  @patients = @patients.paginate(:page => params[:page], :per_page => per_page)
end"
980,"First of all ruby has an each_with_index method, so you can do @patients.each_with_index do |patient, i| instead of keeping a counter manually. However with the conditional inside the loop that is still too much logic for the view in my opinion. What I'd do is define a helper for this, which might look like this: # For each item in the given collection, yield that item and embed the
# result in the given tag. The class attribute of that tag alternates
# between class1 and class2
def alternating(collection, tag, class1, class2, html => {})
  collection.each_with_index do |item, i|
    html[:class] = i % 2 == 0 ? class1 : class2
    content_tag(tag, html, false) do
      yield item
    end
  end
end And then call it like this: <% alternating(@patients, :tr, 'Even', 'Odd') do |patient| %> 
  <td><%= link_to patient.id, patient %></td>
  <td><%= patient.user.username %></td>
  <td><%= patient.user.first_name %></td>
  <td><%= patient.user.last_name %></td>
  <td><%= patient.user.email %></td>
  <td><%= patient.user.active %></td>
  <td><%= patient.user.disabled %></td>
  <td>
    <ul class=""Horizlist"">
      <li><%= link_to 'Detail', patient %></li>
    </ul>
  </td>
<% end %>"
981,"Not feeling 100% about my Controller design.. Basically, I'm uploading an excel file and parsing the information then displaying what was parsed in a view. using System.Data;
using System.Data.OleDb;
using System.Web;
using System.Web.Mvc;
using QuimizaReportes.Models;
using System.Collections.Generic;
using System;

namespace QuimizaReportes.Controllers
{
    public class UploadController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(HttpPostedFileBase excelFile)
        {
            if (excelFile != null)
            {
                //Save the uploaded file to the disc.
                string savedFileName = ""~/UploadedExcelDocuments/"" + excelFile.FileName;
                excelFile.SaveAs(Server.MapPath(savedFileName));

                //Create a connection string to access the Excel file using the ACE provider.
                //This is for Excel 2007. 2003 uses an older driver.
                var connectionString = string.Format(""Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=Excel 12.0;"", Server.MapPath(savedFileName));

                //Fill the dataset with information from the Hoja1 worksheet.
                var adapter = new OleDbDataAdapter(""SELECT * FROM [Hoja1$]"", connectionString);
                var ds = new DataSet();
                adapter.Fill(ds, ""results"");
                DataTable data = ds.Tables[""results""];

                var people = new List<Person>();

                for (int i = 0; i < data.Rows.Count - 1; i++)
                {
                    Person newPerson = new Person();
                    newPerson.Id = data.Rows[i].Field<double?>(""Id"");
                    newPerson.Name = data.Rows[i].Field<string>(""Name"");
                    newPerson.LastName = data.Rows[i].Field<string>(""LastName"");
                    newPerson.DateOfBirth = data.Rows[i].Field<DateTime?>(""DateOfBirth"");

                    people.Add(newPerson);
                }

                return View(""UploadComplete"", people);
            }

            return RedirectToAction(""Error"", ""Upload"");                      
        }

        public ActionResult Error()
        {
            return View();
        }
    }
} Not feeling so confident this is the best approach. Any suggestion any of you MVC3 vets have for this aspiring senior programmer? :)"
982,"Rails has a built in method, cycle , which will cycle between two more more options for you, so you don't have to manage the ""Even""/""Odd"" selection. <% @patients.each do |patient| %>
  <%= content_tag :tr, :class => cycle('Even', 'Odd') do %>
    <%= content_tag :td, link_to(patient.id, patient) %>
    <% [:username, :first_name, :last_name, :email, :active, :disabled].each do |property| %>
      <%= content_tag :td, patient.user.send(property) %>
    <% end %>
    <td>
      <ul class=""Horizlist"">
        <%= content_tag :li, link_to('Detail', patient) %>
      </ul>
    </td>
  <% end %>
<% end %> If you happen to use Haml, it looks quite nice. :) - @patients.each do |patient|
  %tr{:class => cycle('Even', 'Odd')}
    %td= link_to(patient.id, patient)
    - [:username, :first_name, :last_name, :email, :active, :disabled].each do |property|
      %td= patient.user.send(property)
    %td
      %ul.Horizlist
        %li= link_to('Detail', patient)"
984,"Recursive database actions. I am been using a code pattern for recursive database actions in my applications. I create two class objects of a database table, singular one (e.g Agent) for holding single record with all fields definition, plural one (e.g Agents) for database actions of that records like, select, insert, delete, update etc. I find it easy using the code pattern. But as the time runs I find it somewhat laborious to define same database action functions in different classes only differing in datatype. How can I make it good and avoid defining it again and again? Sample code of a class file representing the class definition: Imports EssenceDBLayer

Public Class Booking
#Region ""Constants""
    Public Shared _Pre As String = ""bk01""
    Public Shared _Table As String = ""bookings""
#End Region

#Region "" Instance Variables ""
    Private _UIN As Integer = 0
    Private _Title As String = """"
    Private _Email As String = """"
    Private _contactPerson As String = """"
    Private _Telephone As String = """"
    Private _Mobile As String = """"
    Private _Address As String = """"
    Private _LastBalance As Double = 0
#End Region

#Region "" Constructor ""
    Public Sub New()
        'Do nothing as all private variables has been initiated'
    End Sub

    Public Sub New(ByVal DataRow As DataRow)
        _UIN = CInt(DataRow.Item(_Pre & ""UIN""))
        _Title = CStr(DataRow.Item(_Pre & ""Title""))
        _Email = CStr(DataRow.Item(_Pre & ""Email""))
        _contactPerson = CStr(DataRow.Item(_Pre & ""contact_person""))
        _Telephone = CStr(DataRow.Item(_Pre & ""Telephone""))
        _Mobile = CStr(DataRow.Item(_Pre & ""Mobile""))
        _Address = CStr(DataRow.Item(_Pre & ""Address""))
        _LastBalance = CDbl(DataRow.Item(_Pre & ""Last_Balance""))
    End Sub
#End Region

#Region "" Properties ""
    Public Property UIN() As Integer
        Get
            Return _UIN
        End Get
        Set(ByVal value As Integer)
            _UIN = value
        End Set
    End Property

    Public Property Title() As String
        Get
            Return _Title
        End Get
        Set(ByVal value As String)
            _Title = value
        End Set
    End Property

    Public Property Email() As String
        Get
            Return _Email
        End Get
        Set(ByVal value As String)
            _Email = value
        End Set
    End Property

    Public Property ContactPerson() As String
        Get
            Return _contactPerson
        End Get
        Set(ByVal value As String)
            _contactPerson = value
        End Set
    End Property

    Public Property Telephone() As String
        Get
            Return _Telephone
        End Get
        Set(ByVal value As String)
            _Telephone = value
        End Set
    End Property

    Public Property Mobile() As String
        Get
            Return _Mobile
        End Get
        Set(ByVal value As String)
            _Mobile = value
        End Set
    End Property

    Public Property Address() As String
        Get
            Return _Address
        End Get
        Set(ByVal value As String)
            _Address = value
        End Set
    End Property

    Public Property LastBalance() As Double
        Get
            Return _LastBalance
        End Get
        Set(ByVal value As Double)
            _LastBalance = value
        End Set
    End Property

#End Region

#Region "" Methods ""
    Public Sub [Get](ByRef DataRow As DataRow)
        DataRow(_Pre & ""Title"") = _Title
        DataRow(_Pre & ""Email"") = _Email
        DataRow(_Pre & ""Contact_person"") = _contactPerson
        DataRow(_Pre & ""Telephone"") = _Telephone
        DataRow(_Pre & ""Mobile"") = _Mobile
        DataRow(_Pre & ""Address"") = _Address
        DataRow(_Pre & ""last_balance"") = _LastBalance
    End Sub
#End Region
End Class

Public Class Bookings
    Inherits DBLayer

#Region ""Constants""
    Public Shared _Pre As String = ""bk01""
    Public Shared _Table As String = ""bookings""
#End Region

#Region "" Standard Methods ""
    Public Shared Function GetData() As List(Of Booking)
        Dim QueryString As String = String.Format(""SELECT * FROM {0}{1} ORDER BY {0}UIN;"", _Pre, _Table)
        Dim Dataset As DataSet = New DataSet()
        Dim DataList As List(Of Booking) = New List(Of Booking)

        Try
            Dataset = Query(QueryString)
            For Each DataRow As DataRow In Dataset.Tables(0).Rows
                DataList.Add(New Booking(DataRow))
            Next
        Catch ex As Exception
            DataList = Nothing
            SystemErrors.Create(New SystemError(ex.Message, ex.StackTrace))
        End Try
        Return DataList
    End Function

    Public Shared Function GetData(ByVal uin As String) As Booking
        Dim QueryString As String = String.Format(""SELECT * FROM {0}{1} WHERE {0}uin = {2};"", _Pre, _Table, uin)
        Dim Dataset As DataSet = New DataSet()
        Dim Data As Booking = New Booking()

        Try
            Dataset = Query(QueryString)
            If Dataset.Tables(0).Rows.Count = 1 Then
                Data = New Booking(Dataset.Tables(0).Rows(0))
            Else
                Data = Nothing
            End If
        Catch ex As Exception
            Data = Nothing
            SystemErrors.Create(New SystemError(ex.Message, ex.StackTrace))
        End Try
        Return Data
    End Function

    Public Shared Function Create(ByVal Data As Booking) As Boolean
        Dim QueryString As String = String.Format(""SELECT * FROM {0}{1} WHERE {0}uin = Null;"", _Pre, _Table)
        Dim Dataset As DataSet = New DataSet()
        Dim Datarow As DataRow
        Dim Result As Boolean = False

        Try
            Dataset = Query(QueryString)
            If Dataset.Tables(0).Rows.Count = 0 Then
                Datarow = Dataset.Tables(0).NewRow()
                Data.Get(Datarow)
                Dataset.Tables(0).Rows.Add(Datarow)
                Result = UpdateDB(QueryString, Dataset)
            Else
                Result = False
            End If
        Catch ex As Exception
            Result = False
            SystemErrors.Create(New SystemError(ex.Message, ex.StackTrace))
        End Try
        Return Result
    End Function

    Public Shared Function Update(ByVal Data As Booking) As Boolean
        Dim QueryString As String = String.Format(""SELECT * FROM {0}{1} WHERE {0}uin = {2};"", _Pre, _Table, Data.UIN)
        Dim Dataset As DataSet = New DataSet()
        Dim Result As Boolean = False
        Dim DataRow As DataRow = Nothing

        Try
            Dataset = Query(QueryString)
            If Dataset.Tables(0).Rows.Count = 1 Then
                DataRow = Dataset.Tables(0).Rows(0)
                Data.Get(DataRow)
                Result = UpdateDB(QueryString, Dataset)
            Else
                Result = False
            End If
        Catch ex As Exception
            Result = False
            SystemErrors.Create(New SystemError(ex.Message, ex.StackTrace))
        End Try
        Return Result
    End Function

    Public Shared Function UpdateBulk(ByRef DataList As List(Of Booking)) As Boolean
        Dim Result As Boolean = False

        Try
            For Each Data As Booking In DataList
                Update(Data)
            Next
            Result = True
        Catch ex As Exception
            SystemErrors.Create(New SystemError(ex.Message, ex.StackTrace))
        End Try

        Return Result
    End Function

    Public Shared Function FillGrid() As List(Of Booking)
        Return GetData()
    End Function
#End Region
End Class"
985,"Submitting client reviews. I generally encounter a lot of if / else . I would like to get some suggestions on my code: if( $blnLogged && isset( $_POST['postReview'] ) )
{
    if( $_SESSION['REVIEW']['SUBMITTED'] != '' )
    {
        $arrSharedData['blnRetSave'] = $_SESSION['REVIEW']['SUBMITTED'];
        $blnShowForm = false;
        $blnReviewPosted = true;
    }else{
        if( $arrData['captcha'] != $_SESSION['REVIEW']['CODE'] )
        {
            $strErrMsg = 'Invalid Captcha Code...';
        }else{
            if( empty( $arrData['review_title'] ) || empty( $arrData[ 'review_description' ] ) || empty( $arrData[ 'overall_review' ] ) || empty( $arrData[ 'cleanliness' ] ) || empty( $arrData[ 'facilities' ] ) || empty( $arrData[ 'location' ] ) || empty( $arrData[ 'quality_of_service' ] ) || empty( $arrData[ 'room' ] ) || empty( $arrData[ 'value_of_money' ]) )
            {
                $strErrMsg = 'Required field missing...';
            }else{

                //do we need any processing...
                $arrData['business_id'] = $bID;
                $arrData['client_id']   = $_SESSION['site_user'];
                $arrData['website_id']  = WEBSITE_ID;
                $arrData['review_date'] = date('Y-m-d');

                //If field Transformation required do it...

                $objTripReview = SM_Loader::loadClass('Class_Reviews');
                $blnRetSave = $objTripReview->saveReview( $arrData );
                $_SESSION['REVIEW']['SUBMITTED'] = $blnRetSave;
                $arrSharedData['blnRetSave'] = $_SESSION['REVIEW']['SUBMITTED'];
                $blnShowForm = false;
                $blnReviewPosted = true;
            }
        }
    }
}

if( $blnShowForm === true )
{
    $_SESSION['REVIEW']['CODE'] = rand(9999,99999);
    $_SESSION['Review']['SUBMITTED'] = '';
}"
986,"One simple way to improve this is to package it in a function, and return (or throw an exception) after each $strErrMsg = ... line. This will flatten the function, and allow you to put the main functionality at the ""top level"" of the function. Even better might be to move all the validation code to a separate function that throws an exception, and then handle it in the function that called it with the wrong parameters."
987,"The logic for reading the Excel file (i.e. everything from var connectionString until before the return ) belongs in a model method, not the controller. You might also want to handle the case when the uploaded file isn't an Excel file or it doesn't have the columns you expect it to. Depending on how you use this or who uses it, this might not be necessary, but if normal users are allowed to upload files, they might very well upload the wrong file even if you tell them not to. And in that case a meaningful error message leads to a better user experience. Regarding the question in your comment: As I said, I don't know how this is going to be used, but I can't think of a situation where it would be helpful for the user to be able to re-upload the file by hitting the refresh button. So yes, redirecting to an UploadComplete action makes sense."
988,"This would probably be way more efficient: function is_numeric_array($array)
{
    $array = array_keys($array);

    if ($array === array_filter($array, 'is_int'))
    {
        return true;
    }

    return false;
} I just noticed what you're really trying to do is not check if all the keys in an array are integers but rather if the array is indexed (non-associative), for this use array_values() does the trick: function is_numeric_array($array)
{
    return ($array === array_values($array));
}"
989,"Instead of if (x)
{
    // ...
}
else
{
    if (y)
    {
        // ...
    }
} you can just write if (x)
{
    // ...
}
else if (y)
{
    // ...
} In addition to that, I would put the list of required fields in an array somewhere where it is easily maintainable, so its not buried somewhere deep in the complex code: $requiredFields = array( 'review_title', 'review_description',
    'overall_review', 'cleanliness', 'facilities', 'location',
    'quality_of_service', 'room', 'value_of_money' ); Then your code will look like this: if( $blnLogged && isset( $_POST['postReview'] ) )
{
    $requiredFieldsPresent = true;
    foreach( $requiredFields as $field )
        if( empty( $arrData[$field] ) )
            $requiredFieldsPresent = false;

    if( $_SESSION['REVIEW']['SUBMITTED'] != '' )
    {
        $arrSharedData['blnRetSave'] = $_SESSION['REVIEW']['SUBMITTED'];
        $blnShowForm = false;
        $blnReviewPosted = true;
    }
    else if( $arrData['captcha'] != $_SESSION['REVIEW']['CODE'] )
    {
        $strErrMsg = 'Invalid Captcha Code...';
    }
    else if( !$requiredFieldsPresent )
    {
        $strErrMsg = 'Required field missing...';
    }
    else
    {
        // do we need any processing...
        // etc.
    }
}"
990,"Handling HTTP requests. This class handles HTTP requests. It's a singleton class that parses URI to get the controller, method and parameters and then executes the controller's method. Maybe parseUri should be in another class and maybe there is too much responsibility for this class. I know that it can be improved. The execute method could be better because there are some repeated code. <?php
class Request
{
    private static $_instance;
    private $_host;
    private $_request_uri;
    private $_script_name;
    private $_controller;
    private $_method;
    private $_parameters;
    private $_headers;

    private function __construct()
    {
        $this->_host = $_SERVER['HTTP_HOST'];
        $this->_request_uri = $_SERVER['REQUEST_URI'];
        $this->_script_name = $_SERVER['SCRIPT_NAME'];
        $this->_headers = array();

        $this->_parseUri();
    }

    private function _parseUri()
    {
        /* In 'http://www.example.com/foo/bar/' get the '/foo/bar/' part */
        $part = str_replace(
            dirname($this->_script_name),
            '',
            $this->_request_uri
        );

        /* break it into chunks and clean up empty positions */
        $chunks = explode('/', $part);
        $chunks = array_filter($chunks);

        if (count($chunks))
        {
            if ($this->_controller = array_shift($chunks))
            {
                $this->_controller = ucfirst($this->_controller) . '_Controller';
            }

            if ($this->_method = array_shift($chunks))
            {
                $this->_method = ucfirst($this->_method) . 'Action';
            }
            $this->_parameters = $chunks ? $chunks : null;
        }
    }

    private function _send_headers()
    {
        foreach($this->_headers as $header)
        {
            header($header);
        }
    }

    public static function instance()
    {
        if (!self::$_instance)
        {
            self::$_instance = new Request();
        }

        return self::$_instance;
    }

    public function execute()
    {
        /* There is a controller ... */
        if (!empty($this->_controller))
        {
            if (!class_exists($this->_controller, true))
            {
                array_push($this->_headers, 'HTTP/1.1 404 Not Found');
                $this->_send_headers();
                return;
            }

            $controller = new $this->_controller();
            /* ... and a method */
            if ($this->_method)
            {
                if (!method_exists($controller, $this->_method))
                {
                    array_push($this->_headers, 'HTTP/1.1 404 Not Found');
                    $this->_send_headers();
                    return;
                }

                $method = new ReflectionMethod(
                    $controller, $this->_method
                );

                /* Do we have parameters? Let's call the right method */
                $this->_parameters
                    ? $method->invokeArgs($controller, $this->_parameters)
                    : $method->invoke($controller);

                array_push($this->_headers, 'HTTP/1.1 200 OK');
                $this->_send_headers();
            }
            /* we don't have a method here, let's call the 'index_action' method */
            else
            {
                $method = new ReflectionMethod($controller, 'indexAction');
                $method->invoke($controller);

                array_push($this->_headers, 'HTTP/1.1 200 OK');
                $this->_send_headers();
            }
        }
        /* We don't have a Controller, let's call the default one. */
        else
        {
            if (!class_exists('Default_Controller', true))
            {
                throw new RequestException(""'Default_Controller' class not found."");
            }

            $controller = new Default_Controller();

            if (!method_exists($controller, 'indexAction'))
            {
                throw new RequestException(
                    ""'indexAction' method not found in 'Default_Controller' class.""
                );
            }

            $method = new ReflectionMethod($controller, 'indexAction');
            $method->invoke($controller);
        }
    }
}
?>"
991,"How can I make this F# more functional?. I am currently learning myself a little F# and have written the following code to practice. The code uses the Mono.Cecil library to inject some IL at the start of every method in each .net assembly found in a given directory. The IL will call a LogMe method in a Loggit.dll assembly. I want to make this code as functional and idiomatically F# as possible. My main concern is that the method to inject code into an assembly has some definite side effects. This is unavoidable as thats what the whole point is. I do this in the function InjectMethods. This function is passed to the DoOnModule function. This DoOnModule function is used twice - once when injecting methods - a method with side effects and no real return value, and once when retreiving the LogMe method reference from the Loggit.dll assembly - a method with no side effects and a useful return value. I feel a little uneasy about this double use, which doesnt feel very functional - and yet I find it very useful save code repetition... How can I make this code more functional? // 
open System.IO
open Mono.Cecil
open Mono.Cecil.Cil

exception LogNotFoundError of string

let IsClass(t:TypeDefinition) =
    t.IsAnsiClass && not t.IsInterface

let UsefulMethods(t:TypeDefinition) =
    t.Methods |> Seq.filter ( fun m -> m.HasBody ) 

// Perform the given funtion on the module found at the given filename.
let DoOnModule fn (file:string) =
    try
        let _module = ModuleDefinition.ReadModule file 
        Some ( fn ( _module ) )
    with
        | :? System.BadImageFormatException as ex -> printfn ""%A"" ex; None
        | :? System.Exception as ex -> printfn ""%A"" ex; None

// Do the given function on the dll filenames found in the given directory
let MapAssemblies fn directory = 
    System.IO.Directory.GetFiles(directory) |> 
    Seq.filter(fun file -> file.EndsWith(""dll"") || file.EndsWith(""exe"") ) |>
    Seq.map( fn )

// Return the methods found in the given module
let GetMethods(_module:ModuleDefinition) =
    _module.Types |> Seq.filter ( IsClass ) |> Seq.collect ( UsefulMethods )

// Get the log method found in the Loggit.dll.
// A call to this method will be injected into each method
let LogMethod (_module:ModuleDefinition) = 
    let GetLogMethod(_logmodule:ModuleDefinition) =
        let logClass = _logmodule.Types |> Seq.filter ( fun t -> t.Name.Contains ( ""Log"" ) ) |> Seq.head
        let logMethod = logClass.Methods |> Seq.filter ( fun m -> m.Name.Contains ( ""LogMe"" ) ) |> Seq.head
        _module.Import logMethod
    ""Loggit.dll"" |> DoOnModule GetLogMethod 

// Injects IL into the second method to call the first method, 
// passing this and the method name as parameters
let InjectCallToMethod(logMethod:MethodReference) (_method:MethodDefinition) =
        let processor = _method.Body.GetILProcessor()
        let firstInstruction = _method.Body.Instructions.Item(0)
        let parameter1 = processor.Create(OpCodes.Ldstr, _method.Name)
        let parameter2 = processor.Create(if _method.HasThis then OpCodes.Ldarg_0 else OpCodes.Ldnull)
        let call = processor.Create(OpCodes.Call, logMethod)
        processor.InsertBefore ( firstInstruction, parameter1 );
        processor.InsertBefore ( firstInstruction, parameter2 );
        processor.InsertBefore ( firstInstruction, call )

// Inject a call to the Log method at the start of every method found in the given module.
let InjectMethods(_module:ModuleDefinition) =
    // Inject the call
    let logMethod = LogMethod _module
    match logMethod with
    | Some(log) ->
        let methods = GetMethods _module
        for m in methods do
            m |> InjectCallToMethod log
    | None -> raise(LogNotFoundError(""Cant find log method""))

    // Save the module
    Directory.CreateDirectory ( Path.GetDirectoryName ( _module.FullyQualifiedName ) + @""\jiggled\"" ) |> ignore
    _module.Write ( Path.Combine ( Path.GetDirectoryName ( _module.FullyQualifiedName ) + @""\jiggled\"", Path.GetFileName ( _module.FullyQualifiedName ) ) );

let dir = ""D:\\Random\\AssemblyJig\\spog\\bin\\Debug""

// Now inject into the methods
try
    dir |>
    MapAssemblies ( DoOnModule InjectMethods )  |>
    Seq.toList |>
    ignore
with
    | :? System.Exception as ex -> printfn ""%A"" ex; 

System.Console.ReadLine |> ignore"
992,"I only have two minor nitpicks with this code: Seq.filter(fun file -> file.EndsWith(""dll"") || file.EndsWith(""exe"") ) |> Perhaps this should say "".dll"" and "".exe"" . Or you could use Path.GetExtension . Seq.filter ( fun t -> t.Name.Contains ( ""Log"" ) ) |> Seq.head This will take the first type whose name happens to contain Log ; even if the name is ILoggable or LogProcessor or something. Are you sure you know that there will never be any other types with such names than the type you want? The same goes for the method LogMe ."
993,"Pulling a subset of elements from a Dictionary. I have a function that returns a set of values from a Dictionary . I don't currently want to allow it to throw KeyNotFoundException , so I'm filtering the keys out before I try to select the values. I have a feeling this can be done in a more straightforward fashion, but I'm not sure where to go with it. // this.resources is a Dictionary<string, Resource>

public IEnumerable<Resource> GetResources(IEnumerable<string> resourceNames)
{
    HashSet<string> hs = new HashSet<string>(resourceNames);

    hs.IntersectWith(this.resources.Keys);

    List<Resource> resources = new List<Resource>();

    foreach(string resourceName in hs)
    {
        resources.Add(this.resources[resourceName]);
    }

    return resources;
}"
995,"I would write it the obvious straight-forward LINQ way, which gives you good readability as well as lazy evaluation: public IEnumerable<Resource> GetResources(IEnumerable<string> resourceNames)
{
    return resourceNames
        .Where(name => resources.ContainsKey(name))
        .Select(name => resources[name]);
}"
996,"Return render in Ruby on Rails. Is it bad to do return render? I am doing this to NOT also allow a redirect. def create
    @patient = Patient.new(params[:patient])
    if  !@patient.save
      @patient.user.password = ''
      @patient.user.password_confirmation = ''
      return render is_admin? ? 'new_admin' : 'new'
    else
      #Fire off an e-mail
      PatientMailer.welcome_email(@patient).deliver
    end

    if current_user == @patient
      sign_in @patient
    else
      redirect_to patients_path
    end
  end"
997,"Writing it like this makes it look the render returns a meaningful value that is then returned by create and used by the code that calls create , which is not the case. So instead I would write: render is_admin? ? 'new_admin' : 'new'
return This makes it clear that render is solely used for its side effects and create does not return a value (other than nil )."
998,"What you're talking about is called object-relational mapping. You could do this, but it will be a fair amount of effort. Luckily many people have run into this same question before, answered it and open-sourced that solution. I suggest looking at using one of those solutions. nHibernate is just one example but is a popular and mature solution. Edit: More accurately, object-relational mapping is mapping fields to columns, objects to tables and object relationships to table relationships, so it does exactly what you want and (optionally) much more."
999,"To add a little to PDR's answer, since you have mentioned VB.NET, if you're using .NET 3.5 or higher you can use the Entity Framework to generate all of the basic classes and the supporting CRUD methods of those classes."
1000,"Security of simple client/server desktop app. I am writing an application aimed at the desktop but using web technologies. It will have an HTML interface and a server written in Python using Flask will do all of the filesystem interaction. It will have the ability to edit user settings so I want to make it impossible for other users to interfere. This is a little tricky because the server and client communicate using HTTP over a localhost port. The program is split between 3 files: run.py - controls the start up and shut down of the server and client. import os
import json
import time
import signal

secret_file = os.path.join(os.environ['HOME'], '.myapp.secret')
if os.path.exists(secret_file):
    os.remove(secret_file)

os.system(""python server.py &"")

while not os.path.exists(secret_file):
    time.sleep(0.1)

f = open(secret_file)
secret = json.load(f)

url = 'http://localhost:' + str(secret['port']) + '/' + secret['key']

os.system(""python client.py "" + url)


os.kill(secret['pid'], signal.SIGINT) server.py from flask import Flask, request, Response
import socket
import random
import json
import sys
import os

app = Flask(__name__)
key = ''.join(random.sample(
    ""1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM"", 
    random.randint(8, 24)
))
port = 0
secret_file = os.path.join(os.environ['HOME'], '.myapp.secret')

@app.route('/<authkey>')
def hello(authkey):
    if authkey == key:
        return 'Hello, world!'
    else:
        return Response('Access Denied', 401)

def broadcast(port):
    s = json.dumps({
        'key' : key,
        'port' : port,
    'pid' : os.getpid()
    })
    f = open(
        secret_file,
        'w'
    )
    f.write(s)
    os.chmod(secret_file, 0400)
    f.close()


if __name__ == '__main__':
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.bind(('localhost', 0))
    port = sock.getsockname()[1]
    broadcast(port)
    sock.close()
    app.run(port=port) client.py This is a simple GTK window with a webkit widget that renders the page. It renders the URL passed to it by the first argument. Is this sufficiently secure? Also, are there any other problems that I have not considered?"
1001,"Sorting strings by length - functional Python. I'm trying to port this little F# snippet while staying pythonic: [""something""; ""something else""; ""blah""; ""a string""] |> List.map (fun p -> p, p.Length) |> List.sortBy snd In case you don't speak F#, it gets the length of each string, then sorts by length. Output: [(""blah"", 4); (""a string"", 8); (""something"", 9); (""something else"", 14)] In Python, this is the best I could do so far: sorted([(p, len(p)) for p in [""something"", ""something else"", ""blah"", ""a string""]], key=lambda a:a[1]) While correct, this doesn't look very elegant to me, or maybe it's just my non-pythonic eye. Is this pythonic code? How would you write it? Maybe an imperative style is more appropriate?"
1002,"Mapping ExpandoObject to another object type. I am working on a helper method that maps properties from an ExpandoObject to a user supplied object and was wondering if the code could be cleaned up or made any more efficient. It currently has the correct behaviour from a simple test. public static class Mapper
{
    public static void Map<T>(ExpandoObject source, T destination)
    {
        IDictionary<string, object> dict = source;
        var type = destination.GetType();

        foreach (var prop in type.GetProperties())
        {
            var lower = prop.Name.ToLower();
            var key = dict.Keys.SingleOrDefault(k => k.ToLower() == lower);

            if (key != null)
            {
                prop.SetValue(destination, dict[key], null);
            }
        }
    }
} Full test can be seen here . There is currently no type checking. Would this be next to add?"
1003,"I've come up with a few changes that should actually speed it up. // By using a generic class we can take advantage
// of the fact that .NET will create a new generic type
// for each type T. This allows us to avoid creating
// a dictionary of Dictionary<string, PropertyInfo>
// for each type T. We also avoid the need for the 
// lock statement with every call to Map.
public static class Mapper<T>
    // We can only use reference types
    where T : class
{
    private static readonly Dictionary<string, PropertyInfo> _propertyMap;

    static Mapper()
    {
        // At this point we can convert each
        // property name to lower case so we avoid 
        // creating a new string more than once.
        _propertyMap = 
            typeof(T)
            .GetProperties()
            .ToDictionary(
                p => p.Name.ToLower(), 
                p => p
            );
    }

    public static void Map(ExpandoObject source, T destination)
    {
        // Might as well take care of null references early.
        if (source == null)
            throw new ArgumentNullException(""source"");
        if (destination == null)
            throw new ArgumentNullException(""destination"");

        // By iterating the KeyValuePair<string, object> of
        // source we can avoid manually searching the keys of
        // source as we see in your original code.
        foreach (var kv in source)
        {
            PropertyInfo p;
            if (_propertyMap.TryGetValue(kv.Key.ToLower(), out p))
            {
                var propType = p.PropertyType;
                if (kv.Value == null)
                {
                    if (!propType.IsByRef && propType.Name != ""Nullable`1"")
                    {
                        // Throw if type is a value type 
                        // but not Nullable<>
                        throw new ArgumentException(""not nullable"");
                    }
                }
                else if (kv.Value.GetType() != propType)
                {
                    // You could make this a bit less strict 
                    // but I don't recommend it.
                    throw new ArgumentException(""type mismatch"");
                }
                p.SetValue(destination, kv.Value, null);
            }
        }
    }
}"
1004,"data = [""something"", ""something else"", ""blah"", ""a string""]
result = [(x, len(x)) for x in sorted(data, key = len)] Basically, its more straightforward to sort first then decorate. Although, I'm not sure why you would need the length of the list in your tuple. If you don't really need it sorting by length can be much shorter. EDIT: If all I wanted was to output the data, I'd do it like this: for string in sorted(data, key = len):
    print string, len(string) If you really wanted to eliminate the two references to len you could do: mykey = len
for string in sorted(data, key = mykey):
    print string, mykey(string) But unless you are reusing the code with different mykey's that doesn't seem worthwhile."
1005,"I don't think that your solution looks bad. I would probably use a temporary variable to make the line length a bit more readable. You could consider itemgetter from the operator module. E.g. from operator import itemgetter

orig_list = [""something"", ""something else"", ""blah"", ""a string""]
mylist = [(p, len(p)) for p in orig_list]
mylist.sort(itemgetter(1)) Personally I think that this is just as readable. mylist = sorted([(p, len(p)) for p in orig_list], key=itemgetter(1))"
1006,"Bilinear scaling using SSE2 on Core 2 CPUs. I am looking for some help with improving this bilinear scaling SSE2 code on Core 2 CPUs. On my Atom N270 and on an i7, this code is about 2x faster than the MMX code. But under Core 2 CPUs, it is only equal to the MMX code. void ConversionProcess::convert_SSE2(BBitmap *from, BBitmap *to)
{
    uint32 fromBPR, toBPR, fromBPRDIV4, x, y, yr, xr;

    ULLint start = rdtsc();
    ULLint stop;
    if (from && to) {
        uint32 width, height;
        width = from->Bounds().IntegerWidth() + 1;
        height = from->Bounds().IntegerHeight() + 1;

        uint32 toWidth, toHeight;
        toWidth = to->Bounds().IntegerWidth() + 1;
        toHeight = to->Bounds().IntegerHeight() + 1;

        fromBPR = from->BytesPerRow();
        fromBPRDIV4 = fromBPR >> 2;
        toBPR = to->BytesPerRow();

        uint32 x_ratio = ((width-1) << 7) / toWidth ;
        uint32 y_ratio = ((height-1) << 7) / toHeight ;

        uint8* toPtr = (uint8*)to->Bits();
        uint8* fromPtr1 = (uint8*)from->Bits();
        uint8* fromPtr2 = (uint8*)from->Bits() + fromBPR;

        struct FilterInfo {
            uint16 one_minus_diff;      // one minus diff
            uint16 diff;                // diff value used to calculate the weights used to average the pixels
            uint16 one_minus_diff_rep;  // one minus diff repeated
            uint16 diff_rep;            // diff value used to calculate the weights used to average the pixels repeated
        };

        FilterInfo *xWeights = (FilterInfo *)memalign(16, toWidth * 8);
        FilterInfo *yWeights = (FilterInfo *)memalign(16, toHeight * 8);
        uint32 *xIndexes = (uint32 *)memalign(16, (toWidth+2) * 4);     // will overread by 2 index
        uint32 *yIndexes = (uint32 *)memalign(16, toHeight * 4);

        x = 0;
        for (uint32 j=0;j < toWidth;j++) {
            xr = x >> 7;
            xWeights[j].diff = x - (xr << 7);
            xWeights[j].one_minus_diff = 127 - xWeights[j].diff;
            xWeights[j].one_minus_diff_rep = xWeights[j].one_minus_diff;
            xWeights[j].diff_rep = xWeights[j].diff;
            xIndexes[j] = xr << 2;

            x += x_ratio;
        }

        y = 0;
        for (uint32 j=0;j < toHeight; j++) {
            yr = y >> 7;
            yWeights[j].diff = y - (yr << 7);
            yWeights[j].one_minus_diff = 127 - yWeights[j].diff;
            yIndexes[j] = (yr * fromBPR);
            y += y_ratio;

        }

        for (uint32 i=0;i < toHeight; i++) {
            _ScaleSSE2X2(toPtr, fromPtr1 + yIndexes[i], fromPtr2 + yIndexes[i], xIndexes, xWeights, &yWeights[i], toWidth);
            toPtr += toBPR; 
        }

        free(xWeights);
        free(yWeights);
        free(xIndexes);
        free(yIndexes);

        stop = rdtsc() - start;
        if (stop < timeTaken) {
            timeTaken = stop;
        }
    }
} ;
; Copyright (C) 2011 David McPaul
;
; All rights reserved. Distributed under the terms of the MIT License.
;

; A rather unoptimised bilinear scaler

%macro  cglobal 1
    global  _%1
    %define %1 _%1
    align 16
%1:
%endmacro

SECTION .data align=16

RGB_AND db  0xff
        db  0x00
        db  0x00
        db  0x00
        db  0xff
        db  0x00
        db  0x00
        db  0x00
        db  0xff
        db  0x00
        db  0x00
        db  0x00
        db  0xff
        db  0x00
        db  0x00
        db  0x00

; void  _ScaleSSE2X2(void *toPtr, void *fromPtr1, void *fromPtr2, void* xIndexPtr, void *xWeightPtr, void *yWeightPtr, uint32 length);

length      equ ebp+32
yWeightPtr  equ ebp+28
xWeightPtr  equ ebp+24
xIndexPtr   equ ebp+20
fromPtr2    equ ebp+16
fromPtr1    equ ebp+12
toPtr       equ ebp+8

SECTION .text align=16
cglobal ScaleSSE2X2
; reserve registers. eax, ecx, edx automatically available
    push ebp
    mov ebp, esp
    push ebx    ; yWeights, xIndexPtr
    push edi    ; scratch
    push esi    ; fromPtr3

    mov esi, [fromPtr1]
    mov edx, [fromPtr2]
    mov eax, [xWeightPtr]
    mov ebx, [yWeightPtr]
    mov ecx, [length]

; calculate y weights and cache
    movd xmm7, [ebx]                ; get 1-yDiff and yDiff
    pshuflw xmm7, xmm7, 01010000b   ; 1-yDiff, 1-yDiff, yDiff, yDiff
    pshufd xmm7, xmm7, 01000100b    ; duplicate

    mov ebx, [xIndexPtr]

    push ebp                        ; reuse frame ptr for toPtr
    mov ebp, [toPtr]                ; Cannot use parameter refs anymore

    shr ecx,1

    ; calculate first index
    mov edi, [ebx]                  ; index

    align 16
REPEATLOOPX2:

    ; load first and second set of weights into xmm3
    movdqa xmm3, [eax]              ; get 1-xDiff, xDiff, 1-xDiff, xDiff
    pmullw xmm3, xmm7               ; calculate F1, F2, F3, F4 (2)
    add eax, 16

    ; load first set of source pixels
    movq xmm0, [esi+edi]            ; xmm0 = fromPtr1 + index | fromPtr1 + index + 4
    movq xmm1, [edx+edi]            ; xmm1 = fromPtr2 + index | fromPtr2 + index + 4
    punpcklqdq xmm0, xmm1           ; combine all 4 pixels into xmm0

    sub edi, [ebx+4]                ; if the x index is the same then skip the second load
    jz SKIP

    ; calculate second index
    mov edi, [ebx+4]                ; index

    ; load second set of source pixels
    movq xmm4, [esi+edi]            ; xmm4 = fromPtr1 + index | fromPtr1 + index + 4
    movq xmm5, [edx+edi]            ; xmm5 = fromPtr2 + index | fromPtr2 + index + 4
    punpcklqdq xmm4, xmm5           ; combine all 4 pixels into xmm4

    movdqa xmm1, xmm0               ; copy to xmm1, xmm2
    pshufd xmm2, xmm0, 0xE4 
    movdqa xmm5, xmm4               ; copy to xmm1, xmm2
    pshufd xmm6, xmm4, 0xE4 

    jmp NEXT
align 16
SKIP:
    movdqa xmm1, xmm0               ; copy to xmm1, xmm2
    pshufd xmm2, xmm0, 0xE4 
    movdqa xmm4, xmm0               ; copy first pixel set xmm0 to second pixel set xmm4
    pshufd xmm5, xmm4, 0xE4         ; copy to xmm4, xmm6
    movdqa xmm6, xmm4               
NEXT:
;   prefetchnta [edx+edi+16]

    add ebx, 8

; calculate dest rgb values using color = a * F1 + b * F2 + c * F3 + d * F4

; extract b from both sets of pixels and combine into a single reg
    pand xmm0, [RGB_AND]            ; clear all but r values leaving b000
    pand xmm4, [RGB_AND]            ; clear all but r values leaving b000
    packssdw xmm0, xmm4             ; pack down to 16 bit values

    movdqa xmm4, [RGB_AND]          ; xmm4 is now free
    pmaddwd xmm0, xmm3              ; multiply and add to get temp1 = a * F1 + b * F2, temp2 = c * F3 + d * F4

; extract g
    psrld xmm1, 8                   ; rotate g to low bytes
    pand xmm1, xmm4                 ; extract g values g000
    psrld xmm5, 8                   ; rotate g to low bytes
    pand xmm5, xmm4                 ; extract g values g000
    packssdw xmm1, xmm5             ; pack down to 16 bit values

    pmaddwd xmm1, xmm3              ; multiply and add

; extract r
    psrld xmm2, 16                  ; rotate b to low bytes
    pand xmm2, xmm4                 ; extract b values b000
    psrld xmm6, 16                  ; rotate b to low bytes
    pand xmm6, xmm4                 ; extract b values b000
    packssdw xmm2, xmm6             ; pack down to 16 bit values

    pmaddwd xmm2, xmm3              ; multiply and add

;   Add temp1 and temp2 leaving us with rrrr xxxx rrrr xxxx
    psrld xmm0, 14                  ; scale back to range
    pshufd xmm3, xmm0, 00110001b    ; extract temp2
    paddd xmm0, xmm3                ; add back to temp1

    psrld xmm1, 14                  ; scale back to range
    pshufd xmm3, xmm1, 00110001b
    paddd xmm1, xmm3                ; add

    psrld xmm2, 14                  ; scale back to range
    pshufd xmm3, xmm2, 00110001b
    paddd xmm2, xmm3                ; add

;   recombine into 2 rgba values

    pslld xmm1, 8
    por xmm0, xmm1
    pslld xmm2, 16
    por xmm0, xmm2
    pshufd xmm0, xmm0, 00001000b    ; shuffle down

    movq [ebp], xmm0                ; output 32bit * 2
    add ebp, 8

    mov edi, [ebx]                  ; index

    sub ecx, 1
    jnz REPEATLOOPX2

; Cleanup

    pop ebp
    pop esi
    pop edi
    pop ebx
    mov esp, ebp
    pop ebp
    ret"
1009,"It's not secure because you delete the file with the port on. Finding open ports is easy. A better option is to bind only on localhost so that you can't connect from other computers at all. Figuring out the port is always going to be easy, so making that secret doesn't help. In fact it should be configurable so you can avoid port conflicts. Since you start the server from within the client, you can actually create the key in the client, and instead pass it in to the server at startup preferably via stdin. That way it doesn't have to exist on the file system at all. You probably want to use subprocess instead of os.system for that."
1010,"The important thing you want to enforce is that only the same local user can see the hello world. You're relying at least on the inability of any random user to listen in on someone else's sockets. read another user's files otherwise learn the secret execute random python code in your server And the inability for a remote attacker to connect to your socket. 1, 2 and 4 depend how well you've secured your system (no privilege elevation or random suid files lying around). 4 also depends on the security of flask and the rest of your python stack. Five can be broken, depending on how your firewall is configured (someone could use connection tracking to get your socket forwarded, even though it is bound to localhost). You'd be better off using unix domain sockets. The second is broken, because you chmod the file only after you've written to it. That gives a window for the attacker to open the file. In fact the attacker could even write to the file and execute arbitrary commands, which is why you should never use os.system, and you should use urlparse to build the url. The third is broken in two ways: the secret appears in the process list the server won't take the same time to compare strings that are mostly right and mostly wrong. The attacker can guess the length of the secret, and guess the secret letter by letter (timing attack)."
1012,"Only something litle, don't write the closing ?> , because if there is a whitespace after and you try to modifiy the header anywhere else, it won't work and you will have very very long to find the whitespace."
1013,"I see a couple of potential issues with regards to internationalization: pluralization is more complex than (qty == 1 ? singular : plural) . What about the value 0? Also in some languages, different plural forms are in use depending on the number . numbers should be formatted according to language, using appropriate separators concatenation (that you mention is done in main program) must be avoided because the order of words and phrases will often vary in translations in different languages I would advise to : localize translations using named parameters to be replaced: this solves the ordering issue, and avoids concatenation. format values, for number formatting and pluralization, using a separate function localized for each language replace parameters with formatted values in parameterized translations using a template engine: this should keep some potentially buggy regular expressions out of your code :) You may be interested in having a look at: JavaScript Internationalisation , a post by Matthew Somerville on 24 Ways jQuery-global , ""a jQuery plugin for the globalization of string, date, and number formatting and parsing"" and last but not least, the i18n API part of the Scalable JavaScript Application framework, which I designed for Legal-Box :) eric-brechemier/lb_js_scalableApp , the project home page on GitHub lb.core.Sandbox.js , check the i18n part of the API, methods starting with ""i18n."" I may be able to provide more practical suggestions if you show more of your code, especially at the ""top"", part of the main program."
1014,"This code looks fine to me for a toy project. I especially appreciate the long names for identifiers. Now, it could look better: with more comments. You should describe the intent (the why behind the how) and the expected use case for the function: type and range of values in parameters, one line to describe what it does, and one more paragraph for details if needed. my personal preference would be to use camelCase instead of underscore_between_words for long names. Although this is open to discussion . a little trick: end the if branch with return; to avoid nesting all remaining code in the else branch: function update_result_for(input, regexp_value) {
  var input_value   = input.val();
  var result_spans  = input.parent().children('span');        
  if(!input_value || !$('#regexp').val()) {
    result_spans.hide();
    return; // return as soon as possible to avoid deep nesting
  }
  // no need for else
  var regexp = new RegExp(regexp_value);
  var result = regexp.exec(input_value);
  // ...
} in the same vein, treat exceptional cases first and normal cases after. This is a useful convention which helps the reader, and the exception handling is usually shorter (or should be extracted to a separate function if longer) which avoids long runs of nested code: if (!result) {
  result_spans.filter("".not_ok"").show('fast');
  result_spans.filter("".ok"").hide();
  return;
}
// reduced nesting
var matched_string = result.shift();
// ... only use anonymous functions when you actually need a closure with access to the context: the intent of the function will be clearer with a name, you will avoid nesting, and may reuse the function more easily including for unit testing. There are many anonymous functions in your code, which makes it harder to understand: function(submatch, index) {
  return '$' + (index + 1) + ' = ' + submatch;
})

function(e) {
  if(e.which === 17) isCtrl=false;
}

function(e) {
  if(e.which === 17) isCtrl=true;
    if(e.which === 69 && isCtrl) {
    $('#regexp').focus();          
        return false;
    }
})

function() {
  $('#regexp').focus();
  $('span.result').hide();
  // ...
}

function() {
  update_result_for($(this), $('#regexp').val());
}

function() {
  $('input:not(#regexp)').each(function(i) {
    update_result_for($(this), $('#regexp').val());
  });          
}

function() {
  new_example = $('div#examples p:last').clone();
  new_example.children('input').attr('value', '');
  new_example.children('span').hide();
  new_example.insertBefore($(this));
  new_example.children(""input"").focus();
} once you define more than one function, you should wrap your code in a closure to avoid cluttering the global namespace, following the Module Pattern : (function(){
  // private scope for your code
}()); break long lines to fit in about 80 characters to avoid the need for scrolling horizontally in typical console windows and in code areas on this site: var regexp_to_highlight_matched_string =
  new RegExp('(.*)' + matched_string + '(.*)');
var regexp_to_highlight_matched_string_result =
  regexp_to_highlight_matched_string.exec(input_value);
var before_matched_string =
  regexp_to_highlight_matched_string_result[1];
var after_matched_string =
  regexp_to_highlight_matched_string_result[2];
var input_value_with_matched_string_highlighted =
  'matched: ' +
  before_matched_string +
  '<span class=""matched"">' + matched_string + '</span>' +
  after_matched_string; To go further, my advice would be to read "" JavaScript: The Good Parts "" and start using JSLint , in this order: this is an enlightening experience on your way to mastering JavaScript. The other way round, using the tool without understanding the mindset of its author, is very frustrating. I ran JSLint on your code. It has one critical complaint hidden among hair splittings: the declaration of new_example is missing, it is therefore a global variable which is susceptible to result in unexpected bugs. // var keyword added:
   var new_example = $('div#examples p:last').clone();"
1015,"Storing a Ruby app's settings. I have used code which looks a little like this in an app I'm working on: module App
  module Settings

    class << self
      attr_accessor :console, :file
    end

    self.console ||= true
    self.file    ||= []

  end
end I decided to use this method because I like the interface, I had the idea after reading the Singleton examples from Design Patterns in Ruby . I can then require 'app/settings' from any file in my app and read/write the settings p App::Settings.console
App::Settings.file << ""afile.rb""
p App::Settings.file etc... Is this a reasonable way to keep my settings in a single file? I feel I am unnecessarily repeating myself. Any ideas for DRYing?"
1017,"You could do it all in one step, like this. CREATE PROCEDURE dbo.IncrementArtViews (@Slug varchar(250)) AS

UPDATE a
SET ArtViews = ArtViews + 1
OUTPUT a.ArtID, a.ArtUserID, a.ArtTitle, a.ArtHtml, a.ArtDescription,
 a.ArtKeywords, a.ArtLicenseID, l.licTitle, a.ArtViews, a.ArtCreated, 
 a.ArtUpdated, s.SubID, s.SubTitle, c.CatID, c.CatTitle, sec.SecID, 
 sec.SecTitle, u.UsrDisplayName AS UserName
FROM dbo.Article a
 INNER JOIN dbo.Subcategory s ON a.ArtSubcategoryID = s.SubID
 INNER JOIN dbo.Category c ON s.SubCatID = c.CatID
 INNER JOIN dbo.[Section] sec ON c.CatSectionID = sec.SecID
 INNER JOIN dbo.[User] u ON a.ArtUserID = u.UsrID
 INNER JOIN dbo.License l ON a.ArtLicenseID = l.LicID
WHERE a.ArtSlugHash = CHECKSUM(@Slug)
 AND a.ArtSlug = @Slug
 AND a.ArtApproved = 1"
1018,"This looks like a good use for UNPIVOT. And you can use common table expressions to avoid repeating yourself . Like this: WITH DIAGS AS
(
    SELECT DISTINCT VisitID as ID, Diags
    FROM 
    (
        SELECT *
        FROM [AGH00]...[20110128 - AGH00#TXT]
    ) p
    UNPIVOT
    (
        Diags FOR DX IN
        (
            DX01, DX11, DX21, DX31
            , DX02, DX12, DX22, DX32
            , DX03, DX13, DX23, DX33
            , DX04, DX14, DX24, DX34
            , DX05, DX15, DX25, DX35
            , DX06, DX16, DX26, DX36
            , DX07, DX17, DX27, DX37
            , DX08, DX18, DX28, DX38
            , DX09, DX19, DX29, DX39
            , DX10, DX20, DX30, DX40
        )
    ) AS unpvt
),
A0 AS
(
    SELECT VisitID, DischDate, [Type], SubType
    FROM [AGH00]...[20110128 - AGH00#TXT]
),
AC AS
(
    SELECT VisitID, SUM(ChargsAmt) AS Charges
    FROM [AGH00]...[20110128 - AGH00Chg#TXT]
    GROUP BY VisitID
),
AP AS
(
    SELECT VisitID, SUM(Pmt) AS Payments
    FROM [AGH00]...[20110128 - AGH00Pmt#TXT]
    GROUP BY VisitID
)
VISITS AS
(
    SELECT SUBSTRING(A0.DischDate, 7, 4) + SUBSTRING(A0.DischDate, 1, 2) AS YYYYMM
        , A0.[Type]
        , A0.SubType
        , DIAGS.Diags
        , AC.Charges
        , AP.Payments
    FROM DIAGS
        LEFT JOIN A0 ON DIAGS.ID = A0.VisitID
        LEFT JOIN AC ON A0.VisitID = AC.VisitID
        LEFT JOIN AP ON A0.VisitID = AP.VisitID                
)
SELECT YYYYMM, [Type], SubType, Diags
    , COUNT(*) AS [Count]
    , SUM(Charges) AS Charges
    , SUM(Payments) AS Payments
FROM VISITS
GROUP BY YYYYMM, [Type], SubType, Diags
ORDER BY YYYYMM, [Type], SubType, Diags"
1019,"There is nothing really wrong with this but using a simple hash may be easier: module App
    @@settings = {
        :console => true,
        :file => []
    }
    def self.settings
        @@settings
    end
end Your following code would then become: p App.settings[:console]
App.settings[:file] << ""afile.rb""
p App.settings[:file] There are several advantages to this approach: Hashes are easy to serialise and store in files using yaml/json/etc. require 'yaml'
p App.settings.to_yaml You can reference App.settings in a local variable to avoid writing it out: s = App.settings
#do stuff with s Hash has many convenience methods for iterating over its values. App.settings.each do |key, value|
    #do something
end You can add to/update it succinctly using the merge! method. App.settings.merge! :console => false, :newsetting => 'value', :etc => '...' To get functionality like this in your method would require you to write lots of methods yourself. It's better to just use the built in functionality that Ruby has instead of reinventing the wheel."
1020,"Based on @david4dev solution, you can keep the old interface: module App
    @settings = {
        :console => true,
        :file => []
    }
    def @settings.method_missing(name, *a)
        name.to_s =~ /(.*)=/ ? self[$1.to_sym] = a[0] : self[name]
    end
    def self.settings
        @settings
    end
end

p App.settings.console
App.settings.file << ""afile.rb""
p App.settings.file Additionally you can use Settings as a constant, as in your original code: module App
    # ...
    def self.const_missing(name)
        name == :Settings ? @settings : super
    end
end

p App::Settings.console
App::Settings.file << ""afile.rb""
p App::Settings.file

require 'yaml'
p App::Settings.to_yaml"
1021,"Dao function using hibernate. I'm just wondering if the following is the best way to write a dao function.  Should I get the entity manager before the transaction and close it after the transaction every time?  Should I write transactions inside a dao? public void sendBack(Long requestId,String comments){
    EntityManager em = getEntityManager();
    em.getTransaction().begin();
    String update = ""update CsRequestReceivers set activeInd = :activeInd,sendBackComments=:comments where requestId = :requestId and activeInd = :oldActiveInd"";
    em.createQuery(update).setParameter(""activeInd"", 0l)
                          .setParameter(""comments"", comments)
                          .setParameter(""requestId"", requestId)
                          .setParameter(""oldActiveInd"", 1l)
                          .executeUpdate();
    em.getTransaction().commit();
    em.close();
}"
1022,"Design dilemma: extensibility vs simplicity. Here is my problem abstracted to Bird classes. I know that number of Bird s will increase on the future and new behaviors might be needed. With 10 Birds first design might not look so simple and lead to lots of duplicated code. On the other hand, second design can be perceived as ""class explosion"". Which of these two designs would be considered best-practice? Classic: #include <iostream>

class Bird
{
  public:
    virtual void Fly() const = 0;
    virtual void Speak() const = 0;
};

class Eagle : public Bird
{
  public:
    virtual void Fly() const
    {
      std::cout << ""Eagle shall fly now!"" << std::endl;
    }
    virtual void Speak() const
    {
      std::cout << ""Eagle speaking!"" << std::endl;
    }
};


class Penguin : public Bird
{
  public:
    virtual void Fly() const
    {
      std::cout << ""Penguin shall fly now!"" << std::endl;
    }
    virtual void Speak() const
    {
      std::cout << ""Penquin speaking!"" << std::endl;
    }
};

int main()
{
  std::cout << ""..."" << std::endl;
  Bird* bird = NULL;

  bird = new Eagle();
  bird->Fly();
  bird->Speak();
  delete bird; bird = NULL;

  bird = new Penguin();
  bird->Fly();
  bird->Speak();
  delete bird; bird = NULL;

  return 0;
} ""Better? #include <iostream>
#include <cassert>

class FlyStyle
{
  public:
    virtual void Fly() const = 0;
};

class FlyHigh : public FlyStyle
{
  virtual void Fly() const
  {
    std::cout << ""Fly high!"" << std::endl;
  }
};

class NoFly : public FlyStyle
{
  virtual void Fly() const
  {
    std::cout << ""No fly!"" << std::endl;
  }
};

class SpeakStyle
{
  public:
    virtual void Speak() const = 0;
};

class SpeakLoud : public SpeakStyle
{
  virtual void Speak() const
  {
    std::cout << ""Speak LAUD!!!!"" << std::endl;
  }
};

class NoSpeak : public SpeakStyle
{
  virtual void Speak() const
  {
    std::cout << ""No speaking!"" << std::endl;
  }
};

class SuperBird
{
  public:
    SuperBird(FlyStyle* fly, SpeakStyle* speak)
      : flystyle(fly),
      speakstyle(speak)
  {
    assert(NULL != flystyle);
    assert(NULL != speakstyle);
  }

    ~SuperBird() { delete flystyle; delete speakstyle;}

    virtual void Fly() const
    {
      flystyle->Fly();
    }
    virtual void Speak() const
    {
      speakstyle->Speak();
    }
  protected:
    FlyStyle* flystyle;
    SpeakStyle* speakstyle;
};

class SuperBirdFactory
{
  public:
    static SuperBird* createEagle()
    {
      return new SuperBird(new FlyHigh(), new SpeakLoud()); 
    }
    static SuperBird* createPenguin()
    {
      return new SuperBird(new NoFly(), new NoSpeak()); 
    }
};

int main()
{
  SuperBird* bird = NULL;

  bird = SuperBirdFactory::createEagle();
  bird->Fly();
  bird->Speak();
  delete bird; bird = NULL;

  bird = SuperBirdFactory::createPenguin();
  bird->Fly();
  bird->Speak();
  delete bird; bird = NULL;

  return 0;
}"
1023,"Create a view. Update a row in the view, and output the columns. CREATE VIEW dbo.ArticleView AS
    SELECT a.ArtID, a.ArtUserID, a.ArtTitle, a.ArtHtml, a.ArtDescription,
        a.ArtKeywords, a.ArtLicenseID, l.licTitle, a.ArtViews, a.ArtCreated, 
        a.ArtUpdated, s.SubID, s.SubTitle, c.CatID, c.CatTitle, sec.SecID, 
        sec.SecTitle, u.UsrDisplayName AS [UserName]
    FROM dbo.Article a
        INNER JOIN dbo.Subcategory s ON a.ArtSubcategoryID = s.SubID
        INNER JOIN dbo.Category c ON s.SubCatID = c.CatID
        INNER JOIN dbo.[Section] sec ON c.CatSectionID = sec.SecID
        INNER JOIN dbo.[User] u ON a.ArtUserID = u.UsrID
        INNER JOIN dbo.License l ON a.ArtLicenseID = l.LicID
GO

CREATE PROCEDURE dbo.IncrementArtViews (@Slug varchar(250)) AS
    UPDATE dbo.ArticleView
    SET ArtViews = ArtViews + 1
    OUTPUT ArtID, ArtUserID, ArtTitle, ArtHtml, ArtDescription,
        ArtKeywords, ArtLicenseID, licTitle, ArtViews, ArtCreated, 
        ArtUpdated, SubID, SubTitle, CatID, CatTitle, SecID, 
        SecTitle, [UserName]
    WHERE ArtSlugHash = CHECKSUM(@Slug)
        AND ArtSlug = @Slug
        AND ArtApproved = 1
GO"
1025,"The first one is definitely better. You should try to use as few classes as will get the job done and also favour lots of small methods over a few big methods. These will make your code easier to read, understand and maintain. I think you could improve on your first one a bit: #include <iostream>
using namespace std;

class Bird {
    public:
        void print(const char* str) {
            cout << str << endl;
        }
};

class Eagle : public Bird {
    public:
        void fly() {
            print(""Eagle shall fly now!"");
        }
        void speak() {
            print(""Eagle speaking!"");
        }
};          

int main() {
    Eagle* eagle = new Eagle();
    eagle->fly();
    eagle->speak();
    return 0;
} Basically, I'm saying 'An Eagle is a Bird' and would do the same with other birds. I'm keeping the specific parts (eg. what needs to be done for fly() and speak()) in the children classes (such as Eagle) and the general parts (eg. the ability to print to stdout) in the parent class (Bird)."
1026,"I really prefer the first as it's simpler. You can always mixin other interfaces later: class Predator {
   public:
      virtual void attack();
}

class Eagle: public Bird, public Predator {
}"
1027,"You should really look at the java validation standard, specifically JSR303. Hibernate Validator is the reference implementation, take a look at their documentation . To provide a simple example public class Foo {
    @NotNull(message = ""property bar must be provided"")
    @Pattern(regexp = ""[a-z0-9]"", message = ""property bar must contain only letters and numbers"")
    private String bar;
}

ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
validator = factory.getValidator();

Foo foo = new Foo();

Set<ConstraintViolation<Foo>> constraintViolations = validator.validate(foo);
// now you have a Set of ConstraintViolations, if something is not working Use the existing standards, no need to reinvent the wheel."
1028,"The fact that you have two completely different outputs from these two examples should be a huge clue as to the answer. Eagle shall fly now!
Eagle speaking!
Penguin shall fly now!
Penguin speaking! vs Fly high!
Speak LAUD!!!!
No fly!
No speaking! If you want your Penguin class to fly like a Penguin, whatever that means, then you're probably right to go with the first example. If you want all non-flying birds to act the same way as each other when calling fly() , the second is probably better. That said, I doubt I'd go as far as using a Factory class. I would rename SuperBird as Bird and continue to derive Eagle and Penguin from that, passing the relevant FlyStyle and SpeakStyle to the superclass's constructor, such as class Penguin : public Bird
{
    public:
        Penguin() : Bird(new NoFly(), new NoSpeak()) {}
} This is attempting to follow Single Responsibility Principle , by saying ""if I want to change the action of all birds which do not fly, I shall change the NoFly class accordingly, but if I want to make a Penguin fly, I will change the Penguin class."" The Factory Pattern is more appropriate to the opposing use case, where your calling code doesn't know or care which type of bird you wish to instantiate but does know enough information for the Factory class to make that decision, such as bird = BirdFactory::create(CAN_FLY, MAKES_NOISE);
bird.Fly();
bird.Speak();"
1029,"First option is best. It is readable and KISS-compliant. If you ever need to share a flight implementation, you can write a mixin. Also, unrelated, you should look into RAII and get rid of these assert/new/delete."
1030,"Suggestions for a Profiler class in Python. Here's what I've right now: #!/usr/bin/env python
# -*- coding: utf-8 -*-
import functools
import math
import time

class Timer(object):
    def __init__(self):
        self.__values = []

    def start(self):
        self.__start = time.time()

        return self

    def stop(self):
        self.__values.append(int(round((time.time() - self.__start) * 1000)))
        self.__start = None

        return self

    @property
    def average(self):
        return sum(self.__values) / len(self.__values) 

    @property
    def deviation(self):
        if self.average:
            return math.sqrt(sum((v - self.average) ** 2 for v in self.__values) / self.runs)

        return 0

    @property
    def elapsed(self):
        return sum(self.__values)

    @property
    def runs(self):
        return len(self.__values)

class Profiler(object):
    __timers = {}

    @staticmethod
    def info(timer_id):
        if not Profiler.__timers.has_key(timer_id):
            raise Exception('Timer not started')

        return Profiler.__timers[timer_id]

    @staticmethod
    def profile(f):
        @functools.wraps(f)
        def wrap(self=None, *args, **kwargs):
            method = self.__class__.__name__ + '.' + f.func_name if self \
                     else f.func_name

            Profiler.start(method)
            r = f(self, *args, **kwargs) if self else f(*args, **kwargs)
            Profiler.stop(method)

            return r

        return wrap

    @staticmethod
    def reset(timer_id):
        Profiler.__timers[timer_id] = Timer()

    @staticmethod
    def start(timer_id):
        if not Profiler.__timers.has_key(timer_id):
            Profiler.reset(timer_id)

        Profiler.__timers[timer_id].start()

    @staticmethod
    def stop(timer_id):
        if not Profiler.__timers.has_key(timer_id):
            raise Exception('Timer not started')

        Profiler.__timers[timer_id].stop()

if __name__ == '__main__':
    class Test(object):
        def isPrime(self, n):
            if n < 2 or (n % 2) == 0:
                return n == 2

            f = 3

            while (f * f) <= n:
                if (n % f) == 0:
                    return False

                f += 2

            return True

        @Profiler.profile
        def run(self):
            return filter(self.isPrime, range(1, 1000001))

    test = Test()

    for x in range(5):
        test.run()

    p = Profiler.info('Test.run')
    print 'runs = %d' % p.runs
    print 'elapsed = %d ms' % p.elapsed
    print 'average = %d ms' % p.average
    print 'deviation = %d ms' % p.deviation I'm looking for suggestions to improve it and you're welcome to suggest. :) The Profiler.profile decorator supports both functions and class methods. I've written a small test to demonstrate my profiler."
1031,"Collecting friends' wall posts. Originally, I had everything in the base method #read_wall(). I'm not sure what happened with the array, but when I tried: array = result + second + third + fourth . I was left with data from only the original result. So I created this working disaster. Can you please help me refactor this? # Gets the user's Wall
      def read_wall(fbuserid)
         result ||= graph.get_connections(fbuserid, 'feed')
      end

  def second_wall(fbuserid)
     result ||= graph.get_connections(fbuserid, 'feed')
     second ||= result.next_page
  end

  def third_wall(fbuserid)
       result ||= graph.get_connections(fbuserid, 'feed')
       second ||= result.next_page
       third ||= second.next_page
  end

  def fourth_wall(fbuserid)
        result ||= graph.get_connections(fbuserid, 'feed')
        second ||= result.next_page
        third ||= second.next_page
        fourth ||= third.next_page
   end

  # Collects your friends' wall Posts and puts the IDs into an array
  def get_post_ids(fbuserid)
     x ||= read_wall(fbuserid)
     var = []
     for i in 0..25
        if find_nil(x, [i,'id']).nil? == false
           var << x[i]['id']
        end
     end

     second_wall ||= second_wall(fbuserid)
       for i in 0..25
          if find_nil(second_wall, [i,'id']).nil? == false
             var << second_wall[i]['id']
          end
       end

      third_wall ||= third_wall(fbuserid)
        for i in 0..25
           if find_nil(third_wall, [i,'id']).nil? == false
              var << third_wall[i]['id']
           end
        end

      fourth_wall ||= fourth_wall(fbuserid)
         for i in 0..25
            if find_nil(fourth_wall, [i,'id']).nil? == false
                 var << fourth_wall[i]['id']
            end
         end

      @get_post_ids = var
  end"
1032,"If there will be different kinds of birds that share a flying or speaking style (""strategy"" is what the Gang of Four calls this), then the second design makes sense. If all birds will have unique flying and speaking styles, stick with the first. If you don't know the answer yet, stick with the first design. In the absence of information, always prefer the simplest solution. It's easier to extend a simple design later than it is to simplify a needlessly extensible one."
1034,"This first one is simpler and you might want to use it if you do not need a lot of flexibility. If you ask yourself this question, I think it means you might need flexibility. In this little example, the first method indeed have fewer classes but in general, if you need a lot of different combinations it might no be the case anymore. Take the second example, if your ""SuperBird"" is extended be compound of 5 different objects and for each one you have defined 5 abstract types: doing the same thing for the first example would need 3000 classes with a lot of boilerplate repeated in many classes. See the Gang of Four principle: favor object composition over class inheritance/"
1035,"It is certainly better. You can improve it further: Use early exits to reduce arrow code. Use a JSON initializer for the result. Prefix boolean names with 'is'. Fix the 'user.lastEdited' bug. . function processResponse(data) {
    if (!data.query || !data.query.users || !data.query.users[0]) return {};

    var user = data.query.users[0];

    return {
        isInvalid: 'invalid' in user,
        isMissing: 'missing' in user,
        groups: user.groups || [],
        editCount: ('editcount' in user) ? user.editcount : null,
        registration: ('registration' in user) ? parseDate(user.registration) : null,
        isBlocked: 'blockexpiry' in user,
        gender: ('gender' in user && user.gender != 'unknown') ? user.gender : null,
        lastEdited: (data.query.usercontrib
                             && data.query.usercontribs[0] 
                             && data.query.usercontribs[0].timestamp)
                        ? parseDate(data.query.usercontribs[0].timestamp) : null
    };
}"
1036,"def fourth_wall(fbuserid)
  result ||= graph.get_connections(fbuserid, 'feed')
  second ||= result.next_page
  third ||= second.next_page
  fourth ||= third.next_page
end A couple of problems here: result , second , third and fourth are all local variables. This means they won't persist after the method call is finished and they will never persist after the method call is finished. So: You don't need to set the fourth variable as you never use it in the method and it won't be available after You don't need ||= as the variables will never be set anyway. I.e. your code is equivalent to this: def fourth_wall(fbuserid)
  result = graph.get_connections(fbuserid, 'feed')
  second = result.next_page
  third = second.next_page
  third.next_page
end Or just: def fourth_wall(fbuserid)
  graph.get_connections(fbuserid, 'feed').next_page.next_page.next_page
end The same goes for the other wall methods. Further your fourth_wall method contains the entire code of the third_wall method (which contains the entire second_wall method and so on). This is bad style. Just let the methods call each other: def fourth_wall(fbuserid)
  third_wall(fbuserid).next_page
end (And again the same for the other wall methods of course) However since you seem to only call those functions together (i.e. you never use fourth_wall without having used third_wall before) it seems much more sensible to have one method which returns all for walls: def four_walls(fbuserid)
  first = graph.get_connections(fbuserid, 'feed')
  # For more than 4 pages the following should be replaced by a loop
  second = first.next_page
  third = second.next_page
  fourth = third.next_page
  [first, second, third, fourth]
end In your get_post_ids method you're repeating the same code four times. This is again bad style. You're also creating an empty array and then appending to it from a loop. This is often (but not always) a sign of bad code in ruby as well. Also using x and var as variable names is not a good idea and having a variable name that starts with @get_ just seems weird and confusing. I'm also assuming that your find_nil method is supposed to check whether either wall[i] or wall[i]['id'] are nil. There are better ways to do this. In this case you can use map on the walls and then the numbers from 0 to 25 to create an array of user ids for each wall, then use compact to remove nil s and flatten to turn the array into one single array rather than an array of four subarray. Thus your whole get_post_ids method can be replaced with this: def retrieve_post_ids(fbuserid)
  walls = four_walls(fbuserid)
  @post_ids = walls.map do |wall|
    # Iterate over the first 26 entries in wall
    (0..25).map do |i|
      wall[i] && wall[i]['id']
     end.compact
  end.flatten
end Though if the wall s allow slicing similar to arrays, this would be better: def retrieve_post_ids(fbuserid)
  walls = four_walls(fbuserid)
  @post_ids = walls.map do |wall|
    # Iterate over the first 26 entries in wall
    wall[0..25].map do |entry|
      entry && entry['id']
     end.compact
  end.flatten
end If the wall never contains more than 26 elements, you don't even need the [0..25] and you can just use well.map . However it occurs to me that the reason you needed the nil check at all was that each wall contains 25 elements and you got nil for index 25 because you did not realize that ranges using .. are inclusive. In that case you can just use: def retrieve_post_ids(fbuserid)
  walls = four_walls(fbuserid)
  @post_ids = walls.map do |wall|
    # Iterate over the entries in wall
    wall.map do |entry|
      entry['id']
     end
  end.flatten
end"
1037,"Reading file contents into a string. Option 1 - nice and simple private void GetFileReady()
{
    private StringBuilder fileContents = new StringBuilder();
    using (var sr = new StreamReader(""C:\A big file.txt""))
    {
        fileContents.Append(sr.ReadToEnd());              
    }
} Option 2 - less simple private void GetFileReady2()
{
   private StringBuilder fileContents = new StringBuilder();
   const int bufferSize = 1024;
   var buffer = new Char[bufferSize];
   var count = bufferSize;

   using (var sr = new StreamReader(""C:\A big file.txt""))
   {                
       while (count > 0)
       {
           count = sr.Read(buffer, 0, bufferSize);
           fileContents.Append(buffer, 0, count);
       }
   }
} Would option 2 be better for something esoteric like memory allocation?"
1038,"In my opinion, a better approach (along similar lines) is to avoid abstract base classes and instead use generic ""policy"" classes. You informally define an interface for each behaviour, and mix them into the class as template parameters. This avoids the need for dynamic memory allocation, and removes the overhead of virtual function calls; everything is resolved at compile time. Your example could be something like this: #include <iostream>

// Flying styles must have interfaces compatible with this
// struct FlyStyle
// {
//    void Fly() const;
// };

struct FlyHigh
{
  void Fly() const
  {
    std::cout << ""Fly high!"" << std::endl;
  }
};

struct NoFly
{
  void Fly() const
  {
    std::cout << ""No fly!"" << std::endl;
  }
};

// Speaking styles must have interfaces compatible with this
// struct SpeakStyle
// {
//     void Speak() const;
// };

struct SpeakLoud
{
  void Speak() const
  {
    std::cout << ""Speak LAUD!!!!"" << std::endl;
  }
};

struct NoSpeak
{
  void Speak() const
  {
    std::cout << ""No speaking!"" << std::endl;
  }
};

template <class FlyStyle, class SpeakStyle>
class SuperBird
{
  public:
    void Fly() const
    {
      flystyle.Fly();
    }
    void Speak() const
    {
      speakstyle.Speak();
    }
  private:
    FlyStyle flystyle;
    SpeakStyle speakstyle;
};

typedef SuperBird<FlyHigh, SpeakLoud> Eagle;
typedef SuperBird<NoFly, NoSpeak> Penguin;

int main()
{
  Eagle eagle;
  eagle.Fly();
  eagle.Speak();

  Penguin penguin;
  penguin.Fly();
  penguin.Speak();
}"
1039,"I don't think there's a significant difference between your two options when it comes to memory allocations.  In both cases, you're reading the entire file into memory, which trumps any minor differences that might exist in the number of objects allocated by the two options. (Though both options are also immediately discarding those contents since they are only stored in local variables, but I'm assuming that this is just a highly simplified example.) If you're concerned about memory consumption when using a big file, you need to not read in the entire file all at once.  Instead, you should load chunks out of the file as needed by your application, and discard them when no longer needed so the memory can be reclaimed."
1040,"Is the goal to get a string containing the content of the file? or to add the content of a file to an existing StringBuilder? if it's the former then Option 1 can drop the string builder altogether ... or better yet. string value = File.ReadAllText(""C:\A big file.txt""); if it's the latter then you might want to think about using StringBuilder.EnsureCapacity() to avoid the overhead of resizing the buffer more then it needs to."
1041,"Database design for an online learning application. It is an online learning application with different types of learnable items, that different users learn. The users learn by spaced repetition (once right, wait a couple days, ask again), success is mirrored in stages and mistakes made. I intend to use this for scientific data collection in the near future, so there is one table especially, user_terms_answers where data amasses at a granularity not currently used by the application. I especially had trouble with figuring out how to arrange my learnable types, and I'm not sure if I chose the optimal solution. Since this is potentially not understood just from looking at the chart, the two basic types are: known  unknown : What year did Thomas Edison die?  [1931] - one question & one answer cloze tests or gap texts : Slow loris are of the genus [Nycticebus] and of the subfamily [Lorinae] - one question & many answers ! My schema The part in gray ships with the TankAuth component of CodeIgniter and I'm hoping that this is properly done already. Database schema In response to a now-gone comment by l0bo, I visualized this in SchemaSpy as well. Common queries These the views that I have so far, they reflect quite well what the application will usually want. They also reflect how I run into trouble with the way I chose to implement ""languages"". CREATE VIEW `retrieve_user_term_or_gap` AS
SELECT 
  u.id, u.learnable_id, u.user_id, u.stage, u.mistakes, u.time_due, u.added,
  terms.language, terms.field, terms.known, terms.unknown, terms.hint,
  gaps.cloze_id, gaps.gap,
  c.language AS cloze_language, c.field AS cloze_field, c.cloze, 
  c.hint AS cloze_hint -- this is bad, not 3NF
FROM
  user_terms AS u
LEFT JOIN learnables AS l ON u.learnable_id = l.id
LEFT JOIN terms ON l.id = terms.learnable_id
LEFT JOIN gaps ON l.id =  gaps.learnable_id 
LEFT JOIN clozetests AS c ON c.id = gaps.cloze_id

CREATE VIEW `how_many_due` AS
SELECT COUNT(id) FROM user_terms
WHERE stage < 5 AND DATE(time_due) <= CURDATE()


CREATE VIEW `due_terms` AS
SELECT 
  u.id, u.learnable_id, u.user_id, u.stage, u.mistakes, u.time_due, u.added,
  terms.language, terms.field, terms.known, terms.unknown, terms.hint,
  gaps.cloze_id, gaps.gap,
  c.language AS cloze_language, c.field AS cloze_field, c.cloze, 
  c.hint AS cloze_hint -- this is bad, not 3NF
FROM
  user_terms AS u
LEFT JOIN learnables AS l ON u.learnable_id = l.id
LEFT JOIN terms ON l.id = terms.learnable_id
LEFT JOIN gaps ON l.id =  gaps.learnable_id 
LEFT JOIN clozetests AS c ON c.id = gaps.cloze_id
WHERE DATE(u.time_due) <= CURDATE() AND u.stage < 5 
ORDER BY terms.language, terms.field, u.id"
1043,"Expanding sizes between given values. This a very simple function to expand the sizes between the given values. For instance, if the input variable is ""S-XL"" then the function returns ""S, M, L, XL"". Basically I'm not happy with this function.  I think it's too complex for its purpose. function sizexpander($sizes) {
    $sizearray=Array(""XS"", ""S"", ""M"", ""L"", ""XL"", ""XXL"", ""XXXL"");
    $size1=array_search(strstrb($sizes, ""-""), $sizearray);
    $size2=array_search(substr(strstr($sizes, ""-""),1), $sizearray);
    while ($size1 <= $size2) {
        $prodsizes.= $sizearray[$size1]."", "";
        $size1++;
    }
    return substr($prodsizes, 0, -2);
}

function strstrb($h,$n){
    return array_shift(explode($n,$h,2));
}"
1044,"You can use the function array_slice to take the subarray which contains the sizes from $size1 to size2 . And then use implode to turn this subarray into a comma-separated string. This will simplify your algorithm. You can also just use explode instead of substr and strstr to split the range string into its parts. In addition I would recommend changing the variable names of $size1 and $size2 . To me the name $size1 suggests that the variable contains the actual size while in fact it contains its index. Something like index_of_size1 or index_from might be more appropriate. If I were to write this function, it'd look something like this: function sizexpander($size_range) {
    $sizearray=Array(""XS"", ""S"", ""M"", ""L"", ""XL"", ""XXL"", ""XXXL"");
    list($size_from, $size_to) = explode(""-"", $size_range);
    $index_from = array_search($size_from, $sizearray);
    $index_to = array_search($size_to, $sizearray);
    $subsizes = array_slice($sizearray, $index_from, $index_to-$index_from+1);
    return implode("", "", $subsizes);
}"
1045,"Hibernate proxy converter for GWT. Here's a class that converts Hibernate proxies to normal classes. This is useful with GWT for example, when sending objects loaded from database to the GWT client.
Please review it. package ru.minogin.core.server.hibernate;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.HashSet;
import java.util.IdentityHashMap;
import java.util.LinkedHashMap;
import java.util.LinkedHashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.TreeSet;

import org.apache.log4j.Logger;
import org.hibernate.collection.PersistentBag;
import org.hibernate.collection.PersistentList;
import org.hibernate.collection.PersistentMap;
import org.hibernate.collection.PersistentSet;
import org.hibernate.collection.PersistentSortedSet;
import org.hibernate.proxy.HibernateProxy;
import org.hibernate.proxy.LazyInitializer;

import ru.minogin.core.client.bean.Bean;
import ru.minogin.core.server.reflection.ReflectionUtils;

/**
 * Thread-safety: this class in not thread-safe.
 *
 * @author Andrey Minogin
 * @version 1.0, 02/28/11
 *
 */
public class Dehibernator {
    private static final Logger logger = Logger.getLogger(Dehibernator.class);

    private IdentityHashMap<Object, Object> processed;

    @SuppressWarnings(""unchecked"")
    public <T> T clean(T object) {
        processed = new IdentityHashMap<Object, Object>();

        logger.debug(""Cleaning: "" + (object != null ? object.getClass() : null));
        return (T) doClean(object);
    }

    @SuppressWarnings(""unchecked"")
    private Object doClean(Object dirty) {
        logger.debug(""Do clean: "" + (dirty != null ? dirty.getClass() : null));

        if (dirty == null)
            return null;

        if (processed.containsKey(dirty)) {
            logger.debug(""Object already cleaned, skipping."");

            return processed.get(dirty);
        }

        if (isPrimitive(dirty)) {
            logger.debug(""Object is primitive, skipping."");

            return dirty;
        }

        if (dirty instanceof PersistentList) {
            logger.debug(""Object is a PersistentList"");

            PersistentList dirtyList = (PersistentList) dirty;
            List<Object> cleanList = new ArrayList<Object>();
            processed.put(dirtyList, cleanList);
            if (dirtyList.wasInitialized()) {
                for (Object value : dirtyList) {
                    cleanList.add(doClean(value));
                }
            }
            return cleanList;
        }

        if (dirty instanceof PersistentBag) {
            logger.debug(""Object is a PersistentBag"");

            PersistentBag dirtyList = (PersistentBag) dirty;
            List<Object> cleanList = new ArrayList<Object>();
            processed.put(dirtyList, cleanList);
            if (dirtyList.wasInitialized()) {
                for (Object value : dirtyList) {
                    cleanList.add(doClean(value));
                }
            }
            return cleanList;
        }

        if (dirty instanceof PersistentSortedSet) {
            logger.debug(""Object is a PersistentSortedSet"");

            PersistentSortedSet dirtySet = (PersistentSortedSet) dirty;
            Set<Object> cleanSet = new TreeSet<Object>();
            processed.put(dirtySet, cleanSet);
            if (dirtySet.wasInitialized()) {
                for (Object value : dirtySet) {
                    cleanSet.add(doClean(value));
                }
            }
            return cleanSet;
        }

        if (dirty instanceof PersistentSet) {
            logger.debug(""Object is a PersistentSet"");

            PersistentSet dirtySet = (PersistentSet) dirty;
            Set<Object> cleanSet = new HashSet<Object>();
            processed.put(dirtySet, cleanSet);
            if (dirtySet.wasInitialized()) {
                for (Object value : dirtySet) {
                    cleanSet.add(doClean(value));
                }
            }
            return cleanSet;
        }

        if (dirty instanceof PersistentMap) {
            logger.debug(""Object is a PersistentMap"");

            PersistentMap dirtyMap = (PersistentMap) dirty;
            Map<Object, Object> cleanMap = new LinkedHashMap<Object, Object>();
            processed.put(dirtyMap, cleanMap);
            if (dirtyMap.wasInitialized()) {
                for (Object key : dirtyMap.keySet()) {
                    Object value = dirtyMap.get(key);
                    cleanMap.put(doClean(key), doClean(value));
                }
            }
            return cleanMap;
        }

        if (dirty instanceof List) {
            logger.debug(""Object is a List"");

            List<Object> dirtyList = (List<Object>) dirty;
            List<Object> cleanList = new ArrayList<Object>();
            processed.put(dirtyList, cleanList);
            for (Object value : dirtyList) {
                cleanList.add(doClean(value));
            }
            return cleanList;
        }

        if (dirty instanceof LinkedHashMap) {
            logger.debug(""Object is a LinkedHashMap"");

            Map<Object, Object> dirtyMap = (Map<Object, Object>) dirty;
            Map<Object, Object> cleanMap = new LinkedHashMap<Object, Object>();
            processed.put(dirtyMap, cleanMap);
            for (Object key : dirtyMap.keySet()) {
                Object value = dirtyMap.get(key);
                cleanMap.put(doClean(key), doClean(value));
            }
            return cleanMap;
        }

        if (dirty instanceof HashMap) {
            logger.debug(""Object is a HashMap"");

            Map<Object, Object> dirtyMap = (Map<Object, Object>) dirty;
            Map<Object, Object> cleanMap = new HashMap<Object, Object>();
            processed.put(dirtyMap, cleanMap);
            for (Object key : dirtyMap.keySet()) {
                Object value = dirtyMap.get(key);
                cleanMap.put(doClean(key), doClean(value));
            }
            return cleanMap;
        }

        if (dirty instanceof LinkedHashSet<?>) {
            logger.debug(""Object is a LinkedHashSet"");

            Set<Object> dirtySet = (LinkedHashSet<Object>) dirty;
            Set<Object> cleanSet = new LinkedHashSet<Object>();
            processed.put(dirtySet, cleanSet);
            for (Object value : dirtySet) {
                cleanSet.add(doClean(value));
            }
            return cleanSet;
        }

        if (dirty instanceof HashSet<?>) {
            logger.debug(""Object is a HashSet"");

            Set<Object> dirtySet = (HashSet<Object>) dirty;
            Set<Object> cleanSet = new HashSet<Object>();
            processed.put(dirtySet, cleanSet);
            for (Object value : dirtySet) {
                cleanSet.add(doClean(value));
            }
            return cleanSet;
        }

        if (dirty instanceof TreeSet<?>) {
            logger.debug(""Object is a TreeSet"");

            Set<Object> dirtySet = (TreeSet<Object>) dirty;
            Set<Object> cleanSet = new TreeSet<Object>();
            processed.put(dirtySet, cleanSet);
            for (Object value : dirtySet) {
                cleanSet.add(doClean(value));
            }
            return cleanSet;
        }

        if (dirty instanceof HibernateProxy) {
            logger.debug(""Object is a HibernateProxy"");

            HibernateProxy proxy = (HibernateProxy) dirty;
            LazyInitializer lazyInitializer = proxy.getHibernateLazyInitializer();
            if (lazyInitializer.isUninitialized()) {
                logger.debug(""It is uninitialized, skipping"");

                processed.put(dirty, null);
                return null;
            }
            else {
                logger.debug(""It is initialized, getting implementati"");

                dirty = lazyInitializer.getImplementation();
            }
        }

        if (dirty instanceof Bean) {
            logger.debug(""Object is a Bean"");

            Bean bean = (Bean) dirty;
            processed.put(bean, bean);
            for (String property : bean.getPropertyNames()) {
                bean.set(property, doClean(bean.get(property)));
            }
            return bean;
        }

        processed.put(dirty, dirty);
        for (String property : ReflectionUtils.getProperties(dirty)) {
            logger.debug(""Processing property "" + property);

            Object value = ReflectionUtils.get(dirty, property);
            ReflectionUtils.setIfPossible(dirty, property, doClean(value));
        }
        return dirty;
    }

    private boolean isPrimitive(Object object) {
        if (object instanceof String)
            return true;

        if (object instanceof Date)
            return true;

        if (object instanceof Enum)
            return true;

        Class<? extends Object> xClass = object.getClass();
        if (xClass.isPrimitive())
            return true;

        return false;
    }
}"
1046,"Start with the first, refactor to the second. The interface is the same in both situations. All of the code which is using these classes should not care which method you choose to implement. You should implement the first, simpler method. When it becomes useful, you should apply other techniques. For example, if you find yourself having a lot of flightless birds you might implement a FlightlessBird class which has the common logic. When speaking becomes too complicated, you  might want to break it out into its own object. In other words, implement parts of the second version as they become neccessary. Your second version is attempting to have maximum flexibility. Attempting to do that has a strange tendency to result in lots of obtuse code and still lack the flexibility that you need. Therefore, in most situations its better to wait until you have a better idea of what you actually need rather then guessing ahead of time. There is no significant benefit to implementing the flexible version now. There are definite benefits to implementing the simple version now. You only a basic idea of what the code will be required to do later. Attempting to implement that now will only produce a mess."
1047,"doClean() is crying out for decomposition. Compare if (dirty instanceof PersistentList) {
    logger.debug(""Object is a PersistentList"");

    PersistentList dirtyList = (PersistentList) dirty;
    List<Object> cleanList = new ArrayList<Object>();
    processed.put(dirtyList, cleanList);
    if (dirtyList.wasInitialized()) {
        for (Object value : dirtyList) {
            cleanList.add(doClean(value));
        }
    }
    return cleanList;
} to if (dirty instanceof List) {
    logger.debug(""Object is a List"");

    List<Object> dirtyList = (List<Object>) dirty;
    List<Object> cleanList = new ArrayList<Object>();
    processed.put(dirtyList, cleanList);
    for (Object value : dirtyList) {
        cleanList.add(doClean(value));
    }
    return cleanList;
} The differences are The types in the debug messages. The types in the casts. The types of the clean replacements. The check for PersistentList.wasInitialized() . Similar patterns exist for maps, sets, sorted sets, etc. and can all be refactored into new methods, each handling a different collection interface. if (dirty instanceof List) {
    return cleanList((List)dirty);
}

...

private cleanList(List dirty) {
    logger.debug(""Object is a List"");
    List clean = new ArrayList();
    processed.put(dirty, clean);
    if (shouldCopyValues(dirty)) {
        for (Object value : dirty) {
            clean.add(doClean(value));
        }
    }
    return clean;
}

private shouldCopyValues(Collection dirty) {
    return (!(dirty instanceof Persistent) || ((Persistent)dirty).wasInitialized());
} Note that there's no longer a need for a separate check in doClean() for PersistentList . One minor optimization here would be to calculate the size of the needed list ahead of time, setting it to zero if it's an uninitialized PersistentList . For the more complicated Map and Set types, you'll need a way to map from the dirty class to the appropriate clean class. I recommend putting this logic into cleanSet() and cleanMap() instead of doClean() . You could take the same approach as you did above, using a series of instanceof tests, or you could use a map. Actually, only the persistent varieties need to use a different class type, so you may as well just check for those three specifically and otherwise create a new instance of the dirty collection. Note: when copying values for Map s you can use Map.entrySet() to get the key/value pairs as Map.Entry objects instead of calling Map.get() on each key. It's a minor speed improvement."
1048,"Let's see: you've gotten votes for the first and for the second. Hmm...how can I argue with both. Oh, I've got it: both designs must be wrong! From an abstract viewpoint, you have nothing to justify the Bird/Eagle/Penguin classes as classes at all. In particular, even though you've defined a couple of virtual functions, the functions aren't really doing anything different at all. In all cases, they do exactly the same thing -- print out a string. As such, you should probably just create birds, and when you create a bird you should specify the ""flyingstyle"" and ""speakingstyle"" as arguments to the constructor: #include <string>
#include <iostream>

class bird { 
    std::string movingstyle;
    std::string speakingstyle;
public:
    bird(std::string const &ms, std::string const &ss) 
        : movingstyle(ms), speakingstyle(ss)
    {}

    void speak() { std::cout << speakingstyle << ""\n""; }
    void move() { std::cout << movingstyle << ""\n""; }
};

int main() {
    bird birds[2] = {
        bird(""Eagle Flying"", ""Eagle speaking""), 
        bird(""Penguin swimming"", ""Penguin speaking"")
    };

    for (int i=0; i<2; i++) {
        birds[i].speak();
        birds[i].move();
    }
    return 0;
} Reserve separate classes for objects that truly have different behavior, not the same behavior with different values. I'd also note that I've halfway-repaired a basic flaw in your original hierarchy. By including ""fly"" in your base class, you've asserted that all birds can fly -- an outright falsehood. Here I've changed that the more abstract concept ""move"" instead. With this, you can have Penguins that swim, Ostriches that run, and Eagles that fly. Something similar should probably be done with the ""speak"". Some birds don't make sounds, so you should consider whether you want something like: class bird {};

class speaking_bird : public bird {
public: 
    virtual void speak() = 0;    
};

class silent_bird : public bird {}; This correctly models the fact that some birds ""speak"" and others don't. It also has a fundamental difference in behavior between ""speaking bird"" and ""silent bird"" that justifies using inheritance. Alternatively, you could assert in the design that all birds can speak, but in the implementation say that some birds (that you can I know can't speak) should just never be asked to speak: class bird {
    bool silent;
public:
    void speak() { if (silent) throw runtime_error(""Cannot speak""); }
}; There's a fair basis for saying this is a kludge, but in some cases, it's worth avoiding creating extra levels of inheritance (and such) just to cover obscure corner cases that you'll probably never care about in real use anyway. At the same time, this can lead to littering other code with checks for those corner cases to avoid invoking functions that won't work, and you'd generally rather avoid that as well. As such, you need to look at the specific situation to decide which is the least of the available evils."
1049,"My implementation would be pretty much the same as yours, but removing the foreach loop.  It's not required as array_slice can do the job with less code. function sizexpander($sizes)
{
     //These should be in order!
     $range = array(""XS"", ""S"", ""M"", ""L"", ""XL"", ""XXL"", ""XXXL"");

     //Split them into 2 segments, min / max + convert to upper
     $keys = explode(""-"",strtoupper($sizes));

     //Get the initial index of min
     $min = array_search($keys[0],$range);
     $max = array_search($keys[1],$range);

     //Slice the array and implode.
     return implode("","",array_slice($range,$min,($max - $min) + 1));
} The main problem you had was that you had created a second function using string searching to find your segments.  This has been replaced by explode which, as long as there is only ever 1 delimiter, then this would suffice. Also, the while statement has been revoked, along with the string concatenation and been replaced with implode, which takes the found segments of the sizearray and implode them by a delimiter."
1050,"Option A: function sizexpander($sizes) {
    $sizeArray = array(""XS"", ""S"", ""M"", ""L"", ""XL"", ""XXL"", ""XXXL"");
    list($minSize, $maxSize) = split('-', $sizes);

    $minIndex = array_search($minSize, $sizeArray);
    $maxIndex = array_search($maxSize, $sizeArray);
    return join(', ', array_slice($sizeArray, $minIndex, ++$maxIndex - $minIndex));
} You can do this with array_filter but it's not as efficient. If you're uncomfortable with array operations or find the code unclear (i.e. not self documenting) you can do this with a simple enough loop. function sizexpander2($sizes) {
    $sizeArray = array(""XS"", ""S"", ""M"", ""L"", ""XL"", ""XXL"", ""XXXL"");
    list($minSize, $maxSize) = split('-', $sizes);
    $tmp = array();

    foreach($sizeArray as $size) {
        if($size == $minSize) {
             $tmp[] = $size;
        } else if(count($tmp)) {
             $tmp[] = $size;
             if($size == $maxSize) break;
        }
    }

    return join(', ', $tmp);
}"
1051,"I chose for the closures: http://jsfiddle.net/raXQT/4/ . Now it's possible to safely and more easily access variables. Also I love the fact that Chrome supports JavaScript getters and setters like this (it's going to be Chrome-only anyway). var t=(function() {
    var a = 0;
    return {
        get val() {
            return a;
        },
        set val(v) {
            a = v;
        },
        alertA: function() {
            window.alert(""alertA() shows a: "" + a);
        }
    }
})();

alert(""t.val: "" + t.val);
t.val = 2;
alert(""t.val = 2\n\nt.val: "" + t.val);
t.alertA();
t.a = 6;
alert(""t.a = 6\n\nt.val: "" + t.val);"
1053,"Majorly refactored my code, is this good enough?. namespace SharpDream.Api
{
    public enum SourceType
    {
        Test,
        Xml
    }

    public class UserFinder
    {
        private IUserInformationSource _sourceType;
        private IParser _parserType;
        private string _source;

        public UserFinder(SourceType sourceType)
        {
            switch (sourceType)
            {
                case SourceType.Test:
                    var testSource = new TestSource();
                    _sourceType = testSource;
                    break;
                case SourceType.Xml:
                    var xmlSource = new XmlSource();
                    var xmlParser = new XmlParser();
                    _sourceType = xmlSource;
                    _parserType = xmlParser;
                    break;
                default:
                    break;
            }
        }

        /// <summary>
        /// Returns a User object loaded with information.
        /// </summary>
        /// <param name=""forumUserId"">The DIC forum users ID number.</param>
        /// <returns>A User object.</returns>
        public User GetUserById(int forumUserId)
        {
            _source = _sourceType.GetResponseSource(forumUserId);
            return _parserType.ParseUserFromSource(_source);
        }
    }
} What I'm aiming for: Separation of concerns. Which is working believe it or not! It's so refreshing to feel confident that your code won't break if you change something somewhere else. I finished this bit, and now I can work on the parsing area without having to put anything else in the mental buffer. Flexibility during usage. Here is an example of how my library will be used: UserFinder userFinder = new UserFinder(SourceType.Xml);
var foundUser = userFinder.GetUserById(1); Compare this to the old version of the library: //Let's create an XmlMemberFinder, since we'll use the XML api as our data source.
XmlMemberFinder xmlMemberFinder = new XmlMemberFinder();

//MemberList is the class you'll use in your application to get anything you need 
//relating to members.
MemberLister memberList = new MemberLister(xmlMemberFinder);

//This is an example of fetching and listing a user.
var member = memberList.FindMember(1); I think I have made improvements, but there is always someone smarter out there. :) Thanks for your time!"
1054,"This is looking pretty good to me. The main thing that stands out that I woudl change is that the UserFinder() method is somewhat large, and it isn't immediately understandable to me what each piece does. I would try to break that up into several smaller, descriptively named methods: public UserFinder(SourceType sourceType)        
{            
    if (requestIsTest())            
    {                
        createTestSource();
    }
    else
    {
        createXmlSource();
    }
} Your original is more compact but less readable in my book. In six months when you come back to it, will you be able to remember what it does, or will you have to spend 10 minutes parsing it out and figuring out what it does?"
1055,"Personally I'd make the UserFinder class source-independent. This could be either by seeing the Xml and Test sources as a mapper and the UserFinder as a model (some kind of DataMapper ): public interface UserMapperInterface {}
public class XmlSource : UserMapperInterface { // ... }
public class TestSource : UserMapperInterface { // ... }

public class UserFinder {
     public UserFinder(UserMapperInterface $source) { // ... }
     public UserFinder() { // use default source }
} This way you make the GetUserById method source-independent. Basic usage would be: UserFinder t = new UserFinder(new TestSource());
// UserFinder t = new UserFinder(); // using the default source
t.GetUserById(43); This way you seperate the source logic from the operations and you can easily add new sources without touching the UserFinder class."
1056,"Elegant approach to building unordered list from XML. How can I improve on this rather ugly method that builds an HTML unordered list from an XML file? I maintain a collection of ASP.NET webforms that all need to pull in the same site navigation as our main website. The forms have a master page that mimics the main site template, and we want any changes to the main navigation to flow through to the forms automatically. The main site uses an XML document to generate the navigation, and the document uses inconsistent formatting for the links (some have ""http://mysite.com"" hardcoded, and some are relative to the main site ""/subsite""). Here's what I have right now: private void LoadNavigation()
{
    string urlPrefix = ""http://mysite.com"";
    string xmlFilePath = ConfigurationManager.AppSettings[""NavigationUrl""].ToString();
    XmlDocument doc = new XmlDocument();
    doc.Load(xmlFilePath);
    XmlNodeList navigationItems = doc.DocumentElement.FirstChild.ChildNodes;

    foreach (XmlNode item in navigationItems)
    {
        if (item.Attributes.GetNamedItem(""url"").Value.Contains(""http://"")) // link is hard coded
        {
            navList.InnerHtml += ""<li> <a href="" + '""' + item.Attributes.GetNamedItem(""url"").Value
                + '""' + "">"" + item.Attributes.GetNamedItem(""title"").Value + ""</a>|</li>"";
        }

        else
        {
            navList.InnerHtml += ""<li> <a href="" + '""' + urlPrefix + item.Attributes.GetNamedItem(""url"").Value
                + '""' + "">"" + item.Attributes.GetNamedItem(""title"").Value; //relative link

            if (item.NextSibling == null)
            {
                navList.InnerHtml += ""</a></li>""; //last item in list
            }
            else
            {
                navList.InnerHtml += ""</a>|</li>""; //not the last item in list
            }
        }
    }
} Believe it or not, this is an improvement over the original, which included a hardcoded URL for the XML file and got the values out of the XML document like this: XmlNodeList nodeList = doc.ChildNodes[1].ChildNodes[0].ChildNodes; But it still needs a lot of work. Please have at it."
1057,"Custom CursorAdapter Design. Here's the code which I use for my Android custom cursor adapter which I use to bind data to my list view. public class MessageAdapter extends CursorAdapter {
   private Cursor mCursor;
   private Context mContext;
   private final LayoutInflater mInflater;


    public MessageAdapter(Context context, Cursor c) {
        super(context, c);
        mInflater=LayoutInflater.from(context);
    mContext=context;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {

        TextView mobileNo=(TextView)view.findViewById(R.id.mobileNolistitem);
        mobileNo.setText(cursor.getString(cursor.getColumnIndex(TextMeDBAdapter.KEY_MOBILENO)));

        TextView frequency=(TextView)view.findViewById(R.id.frequencylistitem);
        frequency.setText(cursor.getString(cursor.getColumnIndex(TextMeDBAdapter.KEY_FREQUENCY)));

        TextView rowid=(TextView)view.findViewById(R.id.rowidlistitem);
        rowid.setText(cursor.getString(cursor.getColumnIndex(TextMeDBAdapter.KEY_ID)));

    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        final View view=mInflater.inflate(R.layout.message_list_item,parent,false); 
        return view;
    }

} I know that there's another efficient way to do this which reuses the list item instantiated.  Can someone tell me how?"
1058,You do have the field languages several times as a string. I'd create a general table languages with all language-related informations and have 1:m or n:m relations to other tables.
1059,"Shader parameters in managed OpenGL. I'm working on a managed OpenGL game engine for C#, and here's how I'm managing shader parameters (uniforms). Is it ""alright""? Could it be better? I'm a bit unsure about using generics in this case. public abstract class ShaderParameter
{
    public readonly string Name;
    internal readonly int Location;
    internal readonly Shader Parent;

    internal ShaderParameter(string name, int location, Shader parent)
    {
        Name = name;
        Location = location;
        Parent = parent;
    }
    //Ensures that the value is set on the shader,
    //this should be called before using the parent shader
    internal abstract void EnsureSet();
    //Gives a value to this shader paramerter
    public abstract void SetValue<T>(T value);
}



//A shader paramater of type float
public sealed class ShaderParamFloat : ShaderParameter
{
    float value = 0;
    bool valueChanged = false; //If the value has changed since the last time it was set on the shader

    internal ShaderParamFloat(string name, int location, Shader parent)
        : base(name, location, parent)
    { }
    internal override void EnsureSet()
    {
        if (valueChanged)
        {
            //Hands over a single value to OpenGL.
            GL.Uniform1(Location, value);
            valueChanged = false;
        }
    }
    //Gives a value to this shader parameter
    public override void SetValue<T>(T value)
    {
        if (typeof(T) != typeof(float))
            throw new ArgumentException(""Value is of type: "" + typeof(T).ToString() + "", expected: float"", ""value"");

        this.value = (float)(object)value;
        valueChanged = true;
    }
} The reason for using inheritance is because other ShaderParameter classes behave differently in EnsureSet() . For example, ShaderParamVector3 uses GL.Uniform3(...) , and ShaderParamTexture needs to ensure that the texture is valid and set on the graphics card."
1061,"The part that looks most problematic in your code is the if statement: the code in the if part and the else part is almost the same except that you prepend urlPrefix to the URL if it is relative. (Also you're only checking whether the node is the last if the URL is relative, which does not seem right). At the very least I'd factor this out into a helper method, which takes the absolute URL as a parameter to remove the code duplication. However there's an even better way: .net already comes with the System.Uri class, which can take care of making the URL absolute for you. private void LoadNavigation()
{
    Uri urlPrefix = new Uri(""http://mysite.com"");
    string xmlFilePath = ConfigurationManager.AppSettings[""NavigationUrl""].ToString();
    XmlDocument doc = new XmlDocument();
    doc.Load(xmlFilePath);
    XmlNodeList navigationItems = doc.DocumentElement.FirstChild.ChildNodes;

    foreach (XmlNode item in navigationItems)    
    {
        Url fullUrl = new Uri(urlPrefix, item.Attributes.GetNamedItem(""url"").Value);
        String title = item.Attributes.GetNamedItem(""title"").Value;
        navList.InnerHtml += ""<li> <a href=\"""" + fullUrl + ""\"">"" + title + ""</a>"";

        if (item.NextSibling == null)
        {
            navList.InnerHtml += ""</a></li>""; //last item in list
        }
        else
        {
            navList.InnerHtml += ""</a>|</li>""; //not the last item in list
        }
    }    
}"
1062,"I would look into using XSLT to transform the XML into the required HTML. So the code above becomes much simpler and would just have to load the XML file, load the XSL file, apply the transform and the result would be the HTML you require. Another advantage is that if one day you decide to change the resulting HTML, this code will not need to change, only the XSL file will change. A quick search yields a lot of useful resources including an article that seems to explain what I was suggesting: Transforming XML with XSLT and ASP Another useful resource I'd recommend in case you are not familiar with XSLT is the XSLT Tutorial at W3Schools."
1063,"Here's another option. For the key function, it specifies a lambda that takes a two-item sequence, and unpacks the two items into ""s"" and ""l"", and returns ""l"". This avoids poking around each (string, length) pair by magic number, and also enforces a bit of a type constraint on the items to sort. Also, it breaks lines in convenient places, which is perfectly legal in Python: sorted([(p, len(p)) for p 
       in (""something"", 
           ""something else"", 
           ""blah"", 
           ""a string"")], 
       key=lambda (s, l): l) And here is a version that uses a generator comprehension instead of a list comprehension. Generator expressions are evaluated as items are pulled from them, rather than all at once. In this example there's no advantage, but when using expressions where items are expensive to create, or where iteration could terminate early (like database queries), generators are a big win: sorted(((p, len(p)) for p 
       in (""something"", 
           ""something else"", 
           ""blah"", 
           ""a string"")), 
       key=lambda (s, l): l) And this version deterministically handles cases where there is some ambiguity on sorting only by length: sorted(((p, len(p)) for p 
       in (""something"", 
           ""something else"", 
           ""four things"", 
           ""five things"", 
           ""a string"")), 
       key=lambda (s, l): (l, s))"
1066,"Moving to other game states with ScreenManager. I'm creating a game in C#, and I've created a ScreenManager so I can call ScreenManager.MoveToScreen(typeof(ScreenClassHere)) to move to other game states. However, I feel that my method of creating an instance of the class is... not very optimal. See for yourself. public static void MoveToScreen(Type s)
    {
        if (currentscreen != null) currentscreen.Remove();

        currentscreen = (Screen)s.GetConstructor(System.Type.EmptyTypes).Invoke(null);
        currentscreen.Init();
    } Does anyone know if there's a better way to create an instance of a certain class from a Type ?"
1067,"You could use generics public static void MoveToScreen<T>() where T : Screen, new()
{
    if (currentscreen != null) currentscreen.Remove();

    currentscreen = new T();
    currentscreen.Init();
} In this case, you'd have to call the method as ScreenManager.MoveToScreen<ScreenClassHere>();"
1068,"Nitpicky, but I would change if (currentscreen != null) currentscreen.Remove(); to if (currentscreen != null) {
   currentscreen.Remove();
} I second pdr on using generics."
1069,"The biggest thing here is that you should make the ShaderParam class itself generic, not just its SetValue method.  This will get rid of your type check and double cast (any time you have a type check or a double cast, chances are you're using the type system incorrectly).  It will also get rid of the ShaderParamFloat class completely. For example: public class ShaderParam<T>
{
    private T value;

    ... (other code here)

    public void SetValue(T value)
    {
        this.value = value;
        ...
    }
} You can now use this for floats by instantiating a ShaderParam<float> , plus it works just as well for other types. Some other comments: Don't write comments that just duplicate the code.  A variable named valueChanged doesn't need a comment saying ""If the value has changed"" - that much is obvious from the name.  More importantly in this code, the method named EnsureSet() should have a comment explaining its purpose and why it should be called, not just a comment that expands the name into a longer sentence.  I'm not an OpenGL user so I don't know what GL.Uniform1() does, but that code is surprising to me and a comment to explain why it's written that way would be useful. I take it you have good reasons for making some things public and others internal.  To me, those choices seem pretty arbitrary.  If it works in your situation, consider making the class itself internal and all members public. I don't personally like making fields public/internal, though given that they are readonly, I could live with it.  I might personally still change this to use properties and a readonly backing field.  That gives you the added benefit of being able to set breakpoints later if you ever need to debug. Not relevant if you make the first change above, but why is ShaderParamFloat still abstract? The private fields in ShaderParamFloat should be explicitly marked private. There is no need to initialize value to 0 or valueChanged to false.  Those are their default values. I would personally call the class ShaderParameter instead of ShaderParam .  Your abbreviation is pretty obvious in this case, but I tend to stay away from all but the most commonly used abbreviations.  In particular, if using the abbreviation improves the readability of the code, then it makes sense.  I don't think that applies here. EDIT: Based on your updated question, I would still recommend a solution like I mentioned above, where the base ShaderParameter is a generic class.  However, it does make sense for you to derive classes from that with different implementations of EnsureSet .  For example: public abstract class ShaderParameter<T>
{
    private T value;

    public abstract void EnsureSet();

    public void SetValue(T value)
    {
        this.value = value;
    }
}

public class FloatShaderParameter : ShaderParameter<float>
{
    public override void EnsureSet()
    {
        ...
    }
} And you can then derive similar classes for the other types of parameters.  Note that you only need a single implementation of SetValue in the base, and it works for all derived classes."
1070,"Generic advanced Delegate.CreateDelegate using expression trees. As far as I know the standard Delegate.CreateDelegate() which allows to create a delegate by using reflection, doesn't allow doing something as follows when the first parameter of method isn't exactly of type object . public class Bleh
{
    public void SomeMethod( string s ) { }
}
...
object bleh = new Bleh(); 
MethodInfo method = bleh.GetType().GetMethod(""SomeMethod"");    
// Starting from here, all knowledge about Bleh is unknown. 
// Only bleh and method are available.
Action<object> a = (Action<object>)Delegate.CreateDelegate(
    typeof( Action<object> ), bleh, method ); Which is why I now have an implementation which allows the following: Action<object> compatibleExecute =
    DelegateHelper.CreateCompatibleDelegate<Action<object>>( bleh, method ); method can be any method, with or without return type, and with as many parameters as desired. I need to create an Action<T> , since other code is dependant on this strong typed delegate. In this example, I know the method is at least an Action<object> . The following code improves on the original CreateDelegate in two ways: It is generic now, instead of passing type as a first parameter. It does conversion to suitable lower types when possible. This is the first time for me working with expression trees, so I don't know whether what I'm doing is correct or the best approach. I based this implementation on an article by Jon Skeet (without fully understanding it :)), but the code seems to be working! /// <summary>
///   A generic helper class to do common
///   <see cref = ""System.Delegate"">Delegate</see> operations.
/// </summary>
/// <author>Steven Jeuris</author>
public static class DelegateHelper
{
    /// <summary>
    ///   The name of the Invoke method of a Delegate.
    /// </summary>
    const string InvokeMethod = ""Invoke"";

    /// <summary>
    ///   Get method info for a specified delegate type.
    /// </summary>
    /// <param name = ""delegateType"">The delegate type to get info for.</param>
    /// <returns>The method info for the given delegate type.</returns>
    public static MethodInfo MethodInfoFromDelegateType( Type delegateType )
    {
        Contract.Requires<ArgumentException>(
            delegateType.IsSubclassOf( typeof( MulticastDelegate ) ),
            ""Given type should be a delegate."" );

        return delegateType.GetMethod( InvokeMethod );
    }

    /// <summary>
    ///   Creates a delegate of a specified type that represents the specified
    ///   static or instance method, with the specified first argument.
    ///   Conversions are done when possible.
    /// </summary>
    /// <typeparam name = ""T"">The type for the delegate.</typeparam>
    /// <param name = ""firstArgument"">
    ///   The object to which the delegate is bound,
    ///   or null to treat method as static
    /// </param>
    /// <param name = ""method"">
    ///   The MethodInfo describing the static or
    ///   instance method the delegate is to represent.
    /// </param>
    public static T CreateCompatibleDelegate<T>(
       object firstArgument,
       MethodInfo method )
    {
        MethodInfo delegateInfo = MethodInfoFromDelegateType( typeof( T ) );

        ParameterInfo[] methodParameters = method.GetParameters();
        ParameterInfo[] delegateParameters = delegateInfo.GetParameters();

        // Convert the arguments from the delegate argument type
        // to the method argument type when necessary.
        ParameterExpression[] arguments =
            (from delegateParameter in delegateParameters
             select Expression.Parameter( delegateParameter.ParameterType ))
             .ToArray();
        Expression[] convertedArguments =
            new Expression[methodParameters.Length];
        for ( int i = 0; i < methodParameters.Length; ++i )
        {
            Type methodType = methodParameters[ i ].ParameterType;
            Type delegateType = delegateParameters[ i ].ParameterType;
            if ( methodType != delegateType )
            {
                convertedArguments[ i ] =
                    Expression.Convert( arguments[ i ], methodType );
            }
            else
            {
                convertedArguments[ i ] = arguments[ i ];
            }
        }

        // Create method call.
        ConstantExpression instance = firstArgument == null
            ? null
            : Expression.Constant( firstArgument );
        MethodCallExpression methodCall = Expression.Call(
            instance,
            method,
            convertedArguments
            );

        // Convert return type when necessary.
        Expression convertedMethodCall = 
            delegateInfo.ReturnType == method.ReturnType
                ? (Expression)methodCall
                : Expression.Convert( methodCall, delegateInfo.ReturnType );

        return Expression.Lambda<T>(
            convertedMethodCall,
            arguments
            ).Compile();
    }
} So, did I do this the easiest/best way? Am I doing something completely unnecessary? Thanks!"
1071,"Different character outputs using loops and strings. I've just given this as a response to an absolute beginner on SO, and I'm wondering how terrible it is. Output for an odd number of lines: >
>>>
>>>>>
>>>
> Output for an even number of lines: >
>>>
>>>>>
>>>>>
>>>
> The code: int lines = 7;
int half = lines/2;
String carat = "">"";
int i;

//better to declare first or does it not matter?         

if(lines%2==0){boolean even = true;}
else{boolean even = false;}

for(i=1;i<=lines;i++){
        System.out.println(carat + ""\n"");
        if(i==half && even){System.out.println(carat+""\n"");}
        if(((i>=half && even) || (i>=half+1)) && i!=lines){
                carat = carat.substring(0,carat.length()-2);
        }else{
                carat = carat + "">>"";
        }
} This code just seems so ugly, not considering the fact that there is no method that takes number of lines and that it is abusing integer rounding."
1072,"I don't like the naming of a Remove method, it suggests that you remove something from the currentScreen but really it's the method that is called when the currentScreen itself is being removed, if I got it right. Also, other people suggesting generics are correct, you should use it. But if you once again find yourself in need of creating an instance knowing its type, don't go GetConstructors way. Use Activator.CreateInstance for that."
1073,"Fge's answer (along with Mongus Pong's comment) really notes the major issue with your design.  In general, you will want to avoid: Using enumerations in the place of polymorphism. Leaking the details of how you test a type into the type itself. You are doing this by explicitly referencing TestSource in UserFinder . Doing this complicates the core type with test code and/or test types that don't belong in it.  Note that there are times when you'll have to break this ""rule""; for example, when there is no other way to test the object in question, but generally you can avoid it. Fge's answer provides a great fix for both of these issues (though the UserMapperInterface interface should really be named IUserMapper , but that's just nitpicking). Once you get this pattern of IoC and Dependency Injection down you're on the cusp of something that can really transform how you write and test code: Mocking.  A great introduction on the how and why of mocking can be found here . Hope this helps."
1074,You want to use what Rails calls eager loading. This is done with the :include parameter in your AR call. Add it to your lambda block.
1075,"better to declare first or does it not matter? No. These days most people believe variables should be declared as late as possible, right by where they are used. This code just seems so ugly. It is. A little whitespace in there would help a lot. Which is easier to read: // This:
if(i==half && even){System.out.println(carat+""\n"");}

// Or this:
if (i == half && even) {
  System.out.println(carat+""\n"");
} that it is abusing integer rounding. There's no abuse, and it's not rounding. Truncation on integer arithmetic is a specified part of the language. Feel free to use it. In this case, it does exactly what you want. If I were writing this, I'd do: printCarats(int numLines) {    
  for (int line = 0; line < numLines; line++) {
    // Mirror vertically across center line.
    int halfLine = line;
    if (line > numLines / 2) halfLine = numLines - line - 1;

    int numCarats = 1 + halfLine * 2;
    for (int i = 0; i < numCarats; i++) {
      System.out.print("">"");
    }
    System.out.println();
  }
}"
1076,"Similar event handlers for buttons. I have 3 simple similar event handler functions that I would like to refactor. Any suggestions? private void btnBuildingList_Click(object sender, EventArgs e)
    {
        selectedExportType = (int)ExportType.Building;
        path = csvFilePath + String.Format(""{0:yyyy-MM-dd}"", datDate.DateTime) + ""-BuildingList.csv"";
        Export();
    }

    private void btnOwnerList_Click(object sender, EventArgs e)
    {
        selectedExportType = (int)ExportType.Persons;
        path = csvFilePath + String.Format(""{0:yyyy-MM-dd}"", datDate.DateTime) + ""-OwnerList.csv"";
        Export();
    }

    private void btnFacts_Click(object sender, EventArgs e)
    {
        selectedExportType = (int)ExportType.Facts;
        path = csvFilePath + String.Format(""{0:yyyy-MM-dd}"", datDate.DateTime) + ""-FactsData.csv"";
        Export();
    }"
1077,"Demo of advertisment website. A fully functional demo URL: http://69.24.73.172/demos/index.html Note that in FireFox there is a small horizontal scrollbar bug which I have fixed at home. HTML: <!DOCTYPE html>
<html>  

<head>    
    <meta charset=""UTF-8"" />    
    <title>Welcome to Scirra.com</title>    
    <meta name=""description"" content=""Construct 2, the HTML5 games creator."" />    
    <link rel=""stylesheet"" href=""css/default.css"" type=""text/css"" />     
    <link rel=""stylesheet"" href=""plugins/coin-slider/coin-slider-styles.css"" type=""text/css"" />    
    <script type=""text/javascript"" src=""http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js""></script>    
    <script type=""text/javascript"" src=""js/common.js""></script>    
    <script type=""text/javascript"" src=""plugins/coin-slider/coin-slider.min.js""></script>    
    <script type=""text/javascript"" src=""js/homepage.js""></script>    
</head>  

<body>   

<div class=""topBar""></div>    
<div class=""mainBox"">    
    <div class=""headWrapper"">   
        <div class=""searchWrapper"">    
            <div class=""searchBox"">    
                <input type=""text"" id=""SearchBox"" />    
                <div class=""s searchIco""></div>    
            </div>    
        </div>      
    </div>  


    <div class=""topMenu"">    
        <a href=""#"" class=""topSelWrapper"">Home</a>    
        <a href=""#"" class=""topNormal"">Forum</a>    
        <a href=""#"" class=""topNormal"">Contruct</a>    
        <a href=""#"" class=""topNormal"">Arcade</a>    
        <a href=""#"" class=""topNormal"">Manual</a>    
        <a href=""#"" class=""topNormal"">Support</a>    
        <a href=""#"" class=""topNormal"">Contact</a>    
    </div>

    <div class=""subMenu"">    
        <a href=""#"" class=""subSelWrapper"">Homepage</a>      
        <a href=""#"" class=""subNormal"">Construct</a>    
        <a href=""#"" class=""subNormal"">Products</a>    
        <a href=""#"" class=""subNormal"">Community Forum</a>    
        <a href=""#"" class=""subNormal"">Contact Us</a>    
    </div>



    <div class=""contentWrapper"">    
        <div class=""wideCol"">    
            <div id='coin-slider' class=""slideShowWrapper"">    
                <a href=""#"" target=""_blank"">    
                    <img src='images/screenshot1.jpg' >    
                    <span>    
                        Scirra software allows you to bring your imagination to life    
                    </span>    
                </a>    
                <a href=""#"">    
                    <img src='images/screenshot2.jpg' >    
                    <span>    
                        Export your creations to HTML5 pages    
                    </span>    
                </a>        
                <a href=""#"">    
                    <img src='images/screenshot3.jpg' >    
                    <span>    
                        Another description of some image    
                    </span>    
                </a>    
                <a href=""#"">    
                    <img src='images/screenshot4.jpg' >    
                    <span>    
                        Something motivational to tell people    
                    </span>    
                </a>    
            </div>      
            <div class=""newsWrapper"">    
                <h1>Latest from Twitter</h1>    
                <div id=""twitterFeed"">  
                <p>The news on the block is this.  Something has happened some news or something. <span class=""smallDate"">About 6 hours ago</span></p>    
                <p>Another thing has happened lets tell the world some news or something. Lots to think about.  Lots to do.<span class=""smallDate"">About 6 hours ago</span></p>    
                <p>Shocker!  Santa Claus is not real.  This is breaking news, we must spread it. <span class=""smallDate"">About 6 hours ago</span></p>   
                </div>    
            </div>    
        </div>    
        <div class=""thinCol"">    
            <h1>Main Heading</h1>    
            <p>Some paragraph goes here.  It tells you about the picture.  Cool!  Have you thought about downloading Construct 2?  Well you can download it with the link below.  This column will expand vertically.</p>    
            <h2>Help Me!</h2>    
            <p>This column will keep expanging and expanging.  It pads stuff out to make other things look good imo.</p>    
            <h2>Why Download?</h2>    
            <p>As well as other features, we also have some other features.  Check out our <a href=""#"">other features</a>.  Each of our other features is really cool and there to help everyone suceed.</p>
                <a href=""#"" class=""s downloadBox"">    
                <div class=""downloadHead"">Download</div>    
                <div class=""downloadSize"">24.5 MB</div>    
            </a>            
        </div>    
        <div class=""clear""></div>      

        <h1>This Weeks Spotlight</h1>       
        <div class=""halfColWrapper"">    
            <img src=""images/spotlight1.png"" class=""spotLightImg"" />    
            <p>Our spotlight member this week is Pooh-Bah.  He writes good stuff.  Read it.</p>    
            <a class=""moreInfoLink"" href=""#"">Learn More</a>    
        </div>    
        <div class=""halfColSpacer"">&nbsp;</div>    
        <div class=""halfColWrapper"">    
            <img src=""images/spotlight2.png"" class=""spotLightImg"" />    
            <p>Killer Bears is a scary ass game from JimmyJones.  How many bears can you escape from?</p>    
            <a class=""moreInfoLink"" href=""#"">Learn More</a>    
        </div>    
        <div class=""clear""></div>    
    </div>    
</div>       

<div class=""footerWrapper"">    
    <div class=""footerBox"">     
        <div class=""footerItem"">    
            <h3>Community</h3>    
            <a href=""#"">The Blog</a><br />    
            <a href=""#"">Community Forum</a><br />    
            <a href=""#"">RSS Feed</a><br />    
            <a class=""s footIco facebook"" href=""http://www.facebook.com/ScirraOfficial"" target=""_blank""></a>    
            <a class=""s footIco twitter"" href=""http://twitter.com/Scirra"" target=""_blank""></a>    
            <a class=""s footIco youtube"" href=""http://www.youtube.com/user/ScirraVideos"" target=""_blank""></a>    
        </div>    
        <div class=""footerItem"">    
            <h3>About Us</h3>    
            <a href=""#"">Contact Information</a><br />    
            <a href=""#"">Advertising</a><br />    
            <a href=""#"">History</a><br />    
            <a href=""#"">Privacy Policy</a><br />    
            <a href=""#"">Terms and Conditions</a>    
        </div>

        <div class=""footerItem"">    
            <h3>Want to Help?</h3>    
            You can contribute to the community <a href=""#"">in lots of ways</a>.  We have a large active friendly community, and there are lots of ways to join in!<br />    
            <div class=""ralign"">    
            <a href=""#""><strong>Learn More</strong></a>    
            </div>    
        </div>    
        <div class=""clear""></div>       
    </div>    
</div>

<div class=""copyright"">    
    Copyright &copy; 2011 Scirra.com.  All rights reserved.    
</div>   

</body>

</html> (Note head wrapper div is empty at the moment, this will have a logo at a later date). CSS: /* Main Layout Elements */
    body{
        margin: 0;
        padding: 0;
        font-family: Arial, Helvetica, Verdana;
        background: #fff url(../images/background.png) repeat-x;
        color:#444;
    }
    p {
        margin: 0 0 20px 8px;
    }
    a{
        color: #0066FF;
    }
    .smallDate{
        float:right;
        color: #339900;
    }
    .topBar{
        position:absolute;
        background-color: #339900;
        height: 30px;
        border-bottom:2px solid #3FBF00;
        width: 100%;
        z-index:1;
        -moz-box-shadow: 0px 0px 5px #555;
        -webkit-box-shadow: 0px 0px 5px #555;
        box-shadow: 0px 0px 5px #555;
    }
    h1{
        margin:0;
        margin-bottom:5px;
        font-size:35px;
        color: #339900;
        font-weight:normal;
    }
    h2{


margin:0 0 5px 0;
    font-size:22px;
    color: #339900;
    font-weight:normal;
}
h3{
    text-shadow: black 0.1em 0.1em 0.2em;
    text-transform: uppercase;
    font-size: 17px;
    font-weight: bold;
    margin-bottom: 3px;
}
.ralign{
    text-align:right;
}
.clear{
    clear:both;
}

/* Sprite definitions and positioning */
.s{
    background-image:url(../images/sprites.png);
    background-repeat:no-repeat;
}
.facebook{
    background-position: 0 0;
}
.twitter{
    background-position: 0 -40px;
}
.slideShowWrapper{
    height:261px;
    overflow:hidden;
    -moz-box-shadow: 0px 0px 5px #555;
    -webkit-box-shadow: 0px 0px 5px #555;
    box-shadow: 0px 0px 5px #555;
}

.youtube{
    background-position: 0 -80px;
}

/* Main Wrappers */
.contentWrapper{
    padding: 10px;
}
.headWrapper{
    height: 120px;
}
.footerWrapper{
    position:relative;
    z-index:1;
    top: -20px;
    height:155px;
    padding-top: 15px;
    background-image: url(../images/background-footer.png);
    background-repeat:repeat-x;
    margin-bottom: -20px;
overflow: hidden;
}
.mainBox{
    -moz-box-shadow: 0px 0px 12px #444;
    -webkit-box-shadow: 0px -20px 28px #c0c0c0;
    box-shadow: 0px 0px 12px #444;
    margin: 0 auto;
    width: 770px;
    border:0;
    z-index:2;
    position:relative;
    background-color: #ffffff;
    -moz-border-radius-bottomright: 10px;
    border-bottom-right-radius:  10px;
    -moz-border-radius-bottomleft: 10px;
    border-bottom-left-radius:  10px;
}

/* Footer */
.footerBox
{
    color: white;
    font-size: 13px;
    margin: 0 auto;
    width: 700px;
    margin-top:5px;
}
.footerItem{
    float: left;
    width: 33%;
}
.footerItem a{
    font-size:13px;
    color:white;
}
.footerItem a:hover{
    color: #ffaa00;
}
.copyright
{
    color: white;
    text-align:center;
    background-color: #000000;
    font-size: 12px;
    padding: 3px;
}
.footIco{
    height: 40px;
    width: 32px;
    float: left;
    margin-top: 7px;
    position:relative;
    left: -4px;
    display:block;
}

/* Search */
.searchWrapper{
    float:right;
    background-color: #339900;
    width: 250px;
    height:53px;
    position:relative;
    left: 50px;
    -moz-border-radius-bottomright: 10px;
    border-bottom-right-radius:  10px;
    -moz-border-radius-bottomleft: 10px;
    border-bottom-left-radius:  10px;
    text-align:center;
    line-height:50px;   
}
.searchBox{
    position:Relative;
    left:12px;
}
.searchBox input{
    height:20px;
    padding-left:10px;
    color: #c0c0c0;
    line-height:20px;
    padding-right:25px;
}
.searchIco{
    height: 37px;
    width: 36px;
    float: right;
    background-position: -40px 0;
    position:relative;
    left:-33px;
    top:11px;
}

/* Menus */
.topMenu{
    height:38px;
    background-color: #339900;
    font-size: 15px;
    font-weight: bold;
    line-height:38px;
}
.topMenu a{
    text-shadow: #114400 1px 1px 1px;
    display: block;
    float:left;
    padding-left: 8px;
    padding-right: 8px;
    color:white;
}
.subMenu{
    height: 33px;
    background-color: #1B5300;
    font-size: 13px;
    line-height:33px;
}
.subMenu a{
    display: block;
    float:left;
    padding-left: 8px;
    padding-right: 8px;
    color:white;
    text-decoration: none;
}
.subLinkLImg{
    float:left;
    width:11px;
    height:23px;
    background-position: -80px 0;
}
.subLinkSelected{
    background-color:#123700;
    float:left;
    height:22px;
    line-height:22px;
}
.subSelWrapper{
    text-decoration: none;
    margin-right: -20px;
    margin-left: 5px;
}
.subNormal{
    margin-left: 25px;
}   
.subNormal:hover{
    background-color:#123700;
    text-decoration: none;
}   
.ssOrient{
    position:relative;
    top:6px;
}
.subLinkRImg{
    float:right;
    width:11px;
    height:23px;
    background-repeat:no-repeat;
    background-position: -91px 0;
}
.topSelWrapper{
    text-decoration: none;
    margin-right: -20px;
    margin-left: 5px;
}
.topLinkLImg{
    float:left;
    width:11px;
    height:33px;
    background-position: -105px 0;
}
.topLinkRImg{
    float:right;
    width:11px;
    height:33px;
    background-position: -116px 0;
}
.topLinkSelected{
    background-color:#1B5300;
    float:left;
    height:33px;
    line-height:33px;
}
.tlOrient{
    position:relative;
    top:5px;
}
.topNormal{
    margin-left: 25px;
    text-decoration: none;
}
.topNormal:hover{
    background-color:#2B8200;
}

/* Download box link */
.downloadBox{
    display: block;
    background-position: -134px 0;
    width: 215px;
    height: 55px;
    margin: 0 auto;
    text-align:right;
    color:white;
    text-transform: uppercase;
    text-decoration: none;
}
.downloadHead{
    font-weight:bold;
    font-size:17px;
    padding-top:14px;
    padding-right: 15px;
}
.downloadSize{
    padding-right: 15px;
    font-size:14px;
    margin-top: -3px;
}

/* Other */
.moreInfoLink{
    display:block;
    color:white;
    font-size:12px;
    font-weight:bold;
    text-decoration: none;
    float:right;
    height:17px;
    background-color:#3366CC;
    text-align:center;
    padding:0 12px 0 12px;
    line-height:17px;
    min-width:100px;
    -moz-border-radius: 10px;
    border-radius:  10px;
    margin-top:-12px;
    margin-bottom:10px;
    clear:both;
}
.moreInfoLink:hover{
    text-decoration:underline;
    background-color: #537DD5;
}
.thinCol{
    float:left;
    width:270px;
}
.wideCol{
    float:left;
    margin-right:10px;
    width:470px;
}
.newsWrapper{
    position:relative;
    top: 5px;
}
.halfColSpacer{
    width:4%;
    float:left;
}
.halfColWrapper{
    float:left;
    width:48%;  
}
.spotLightImg{
    float:left;
    margin-right:15px;
    -moz-border-radius: 10px;
    border-radius:  10px;
    -moz-box-shadow: 3px 3px 3px #444;
    -webkit-box-shadow: 3px 3px 3px #444;
    box-shadow: 3px 3px 3px #444;
    width: 90px;
    height: 90px;
}
.slideShowWrapper img{
    width:470px;
    height: 261px;
    border: 0;
}
.slideShowWrapper a{
    text-decoration: none;
} I've tried really hard to design this with progressive enhancement in mind, so I think it degrades quite nicely. IE7 and below aren't supported.  I am completely fine with taking that decision.  I'm considering adding some sort of notification though. It's tested in Safari, FF, IE8 and Chrome. I've used a sprite image to improve load speed.  CSS isn't compressed/optimised yet, I'll do that later. Comments on CSS/HTML/JS are all welcome.  I really want to nail this as being as near to perfect as possible.  Main areas of importance are: SEO friendly Fast and responsive Accessible"
1078,"You can use an Extract Method refactoring to get rid of the duplicate code: private static string GetExportFilePath(string csvFilePath, DateTime date, string fileSuffix)
{
    return string.Format(""{0}{1:yyyy-MM-dd}-{2}.csv"", csvFilePath, date, fileSuffix);
} I would add those selectedExportType and path variables as parameters to the Export() method. I hope they are not used anywhere. It is usually pretty subjective whether to add something as method parameters or leave it as class member, but here I would definitely pass them as parameters. I assume this class is a View since you have button click event handlers, and I also tend to move such methods out from the views. If we use these two ideas, your event handlers would be simplified to: private void btnBuildingList_Click(object sender, EventArgs e)
{
    var path = GetExportFilePath(csvFilePath, datDate.DateTime, ""BuildingList.csv"");
    Export((int)ExportType.Building, path);
}

private void btnOwnerList_Click(object sender, EventArgs e)
{
    var path = GetExportFilePath(csvFilePath, datDate.DateTime, ""OwnerList.csv"");
    Export((int)ExportType.Persons, path);
}

private void btnFacts_Click(object sender, EventArgs e)
{
    var path = GetExportFilePath(csvFilePath, datDate.DateTime, ""FactsData.csv"");
    Export((int)ExportType.Facts, path);
}"
1079,In addition to what @Snowbear suggests. I thought you should know that all button's click event can be pointed to the same event handler. You can then distinguish each one using the sender parameter. I prefer @Snowbear's recommendation but I mention this because many people don't seem to know this can be done.
1081,"Console.Write is horribly slow. I mean it's not that bad, but it's worse than you might think. Try something like: if((numberToCheck + 1) % 1000 == 0)
   Console.Write(""Processing: "" + numberToCheck); I've had many cases where updating the console less often resulted in a massive speed boost. A good rule is not to update the console more than a few times per second."
1082,"Retrieving context menus from the form. I have the following code which is a private method inside the form and retrieve all context menus from the form. I feel, that it is not that concise as it should be. Would be grateful for any suggestions. private IEnumerable<ContextMenuStrip> GetContextMenus()
    {
        var type = this.GetType();
        var fields = type.GetFields(BindingFlags.NonPublic | BindingFlags.Instance);
        var contextMenus = fields.Where(f => f.GetValue(this).GetType() == typeof(ContextMenuStrip));
        var menus = contextMenus.Select(f=> f.GetValue(this));
        return menus.Cast<ContextMenuStrip>();        
    }"
1083,"I didn't have a look in detail, but some ideas/observations/remarks: You might save some div elements with using the float style (especially in your header). Try to avoid using div s for styling only and use the logical corresponding tags (for example in <div class=""downloadHead"">Download</div> ). Menus should be lists ( <li> ) from a logic point of view (e.g. like here ) Try to put all javascript includes at the end where possible (this has some disadvantages though, (one of many discussions about that topic) ) As long as your code doesn't become more complicated it should render fast. I think your biggest problem will be the underlying application (assuming the site is not static). Yahoo has some great guidelines on how to speed up websites. Accssible: You're missing a lot of title and alt tags which are especially important for screen-readers (they also require the elements to be in a logical order, how to optimize a website for them is out of scope here)."
1084,"I can't imagine why do you do this via Reflection, I believe the same can be done by walking through Controls tree. Your method will not work if context menu has property Generate member set to false in designer. var contextMenus = fields.Where(f => f.GetValue(this).GetType() == typeof(ContextMenuStrip));
var menus = contextMenus.Select(f=> f.GetValue(this));
return menus.Cast<ContextMenuStrip>(); Can be replaced with: return fields.Select(f => f.GetValue(this)).OfType<ContextMenuStrip>();"
1085,"if(lines%2==0){boolean even = true;}     
    else{boolean even = false;} Does this work for you?  First, it looks like this makes the even variable only have scope in the decision block.  You shouldn't be able to reference this further down in the code if you are declaring it in the braces. Also, you can probably get rid of the if/else by just using the logic test to define the even variable: boolean even = (lines%2 == 0); //parens for clarity"
1086,"Regarding speed, I don't think you have anything to worry about. As @Fgo mentioned, that typically has more to do with your application - not your static pages (unless they're enormous with tons of pictures and the like). When you're speaking of SEO and accessibility, those are really two sides to the same coin. It's important to know how your site will look in a text-only browser. Your page example will be usable, but a tad confusing without images or layout tags. First of all, only one <h1></h1> should appear on any single page. It should also typically be similar to your page title. I also noticed that you don't have a <meta keywords="""" /> tag (important). Additionally, I usually like to include my <h1> and my page's main and most important <p></p> immediately after the open <body> tag. Wrap this in a <div> and you can place it wherever you want later. @Fgo recommended that you should place your menu in an <ul></ul> which I think is a stylistic preference, and it's also pretty common practice. It's my opinion that a site's navigation belongs right below the first group of body text and again at the bottom of the page. This too can be moved wherever you want later in your CSS. Search engines want to see the meat-and-potatoes of your site as soon as possible and then branch off quickly without obstruction."
1089,"Suggest how to extract method. I have 3 methods(* BindingSource are bindingsources, context is data context, cache* -are some List for cache operations): private void AddUpdateRowDocuments()
        {
            try
            {
                tRANSMITDOCDOCUMENTSRELATIONSBindingSource.EndEdit();
                var t = tRANSMITDOCDOCUMENTSRELATIONSBindingSource.Current as WcfDataServiceReference.TRANSMIT_DOC_DOCUMENTS_RELATIONS;
                if (t.TRANSMIT_DOC_ID == 0)
                {
                    if (!cachetddrList.Contains(t))
                    {
                        cachetddrList.Add(t);
                    }
                    return;
                }
                context.UpdateObject(t);
            }
            catch (Exception ex)
            {
                logger.ErrorException(string.Empty, ex);
            }
        }
private void AddUpdateRowOrganizations()
    {
        try
        {
            tRANSMITDOCORGANIZATIONRELATIONSBindingSource.EndEdit();
            var t = tRANSMITDOCORGANIZATIONRELATIONSBindingSource.Current as WcfDataServiceReference.TRANSMIT_DOC_ORGANIZATION_RELATIONS;
            if (t.TRANSMIT_DOC_ID == 0)
            {
                if (!cachetdorList.Contains(t))
                {
                    cachetdorList.Add(t);
                }
                return;
            }
            context.UpdateObject(t);
        }
        catch (Exception ex)
        {
            logger.ErrorException(string.Empty, ex);
        }
    }
private void AddUpdateRowPartators()
        {
            try
            {
                tRANSMITDOCPARTATORRELATIONSBindingSource.EndEdit();
                var t = tRANSMITDOCPARTATORRELATIONSBindingSource.Current as WcfDataServiceReference.TRANSMIT_DOC_PARTATOR_RELATIONS;
                if (t.TRANSMIT_DOC_ID == 0)
                {
                    if (!cachetdprList.Contains(t))
                    {
                        cachetdprList.Add(t);
                    }
                    return;
                }
                context.UpdateObject(t);
            }
            catch (Exception ex)
            {
                logger.ErrorException(string.Empty, ex);
            }
        } Any thoughts on how to improve them? My inner sense says that they can be turned into one generic method, but i have little experience with generics, so cant say if i am right."
1090,"Something along the lines of this. Generics aren't that difficult. Just replace every occurance of 'some desired type' with the generic identifier. private void AddUpdateRow<T>(BindingSource bindingSource, List<T> cachedList)
    where T : ITransmitDocId
{
    try
    {
        bindingSource.EndEdit();
        T t = bindingSource.Current as T;
        if (t.TRANSMIT_DOC_ID == 0)
        {
            if (!cachedList.Contains(t))
            {
                cachedList.Add(t);
            }
            return;
        }
        context.UpdateObject(t);
    }
    catch (Exception ex)
    {
        logger.ErrorException(string.Empty, ex);
    }
} The where constraint in the function definition should indicate a common interface/class in which TRANSMIT_DOC_ID is defined."
1091,"Cleaning up a redundant switch statement. How can I use a more generic method to clean up the redundancy in the switch statement below? I'm working on an ASP.NET webforms app that will have five identical user controls that I will be showing and hiding based on the value of a dropdown list. (I have already been down the path of trying to add and remove the controls dynamically--the issue of managing the view states for the controls would have been very complicated, so in the interest of shipping I'm opting for a fixed number of controls.) The approach I'm currently using works but isn't very elegant: protected void DisplayUserControls(int numberOfControls)
{
    switch (numberOfControls)
    {
        case 2:
            UserControl1.Visible = true;
            UserControl2.Visible = true;
            UserControl3.Visible = false;
            break;

        case 3:
            UserControl1.Visible = true;
            UserControl2.Visible = true;
            UserControl3.Visible = true;
            break;

        default:
            UserControl1.Visible = true;
            UserControl2.Visible = false;
            UserControl3.Visible = false;
            break;
    }
} What are some options here? The best I can come up with is using numberOfControls to build the name of the control, but that seems hacky. Suggestions appreciated. EDIT: I implemented a solution similar to the accepted answer below. I'm stuck on loading up the controls in the list. The commented out code is more along the lines of what I'd like to do but can't get it working. The uncommented code works. Suggestions? private List<ShiftControl> PopulateShiftControlList()
{
    ShiftControl shiftControlList = new List<ShiftControl>();

    //ControlCollection panelControls = ShiftPanel.Controls;

    //foreach (ShiftControl control in panelControls)
    //{
    //    shiftControlList.Add(control);
    //}

    shiftControlList.Add(ShiftControl1);
    shiftControlList.Add(ShiftControl2);
    shiftControlList.Add(ShiftControl3);
    shiftControlList.Add(ShiftControl4);

    return shiftControlList;
}"
1092,"I would create a list of usercontrols. Based on the amount of controls that need to be visible, traverse the list and set x controls to visible. protected void DisplayUserControls(List<UserControl> controls, int numberOfControls)
{
    Contract.Requires( numberOfControls >= 0 && numberOfControls <= controls.Count );

    for ( int i = 0; i < numberOfControls; ++i )
    {
        controls[ i ].Visible = true;
    }
    for ( int i = numberofControls; i < controls.Count; ++i )
    {
        controls[ i ].Visible = false;
    }
} Or rather in one go: protected void DisplayUserControls(List<UserControl> controls, int numberOfControls)
{
    Contract.Requires( numberOfControls >= 0 && numberOfControls <= controls.Count );

    for ( int i = 0; i < controls.Count; ++i )
    {
        controls[ i ].Visible = i < numberOfControls;
    }
}"
1093,"First thought: UserControl1.Visible = true;
UserControl2.Visible = true;
UserControl3.Visible = true;

switch (numberOfControls)
{
   case 1:
      UserControl2.Visible = false;
      UserControl3.Visible = false;
      break;
   case 2:
      UserControl3.Visible = false;
      break;
   case 3:
} EDIT: New idea: Arraylist controls;

for (int x=0; x<numberOfControls; x++)
{
   ((Control)controls.get(x)).Visible = true;
}"
1094,"I would push the path formatting code down into the ""Export"" function. Creating a path formatting function merely adds noise to the program.  I would modify the ""Export"" function to take one parameter of type ExportType.  This parameter can be used to determine the type of export as well as the file prefix string by putting the file prefixes in a string array in which the strings are ordered the same as the class constants or enumeration. Note: this example assumes that BuildingList resolves to 0, OwnerList resolves to 1, and FactsData resolves to 2. private void Export( ExportType typeOfExport )
{

    string[] exportPrefixes = { ""BuildingList"", ""OwnerList"", ""FactsData"" };

    string path = csvFilePath + String.Format(""{0:yyyy-MM-dd}"", datDate.DateTime) + ""-"" +  exportPrefixes[(int)typeOfExport] + "".csv"";

   ...

} As Shiv Kumar mentioned, one can create a single event and use the parameter ""sender"" to determine the caller.  In this case, we would have something like: private void unified_Click(object sender, EventArgs e)
 {
     if (sender is btnBuildingList)
         Export(ExportType.Building);
     else if (sender is btnOwnderList)
         Export(ExportType.Owner);
     else if (sender is btnFacts)
         Export(ExportType.Facts);
 } Whether or not, you feel that a unified approach is cleaner is up to you."
1095,"Is calling a function only twice a good use of recursion?. Is this, technically, a recursive function? It only gets called once by itself, but it cleaned up my code quite a bit, I think.  Or, does it needlessly complicate the code? sub check_backlog {
    my $topic        = shift;
    my $prev_backlog = shift;
    my $backlog      = undef;
    my @status = `$CMD -topicstat $topic`;
    foreach (@status) {
        if (/Message count: (\d+)/) {
            $backlog = $LAST_PAREN_MATCH;
            if ( !$prev_backlog && $backlog > 1 ) {
                sleep $topic_wait_time;
                check_backlog( $topic, $backlog );
            }
            elsif ( $backlog > $prev_backlog ) {
                check_over_thresholds($backlog);
            }
        }
    }
    return $backlog;
}"
1096,"Yes, every function which calls itself is considered a recursive function . Recursion is really useful when traversing trees and such. As I don't fully understand Perl, I can't really tell whether this case is proper use of recursion, perhaps also provide the intent of your code. UPDATE If you simply want to see whether data is passing (or not passing) through a queue, I wouldn't find recursion to be a suitable implemention. I would expect a function which returns either true or false after a given amount of time, or immediately when data is passing through. Consider the following pseudo code: function isDataPassing( queue, time )
{
   headOfQueue = queue.peek();
   dataPassing = false;
   while ( timePassed < time )
   {
       if ( headOfQueue != queue.peek() )
       {
           dataPassing = true;
           break;
       }
   }

   return dataPassing;
} I can't help you with how you would go about implementing this in Perl. StackOverflow is a better location to ask such a question."
1097,"I don't know Perl well enough, but this looks suspicious to me. On the one hand, you return a value from check_backlog with: return $backlog; But when calling check_backlog you don't use the return value at all! check_backlog( $topic, $backlog ); The only result of the recursive call is that it may sleep some time, but it will not affect returned value. But again, I know only a little Perl, so I might be wrong."
1098,"There is a memory leak in Grid::row_iter() , et al. Why use new in this case? I'd prefer RowIterator row_iter(int row){return RowIterator(this, row);}"
1099,"Linked List program. This is a simple linked list program which creates a list by appending an object at the tail. It compiles and runs perfectly. Is the coding style, logic etc are fine? How can I improve this program?  Is there anything redundant or did I miss out some important things? #include<iostream>
#include<string>
using namespace std;
class Link_list {
private:
    string name;
    Link_list *next_node;
public:
    void add_item(Link_list *);
    void add_item();
    friend void show(Link_list *sptr)
    {
        while(sptr) {
        cout << sptr->name << endl;
        sptr = sptr->next_node;
        }
     }
};

void Link_list::add_item()
{
    cin >> name;
    next_node = NULL;
}
void Link_list::add_item(Link_list *pptr)
{
    cin >> name;
    next_node = NULL;
     pptr->next_node = this;
 }


int main()
{
    Link_list *str_ptr = NULL;
    Link_list *curr_ptr = str_ptr;
    Link_list *prev_ptr;
    char ch = 'y';

    str_ptr = new(Link_list);
    str_ptr->add_item();
    curr_ptr = str_ptr;
    do
    {
        prev_ptr = curr_ptr;
        curr_ptr = new(Link_list);
        curr_ptr->add_item(prev_ptr);
        cout <<""Do you want to add the item"" << endl;
        cin >> ch;
    }while(ch != 'n');
    show(str_ptr);
  }"
1101,"You should use std::list...
But if you only wanna learn how the Linked List works, i suggest the using of templates classes and functions for make the code more generic as possible... It isnt very difficult: template <typename T> 

class List
{
public:
    //Example declare the ""get"" and return a T element
    //where T is a generic element or data type
    T get_front() const;
private:
    T data;
    List<T> *firt_Ptr;
} In the main file: int main()
{
    ...
    List< int > listofints;
    List< double > listofdoubles;
    ...
}"
1102,You can't remove elements from it. There is no search feature. All you can do is add stuff to it and then have its contents streamed to STDOUT. It can only hold strings. Blocking for user-input in the List class itself seems odd; usually you'd request the input in the calling scope and then pass the resultant new string to your add member function.
1103,"In main() you are managing resources. Since the program manages resources( i.e., using new operator ), it should also return resources using delete operator. So, you should start deallocating the resources from the end point of the list before program termination. Else memory leaks prevail."
1104,Adding to Tomalak answer : => destructor You create your linked list but how do you plan to delete it ? => You can only iterate in one way When you have 1000 element and you want the last...
1105,"I'm just going to comment on this from a high level since others have called out other details... Calling the object a link_list is misleading, since it isn't actually the list, but just a node in the full list.  You might want to think about refactoring it so that you have an actual list , that has list_node 's internal to it.  Your inserts also shouldn't expose those nodes directly, but have the ability to just take the data they want to insert.  There's no need to expose the behavior of the list to the user."
1107,"Map implementation in F#. Just as a refresher I put together a simple Map implementation and I would love to get some feedback on it. open System
open System.Collections.Generic

type Node<'a, 'b when 'a : comparison> = {
    key : 'a
    value : 'b
    left : option<Node<'a, 'b>>   
    right : option<Node<'a, 'b>>
}

type Map<'a, 'b when 'a : comparison>(root : option<Node<'a, 'b>>) =

    let comparer = LanguagePrimitives.FastGenericComparer<'a>

    let rec add (key : 'a) (value : 'b) (node : Node<'a, 'b>) =
        match comparer.Compare (key, node.key) with
        | r when r < 0 ->
            match node.left with
            | Some n ->
                match comparer.Compare (key, n.key) with
                | r when r > 0 ->
                    let left = Some { 
                        key = key
                        value = value 
                        left = node.left 
                        right = None 
                    }
                    Some { node with left = left }
                | _ ->
                    Some { node with left = add key value n }
            | None ->
                let left = Some { 
                    key = key
                    value = value 
                    left = None 
                    right = None 
                }
                Some { node with left = left }
        | r when r > 0 ->
            match node.right with
            | Some n ->
                match comparer.Compare (key, n.key) with
                | r when r < 0 ->
                    let right = Some { 
                        key = key
                        value = value 
                        left = None 
                        right = node.right 
                    }
                    Some { node with right = right }
                | _ ->
                    Some { node with right = add key value n }
            | None ->
                let right = Some { 
                    key = key
                    value = value 
                    left = None 
                    right = None 
                }
                Some { node with right = right }    
        | _ -> 
            Some { node with value = value }

    let rec find (key : 'a) (node : Node<'a, 'b>) =
        match comparer.Compare (key, node.key) with
        | r when r < 0 ->
            match node.left with
            | Some node -> find key node
            | None -> raise (KeyNotFoundException())
        | r when r > 0 ->
            match node.right with
            | Some node -> find key node
            | None -> raise (KeyNotFoundException())
        | _ -> node.value      

    member x.Item key =
        match root with
        | Some node -> 
            find key node
        | None -> raise (KeyNotFoundException())            

    member x.Add (key : 'a, value : 'b) =
        match root with
        | Some node -> 
            Map (add key value node)
        | None ->
            let node = Some { 
                key = key 
                value = value 
                left = None
                right = None 
            } 
            Map node

    static member Empty = Map<'a, 'b>(None)

    static member FromSeq (s:seq<'a * 'b>) =
        s 
        |> Seq.fold 
            (fun (m:Map<'a, 'b>) (k, v) -> m.Add (k, v)) 
            Map<'a, 'b>.Empty After running some basic tests I found my implementation is comparable to the FSharpMap class in performance and sometimes better. Obviously I don't have the time/desire to test this extensively so take that with a grain of salt. I'm wondering if anyone can spot a characteristic of this code that will cause a performance breakdown under certain conditions or for certain types of keys. Improved Version open System
open System.Collections.Generic

type Node<'a, 'b when 'a : comparison> = {
    key : 'a
    value : 'b
    height : int
    left : option<Node<'a, 'b>>   
    right : option<Node<'a, 'b>>
}

type Map<'a, 'b when 'a : comparison>(root : option<Node<'a, 'b>>) =

    let comparer = LanguagePrimitives.FastGenericComparer<'a>    

    let height node =
        match node with
        | Some node -> node.height
        | None -> 0  

    let make key value left right =
        let h = 
            match height left, height right with
            | l, r when l >= r -> l + 1
            | l, r -> r + 1
        Some { 
            key = key; 
            value = value; 
            height = h; 
            left = left; 
            right = right 
        }  

    let balance key value left right =
        match height left, height right with
        | l, r when r > l + 2 ->
            match right with
            | Some rn ->
                match height rn.left with
                | rl when rl <= l + 1 ->
                    let left = make key value left rn.left 
                    make rn.key rn.value left rn.right
                | _ ->
                    match rn.left with
                    | Some rnl ->
                        let left = make key value left rnl.left
                        let right = make rn.key rn.value rnl.right rn.right
                        make rnl.key rnl.value left right
                    | None ->
                        make key value left right
            | None -> 
                make key value left right
        | l, r when l <= r + 2 -> 
            make key value left right
        | l, r ->
            match left with
            | Some ln ->
                match height ln.right with
                | rl when rl <= l + 1 ->
                    let right = make key value ln.right right 
                    make ln.key ln.value ln.left right
                | _ ->
                    match ln.right with
                    | Some lnr ->
                        let left = make ln.key ln.value ln.left lnr.left
                        let right = make key value lnr.right right
                        make lnr.key lnr.value left right
                    | None ->
                        make key value left right
            | None -> 
                make key value left right

    let rec add key value node =
        match comparer.Compare (key, node.key) with
        | r when r < 0 ->
            match node.left with
            | Some n -> 
                balance node.key node.value (add key value n) node.right
            | None ->
                let left = Some { 
                    key = key
                    value = value
                    height = node.height + 1
                    left = None
                    right = None 
                }
                balance node.key node.value left node.right
        | r when r > 0 ->
            match node.right with
            | Some n ->
                balance node.key node.value node.left (add key value n)
            | None ->
                let right = Some { 
                    key = key
                    value = value
                    height = node.height + 1
                    left = None
                    right = None 
                }
                balance node.key node.value node.left right
        | _ -> 
            Some { node with value = value }

    let rec find key node =
        match comparer.Compare (key, node.key) with
        | r when r < 0 ->
            match node.left with
            | Some node -> find key node
            | None -> raise (KeyNotFoundException())
        | r when r > 0 ->
            match node.right with
            | Some node -> find key node
            | None -> raise (KeyNotFoundException())
        | _ -> node.value        

    member x.Item key =
        match root with
        | Some node -> 
            find key node
        | None -> raise (KeyNotFoundException())          

    member x.Add (key, value) =
        match root with
        | Some node -> 
            Map (add key value node)
        | None ->
            let node = Some { 
                key = key 
                value = value 
                height = 1
                left = None
                right = None 
            } 
            Map node

    static member Empty = Map<'a, 'b>(None)

    static member OfSeq (s:seq<'a * 'b>) =
        s 
        |> Seq.fold 
            (fun (m:Map<'a, 'b>) (k, v) -> m.Add (k, v)) 
            Map<'a, 'b>.Empty"
1108,"It's much more important to be able to change design in future that to select ""the correct design"" from the start. The simple way to have this ability is to hide as much as possible. Are users happy with one class with virtual function? Hide the knowledge that different birds have or have not separate classes. Are users OK with delegating creation of bird to your module? Hide all constructors of Bird (or make it abstract). Internally - use whatever is good for current purposes, and change the internal design once it will become inconvenient. Thus interface may be the following: class Bird
{
public:
  virtual void Fly()=0;
  virtual void Speak()=0;
};
class BirdFactory
{
public:
  static Bird *CreateEagle();
  ...
}; Everything other should be hidden either as a private stuff of some class or surrounded with other hints about being internal (namespace ""detail"", directory ""internal"", etc)."
1109,"#!/usr/bin/env python
# -*- coding: utf-8 -*-
import functools
import math
import time

class Timer(object):
    def __init__(self):
        self.__values = [] You are using prefix __ to denote private attributess. This is perfectly valid and has special support within python. Having said that, I'm not a fan of it. Its designed for use when you are subclassing objects to prevent accidents. I think that if you are not designing your object to be subclassed, you should stick with single underscores. def start(self):
        self.__start = time.time()

        return self Some frameworks do make use of this return self paradigm. However, its kinda unusual and will lead to code being confusing if you are not used to it. As it is you don't seem to be making use of this. I'd just get rid of return self. This doesn't seem to be the type of object which works well with the pattern anyways. def stop(self):
        self.__values.append(int(round((time.time() - self.__start) * 1000))) The operations being performed here are just long enough to come across as awkward, I'd write it as seconds_elapsed = time.time() - self.__start
milliseconds_elapsed = int(round(seconds_elapsed*1000))
self.__values.append(milliseconds_elapsed) As another note, don't be afraid of floats. You'd probably be better off storing a list of floating point seconds rather then integer milliseconds. The code would be clearer and there is probably no noticeable difference in efficiency. self.__start = None

        return self

    @property
    def average(self):
        return sum(self.__values) / len(self.__values) 

    @property
    def deviation(self):
        if self.average:
            return math.sqrt(sum((v - self.average) ** 2 for v in self.__values) / self.runs)

        return 0 I recommend using the numpy library which has functions to calculate average/stdev/pretty much everything. The math done in numpy will be much more efficient then your python versions. @property
    def elapsed(self):
        return sum(self.__values)

    @property
    def runs(self):
        return len(self.__values) I don't like the name Timer for the class because it spends most of its effort keeping track of values not measuring time. class Profiler(object):
    __timers = {}

    @staticmethod
    def info(timer_id):
        if not Profiler.__timers.has_key(timer_id):
            raise Exception('Timer not started')

        return Profiler.__timers[timer_id] If you are going to store state on your class object, use classmethod like so: @classmethod
    def info(cls, timer_id):
        if not cls.__timers.has_key(timer_id):
            raise Exception('Timer not started')

        return cls.__timers[timer_id] There also does not appear to be a good reason to be storing this state statically. I suggest that you really should implement this as a normal object. There are few cases where storing state on a static object is justified. def info(self, timer_id):
        if not self.__timers.has_key(timer_id):
            raise Exception('Timer not started')

        return self.__timers[timer_id] Additionally, don't be afraid of exceptions. In python you shouldn't (in general) try to detect whether an exception will be thrown before attempting an operation. Just perform the operation and catch the exception. The above version ends up locating an element in a dictionary twice, which is just a waste. The above function should be implemented as: def info(self, timer_id):
        try:
            return self.__timers[timer_id]                 
        except KeyError:
            raise Exception('Timer not started') Similar comments apply to your other functions. @staticmethod
    def profile(f):
        @functools.wraps(f)
        def wrap(self=None, *args, **kwargs): You assume that your first parameter will be self (if it exists). Depending on how this is called, self may actually already be bundled into f as a method object. Also, if you are calling a function which is not a method something else will come in there. You shouldn't capture self this way, just let all parameters go into *args method = self.__class__.__name__ + '.' + f.func_name if self \
                     else f.func_name As mentioned, you shouldn't capture self the way you do. The correct place to find the class is f.im_class. Be careful! That attribute won't be there on non-methods. Profiler.start(method)
            r = f(self, *args, **kwargs) if self else f(*args, **kwargs) I recomment calling r, return_value for better clarity. Also by eliminating self, you'll make this bit of code cleaner
                Profiler.stop(method) This is actually wrong in the case of recursion as another commenter has pointed out. Also, since Timer is really concerned with keeping track of times, perhaps calculating time spent would be better here. return r

        return wrap Your API is counterintuitive on this point. I'd except a function called profile to profile a function, not return a new function which I then have to call in order to profile it. For what the function does it should be called profiled. @staticmethod
    def reset(timer_id):
        Profiler.__timers[timer_id] = Timer()

    @staticmethod
    def start(timer_id):
        if not Profiler.__timers.has_key(timer_id):
            Profiler.reset(timer_id)

        Profiler.__timers[timer_id].start()

    @staticmethod
    def stop(timer_id):
        if not Profiler.__timers.has_key(timer_id):
            raise Exception('Timer not started')

        Profiler.__timers[timer_id].stop()

if __name__ == '__main__':
    class Test(object):
        def isPrime(self, n):
            if n < 2 or (n % 2) == 0:
                return n == 2

            f = 3

            while (f * f) <= n:
                if (n % f) == 0:
                    return False

                f += 2

            return True

        @Profiler.profile
        def run(self):
            return filter(self.isPrime, range(1, 1000001))

    test = Test()

    for x in range(5):
        test.run()

    p = Profiler.info('Test.run')
    print 'runs = %d' % p.runs
    print 'elapsed = %d ms' % p.elapsed
    print 'average = %d ms' % p.average
    print 'deviation = %d ms' % p.deviation I think a better API to implement would be one that works like this: class Test(object):
        def isPrime(self, n):
            if n < 2 or (n % 2) == 0:
                return n == 2

            f = 3

            while (f * f) <= n:
                if (n % f) == 0:
                    return False

                f += 2

            return True

        @profiled
        def run(self):
            return filter(self.isPrime, range(1, 1000001))

    test = Test()

    for x in range(5):
        test.run()

    stats = Test.run.stats
    print 'runs = %d' % stats.runs
    print 'elapsed = %d ms' % stats.elapsed
    print 'average = %d ms' % stats.average
    print 'deviation = %d ms' % stats.deviation Essentially, store your Timer object on the function object itself. That will simplify your code considerably because you are using python's name resolution rather then your own. As a final note, there are plenty of good profiling tools out there for python. You are probably best off using one one of those."
1110,"Man, all of these answers are way overkill for this. Just do: protected void DisplayUserControls(int numberOfControls)
{
    UserControl1.Visible = numberOfControls > 0;
    UserControl2.Visible = numberOfControls > 1;
    UserControl3.Visible = numberOfControls > 2;
} Simple is good."
1111,"Best way to use an array that is returned from a function immediately in PHP. I have a function that returns an array and I want to check that a certain value is not set in the array. function testFunction() {
    return array('key' => 404)
}

if (testFunction()['key'] < 404) {
    // stay calm and carry on
}
else {
    // uh oh
} I understand that the above will not work in php 5.3 (or anything below), however, I'd like to know what I should do in the above case. That is - what should I call the temporary array I create for the if statement? Or is there another way of dealing with this situation? The following is what I would roughly do currently: function testFunction() {
    return array('key' => 404)
}

$test_array = testFunction();

if ($test_array['key'] < 404) {
    // stay calm and carry on
}
else {
    // uh oh
} Is this an acceptable thing to do?"
1112,"So, .. you want to simply check whether a certain key in an array is set to a certain value. You can't do this directly on the function call because older PHP versions don't support array dereferencing . You are right when saying you'll need an intermediate variable. The only question remaining is what to name it. Considering that the variable will probably be situated in a really small scope, don't worry about it too much. There is a saying which says, the bigger the scope, the bigger the name . You could just name it $list . Old replies: Your code does something else as what
  you describe? If you want to see
  whether a given value is present in
  the array, use in_array() . UPDATE: I believe I understand what you are
  trying to accomplish now. You just
  want to see whether the key is set? array_key_exists() PHP has got a pretty good online API,
  be sure to check it for existing
  implementations when looking for a
  solution."
1113,"Your question does not match your code. You ask to check that a key does not exist in the array, yet you are actually testing the value mapped to that key against some other value, presumably doing something else if the key doesn't exist. $result = testFunction();
if (!isset($result['key']) || $result['key'] < 404) {
    // ok
}
else {
    // panic
} You can create a helper method with a suggestive name that does the full check and use that in your if clause. function omgWeGotTheDreaded404() {
    $result = testFunction();
    return isset($result['key'] && $result['key'] >= 404;
}

...

if (omgWeGotTheDreaded404()) ..."
1114,"Lisp quicksort code. I would really appreciate it if someone could review my quicksort implementation.  Additionally, I generated my list dynamically and wrote a couple of tests.  Of course, I realize that the tests are not complete, but I decided to stop where I was and see if I could get some feedback. (defun categorize_list(pivot thelist less more)
    (let ((comparee (car thelist)) (therest (cdr thelist)))
      (if (null thelist)
            (list less more)
        (if (< comparee pivot)
          (categorize_list pivot therest (append less (list comparee)) more)
          (categorize_list pivot therest less (append more (list comparee)))
        )
        )
      )
  )

(defun quicksort(thelist)
  (if (null thelist)
    ()
      (let (
            (pivot (car thelist))
            (therest (cdr thelist))
        )
        (let ((categorized_list (categorize_list pivot therest () ())))

            (append (quicksort (nth 0 categorized_list)) (list pivot) (quicksort (nth 1 categorized_list)))
        )
        )
      )
  )


(defun make_list(thelist remaininglength)
  (if (eq remaininglength 0)
    thelist
    (make_list (append (list (random 25)) thelist) (- remaininglength 1))
  )
  )

(defun should_be_least_to_greatest(thelist)
  (if (< (length thelist) 2)
       nil 
      (if (<= (nth 0 thelist) (nth 1 thelist))
        (should_be_least_to_greatest (cdr thelist))
        (error ""Out of order: ~d !< ~d ~%"" (nth 0 thelist) (nth 1 thelist))
        )
      )
  )

(defun test_should_become_in_order(thelist)
  (let ((sortedList (quicksort thelist)))
    (format t ""IN: ~a ~% SD: ~a ~% Testing sort.~%"" thelist sortedList)
    (should_be_least_to_greatest sortedList)
    )
  )

(defun test_should_maintain_length(thelist)
  (if (not (eql (length thelist) (length (quicksort thelist))))
    (error ""The sorted list is a different length than the original list! ~%"")
    )
  )

(let ((thelist (make_list () 10)))
    (test_should_become_in_order thelist)
    (test_should_maintain_length thelist)
)"
1115,"Your formatting is weird.  It's going to be a lot easier for other programmers to read your code if you use a more standard style.  For example, you have lots of lines with nothing but a hanging parenthesis.  Your functions have no docstrings.  Sometimes you use_underscores and sometimes you use compoundwords but the Lisp style is hypenated-words .  Your indentation is inconsistent: learn the command in your text editor to indent your source code for you, and use it. Instead of: (if (not (eql (length thelist) (length (quicksort thelist)))) Using EQL for numbers seems odd.  I think = would be preferred.  An IF with only one branch is strange, too: WHEN or UNLESS tends to be preferred.  Thus: (unless (= (length thelist) (length (quicksort thelist))) In another place, you do a comparison with: (eq remaininglength 0) The behavior of EQ with integers is undefined.  You can use = or in this case: (zerop remaininglength) You're using recursion a lot even when it's not needed, e.g., in make_list and should_be_least_to_greatest .  Common Lisp doesn't require tail-call optimization, and it's not generally common style.  LOOP (or ITERATE) would probably be simpler and more efficient here. You walk a list applying <= .  Lisp's <= already takes any number of arguments, so if you don't need to know the specific elements which are out of order, you can just apply it once."
1118,"Displaying RSS feeds from Google Feed API as HTML list. What it does is: Reads from a RSS feed using Google Feed API Shows the list in an unordered list How good/bad is the code snippet? $(document).ready(function(){
var FeedManager = {
        config : {
            feedContainer : $('#feedContainer'),
            feedUrl : 'http://rss.bdnews24.com/rss/english/home/rss.xml',
            feedLimit : 10
        },  
        init: function(){
            var feed = new google.feeds.Feed(FeedManager.config.feedUrl);
            feed.setNumEntries(FeedManager.config.feedLimit) ;
            feed.load(function(result) {
                if (!result.error) {
                    FeedManager.$feedContainer = FeedManager.config.feedContainer;
                    for (var i = 0; i < result.feed.entries.length; i++) {
                        var entry = result.feed.entries[i];
                        $('<li/>').append(
                            $('<a>'+entry.title+'</a>').attr(
                                {
                                    'title': entry.title,
                                    'href': entry.link
                                }
                            ).bind('click',FeedManager.showStory)
                        ).appendTo(FeedManager.$feedContainer);
                    }
                }
                else{
                        FeedManager.handleError(result.error.message);
                }
            });
        },
        showStory: function(){
              var href = event.currentTarget.href;
              FeedManager.showURL(href);
              event.preventDefault();
        },
        showURL: function(url){
             if (url.indexOf(""http:"") != 0 && url.indexOf(""https:"") != 0) {
                return;
            }
            chrome.tabs.create({
                url: url
            });
        },
        handleError: function(errorText){
            $('<li/>')
                .css(""color"",""red"")
                .append(""Error:""+errorText)
                .appendTo(FeedManager.config.feedContainer);
        }
    };

    FeedManager.init();
}); At the 2nd stage, I wanted to add custom accordion feature and news snippet: processFeedResult: function(result) {
    if (result.error) {
        FeedManager.handleError(result.error.message);
        return;
    }
    FeedManager.$feedContainer = FeedManager.config.feedContainer;
    $.each(result.feed.entries, function() {
        $('<li/>').append(
            $('<a>', {  // this should not be an anchor tag,right? TBD 
                title: 'Published at: '+this.publishedDate,
                text: this.title
            })
        ).append($('<div>', {
            text: this.contentSnippet,
            css : {'display':'none',
                'padding-top':'2px'}
            }).append(
                $('<a>', {
                    text: '[more..]',
                    href: this.link,
                    click: FeedManager.showStory
                })) 
        )
        .bind('click',FeedManager.showSnippet)
        .appendTo(FeedManager.$feedContainer);
    });
},
showSnippet: function() {
    var $obj = $(event.currentTarget),
    $snippetDiv = $obj.find('div').slideDown('normal');

    if(FeedManager.$lastOpenedDiv === undefined){
        FeedManager.$lastOpenedDiv = $snippetDiv ;
    }
    else{
        FeedManager.$lastOpenedDiv.slideUp('normal');
        FeedManager.$lastOpenedDiv = $snippetDiv ;
    }
    }   
}; I feel that I have put some tightly coupled code in my processFeedResult such as text and CSS.  I also wanted to know if my showSnippet function good enough or not.  However, it works, and I know that there are 3rd party good accordion available, but I wanted to learn it. So far I've kept the anchor tag to show the news title and I used anchor title as a tooltip that shows the time.  Maybe there is a good alternate, like span or paragraph?"
1119,"python object pool with metaclasses. class Pool(type):
    pool = dict()
    def __new__(clas, *a, **k):
        def __del__(self):
            Pool.pool[self.__class__] = Pool.pool.get(self.__class__, []) + [self]
        a[-1]['__del__'] = __del__
        return type.__new__(clas, *a, **k)

    def __call__(clas, *a, **k):
        if Pool.pool.get(clas):
            print('Pool.pool is not empty: return an already allocated instance')
            r = Pool.pool[clas][0]
            Pool.pool[clas] = Pool.pool[clas][1:]
            return r
        else:
            print('Pool.pool is empty, allocate new instance')
            return type.__call__(clas, *a, **k)

class Foo(metaclass=Pool):
    def __init__(self):
        print('Foo > .', self)
    def foo(self):
        print('Foo > foo:', self)

f1 = Foo()
f1.foo()

print('## now deleting f1')
del f1

print('## now create f2')
f2 = Foo()
f2.foo()

print('## now create f3')
f3 = Foo()
f3.foo() what do you think about this piece of code?"
1120,"Looks ok, to be honest. A few minor changes I would make: I would pull this code out into a function function ProcessFeedResult(result) {
    if (!result.error) {
        FeedManager.$feedContainer = FeedManager.config.feedContainer;
        for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            $('<li/>').append(
                $('<a>'+entry.title+'</a>').attr(
                {
                    'title': entry.title,
                    'href': entry.link
                }
                ).bind('click',FeedManager.showStory)
            ).appendTo(FeedManager.$feedContainer);
        }
    }
    else{
        FeedManager.handleError(result.error.message);
    }
} Then I would reverse the condition and return, to reduce the level of indent a bit function ProcessFeedResult(result) {
    if (result.error) {
        FeedManager.handleError(result.error.message);
        return;
    }

    FeedManager.$feedContainer = FeedManager.config.feedContainer;
    for (var i = 0; i < result.feed.entries.length; i++) {
        var entry = result.feed.entries[i];
        $('<li/>').append(
            $('<a>'+entry.title+'</a>').attr(
            {
                'title': entry.title,
                'href': entry.link
            }
            ).bind('click',FeedManager.showStory)
        ).appendTo(FeedManager.$feedContainer);
    }
} Further, I would replace the loop with jQuery's $.each() function ProcessFeedResult(result) {
    if (result.error) {
        FeedManager.handleError(result.error.message);
        return;
    }

    FeedManager.$feedContainer = FeedManager.config.feedContainer;
    $.each(result.feed.entries, function() {
        $('<li/>').append(
            $('<a>' + this.title + '</a>').attr(
            {
                'title': this.title,
                'href': this.link
            }
            ).bind('click',FeedManager.showStory)
        ).appendTo(FeedManager.$feedContainer);
    });
} You can do any or all of these, I don't think any of it is vastly important. I can read your intent easily enough, it just looks a bit neater to me after refactoring. Thinking about your later comment a bit, I would also be tempted to append the title, rather than stringing it together. function ProcessFeedResult(result) {
    if (result.error) {
        FeedManager.handleError(result.error.message);
        return;
    }

    FeedManager.$feedContainer = FeedManager.config.feedContainer;
    $.each(result.feed.entries, function() {
        $('<li/>').append(
            $('<a/>').append(this.title).attr(
            {
                'title': this.title,
                'href': this.link
            }
            ).bind('click',FeedManager.showStory)
        ).appendTo(FeedManager.$feedContainer);
    });
} Otherwise this is the correct approach to generating elements, as far as I know. As a final step, I would tidy up the braces around the attributes, for consistency function ProcessFeedResult(result) {
    if (result.error) {
        FeedManager.handleError(result.error.message);
        return;
    }

    FeedManager.$feedContainer = FeedManager.config.feedContainer;
    $.each(result.feed.entries, function() {
        $('<li/>').append(
            $('<a/>').append(this.title).attr({
                'title': this.title,
                'href': this.link
            }).bind('click',FeedManager.showStory)
        ).appendTo(FeedManager.$feedContainer);
    });
} I really don't think you're going to get it any cleaner than that."
1121,"Splitting an array of numbers into all possible combinations. This takes an array of numbers then splits it into all possible combinations of the number array of size 4 then in another array puts the leftovers.  As I want to take the difference in averages of the first column and the second. import itertools

#defines the array of numbers and the two columns
number = [53, 64, 68, 71, 77, 82, 85]
col_one = []
col_two = []

#creates an array that holds the first four
results = itertools.combinations(number,4)

for x in results:
    col_one.append(list(x))

#attempts to go through and remove those numbers in the first array
#and then add that array to col_two
for i in range(len(col_one)):
    holder = list(number)
    for j in range(4):
        holder.remove(col_one[i][j])
    col_two.append(holder)  

col_one_average = []
col_two_average = []

for k in col_one:
    col_one_average.append(sum(k)/len(k))

for l in col_two:
    col_two_average.append(sum(l)/len(l))

dif = []

for i in range(len(col_one_average)):
    dif.append(col_one_average[i] - col_two_average[i])

print dif So for example, if I have a = [1,2,3] and I want to split it into an array of size 2 and 1, I get col_one[0] = [1,2] and col_two[0] = [3] then col_one[1] = [1,3] and col_two[1] = [2] After I get all those I find the average of col_one[0] - average of col_two[0] . I hope that makes sense.  I'm trying to do this for a statistics class, so if there is a 'numpy-y' solution, I'd love to hear it."
1122,"Comma delimited string from list of items. Is there a simple way to create a comma delimited string from a list of items without adding an extra "", "" to the end of the string? I frequently need to take an ASP.NET CheckBoxList and format the selected values as a string for insertion into an e-mail. It's straightforward to loop over the selected checkboxes, get the values, and add them to a StringBuilder with a "", "" separating them, but the Count property returns the number of items in the list total, not the number of items that are actually selected. So it's hard to know when you've reached the last item, and you end up with a stray "", "" on the end. I've played around with several different approaches to this problem. Lately I've been doing something like this: private string ConcatenateCheckBoxListItems()
{
    StringBuilder sb = new StringBuilder();
    char[] characters = new char[] {"" "", "",""};
    String trimmedString;

    foreach (ListItem item in MyList)
    {
        sb.Append(item.Value + "", "");
    }

    trimmedString = sb.ToString().TrimEnd(characters);
    return trimmedString;
} But it's definitely clunky. So do the various for loop approaches I've tried. Any suggestions for a cleaner implementation?"
1123,"You have several negative conditionals, which is a bad idea in any language. (if (null thelist)
   () I'd change it to: (defun quicksort(thelist)
   (unless (null thelist)
      ; Sort list
   ) ; Pardon the dangling ), but there's a comment on the last line"
1124,"As pdr has pointed out, it's best to use String.Join , instead of doing it yourself as I stated earlier. Maybe I'm missing something, but can't
  you just do the following? private string ConcatenateCheckBoxListItems()
{
    StringBuilder sb = new StringBuilder();

    for ( int i = 0; i < MyList.Items.Count; ++i )
    {
        ListItem item = MyList.Items[ i ];
        sb.Append( item.Value );
        if ( i < MyList.Items.Count - 1 )
        {
            sb.Append( "", "" );
        }
    }

    return sb.ToString();
} UPDATE: As a sidenote, I know it's easy to
  quickly lose the overview of the
  intent with code like this. That's why
  I've been working on an experimental
  class which allows to do the
  following. StringBuilder sb = new StringBuilder();
Loop loop = Loop.ForEach( MyList.Items, i => sb.Append( i.Value ) );
loop.After.AllButLast( () => sb.Append( "", "" ) );
loop.Run(); I'm still deciding whether or not I
  like this solution. :) Haven't used it
  that often."
1125,"Would this not suffice? private string ConcatenateCheckBoxListItems()
{
    return string.Join("", "", from item in MyList select item.Value);
}"
1127,"Why not string.Join() ? var result = string.Join("", "", MyList.Items.Select(i => i.Value));"
1128,"Not using numpy or scipy, but there are several things that can be improved about your code: This is minor, but in your comments you call your lists arrays, but it in python they're called lists Variable names like col_one and col_two aren't very meaningful. Maybe you should call them combinations and rests or something like that. You should definitely refactor your code into functions You often use index-based loops where it is not necessary. Where possible you should iterate by element, not by index. You're also often setting lists to the empty list and then appending to them in a loop. It is generally more pythonic and often faster to use list comprehensions for this. If I were to write the code, I'd write something like this: import itertools

def average(lst):
    """"""Returns the average of a list or other iterable""""""

    return sum(lst)/len(lst)

def list_difference(lst1, lst2):
    """"""Returns the difference between two iterables, i.e. a list containing all
    elements of lst1 that are not in lst2""""""

    result = list(lst1)
    for x in lst2:
        result.remove(x)
    return result

def differences(numbers, n):
    """"""Returns a list containing the difference between a combination and the remaining
    elements of the list for all combinations of size n of the given list""""""

    # Build lists containing the combinations of size n and the rests
    combinations = list(itertools.combinations(numbers, n))
    rests = [list_difference(numbers, row) for row in col_one]

    # Create a lists of averages of the combinations and the rests
    combination_averages = [average(k) for k in combinations]
    rest_averages = [average(k) for k in rests]

    # Create a list containing the differences between the averages
    # using zip to iterate both lists in parallel
    diffs = [avg1 - avg2 for avg1, avg2 in zip(combination_averages, rest_averages)]
    return diffs

print differences([53, 64, 68, 71, 77, 82, 85], 4)"
1129,"Do nothing lamda.... $privilegeStrings = array_filter($privileges, function ($s) { return is_string($s); } ); Is there a better way to specify that I want just the string values in the given array?"
1130,"Other features which may be convenient and are missing: isEmpty() , size() , addAll() , removeAll() , set view of the keys, subset views based on input key. Also even if it is not your primary concern the lookup time seems to be in logarithmic magnitude which can reduce its interest."
1132,"Getting better speed from adjusting rows in a DockableToolBar. I've been using FlexLib for its dockable toolbar feature.  When you shrink the window, it will try to wrap rows if the stage width is less than the row width.  Unfortunately, it won't reverse the process when you expand the window.  To get around that, I wrote the following method to add to the class (the caller is responsible for looping through all current toolbar rows and calling this method on them). It does the job, but it's not quite as fast as I'd like.  I'm hoping for suggestions to improve both performance and code style, if possible. /**
 *  @private
 *  Moves ToolBars to the previous row if there is sufficient space in that row to display
 *  another ToolBar properly.
 */
private function unwrapRow(row:HBox, rowIndex:int, toolbar:VBox):void
{
    if (rowIndex == 0) {
        return;
    }
    var prevRow:HBox = HBox(toolbar.getChildAt(rowIndex-1));
    var prevRowW:int = 0;
    var totalW:int = 0;

    //First, get the width of the previous row
    for (var j:int = 0; j < prevRow.numChildren; j++)
    {   
        var ch:DockableToolBar = DockableToolBar(prevRow.getChildAt(j));
        prevRowW += ch.measuredWidth;
    }
    //Second, cycle through the children of the ""row of interest"", moving them
    //up to the previous row if there's room.
    for (var k:int = 0; k < row.numChildren; k++)
    {   
        var child:DockableToolBar = DockableToolBar(row.getChildAt(k));
        if ((prevRowW + child.measuredWidth) >= toolbar.width) {
            break;
        }
        //Move child.
        child.parent.removeChild(child);
        prevRow.addChild(child);
        prevRowW += child.measuredWidth;
        --k;
    }
    if (row.numChildren == 0) {
        toolbar.removeChild(row);
    }
} You can see the rest of this class here (that listing doesn't include my code; I plan to submit this as a patch once it's in good enough shape)."
1133,"You could do: $privilegeStrings = array_filter($privileges, 'is_string'); array_filter passes every value of the array to the specified function. So you can just specify the function name and everything will be taken care of. Reference"
1134,"Name your arguments. If you know enough about what you'll have passed in to take item -1 of the positional argument list, you know enough to give it a name."
1135,"I have one little suggestion with regard to style. It is much better to invert your conditions to have the simpler code run first when it involves yielding control. It also helps you avoid excessive indentation. var child:DockableToolBar = DockableToolBar(row.getChildAt(k));

//Skip the rest of the row if we can't move the first child up.
if (prevRowW + child.measuredWidth >= toolbar.width) {
    break;
}

//Move child.
child.parent.removeChild(child);
prevRow.addChild(child);
prevRowW += child.measuredWidth;
--k;"
1140,"import itertools
import numpy

number = [53, 64, 68, 71, 77, 82, 85]


results = itertools.combinations(number,4)
# convert the combination iterator into a numpy array
col_one = numpy.array(list(results))

# calculate average of col_one
col_one_average = numpy.mean(col_one, axis = 1).astype(int)

# I don't actually create col_two, as I never figured out a good way to do it
# But since I only need the sum, I figure that out by subtraction
col_two_average = (numpy.sum(number) - numpy.sum(col_one, axis = 1)) / 3

dif = col_one_average - col_two_average

print dif"
1141,"I feel like naming your first argument firstArgument will cause more confusion than it's worth. I would offer 2 overloads for this method. // This overload will simply pass null to the main overload 
// for the sake of convenience.
public static T CreateCompatibleDelegate<T>(MethodInfo method)

// I feel like the name 'instance' really makes it clear
// what the parameter means.
public static T CreateCompatibleDelegate<T>(object instance, MethodInfo method)"
1142,"Checking if an event is not null before firing it in C#. I often see this for custom events: void InvokeCustomEvent(EventArgs e)
{
    var handler = CustomEvent;
    if (handler != null) handler(this, e);
} But is creating the handler variable required, best practice, or superfluous, when compared to: void InvokeCustomEvent(EventArgs e)
{
    if (CustomEvent != null) CustomEvent(this, e);
} ?"
1143,"But is creating the handler variable required, best practice, or superfluous, when compared to: Yes, it is needed. Otherwise, CustomEvent could be set to null after you've checked for null , but before you've invoked it. This can happen if it gets set in another thread, or if one of the event handlers unregisters itself or another one. I usually have this declared somewhere in my codebase: public static class EventExtensions
{
    public static void Raise<T>(this EventHandler<T> handler, T args) {
        if (handler != null) handler(args);
    }
} Now, with any event handler, you can just do: handler.Raise(args); You can call an extension method with a null this, so it will do the right thing even if handler is null . Furthermore, by copying handler into the local variable used by Raise , you automatically get the copy you need to make sure the handler won't disappear under you. Works like a charm."
1145,"I'd build upon @sepp2k's modification by separating the concerns of 1) getting the link data, 2) building the links, 3) combining links into a bulleted list, and 4) adding the bullets to navList as follows: private void LoadNavigation()
{
    Uri urlPrefix = new Uri(""http://mysite.com"");
    string xmlFilePath = ConfigurationManager.AppSettings[""NavigationUrl""].ToString();
    XmlDocument doc = new XmlDocument();
    doc.Load(xmlFilePath);
    XmlNodeList navigationItems = doc.DocumentElement.FirstChild.ChildNodes;

    var links = navigationItems
        .Cast<XmlNode>()
        .Select(x => new
            {
                FullUrl = new Uri(urlPrefix, x.Attributes.GetNamedItem(""url"").Value) , 
                Title = x.Attributes.GetNamedItem(""title"").Value
            })
        .Select(x => String.Format(""<a href=\""{0}\"">{1}</a>"", x.FullUrl, x.Title))
        .ToArray();

    var bulletedLinks = ""<li>"" + String.Join(""|</li><li>"", links) + ""</li>"";
    navList.InnerHtml += bulletedLinks;
} Next I'd separate the concerns of 1) getting the xmlFilePath from the ConfigurationManager, and 2) loading the navigations items, from the process of updating navList. I'd also pass in the urlPrefix string or fetch it from an application configuration setting instead of hard coding it. private string GetNavigationUrlXmlFilePath()
{
    string xmlFilePath = ConfigurationManager.AppSettings[""NavigationUrl""].ToString();
    return xmlFilePath;
}

private IEnumerable<XmlNode> LoadNavigationItems()
{
    var xmlFilePath = GetNavigationUrlXmlFilePath();
    XmlDocument doc = new XmlDocument();
    doc.Load(xmlFilePath);
    XmlNodeList navigationItems = doc.DocumentElement.FirstChild.ChildNodes;
    return navigationItems.Cast<XmlNode>();
}

private void LoadNavigation(Uri urlPrefix)
{
    var links = LoadNavigationItems()
        .Select(x => new
            {
                FullUrl = new Uri(urlPrefix, x.Attributes.GetNamedItem(""url"").Value) , 
                Title = x.Attributes.GetNamedItem(""title"").Value
            })
        .Select(x => String.Format(""<a href=\""{0}\"">{1}</a>"", x.FullUrl, x.Title))
        .ToArray();

    var bulletedLinks = ""<li>"" + String.Join(""|</li><li>"", links) + ""</li>"";
    navList.InnerHtml += bulletedLinks;
} I'd also pull ""NavigationUrl"" out to a single location so I wouldn't have to change a bunch of code when I want to change the key name. public static class ApplicationConfigurationSettingsKeys
{
    public static class MySite
    {
        public static readonly string NavigationUrl = ""NavigationUrl"";
    }
} Then I'd put GetNavigationUrlXmlFilePath and LoadNavigationItems behind interfaces so that they can be tested independently and LoadNavigation can be tested without having to go to the disk. public interface IApplicationConfigurationSettingsProvider
{
    string GetSetting(string key);
}

public class ApplicationConfigurationSettingsProvider : IApplicationConfigurationSettingsProvider
{
    public string GetSetting(string key)
    {
        return ConfigurationManager.AppSettings[key].ToString();
    }
}

public interface INavigationLoader
{
    IEnumerable<XmlNode> LoadNavigationItems();
}

public class NavigationLoader : INavigationLoader
{
    private readonly IApplicationConfigurationSettingsProvider _applicationConfigurationSettingsProvider;

    public NavigationLoader(IApplicationConfigurationSettingsProvider applicationConfigurationSettingsProvider)
    {
        _applicationConfigurationSettingsProvider = applicationConfigurationSettingsProvider;
    }

    public IEnumerable<XmlNode> LoadNavigationItems()
    {
        var xmlFilePath = _applicationConfigurationSettingsProvider
            .GetSetting(ApplicationConfigurationSettingsKeys.MySite.NavigationUrl);
        var doc = new XmlDocument();
        doc.Load(xmlFilePath);
        var navigationItems = doc.DocumentElement.FirstChild.ChildNodes;
        return navigationItems.Cast<XmlNode>();
    }
} leaving: private readonly INavigationLoader _navigationLoader;
private void LoadNavigation(Uri urlPrefix)
{
    var links = _navigationLoader.LoadNavigationItems()
        .Select(x => new
            {
                FullUrl = new Uri(urlPrefix, x.Attributes.GetNamedItem(""url"").Value) , 
                Title = x.Attributes.GetNamedItem(""title"").Value
            })
        .Select(x => String.Format(""<a href=\""{0}\"">{1}</a>"", x.FullUrl, x.Title))
        .ToArray();

    var bulletedLinks = ""<li>"" + String.Join(""|</li><li>"", links) + ""</li>"";
    navList.InnerHtml += bulletedLinks;
} Next I'd pull the conversion of XmlNode data to an HTML link out where it can be tested independently, possibly to an extension method: public static class XmlNodeExtensions
{
    public static string ToHtmlLink(this XmlNode node, Uri urlPrefix)
    {
        var fullUrl = new Uri(urlPrefix, node.Attributes.GetNamedItem(""url"").Value);
        var title = node.Attributes.GetNamedItem(""title"").Value;
        return String.Format(""<a href=\""{0}\"">{1}</a>"", fullUrl, title);
    }
} leaving: private void LoadNavigation(Uri urlPrefix)
{
    var links = _navigationLoader.LoadNavigationItems()
        .Select(x => x.ToHtmlLink(urlPrefix))
        .ToArray();

    var bulletedLinks = ""<li>"" + String.Join(""|</li><li>"", links) + ""</li>"";
    navList.InnerHtml += bulletedLinks;
} Finally, I'd pull out another method, possibly an extension, for building the bulleted list public static class StringExtensions
{
    public static string ToHtmlBullets(this IEnumerable<string> items, string suffix)
    {
        var bulleted = ""<li>""+String.Join((suffix??"""")+""</li><li>"",items.ToArray())+""</li>"";
        return bulleted;
    }
} leaving only: private void LoadNavigation(Uri urlPrefix)
{
    var links = _navigationLoader.LoadNavigationItems()
        .Select(x => x.ToHtmlLink(urlPrefix))
        .ToHtmlBullets(""|"");

    navList.InnerHtml += links;
} This method might now be more accurately named something like AddNavigationLinks. I'm also inclined to make this method side-effect free by passing navList into the method, I just don't happen to know what its type is."
1146,"string.Join() is a good answer, but I prefer to create an extension method: namespace StringExtensions
{
    static class _
    {
        public static string JoinString<T>(this IEnumerable<T> source, string seperator = """")
        {
            return string.Join(seperator, source);
        }
    }
} which is used like this: return MyList.Select(i => i.Value).JoinString("", ""); (I'm using my unconventional method of organizing extension methods, which you can read about here: http://jbazuzicode.blogspot.com/2009/01/way-to-manage-extension-methods-in-c.html )."
1147,"You actually don't need the null check at all if you use the following trick.  Simply create a default, empty handler that is always registered, so the event is guaranteed to never be null. Declare your event like so (notice the = delegate { } bit) public event EventHandler CustomEvent = delegate { }; And you can then invoke it without any null checks."
1148,Consider using TopShelf to manage the whole install/uninstall/configure service task. This has the wonderful feature of allowing you to debug your code from the command line instead of having to attach to a windows service.
1150,"Thread Safe Service to Perform Tasks in a Queue. In answering a question on SO, I provided this example.  The intention was to provide a thread safe service that queues requests to make directories.  I figured I could definitely use some review on my use of threading, singletons and general Java skills. package mkdir;

import java.io.File;
import java.util.concurrent.ConcurrentLinkedQueue;

public class MkDirService implements Runnable {

    private static MkDirService service;
    private static ConcurrentLinkedQueue<File> pendingDirs;


    private MkDirService() {
        pendingDirs = new ConcurrentLinkedQueue<File>();
    }

    public static MkDirService getService() {
        if (service == null) {
            service = new MkDirService();
            new Thread(service).start();
        }
        return service;

    }

    public void makeDir(File dir) {
        pendingDirs.add(dir);
    }

    @Override
    public void run() {
        while (true) {
            while (!pendingDirs.isEmpty())
            {
                File curDir = pendingDirs.poll();
                if (curDir !=null && !curDir.exists()) {
                    curDir.mkdir();
                }
            }
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }

}"
1152,"If you don't want to call len twice for each item (if, for example, you need to call some expensive function instead of len ), you can sort by the second item without lambdas by using itemgetter . from operator import itemgetter    

data = [""something"", ""something else"", ""blah"", ""a string""]
l = [(s, len(s)) for s in data]
l.sort(key = itemgetter(1)) However, if the order of members is not important, it would be better to place the length first in the tuple, because the default behaviour for sorting tuples is to compare the elements in order. data = [""something"", ""something else"", ""blah"", ""a string""]
l = sorted((len(s), s) for s in data) You can then switch them around during output if you want: for length, item in l:
    print item, length"
1153,"pendingDirs should not be static. It's one thing to maintain a static instance to implement a singleton, but that object should interact with its state using normal instance variables. And you may as well initialize it in its declaration instead of the constructor. The service should create the thread itself instead of creating it in getService() to make it self-contained. This allows another implementation to use a thread pool for parallel directory creation and easier testing. getService() is not thread-safe and could allow two or more instances to be created. Use a blocking queue , so you don't have to poll and sleep. The thread will be put to sleep if the queue is empty and be awoken once a new directory is added to the queue. This will shrink your run loop to a few lines and allow you to rely on the well-tested thread-management in java.util.concurrent ."
1154,"If I had to do anything like that I'd just use java.lang.reflect.Proxy and generate the wrappers on the fly. You an check if the methods of Foo and EasyFoo are matching properly and disallow the EasyFoo impl (both interfaces should have the same method signatures but EasyFoo, no declared exceptions). In the end you have a reusable library to do dirty stuff. The invocation through the proxy will be slower but who cares. So basically you need one class the generates proxies and one designated exception for the wrapping. You should wrap exceptions that are declared only. Overall the code is synthetic sugar to me, though. You can always live w/ throws declaration instead. Even possible, I guess altering the compiler is not very feasible but the runtime verifier doesn't care of the exception declarations."
1156,"Is this a valid loop?. I have the following code: private ScatterViewItem FindScatterViewOfSourceFile(SourceFile find)
{
   foreach (ScatterViewItem svi in classScatterViews)
   {
      if ((svi.Tag as SourceFile).Equals(find))
      {
         return svi;
      }
   }
   return null;
} Now I'm asking myself if this is valid or if I should better use: private ScatterViewItem FindScatterViewOfSourceFile(SourceFile find)
{
   ScatterViewItem result = null;
   foreach (ScatterViewItem svi in classScatterViews)
   {
      if ((svi.Tag as SourceFile).Equals(find))
      {
         result = svi;
         break;
      }
   }
   return result;
} Is there any common practive which one to use? And are both loops doing the same?"
1157,"So you have heard about the good practice that a method should only have one return statement.
This is generally true, but in your case I find it not to be necessary because the method is so small. The main reason for this 'rule' is readability, so you know what is going on. Both code samples are equally clear. When you have several places where a return would occur, it's best to use the second approach. However, I would rewrite it by using LINQ. I believe this should work: private ScatterViewItem FindScatterViewOfSourceFile(SourceFile find)
{
    return classScatterViews.FirstOrDefault( svi => svi.Tag.Equals(find) );
} UPDATE: Also note that the cast to the specific type to call the Equals() is dropped. This is redundant as the correct Equals() will be called anyhow."
1158,First one is hundred times better then the second one. I would avoid defining a variable if you don't really need to. Also I don't believe in one return methods. Especially I don't believe that they improve readability. LINQ would definitely improve it: return classScatterViews.FirstOrDefault(v => v.Tag.Equals(find)); Also I would not use as operator if I do not check result for null .
1159,"OAuth Provider token generation. I'm currently creating an OAuth provider in Java using Jersey . To the best of my knowledge Jersey does not provide a method to create oauth tokens so I'm creating my own. For those unfamiliar with OAuth, the tokens will be used in a somewhat similar fashion to public/private keys to sign and verify all requests to the server. A String is formed using a token issued by the server (me) and then encrypted with that token secret (which only the server and the application know). The signature is then sent to the server and verified. Each token must be: non-sequential non-guessable unique (the tokens will be stored in a database so uniqueness can be verified) This is the code I'm thinking of using to generate the keys: public String generateToken() {
    SecureRandom secureRandom = SecureRandom.getInstance(""SHA1PRNG"");
    MessageDigest digest = MessageDigest.getInstance(""SHA-256"");
    secureRandom.setSeed(secureRandom.generateSeed(128));
    return new String(digest.digest((secureRandom.nextLong() + """").getBytes()));
} I'm generating a Long using Java's SecureRandom with SHA-1-PRNG.
Using a 128 bit seed again generated by SecureRandom. I'm then using SHA-256 to hash the resulting Long to get a 32 character Unicode String as the token. Is anyone able to see any issues with this style of token generation? If multiple tokens were requested in a row, is there a chance of predicting the next one? I assume that 32 characters is more than enough for this kind of request signing."
1161,"class Pool(type): The defaultdict class will automatically create my list when I access it pool = collection.defaultdict(list) The python style guide suggests using the form class_ rather then clas
It is also not clear why you are capturing the incoming arguments as variable.
This being a metaclass it is going to have consistent parameters def __new__(class_, name, bases, classdict):
        def __del__(self): Since pool now automatically creates the list, we can just append to it
                Pool.pool[self. class ].append(self) Getting rid of the variable arguments also makes this much clearer. classdict['__del__'] = __del__
        return type.__new__(class_, name, bases, classdict) args and kwargs are often used as the names for variable parameters. I recommend using them to make code clearer def __call__(class_, *args, **kwargs): Thanks to the use of defaultdict above we can make this code quite a bit cleaner. Also, this code doesn't pretend its using a functional programming language. Your code created lists by adding them together, slicing, etc. That is not a really efficient or clear way to use python. instances = Pool.pool[class_]
        if instances: There is a subtle and dangerous problem here. When you create a new instance, you pass along your parameters.
However, if an instance is already created, you return that ignoring what the parameters were doing.
This means that you might get an object back which was created using different parameters then you just passed.
I haven't done anything to fix that here print('Pool.pool is not empty: return an already allocated instance')
            return instances.pop()
        else:
            print('Pool.pool is empty, allocate new instance')
            return type.__call__(class_, *args, **kwargs) Your technique is to install a __del__ method on the objects so that you can detect when they are no longer being used and keep them in your list for the next person who asks for them. the __del__ method is invoked when the object is about to be deleted. You prevent the deletion by storing a reference to the object in your list. This is allowed but the python documentation indicates that it is not recommended. __del__ has a number of gotchas. If an exception is caused while running the __del__ method it will be ignored. Additionally, it will tend to cause objects in references cycles to not be collectable. If your code is ever run on Jython/IronPython then you can't be sure that __del__ will be called in a timely manner. For these reasons I generally avoid use of __del__ . You are using a metaclass so the fact that the given object is pooled is hidden from the user. I don't really think this is a good idea. I think it is far better to be explict about something like pooling. You also lose flexibility doing it this way. You cannot create multiple pools, etc. The interface that I would design for this would be: pool = Pool(Foo, 1, 2, alpha = 5) # the pool gets the arguments that will be used to construct Foo
with pool.get() as f1:
    # as long as I'm in the with block, I have f1, it'll be returned when I exit the block
    f1.foo()
with pool.get() as f2:
    f2.foo()
    with pool.get() as f3:
        f3.foo()

f4 = pool.get()
f4.foo()
pool.repool(f4)"
1162,"Dealing with Entity Framework's lack of enum support. I'm using Entity Framework Code First CTP 5 for a current project. There is still no enum support in Entity Framework so this is what I am using in order to avoid having magic numbers or casts littered throughout my code. Simplified Example: Domain Model Consumed by Code First public class Address
{
    // This would normally be an enum
    public int Type { get; set; }
} Repository public class AddressRepository
{
    public Add(Address address)
    {
        // Compare using enum semantics
        if (address.Type == AddressType.Home)
            // Do something

        context.Add(address);
    }
} View Model public class AddressVM
{
    // Using the AddressType class for the view model
    public AddressType Type { get; set; }     

    public AddressVM(Address address)
    {
        this.Type = address.Type;
    }
} Enum Replacement Class public interface IEnumClass
{
    List<string> Properties { get; }
}

public class AddressType : IEnumClass
{
    public static int Home { get { return 0; } }
    public static int Work { get { return 1; } }

    public List<string> Properties { get { return properties; } }

    private List<string> properties;
    private int id;

    public AddressType()
    {
        SetProperties();
    }
    public AddressType(int id)
    {
        this.id = id;
        SetProperties();
    }

    private void SetProperties()
    {
        properties = this.GetType().GetProperties(BindingFlags.Public|BindingFlags.Static)
            .Select(x => x.Name).ToList();
    }

    public static implicit operator AddressType(int id)
    {
        return new AddressType(id);
    }

    public static implicit operator String(AddressType addressType)
    {
        return addressType.properties[addressType.id];
    }

    public static implicit operator int(AddressType addressType)
    {
        return addressType.id;
    }
} My Personal Assessment Pros: Allows me to write business rules without using magic numbers Uses the same semantics/syntax as enums for easy refactoring down the road Allows for an implicit conversion to a string for the view model My select list factory class can easily be made to accept any IEnumClass and generate a select list for the view model Cons: A little verbose As far as I can tell it is impossible to use a nice abstract generic class because all the actual work uses implicit type casting I'm asking for feedback here because I'm a total novice programmer so I want to solicit some critiques before implementing something I just came up with!"
1163,"Also to create even one thread it is recommended to use concurrent package:
Executors.newSingleThreadExecutor().submit(new MkDirService());"
1165,"Second revision Ok, first of all it would really help if you added some comments. I would also suggest giving your variables names which have more than one letter. In particular it would be a good idea to describe the algorithms being used. In particular you should document what kind of tree and balancing algorithm you're using. Speaking of: your tree kind of looks like an AVL tree except that in AVL trees the maximum difference between heights is 1, while you allow a difference of 2. Since you never said that you were trying to implement an AVL tree, I'm not sure whether that's intentional or not. Some notes on particular pieces of code: match height left, height right with
| l, r when l >= r -> l + 1
| l, r -> r + 1 That's just a cumbersome way to write max (height left) (height right) . Some {
    key = key
    value = value
    height = node.height + 1
    left = None
    right = None
} This looks like a mistake. If both the subtrees are empty, then clearly the height is 1 and not dependent on node . I would also recommend that instead of using Node option s you define an actual tree type like this: type ('a * 'b) tree = Node of ('a, 'b) Node | EmptyTree . This way you can refer to empty trees as EmptyTree rather than None and to nodes as Node {...} rather than Some {...} . Of course that's just cosmetics, but I do think it reads much nicer. First revision One minor style point is that you might want to call your FromSeq method ofSeq instead as that is what the equivalent function of F#'s Map module is called. Regarding performance the most obvious problem is that your tree is not balanced in any way. If you create a map from a sorted list of keys, it will degenerate into a linked list and have much worse performance than F#'s standard map class. Just compare the time it takes to create your map from Seq.zip [1..500000] [1..500000] to the time the standard Map needs for the same input. To address this, you should implement some kind of balancing. For example you may use red-black trees , which is what F#'s standard map uses."
1166,"I think the biggest drawback to your approach is that you're adding complexity but not really getting the main benefit you're after, which is to avoid magic numbers.  This code doesn't prevent you from using magic numbers since it automatically converts from any int to an AddressType , and it still exposes its values as an int .  So I would suggest one of the following two approaches.  The first one is very simple but seems to give the same benefits as your code.  The second one is more along the lines of what you're after, so there's some complexity, but has some added benefits as well. Simple solution I think the simplest thing would be to just have a static class with constants defined in it, like so: public static class AddressType
{
    public const int Home = 1;
    public const int Work = 2;
} (Note: as with any enum, 0 should not be a valid value) You would then store your values as int on your entities, but always compare them against these constants.  This would give you the same usage pattern as you showed in your question. More complicated solution Alternatively, if you want to go with your approach, you should restrict it to only allow you to instantiate an AddressType with known values, which will prevent the use of magic numbers and make it more strongly typed than using a plain int . So for example, something like the following: public class AddressType
{
    public static readonly AddressType Home = new AddressType(1);
    public static readonly AddressType Work = new AddressType(2);

    private int value;

    private AddressType(int value)
    {
        this.value = value;
    }

    public override bool Equals(object obj)
    {
        AddressType rhs = obj as AddressType;
        return
            rhs != null &&
            this.value == rhs.value;
    }

    public override int GetHashCode()
    {
        return this.value.GetHashCode();
    }
} In your model, you would use it like so: public class Address
{
    public AddressType AddressType { get; set; }
} Now assigning and comparing these AddressType values looks just like an enum, but explicitly prevents you from using any magic numbers.  If you really need it, you can also add conversions to/from int , but only allow it if they are known values. You could use something like the following, though if you have more than 2 values you'll probably want to use a dictionary to map from int to AddressType : public static implicit operator AddressType(int value)
{
    if (value == AddressType.Home.value)
    {
        return AddressType.Home;
    }
    else if (value == AddressType.Work.value)
    {
        return AddressType.Work;
    }

    throw new InvalidCastException();
}"
1167,"You can use jQuery 1.4's new element creation syntax to shorten things a little (rewriting pdr's answer): $('<li>').append(
    $('<a>', {
        title: this.title,
        text: this.title,
        href: this.link,
        click: FeedManager.showStory
    })
).appendTo(FeedManager.$feedContainer); And the same can be done with the element created in the handleError function"
1168,"There is no comments. This: What it does is: Reads from a RSS feed using google
  feed API shows the list in an
  unordered list. Should be a comment somewhere in top of the code"
1169,"I don't know what the policy is about where/how to put subsequent code reviews, since the Stackexchange system doesn't really seem well-suited to their threadlike nature.  Anyway, here goes. (let ((pivot (car the-list)) (the-rest (cdr the-list)))
  (let ((categorized-list (categorize-list pivot the-rest () ()))) Look up LET* . (let ((the-list ()))
    (loop for l from 1 to length do (setq the-list (append the-list (list (random 25))))) the-list)) This seems pretty awkward.  It's just: (loop for l from 1 to length collect (random 25)) And here: (loop for l from 0 to (- (length the-list) 2) do
  (unless (<= (nth l the-list) (nth (+ l 1) the-list)) (error ""Out of order: ~d < ~d ~%"" (nth l the-list) (nth (+ l 1) the-list))))) Every call to LENGTH or NTH has to walk the linked list.  You don't want to do that in a loop.  (I think you should not often need NTH with lists, and almost never in a loop.) (loop for p on the-list while (second p)
      when (< (second p) (first p))
      do (error ""Out of order: ~d < ~d~%"" (second p) (first p))) If you're going to be writing Common Lisp code, it pays to learn the LOOP DSL (or ITERATE , its spiritual successor). Other random things: Your code has gotten a lot ... wider.  While I appreciate taking fewer lines, there's a limit.  I don't often see multiple LET bindings on one line, for example. You sometimes still leave out the space before a paren, like list(pivot , which looks funny to me."
1170,"Web-page template. I've been spending a long time working on this template, I'd like to know if its CSS/HTML is good, and mainly if it is speedy to load, accessible, semantic and SEO friendly. I've tested it in IE7+, Chrome, FF and Safari and am happy with the output in each. Working URL /* Main Layout Elements */
body{
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica, Verdana;
    background: #EAFDE6 url(../images/background.png) repeat-x;
    color:#444;
}
label{
    cursor: pointer;
}
p {
    margin: 0 0 20px 8px;
    position:relative;
}
.news-wrapper p
{
    margin: 0 0 10px 8px;
}
a{
    color: #1B676B;
}
.time-ago{
    float:right;
    color: #1B676B;
}
.top-bar{
    position:absolute;
    top:0;
    left:0;
    background-color: #519548;
    height: 30px;
    border-bottom:2px solid #3E7236;
    width: 100%;
    z-index:1;
}
h1{
    margin:0;
    margin-bottom:5px;
    font-size:35px;
    color: #519548;
    font-weight:normal;
}
h2{
    margin:0;
    margin-bottom:5px;
    font-size:35px;
    color: #519548;
    font-weight:normal;
}
h3{
    margin:0 0 5px 0;
    font-size:22px;
    color: #519548;
    font-weight:normal;
}
h3 a
{
    color: #519548;
    text-decoration:underline;
}
h3 a:hover
{
    color: #1B676B;
    text-decoration:none;
}
h4{
    text-shadow: black 0.1em 0.1em 0.2em;
    text-transform: uppercase;
    font-size: 17px;
    font-weight: bold;
    margin-bottom: 3px;
    margin-top: 30px;
}
a.ralign{
    text-align:right;
    display: block;
}
.clear{
    clear:both;
}

/* Sprite definitions and positioning */
.s{
    background-image:url(../images/sprites.png);
    background-repeat:no-repeat;
}
.facebook{
    background-position: 0 0;
}
.twitter{
    background-position: 0 -40px;
}
.slideshow-wrapper{
    height:261px;
    overflow:hidden;
    -moz-box-shadow: 0px 0px 5px #555;
    -webkit-box-shadow: 0px 0px 5px #555;
    box-shadow: 0px 0px 5px #555;
}

.youtube{
    background-position: 0 -80px;
}

/* Main Wrappers */
.content-wrapper{
    width:750px;
    margin: 0 auto;
}
.head-wrapper{
    height: 120px;
    padding-left:11px;
}
.footer-wrapper{
    position:relative;
    z-index:1;
    top: -35px;
    height:155px;
    background-image: url(../images/background-footer.png);
    background-repeat:repeat-x;
    margin-bottom: -35px;
    overflow: hidden;
}
.main-wrapper{
    margin: 0 auto;
    width: 792px;
    background-image: url(../images/mainbox-background.png);
    z-index:2;
    position:relative;
    padding: 0 0 0px 0;
}
.main-end{
    width: 786px;
    background-image: url(../images/mainbox-background-bottom.png);
    background-color:transparent;
    height:32px;
    position:relative;
    z-index:2;
    margin: 0 auto;
    padding:0;
}

/* Footer */
.footer-inner-wrapper
{
    color: white;
    font-size: 13px;
    margin: 0 auto;
    width: 700px;
    margin-top:5px;
}
.footer-item{
    float: left;
    width: 33%;
}
.footer-item ul{
    list-style-type: none;
    margin: 0;
    padding: 0;
}
.footer-item p{
    padding: 0;
    margin: 0;
}
.footer-item a{
    font-size:13px;
    color:white;
}
.footer-item a:hover{
    color: #ffaa00;
}
.copyright
{
    color: #9FCAD5;
    text-align:center;
    background-color: #2A525A;
    background-image: url(../images/copyright-background.png);
    font-size: 14px;
    line-height:35px;
    height:35px;
    text-shadow: 0px 1px 1px #2A525A;
}
.social-icon{
    height: 40px;
    width: 32px;
    float: left;
    margin-top: 7px;
    position:relative;
    left: -4px;
    display:block;
}

/* Search */
.search-wrapper{
    background-position: -46px -70px;
    width: 259px;
    height:62px;
    position:absolute;
    right: -50px;
    top: 0;
    text-align:center;
    line-height:50px;   
}
.search-wrapper input{
    height:24px;
    padding-left:15px;
    color: #c0c0c0;
    line-height:24px;
    padding-right:25px;
    border: 0;
    position:absolute;
    top: 15px;
    left:30px;
}
.search-icon{
    height: 37px;
    width: 36px;
    background-position: -40px 0;
    position:absolute;
    left:205px;
    top:13px;
}

/* Menus */
.menu-main{
    height:38px;
    background-color: #88C425;
    font-size: 15px;
    font-weight: bold;
    line-height:38px;
    margin:0;
    padding: 0;
    padding-left: 20px;
}
.menu-wrapper{
    width: 770px;
    padding-left:11px;
    margin-bottom:10px;
}
.menu-main li{
    margin: 0;
    list-style-type: none;
    float:left; 
}
.menu-main a{
    text-shadow: #114400 1px 1px 1px;
    display: block;
    padding-left: 20px;
    padding-right: 20px;
    color:white;
    text-decoration: none;
}
.menu-main a:hover{
    background-color:#3E7236;
}
a.main-item-selected{
    background-color:#519548;
}
.main-item-selected a:hover{
    background-color:#519548 !important;    /* Stupid firefox bug */
}
.mainSelLPan{
    float:left;
    width:11px;
    height:33px;
    background-position: -105px 0;
    margin-left: -11px;
}
.mainSelPos{
    position:relative;
    top: 5px;
}
.mainSelRPan{
    float:left;
    width:11px;
    height:33px;
    background-repeat:no-repeat;
    background-position: -116px 0;
    margin-right: -11px;
}
.mainSelTxt{
    float:left;
    background-color:#519548;
    height:33px;
    line-height:33px;
}
.sub-menu{
    height: 33px;
    background-color: #519548;
    font-size: 13px;
    line-height:33px;
    margin: 0;
    padding: 0;
    padding-left:20px;
}
.sub-menu li{
    margin: 0;
    list-style-type: none;
    float:left;
}
.sub-menu a{
    display: block;
    padding-left: 20px;
    padding-right: 20px;
    color:white;
    text-decoration: none;
}
a.sub-item-selected{
    background-color:#3E7236;
    color: white !important;
}
.sub-menu a:hover{
    background-color:#3E7236;
}
.underSelLPan{
    float:left;
    width:11px;
    height:33px;
    background-position: -78px 0;
    margin-left: -11px;
}
.underSelPos{
    position:relative;
    top: 6px;
}
.underSelRPan{
    float:left;
    width:11px;
    height:23px;
    background-repeat:no-repeat;
    background-position: -91px 0;
    margin-right: -11px;
}
.underSelTxt{
    float:left;
    background-color:#3E7236;
    height:22px;
    line-height:22px;
}

/* Download box link */
.download{
    display: block;
    background-position: -134px 0;
    width: 215px;
    height: 55px;
    margin: 0 auto;
    text-align:right;
    color:white;
    text-transform: uppercase;
    text-decoration: none;
}
.download-title{
    font-weight:bold;
    font-size:17px;
    padding-top:14px;
    padding-right: 15px;
}
.download-size{
    padding-right: 15px;
    font-size:14px;
    margin-top: -3px;
}

/* Other */
.moreInfoLink{
    display:block;
    color:white;
    font-size:12px;
    font-weight:bold;
    text-decoration: none;
    float:right;
    height:17px;
    background-color:#1B676B;
    text-align:center;
    padding:0 12px 0 12px;
    line-height:17px;
    min-width:100px;
    -moz-border-radius: 10px;
    border-radius:  10px;
    position:absolute;
    bottom: 0;
    right: 0;
}
.moreInfoLink:hover{
    text-decoration:underline;
    background-color: #23868B;
}
.column-thin{
    float:left;
    width:270px;
}
.column-wide{
    float:left;
    margin-right:10px;
    width:470px;
}
.news-wrapper{
    position:relative;
    top: -25px;
    margin-bottom:-25px;
}
.column-half{
    float:left;
    width:48%;  
    position:relative;
}
.r{
    float:right;
}
.spotlight{
    float:left;
    margin-right:15px;
    width: 90px;
    height: 90px;
    position:relative;  
}
.spotlight img{
    position:absolute;
}
.slideshow-wrapper img{
    width:470px;
    height: 261px;
    border: 0;
}
.slideshow-wrapper a{
    text-decoration: none;
} <!DOCTYPE html>

<html lang=""en"">

<head>
    <meta charset=""UTF-8"" />
    <title>Make Games with Scirra Software</title>
    <meta name=""description"" content=""Game making with Construct."" />
    <meta name=""keywords"" content=""game maker, game builder, html5, create games, games creator"" />
    <link rel=""stylesheet"" href=""css/default.css"" /> 
    <link rel=""stylesheet"" href=""plugins/coin-slider/coin-slider-styles.css"" />
    <link rel=""shortcut icon"" href=""images/favicon.ico"" />
    <link rel=""apple-touch-icon"" href=""images/favicon_apple.png"" />
    <script src=""js/googleAnalytics.js""></script>
</head>

<body>


<div class=""top-bar""></div>
<div class=""main-wrapper"">
    <header>
        <div class=""head-wrapper"">      
            <div class=""s search-wrapper"">
                <input type=""text"" name=""SearchBox"" id=""SearchBox"" tabindex=""1"" />
                <div class=""s search-icon"" title=""Search Scirra""></div>
            </div>
            <!-- Logo placeholder -->       
        </div>      
        <div class=""menu-wrapper"">
            <nav>
                <ul class=""menu-main"">
                    <li><a href=""#"" class=""main-item-selected"">Home</a></li>
                    <li><a href=""#"">Forum</a></li>
                    <li><a href=""#"">Construct</a></li>
                    <li><a href=""#"">Arcade</a></li>
                    <li><a href=""#"">Manual</a></li>
                </ul>
                <ul class=""sub-menu"">
                    <li><a href=""#"">Homepage</a></li>   
                    <li><a href=""#"" class=""sub-item-selected"">Construct</a></li>
                    <li><a href=""#"">Products</a></li>
                    <li><a href=""#"">Community Forum</a></li>
                    <li><a href=""#"">Contact Us</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class=""content-wrapper"">
        <div class=""column-wide"">
            <div id=""coin-slider"" class=""slideshow-wrapper"">
                <a href=""#"" title=""Features for making your games"" target=""_blank"">
                    <img src=""images/screenshot1.jpg"" alt=""Features to help you make your games"" />
                    <span>
                        Packed with hundreds of exciting features
                    </span>
                </a>
                <a href=""#"" title=""Functional and intuitive games editor"">
                    <img src=""images/screenshot2.jpg"" alt=""Games editing has never been easier"" />
                    <span>
                        Construct's intuitive editor means it's never been easier to create
                    </span>
                </a>    
                <a href=""#"" title=""High performance optimised games"">
                    <img src=""images/screenshot3.jpg"" alt=""Screenshot"" alt=""Optimised for performance"" />
                    <span>
                        Squeeze every drop of performance from your platforms
                    </span>
                </a>
                <a href=""#"" title=""Professional and stunning game making"">
                    <img src=""images/screenshot4.jpg"" alt=""Make stunning professionally finished games"" />
                    <span>
                        Design stunning and professionally finished games
                    </span>
                </a>
            </div>  
            <div class=""news-wrapper"">
                <h2>Latest from Scirra</h2>
                <section>
                    <h3>New from our <a href=""http://twitter.com/Scirra"" title=""Construct game making on Twitter"">Twitter</a> feed</h3> 
                    <p>The news on the block is this.  Something has happened some news or something. <span class=""time-ago"">About 1 hour ago</span></p>
                    <p>Another thing has happened lets tell the world some news or something. Lots to think about.  Lots to do.<span class=""time-ago"">About 6 hours ago</span></p>
                </section>
                <section>
                    <h3>Scirra's <a href=""#"" title=""Developement blog"">Developer Blog</a></h3>
                    <p>Tom describes why he thinks Adobe Flash is on the out, and HTML5 is going to take over the web.<span class=""time-ago"">About 1 day ago</span></p>
                </section>
            </div>
        </div>
        <div class=""column-thin"">
            <h1>Make Games</h1>
            <p>Game making has never been easier with <a href=""#"" title=""Make games with Construct"">Construct</a>.  Design unique worlds where only your imagination is the limit.  Want to get more involved?  Visit our <a href=""#"" title=""Plugins for Construct"">plugin library</a>, and throw yourself into our active <a href=""#"" title=""Visit the helpful Scirra community"">community</a></p>
            <h3>Export in Multiple Formats</h3>
            <p>The <a href=""#"" title=""Alternative to Flash"">HTML5 Exporter</a> allows you to export your games to a web page, a truly multi platform solution.  With an <a href=""#"" ""Construct executable exporter"">EXE Exporter</a> and <a href=""#"" title=""Construct mobile phone exporter"">Mobile Exporters</a> planned you will soon be able to save your games for the mobile and desktop platforms.  <a class=""moreInfoLink"" href=""#"" title=""Exporting your games"">Learn More</a></p>
            <h3>Packed with Features</h3>
            <p>Hundreds of exciting <a href=""#"" title=""Features of game making in Construct"">features</a>, designed to aid you in every way as you make your games and develop your projects.  Get involved today.</p>
            <a href=""#"" class=""s download"" title=""Download Construct 2 Now"">
                <div class=""download-title"">Download</div>
                <div class=""download-size"">24.5 MB</div>
            </a>            
        </div>
        <div class=""clear""></div>   

        <section>
            <h2>This Weeks Spotlight</h2>   
            <div class=""column-half"">
                <div class=""spotlight""><img src=""images/spotlight1.png"" alt=""Spotlight member"" /><img src=""images/spotlight-mask.png"" alt=""Mask"" /></div>
                <p>Our spotlight member this week is Pooh-Bah.  He writes good stuff.  Read it. <a class=""moreInfoLink"" href=""#"">Learn More</a></p>
            </div>
            <div class=""column-half r"">
                <div class=""spotlight""><img src=""images/spotlight2.png"" alt=""Spotlight game"" /><img src=""images/spotlight-mask.png"" alt=""Mask"" /></div>
                <p>Killer Bears is a scary ass game from JimmyJones.  Escape is mandatory! <a class=""moreInfoLink"" href=""#"">Learn More</a></p>
            </div>
        </section>
        <div class=""clear""></div>
    </div>
</div>
<div class=""main-end""></div>    

<footer>
    <div class=""footer-wrapper"">
        <div class=""footer-inner-wrapper"">  
            <div class=""footer-item"">
                <h4>Community</h4>
                <ul>
                    <li><a href=""#"" title=""Scirra developers blog"">The Blog</a></li>
                    <li><a href=""#"" title=""Game making community"">Community Forum</a></li>
                    <li><a href=""#"" title=""Scirra's available RSS feeds"">RSS Feeds</a></li>
                    <li>
                        <a class=""s social-icon facebook"" href=""http://www.facebook.com/ScirraOfficial"" target=""_blank"" title=""Visit Scirra on Facebook""></a>
                        <a class=""s social-icon twitter"" href=""http://twitter.com/Scirra"" target=""_blank"" title=""Follow Scirra on Twitter""></a>
                        <a class=""s social-icon youtube"" href=""http://www.youtube.com/user/ScirraVideos"" target=""_blank"" title=""Visit Scirra on Youtube""></a>
                    </li>
                </ul>
            </div>
            <div class=""footer-item"">
                <h4>About Us</h4>           
                <ul>
                    <li><a href=""#"" title=""Contact Scirra"">Contact Information</a></li>
                    <li><a href=""#"" title=""Advertise on Scirra"">Advertising</a></li>
                    <li><a href=""#"" title=""Scirra's History"">History</a></li>
                    <li><a href=""#"" title=""Scirra's Privacy Policies"">Privacy Policy</a></li>
                    <li><a href=""#"" title=""Scirra's Terms and Conditions"">Terms and Conditions</a></li>
                </ul>       
            </div>
            <div class=""footer-item"">
                <h4>Want to Help?</h4>
                <p>You can contribute to the community <a href=""#"" title=""Ways to contribute"">in lots of ways</a>.  We have a large active friendly community, and there are lots of ways to join in!</p>
                <a href=""#"" class=""ralign"" title=""Involve yourself in the game making community""><strong>Learn More</strong></a>
            </div>
            <div class=""clear""></div>   
        </div>
    </div>
    <div class=""copyright"">
        Copyright &copy; 2011 Scirra.com.  All rights reserved.
    </div>
</footer>

<script src=""http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js""></script>
<script src=""js/common.js""></script>
<script src=""plugins/coin-slider/coin-slider.min.js""></script>
<script src=""js/homepage.js""></script>

</body>

</html>"
1171,"Animations with vanilla JS. I've used jQuery for a long time, and now I'm going to do some animations with vanilla JS. Here's my code so far: var box = document.getElementById('box'),
    a1end,
    a2end,
    cdend,
    a3end,
    a4end,
    animate1 = setInterval(function() {
        if (box.style.top === (window.innerHeight - 120) + 'px') {
            clearInterval(animate1);
            a1end = true;
        }
        box.style.top = (
            +box.style.top.replace('px', '') + 1
        ) + 'px';
    }, 1),
    animate2 = setInterval(function() {
        if (box.style.left === (window.innerWidth - 120) + 'px') {
            clearInterval(animate2);
            a2end = true;
        }
        box.style.left = (
            +box.style.left.replace('px', '') + 1
        ) + 'px';
    }, 1);

checkEnd1(function() {
    box.style.background = 'greenyellow';
    box.innerText = 'Next stage starts in 5 seconds';
    var i = 4,
        cd = setInterval(function() {
            if (!i) {
                clearInterval(cd);
                cdend = true;
            }
            box.innerText = 'Next stage starts in ' + i + ' seconds';
            i--;
        }, 1000);

});
checkEnd2(function() {
    box.style.background = 'white';
    box.innerText = '';
    var animate3 = setInterval(function() {
        if (box.style.left === '20px') {
            clearInterval(animate3);
            a3end = true;
        }
        box.style.left = (
            +box.style.left.replace('px', '') - 1
        ) + 'px';
    }, 1);
});
checkEnd3(function() {
    var animate4 = setInterval(function() {
        if (box.style.top === '20px') {
            clearInterval(animate4);
            a4end = true;
        }
        box.style.top = (
            +box.style.top.replace('px', '') - 1
        ) + 'px';
    }, 1);
});
checkEnd4(function() {
    box.style.background = 'lightcyan';
    box.innerText = 'Animation complete';
});

function checkEnd1(fn) {
    (a1end && a2end) ? fn() : setTimeout(function() {
        checkEnd1(fn);
    }, 200);
}
function checkEnd2(fn) {
    (cdend) ? fn() : setTimeout(function() {
        checkEnd2(fn);
    }, 200);
}
function checkEnd3(fn) {
    (a3end) ? fn() : setTimeout(function() {
        checkEnd3(fn);
    }, 200);
}
function checkEnd4(fn) {
    (a4end) ? fn() : setTimeout(function() {
        checkEnd4(fn);
    }, 200);
} jsFiddle demo I've also noticed that the first animation isn't working as excepted. Out of curiousity, I tried it with jQuery's .animate() and it worked as excepted: $('#box').animate({
    top: window.innerHeight - 120,
    left: window.innerWidth - 120
}); Note : please don't tell me to use jQuery or other libs, I want to use vanilla. Bounty Edit Currently, the animation goes diagonally for a while, then when it reaches the bottom, it continues to go sideways. If you tell me how to make it go diagonally all the time, I'll give you a bounty."
1174,"My first point is that you have no :focus style for your links. If you navigate the page with the keyboard that would really help a lot to see where you are. Take this rule for example: h3 a:hover
{
    color: #1B676B;
    text-decoration:none;
} Just add: h3 a:hover, h3 a:focus
{
    color: #1B676B;
    text-decoration:none;
} Another thing that is nice to do for people navigating with the keyboard is to place a hidden link with a text similar to ""Skip to content"" or something like that close to the top. This link should be a shortcut to the content and only show on :focus. The reason for that is that it takes a lot of tabbing to get through the menu otherwise. Another tip that doesn't have to do with this question is that vertically aligning your content often creates a more resful reading experience. Indenting the paragraphs make it look more chaotic then it would be they were properly aligned."
1175,"1) Your code doesn't handle number=0 properly anyway (it will throw on int squareWidth = rectangleWidth / nSquaresInColumn; ) so I would start your first loops ( i , j iterators) from 1 since 0 rows/columns won't fit anyway. 2) You do not actually need j loop. Instead of: for (int i = 0; i <= numberOfSquares; i++)
    {
        for (int j = 0; j <= numberOfSquares; j++)
        {
            if (i * j == numberOfSquares) { ... }
        }
    } It can simplified to (and taking into account my #1): for (int i = 1; i <= numberOfSquares; i++)
    {
        int j = numberOfSquares / i;
        if (i * j == numberOfSquares) { ... }
    } 3) You don't need to iterate up to numberOfSquares here: for (int i = 1; i <= numberOfSquares; i++) . Since i=2,j=6 is the same as i=6,j=2 and you're looking only for first one you can iterate up to root square of numberOfSquares : int maxI = (int)Math.Sqrt(numberOfSquares);
for (int i = 1; i <= maxI; i++) 4) Since you're looking for minimal i-j difference you should start iterating from closest one and stop iterating as soon as you will find matching pair. Original: int maxI = (int)Math.Sqrt(numberOfSquares);
    for (int i = 1; i <= maxI; i++)
    {
        int j = numberOfSquares / i;
        if (i * j == numberOfSquares)
        {
            if (Math.Abs(i - j) < minDistance)
            {
                minDistance = Math.Abs(i - j);
                nSquaresInRow = i;
                nSquaresInColumn = j;
            }
        }
    } Modified: int maxI = (int)Math.Sqrt(numberOfSquares);
    for (int i = maxI; i >= 1; i--) // looping in reverse order
    {
        int j = numberOfSquares / i;
        if (i * j == numberOfSquares)
        {
            // if (Math.Abs(i - j) < minDistance) we do not need this check anymore
            {
                minDistance = Math.Abs(i - j);
                nSquaresInRow = i;
                nSquaresInColumn = j;
                break;
            }
        }
    } 5) With my #3 change you do not need Math.Abs anymore since i is always less or equal than j : minDistance = j - i; Now let's go to second loop: 6) int xSquareCenter = (((r + 1) * 2) - 1) * (squareWidth / 2); here double maths should be used otherwise you're loosing precision here. 7) Also this line is a little bit difficult to understand. I would introduce row and column variables to make it more clear: int column = r % nSquaresInRow;
double xSquareCenter = (column + 0.5) * squareWidth;
int row = r / nSquaresInRow;
double ySquareCenter = (row + 0.5) * squareHeight; 8) Last thing, I would replace both loops with Linq. Final result: public static List<Point> getCenters(int number, double width, double height)
{
    List<Point> points = new List<Point>();
    int originalNumberOfSquares = number;
    int numberOfSquares = number;
    if (numberOfSquares % 2 == 1)
    {
        numberOfSquares++;
    }
    int rectangleWidth = Convert.ToInt32(width);
    int rectangleHeight = Convert.ToInt32(height);

    int nSquaresInRow = -1;
    int nSquaresInColumn = -1;

    int maxI = (int)Math.Sqrt(numberOfSquares);
    int nSquaresInRow
            = Enumerable.Range(1, maxI)
                 .Reverse()
                 .First(i => numberOfSquares % i == 0);
    int nSquaresInColumn = numberOfSquares / nSquaresInRow;

    int squareWidth = rectangleWidth / nSquaresInColumn;
    int squareHeight = rectangleHeight / nSquaresInRow;

    return Enumerable.Range(0, originalNumberOfSquares)
              .Select(r => new { Column = r % nSquaresInRow, Row = r / nSquaresInRow})
              .Select(p => new { 
                       xSquareCenter = (p.Column + 0.5) * squareWidth,
                       ySquareCenter = (p.Row + 0.5) * squareHeight})
              .Select(p => new Point(p.xSquareCenter, p.ySquareCenter))
              .ToList();
}"
1176,"Converting simple markup to HTML. This is going to be rather long and generic, so apologies in advance. I've been reading a lot about Haskell lately, but I've never really programmed anything with it beyond simple experiments in ghci. So, I wanted to finally try and do some coding exercise that was easy but non-trivial and ended up choosing the ""Recluse"" problem from a book called Eloquent JavaScript. The aim is to make a program that takes a text document with simple, custom markup and formats it into HTML according to the following rules: Paragraphs are separated by blank lines. A paragraph that starts with a '%' symbol is a header. The more '%' symbols, the smaller the header. Inside paragraphs, pieces of text can be emphasised by putting them between asterisks. Footnotes are written between braces. So for example, the text document % Heading

%% Sub-heading

Text with *emphasis*.

Another {an example footnote} paragraph. would be formatted as <h1>Heading</h1>
<h2>Sub-heading</h2>
<p>Text with <i>emphasis</i>.</p>
<p>Another<a href=""#footnote1""><sup>1</sup></a> paragraph.</p>
<p><small><a name=""footnote1"">1. an example footnote</a></small></p> The main program should read the text document from stdin and output the HTML to stdout. This seemed like a simple enough task at first (I'd estimate that using Python, a language I have a lot of experience with, I could've finished it in about 15-30 minutes), but as I got deeper into the implementation, I realized I have no clue how to do something like this in Haskell. The footnotes seemed particularily challenging, as you kind of have to accumulate them on the side while building the rest of the document, and I didn't have any idea how to express that in functional terms (at least not without dragging an extra footnotes argument in every single function call). I hacked at the problem for a few evenings, re-reading Haskell tutorials and perusing the standard library reference, and finally ended up with a solution that works correctly, with some assumptions (for example, nested markup is not supported). However, my solution feels like it's over-complicated for such a simple problem and it consumes relatively high amounts of memory. So, my question is: how could I simplify the program and turn it into more idiomatic Haskell? The formatText function especially is something that turned out really ugly in my opinion. I'm not expecting anyone to rewrite the whole program, but small fixes here and there would be greatly appreciated. Secondly, how would I make the program more memory efficient? The current implementation allocates about 400KB of heap for every 1KB of input text, which isn't really a problem for this program, but I think it indicates that I'm doing something stupid. I've read articles about reducing memory consumption by forcing strictness, but it's not readily apparent to me where strictness should be applied in my program for the best effect. Thanks! import Char
import Data.List
import Control.Monad.State

data Footnote   = Footnote  Int String
data Footnotes  = Footnotes Int [Footnote]
type TrackNotes = State Footnotes
type HTML       = String

-- |Enclose content in the given HTML element
--  e.g. html ""span"" ""foo"" -> ""<span>foo</span>""
html :: String -> String -> HTML
html tag content = foldl1' (++) [""<"", tag, "">"", content, ""</"", tag, "">""]

-- |Generate a HTML link element
ahref :: String -> String -> HTML
ahref link txt = foldl1' (++) [""<a href=\"""", link, ""\"">"", txt, ""</a>""]

-- |Replace <, > and & with HTML entities
htmlEscape :: String -> HTML
htmlEscape """"     = """"
htmlEscape (x:xs) = prefix $! htmlEscape xs
    where prefix = case x of
            '&' -> showString ""&amp;""
            '<' -> showString ""&lt;""
            '>' -> showString ""&gt;""
            _   -> (x:)

-- |Add a new footnote
addFootnote :: String -> TrackNotes Int
addFootnote s = State $ \(Footnotes i ns) ->(i, Footnotes (i+1) $ ns ++ [Footnote i s])

-- |Format a text section into HTML
formatSection :: String -> TrackNotes HTML
formatSection s = case s of
    ('%'):xs -> formatHeading s
    _        -> formatParagraph s

-- |Format a text heading into HTML heading
formatHeading :: String -> TrackNotes HTML
formatHeading s = liftM headingTag content
    where headingTag = html (""h"" ++ show level)
          level      = length prefix
          content    = formatText $ htmlEscape $ dropWhile isSpace postfix
          (prefix,postfix) = span (=='%') s

-- |Format a text paragraph into HTML paragraph
formatParagraph :: String -> TrackNotes HTML
formatParagraph = liftM (html ""p"") . formatText . htmlEscape

-- |Format inline markup in text contents, e.g. ""*foo* bar"" -> ""<i>foo</i> bar""
formatText :: String -> TrackNotes HTML
formatText """" = return """"
formatText s  = do
    (content,rest) <- processTag $postfix
    rest' <- formatText $ rest
    return $ prefix ++ (content ++ rest')

    where (prefix,postfix) = break (`elem` ""*{"") s

          processTag         """" = return ("""", """")
          processTag (tag:rest) = do
            html' <- format $ between
            return (html', tail')
            where (format, endChar) = case tag of
                    '*' -> (formatEmph, '*')
                    '{' -> (formatNote, '}')
                  (between, _:tail') = break (==endChar) rest

          formatEmph = return . html ""i""
          formatNote s = do
            idx <- liftM show $ addFootnote s
            let link = ""#footnote"" ++ idx
            let text = html ""sup"" idx
            return $ ahref link text

-- |Split a string into sections.
--  Two consecutive line breaks form a section break.
splitSections :: String -> [String]
splitSections = sections . lines
    where sections (x:[]:xs) = x : sections xs
          sections  (x:y:xs) = sections $ (x ++ ('\n' : y)) : xs
          sections         x = x

-- | Format a footnote at the end of the document
formatFootnote :: Footnote -> HTML
formatFootnote (Footnote i s) = html ""p"" $ html ""small"" $ anchor
    where anchor = ""<a name=\""footnote"" ++ show i ++ ""\"">"" ++ text ++ ""</a>""
          text   = show i ++ "". "" ++ s

-- |Format a text document into HTML document
formatDocument :: String -> String
formatDocument txt   = unlines $ sections ++ footnotes
    where (sections, state) = runState stateMonad (Footnotes 1 [])
          stateMonad        = mapM formatSection $ splitSections txt
          Footnotes _ notes = state
          footnotes         = map formatFootnote notes

main = interact formatDocument UPDATE: I rewrote the program so that parsing and output are separate as per sepp2k's suggestion, and while that does make the program a bit longer, it keeps the individual functions a lot simpler. import Char
import Data.List
import Data.Maybe
import Control.Monad.State

type HTML = String
type HeadingLevel = Int

{----------------------------------------------------------------
 Data types and functions for parsing the markup to a parse tree
-----------------------------------------------------------------}
data Section = Heading HeadingLevel [DocNode] | Paragraph [DocNode]
data DocNode = PlainText String | Emphasis [DocNode] | Footnote [DocNode]

parseMarkup :: String -> [Section]
parseMarkup = mapMaybe parseSection . splitSections

parseSection :: String -> Maybe Section
parseSection """" = Nothing
parseSection s  = case s of
    ('%':_) -> Just $ parseHeading s
    _       -> Just $ Paragraph $ parseNodes s

parseHeading :: String -> Section
parseHeading s = Heading lvl nodes
    where lvl   = length prefix
          nodes = parseNodes $ dropWhile isSpace postfix
          (prefix,postfix) = span (=='%') s

parseNodes :: String -> [DocNode]
parseNodes """" = []
parseNodes s  = fst $ parseNodes' Nothing $ zipper s
    where parseNodes' g ((i,(c:t)):_) | (g == Just c) = ([PlainText i], t)
          parseNodes' _  [(i,"""")]  = ([PlainText i], """")
          parseNodes' g ((i,t):xs) = case t of
            ('*':_) -> continue Emphasis '*' i t
            ('{':_) -> continue Footnote '}' i t
            _       -> parseNodes' g xs

          continue f end """" t = parseNonText f end $ tail t
          continue f end i t  = (PlainText i : moreNodes, rest)
            where (moreNodes, rest) = parseNonText f end $ tail t

          parseNonText f end t = ((f nodes) : moreNodes, rest')
            where (nodes, rest)      = parseNodes' (Just end) $ zipper t
                  (moreNodes, rest') = parseNodes' Nothing $ zipper rest


{------------------------------------------------
 Data types and functions for tracking footnotes
-------------------------------------------------}
data Footnotes  = Footnotes Int [String]
type TrackNotes = State Footnotes

addFootnote :: String -> TrackNotes Int
addFootnote s = State $ \(Footnotes i ns) ->(i, Footnotes (i+1) $ ns ++ [s])

{---------------------------------------
 Functions for converting nodes to HTML
----------------------------------------}
docToHTML :: [Section] -> HTML
docToHTML ss = unlines $ sections ++ footnotes
    where (sections, state)   = runState stateMonad $ Footnotes 1 []
          stateMonad          = mapM sectionToHTML ss
          (Footnotes _ notes) = state
          footnotes           = map formatFootnote $ zip notes [1..]

sectionToHTML :: Section -> TrackNotes HTML
sectionToHTML (Heading lvl nodes) = liftM htag $ nodesToHTML nodes
    where htag = html $ ""h"" ++ show lvl
sectionToHTML (Paragraph nodes) = liftM ptag $ nodesToHTML nodes
    where ptag = html ""p""

nodesToHTML :: [DocNode] -> TrackNotes HTML
nodesToHTML = liftM (foldl' (++) """") . mapM nodeToHTML

-- | Convert a single DocNode to HTML
nodeToHTML :: DocNode -> TrackNotes HTML
nodeToHTML (PlainText s)    = return s
nodeToHTML (Emphasis nodes) = liftM (html ""i"") $ nodesToHTML nodes
nodeToHTML (Footnote nodes) = do
    content <- nodesToHTML nodes 
    idx  <- liftM show $ addFootnote content
    let link = ""#footnote"" ++ idx
    let text = html ""sup"" idx
    return $ ahref link text

-- | Format a footnote at the end of the document
formatFootnote :: (String, Int) -> HTML
formatFootnote (s,i) = html ""p"" $ html ""small"" $ anchor
    where anchor = ""<a name=\""footnote"" ++ show i ++ ""\"">"" ++ text ++ ""</a>""
          text   = show i ++ "". "" ++ s

-- |Enclose content in the given HTML element
--  e.g. html ""span"" ""foo"" -> ""<span>foo</span>""
html :: String -> String -> HTML
html tag content = foldl1' (++) [""<"", tag, "">"", content, ""</"", tag, "">""]

-- |Generate a HTML link element
ahref :: String -> String -> HTML
ahref link txt = foldl1' (++) [""<a href=\"""", link, ""\"">"", txt, ""</a>""]

-- |Replace <, > and & with HTML entities
htmlEscape :: String -> HTML
htmlEscape """"     = """"
htmlEscape (x:xs) = prefix $! htmlEscape xs
    where prefix = case x of
            '&' -> showString ""&amp;""
            '<' -> showString ""&lt;""
            '>' -> showString ""&gt;""
            _   -> (x:)

{------------------------------
 Miscellanous string utilities
-------------------------------}

-- |Split a string into sections.
--  Two consecutive line breaks form a section break.
splitSections :: String -> [String]
splitSections = sections . lines
    where sections (x:[]:xs) = x : sections xs
          sections  (x:y:xs) = sections $ (x ++ ('\n' : y)) : xs
          sections         x = x

-- | A ""zipper"" for navigating a string
--   Generates a list of (init,tail) pairs that traverse the list
--   E.g. zipper ""foo"" -> [("""",""foo""), (""f"",""oo""), (""fo"",""o""), (""foo"","""")]
zipper :: String -> [(String,String)]
zipper s = zip (inits s) (tails s)

{-----
 Main
------}
formatDoc :: String -> HTML
formatDoc = docToHTML . parseMarkup

main = interact formatDoc"
1177,"One of Haskell's advantages is that there's a good number of high-quality parser libraries for it. Using one for this case might be a bit overkill, but since this is a learning exercise anyway it might be a good chance to pick up a parser library (e.g. parsec) as well. This could certainly come in handy later. Also using such a library, you could support nested markup without any trouble. About memory: Haskell strings, being (lazy) linked lists of characters, just aren't very memory efficient. For this reason it is often recommended to use bytestrings or Data.Text in favor of plain strings if you need memory-efficient string handling. The footnotes seemed particularily challenging, as you kind of have to accumulate them on the side while building the rest of the document, and I didn't have any idea how to express that in functional terms (at least not without dragging an extra footnotes argument in every single function call). As you already found out one solution to track state through the program without adding extra arguments is the State monad. However in this case I feel that it made the program more complicated than it needed to be. I think an extra footnotes argument (and a second one to count them) would actually have been the simplest solution here. As a general design note, I think a two-step approach would make the code more manageable and extensible: First parse the string into an internal representation (I would call it a tree, except that until you support nested markup, it won't actually be a tree), and then write a function which turns that representation into HTML. This way you separate the code that does the parsing from the code that produces the HTML, which is good style. It also allows you to add another output format later without having to duplicate any parsing code. It should also be easier to support nested markup using this approach and it also makes it easier to replace your manual parsing code with a parsing library should you decide to do so."
1179,"Sorting numbers in LISP. I am doing a CS practice exercise in which you are supposed to sort exactly three numbers using only if statements.  I wrote the following code in LISP and would appreciate any suggestions how to improve on my code.  Thank you! (defun generate-three ()
  (loop for l from 1 to 3 collect (random 25)))

(defun result (a b c) (format t ""The sorted result is (~d,~d,~d)~%"" a b c))

(let (a b c (the-three (generate-three)))
    (format t ""~a ~%"" the-three)
    (setq a (first the-three) b (second the-three) c (third the-three))
    (if (< a b)
      (if (< b c) (result a b c)
        (if (< a c) (result a c b) (result c a b)))
      (if (< a c) (result b a c)
        (if (< b c) (result b c a) (result c b a))))) Based on feedback from commenters, the revised code looks as follows: (defun my-sort-3 (a b c)
    (if (< a b)
      (if (< b c) (list a b c)
        (if (< a c) (list a c b) (list c a b)))
      (if (< a c) (list b a c)
        (if (< b c) (list b c a) (list c b a)))))

(destructuring-bind (a b c) (loop repeat 3 collect (random 25))
  (format t ""The sorted result of (~d,~d,~d) is ~a ~%"" a b c (my-sort-3 a b c))) Latest iteration - note the changes in the final ""format"" statement: (defun my-sort-3 (a b c)
    (if (< a b)
      (if (< b c) (list a b c)
        (if (< a c) (list a c b) (list c a b)))
      (if (< a c) (list b a c)
        (if (< b c) (list b c a) (list c b a)))))

(destructuring-bind (a b c) (loop repeat 3 collect (random 25))
  (format t ""The sorted result of (~{~d~^, ~}) is (~{~d~^, ~})~%"" (list a b c) (my-sort-3 a b c)))"
1180,"Ruby script on-all-nodes-run not only for teaching. I wrote the following Ruby script several years ago and have been using it often ever since on a Bioinformatics computer cluster. It pulls out a list of hosts from the Torque queuing system qnodes . It ssh 'es and runs a command on all the nodes. Then it prints the output and/or errors in a defined order (alphabetical sort of the hostnames). A nice feature: results are printed immediately for the host that is next in the order. I would like to use it as an example for a Ruby workshop. Could you please suggest best-practice and design pattern improvements? #!/usr/bin/ruby

EXCLUDE = [/girkelab/, /biocluster/, /parrot/, /owl/] 

require ""open3""

# Non-interactive, no password asking, and seasonable timeouts
SSH_OPTIONS = [""-o PreferredAuthentications=publickey,hostbased,gssapi,gssapi-with-mic"",
               ""-o ForwardX11=no"",
               ""-o BatchMode=yes"",
               ""-o SetupTimeOut=5"",
               ""-o ServerAliveInterval=5"",
               ""-o ServerAliveCountMax=2""
              ].join("" "")

SSH    = ""/usr/bin/ssh #{SSH_OPTIONS}""
MKDIR  = ""/bin/mkdir""

raise ""Pleae give this command at least one argument"" if ARGV.size < 1
COMMAND = ARGV[0..-1].join(' ')

output_o = {}
output_e = {}


IO_CONNECTIONS_TO_REMOTE_PROCESSES = {}

def on_all_nodes(&block)
  nodes = []
  Kernel.open('|qnodes | grep -v ""^ "" | grep -v ""^$""') do |f|
    while line = f.gets
      i = line.split(' ').first
      nodes.push(i) if EXCLUDE.select{|x| i =~ x}.empty?
    end
  end
  nodes.sort.each {|n| block.call(n)}
end


# Create processes
on_all_nodes do |node|
  stdin, stdout, stderr = Open3.popen3(""#{SSH} #{node} \""#{COMMAND}\"""")
  IO_CONNECTIONS_TO_REMOTE_PROCESSES[node] = [stdin, stdout, stderr]
end


has_remote_errors = false

# Collect results
on_all_nodes do |node|
  stdin, stdout, stderr = IO_CONNECTIONS_TO_REMOTE_PROCESSES[node]

  stdin.close

  e_thread = Thread.new do
    while line = stderr.gets
      line.chomp!
      STDERR.puts ""#{node} ERROR: #{line}""
      has_remote_errors = true
    end
  end

  o_thread = Thread.new do
    while line = stdout.gets
      line.chomp!
      puts ""#{node}      : #{line}""
    end
  end

  # Let the threads finish
  t1 = nil
  t2 = nil
  while [t1, t2].include? nil
    if t1.nil?
      t1 = e_thread.join(0.1) # Gives 1/10 of a second to STDERR
    end
    if t2.nil?
      t2 = o_thread.join(0.1) # Give 1/10 of a second to STDOUT
    end
  end

end


exit(1) if has_remote_errors"
1181,"It's been a while since I've used lisp, so I can't really critique your code for style or any common lisp gotchas. That said, the biggest thing I notice here is that the code for generating the 3 numbers, sorting them, and printing the result are all tightly coupled with each other.  I would suggest defining a separate function that takes three numbers and returns them in sorted order, which can then be combined with your existing functions for generating three numbers and printing three numbers to give the desired output.  The added benefit, of course, is that this sort function can later be used to sort any three numbers, not just the three in this bit of code."
1182,"Determine type of triangle in LISP. This is a simple LISP program to read in three sides of a triangle and report what kind of triangle it is (or isn't).  Any feedback would be much appreciated. (defun read-side (side) (format t ""Enter a value for side ~d: ~%"" side) (read))

(defun is-a-triangle (a b c) (if (and (< a (+ b c)) (< b (+ a c)) (< c (+ a b))) t nil))

(defun is-equilateral (a b c) (if (and (= a b c)) t nil))

(defun is-isoceles (a b c) (if (or (= a b) (= b c)) t nil))

(defun is-right-triangle (a b c) 
  (let ((square-of-short-sides-sum 0) (short-sides ()) (large-side 0) (sides (list a b c))) 
    (loop for p in sides do 
      (if (> p large-side) 
        (progn (if (/= 0 large-side) (setq short-sides (append short-sides (list large-side)))) 
        (setq large-side p))
        (setq short-sides (append short-sides (list p)))))
    (format t ""short-sides: ~a ~%"" short-sides)
    (format t ""large-side: ~a ~%"" large-side)
    (loop for p in short-sides do 
      (setq square-of-short-sides-sum (+ square-of-short-sides-sum (expt p 2))))
    (if (= (expt large-side 2) square-of-short-sides-sum) t nil)))

(defun status-message (message a b c) (format t ""The shape ~d,~d,~d ~a ~%"" a b c message))

(let ((a (read-side 1)) (b (read-side 2)) (c (read-side 3)))
  (status-message ""is being checked..."" a b c)
  (if (is-equilateral a b c) (status-message ""is an equilateral triangle."" a b c)
      (if (is-a-triangle a b c)
        (progn (if (is-isoceles a b c) (status-message ""is an isoceles triangle."" a b c)
            (if (is-right-triangle a b c) (status-message ""is a right triangle."" a b c)
                (status-message ""is a non-isoceles, non-equilateral, non-right triangle."" a b c))))
        (status-message ""is not a triangle."" a b c)))) Thanks to the previous commenters for your suggestions.  I have since modified the code based on the feedback I have received and am posting the revised code below.  If you have any further feedback on this new revision, it is welcome.  Thank you! (defun read-side (side) (format t ""Enter a value for side ~d: ~%"" side) (read))

(defun triangle-p (a b c) (and (< a (+ b c)) (< b (+ a c)) (< c (+ a b))))

(defun equilateral-p (a b c) (= a b c))

(defun isoceles-p (a b c) (or (= a b) (= b c)))

(defun right-triangle-p (a b c) 
  (destructuring-bind (long-side &rest short-sides) (sort (list a b c) #'>)
    (= (expt long-side 2) (+ (expt (first short-sides) 2) (expt (second short-sides) 2)))))

(defun status-message (message a b c) (format t ""The shape ~d,~d,~d ~a ~%"" a b c message))

(defun classify-triangle (a b c)
  (cond ((not (triangle-p a b c)))
    ((right-triangle-p a b c) 'right)
    ((equilateral-p a b c) 'equilateral)
    ((isoceles-p a b c) 'isoceles)
    (t 'triangle)))

(let (triangle-type (a (read-side 1)) (b (read-side 2)) (c (read-side 3)))
  (format t ""classify triangle says ~a ~%"" (classify-triangle a b c))
  (setq triangle-type (classify-triangle a b c))
  (cond ((eq 'right triangle-type) (status-message ""is a right triangle."" a b c))
    ((eq 'equilateral triangle-type) (status-message ""is an equilateral triangle."" a b c))
    ((eq 'isoceles triangle-type) (status-message ""is an isoceles triangle."" a b c))
    ((eq 'triangle triangle-type) (status-message ""is a non-right, non-isoceles, non-equilateral triangle."" a b c))
    (t (status-message ""is not a triangle."" a b c)))) Here is the latest revision: (defun read-side (side) (format t ""Enter a value for side ~d: ~%"" side) (read))

(defun triangle-p (a b c) (and (< a (+ b c)) (< b (+ a c)) (< c (+ a b))))

(defun equilateral-p (a b c) (= a b c))

(defun isoceles-p (a b c) (or (= a b) (= b c)))

(defun right-triangle-p (a b c) 
  (destructuring-bind (long-side &rest short-sides) (sort (list a b c) #'>)
    (= (expt long-side 2) (+ (expt (first short-sides) 2) (expt (second short-sides) 2)))))

(defun status-message (message a b c) (format t ""The shape ~d,~d,~d ~a ~%"" a b c message))

(defun classify-triangle (a b c)
  (cond ((not (triangle-p a b c)))
    ((right-triangle-p a b c) 'right)
    ((equilateral-p a b c) 'equilateral)
    ((isoceles-p a b c) 'isoceles)
    (t 'triangle)))

(let* ((a (read-side 1)) (b (read-side 2)) (c (read-side 3)) (triangle-type (classify-triangle a b c)))
  (format t ""classify triangle says ~a ~%"" triangle-type)
  (cond ((eq 'right triangle-type) (status-message ""is a right triangle."" a b c))
    ((eq 'equilateral triangle-type) (status-message ""is an equilateral triangle."" a b c))
    ((eq 'isoceles triangle-type) (status-message ""is an isoceles triangle."" a b c))
    ((eq 'triangle triangle-type) (status-message ""is a non-right, non-isoceles, non-equilateral triangle."" a b c))
    (t (status-message ""is not a triangle."" a b c)))) After reading through your suggestion on my sorting question and then reading up on 'format', I tried to write a format statement to simplify the logic at the bottom of the code.  I couldn't figure out how to do a format conditional based on a symbol, so instead I defined the triangle types as global variables with 'defineparameter' (is there a better way to define constants?).  I also used the format loop which you described in your response to the my-sort-3 question to shorten the expression. The new code is as follows: (defparameter *right* 0)
(defparameter *equilateral* 1)
(defparameter *isoceles* 2)
(defparameter *triangle* 3)
(defparameter *non-triangle* 4)
(defun read-side (side) (format t ""Enter a value for side ~d: ~%"" side) (read))

(defun triangle-p (a b c) (and (< a (+ b c)) (< b (+ a c)) (< c (+ a b))))

(defun equilateral-p (a b c) (= a b c))

(defun isoceles-p (a b c) (or (= a b) (= b c) (= a c)))

(defun right-triangle-p (a b c) 
  (destructuring-bind (long-side &rest short-sides) (sort (list a b c) #'>)
    (= (expt long-side 2) (+ (expt (first short-sides) 2) (expt (second short-sides) 2)))))

(defun status-message (message a b c) (format t ""The shape ~d,~d,~d ~a ~%"" a b c message))

(defun classify-triangle (a b c)
  (cond ((not (triangle-p a b c)) *non-triangle*)
    ((right-triangle-p a b c) *right*)
    ((equilateral-p a b c) *equilateral*)
    ((isoceles-p a b c) *isoceles*)
    (t *triangle*)))

(let* ((a (read-side 1)) (b (read-side 2)) (c (read-side 3)) (triangle-type (classify-triangle a b c)))
  (format t ""classify triangle says ~a ~%"" triangle-type)
  (format t ""The shape (~{~d~^,  ~}) is ~[a right~;an equilateral~;an isoceles~;a non-right, non-isoceles, non-equilateral~;not a~] triangle."" (list a b c) triangle-type)) Thanks, everyone, for your continued feedback.  Here is the latest revision. (defun read-side (side) (format t ""Enter a value for side ~d: ~%"" side) (read))

(defun triangle-p (a b c) (and (< a (+ b c)) (< b (+ a c)) (< c (+ a b))))

(defun equilateral-p (a b c) (= a b c))

(defun isoceles-p (a b c) (or (= a b) (= b c)))

(defun right-triangle-p (a b c) 
    (destructuring-bind (long-side short-side-1 short-side-2) (sort (list a b c) #'>)
          (= (expt long-side 2) (+ (expt short-side-1 2) (expt short-side-2 2)))))

(defun status-message (message a b c) (format t ""The shape ~d,~d,~d ~a ~%"" a b c message))

(defun classify-triangle (a b c)
    (cond ((not (triangle-p a b c)) nil)
          ((right-triangle-p a b c) 'right)
              ((equilateral-p a b c) 'equilateral)
              ((isoceles-p a b c) 'isoceles)
                  (t 'triangle)))

(let* ((a (read-side 1)) (b (read-side 2)) (c (read-side 3)) 
    (triangle-type (classify-triangle a b c))
    (article (if (member triangle-type '(isoceles equilateral)) ""an"" ""a""))
    (tri-name (if (eq triangle-type 'triangle) ""non-right, non-isoceles, non-equilateral"" triangle-type)))
    (format t ""The shape (~d, ~d, ~d) is ~:[not a triangle~;~a ~(~a~) triangle~]."" a b c triangle-type article tri-name))"
1186,"Keep in mind that every form in lisp returns something. (and foo bar baz) returns nil if foo , bar or baz evaluates to nil , and t if all of them evaluate to non- nil . This means that anywhere you write (if (and ...) t nil) , you can just write (and ...) with the same effect. The same applies to (if (or ...) t nil) and (or ...) , as well as (if (= ...) t nil) and (= ...) . Your is-equilateral is a particularly egregious violation of this; it can be written as simply (defun equilateral-p (a b c) (= a b c)) The most common convention for predicates in Common Lisp is ending the function name with p or -p , rather than prefixing it with is- (personally, I end predicate names with ? , in line with Scheme convention, but this is not the standard). Your is-right-triangle function can be simplified a lot by removing the stateful operations and using a more functional approach. I would have written it like so: (defun right-triangle-p (a b c)
  (destructuring-bind (long-side &rest short-sides) (sort (list a b c) #'>)
    (= (expt large-side 2) 
       (+ (expt (car short-sides) 2) (expt (cadr short-sides 2)))))) As a rule, whenever you use loop to assign values to intermediate variables through setq , double check that you need the loop at all. I've found that it's frequently (though not always) superfluous. EDIT: If you take my advice about defining your other assignment as a function, you can instead write ...
(destructuring-bind (long-side &rest short-sides) (my-sort-3 a b c)
... The final let structure can be simplified by using cond instead of nested if s, and slightly re-arranging the clauses. (let ((a (read-side 1)) (b (read-side 2)) (c (read-side 3)))
  (cond ((not (triangle-p a b c)) (status-message ""is not a triangle."" a b c))
        ((equilateral-triangle-p a b c) (status-message ""is an equilateral triangle."" a b c))
        ((isoceles-triangle-p a b c) (status-message ""is an isoceles triangle."" a b c))
        ((right-triangle-p a b c) (status-message ""is a right triangle."" a b c))
        (t (status-message ""is a non-isoceles, non-equilateral, non-right triangle."" a b c)))) You might want to re-write that final let statement as a function that returns a type of triangle (so like 'isoceles instead of printing ""The shape a,b,c is an isoceles triangle.\n"" ) so that you can reuse it more easily. This is basically the same advice I gave you on your sorting function. On a slightly more general note, you might want to be explicit about which Lisp you're using. It's unambiguous in this case, since I'm pretty sure loop is a CL construct, but keep in mind that ""Lisp"" is a fairly large family of languages,"
1187,"Since you have to use if s, I won't comment on that other than to say that cond (or, more likely, a recursive call) is probably the right choice here. The loop you use in generate-three is slightly more complicated than you need it to be. You can specify what you need with (loop repeat 3 collect (random 25)) . That's short enough that you won't need an intermediate function for this exercise. loop is a fairly complicated construct (probably the most complicated in Lisp). If you really want to come to grips with it, read through The CL Cookbook entry and Seibels' Loop chapter from Practical Common Lisp . There's no need to declare variables in Lisp, so the a b c (effectively (a nil) (b nil) (c nil) ) in the initial let statement is unnecessary. Since the only reason you're declaring those nil variables is to assign them later, this would be a good place to use destructuring-bind (destructuring-bind (a b c) (loop repeat 3 collect (random 25))
  (format t ""~a ~%"" (list a b c))
  (if (< a b)
      (if (< b c) 
          (result a b c)
          (if (< a c) (result a c b) (result c a b)))
      (if (< a c) 
          (result b a c)
          (if (< b c) (result b c a) (result c b a))))) Is there a particular reason that you didn't define the final statement as a function that accepts three arguments (or a three-element list), and then call it? Also, is there any reason that your function prints out a summarizing sentence of its results, rather than returning a sorted list? Both of these points severely limit the reusability of your code. Had you, for  example, defined this as my-sort-3 , instead of making it a naked let call, you could have used it in your triangle-related assignment. This would also further simplify the code (defun my-sort-3 (a b c)
  (if (< a b)
      (if (< b c) 
          (list a b c)
          (if (< a c) (list a c b) (list c a b)))
      (if (< a c) 
          (list b a c)
          (if (< b c) (list b c a) (list c b a)))))

(format t ""The sorted result is ~a~%"" 
          (apply #'my-sort-3 (loop repeat 3 collect (random 25))))"
1188,"Best practice instantiating generic delegates and accessing property getters. I want to create delegates to access properties of different objects without knowing them in advance. I have the following definitions public delegate T MyMethod<K, T>(K data);

public static MyMethod<K, T> CreatePropertyGetter<K, T>(PropertyInfo property)
{       
   MethodInfo mi = property.DeclaringType.GetMethod(""get_"" + property.Name);        
   return (MyMethod<K, T>)Delegate.CreateDelegate(typeof(MyMethod<K, T>), mi);
} where T can be decimal, string, datetime or int I have some initializing code that will create MyMethod delegates, based on the reflected properties of my object as follows: foreach (PropertyInfo property in entityType.GetProperties())
{               
    switch (property.PropertyType.Name)
    {
        case ""System.Decimal"":
            return CreatePropertyGetter<T, decimal>(property);
        case ""System.DateTime"":
            return CreatePropertyGetter<T, DateTime>(property);
        case ""System.String"":
            return CreatePropertyGetter<T, DateTime>(property);
    }
} Is there a better way to create property getters? enumerate through the supported property types hard-coded as strings? However, performance is an issue, since these delegates will be called frequently (ticking scenario), so any casting will slow it down. While a more elegant solution is desirable, performance is still my main concern"
1189,One suggestion is to create type -> type map of all the types you want to support instead of making a switch statement on strings.
1190,"As my answer on Stack Overflow states , there is a solution which allows you to create a getter delegate for any type, so the entire switch block can be dropped. Personally, I find that the cleanest solution. The only overhead of this approach is the cast from object to the specific type where necessary. (For a getter this would happen only once on the return value.) I'm guessing if you would benchmark this, the result would be negligible. When you are certain that the only types required are those specified, or that no new types are expected very often, you could still opt to use your current approach. I would apply a few changes however: Use PropertyInfo.GetGetMethod() to retrieve your MethodInfo for the getter. Use the type of PropertyType directly to determine which CreatePropertyGetter to call instead of the name of the type. Use Func<K, T> instead of MyMethod . Use a Dictionary holding anonymous functions which create the correct delegate for the specified type of the key. This can replace the switch statement. The last point is possible as follows: Dictionary<Type, Func<PropertyInfo, object>> getterCreators =
    new Dictionary<Type, Func<PropertyInfo, object>>
    {
        { typeof(string), p => CreatePropertyGetter<T, string>(p) },
        { typeof(DateTime), p => CreatePropertyGetter<T, DateTime>(p) },
        { typeof(decimal), p => CreatePropertyGetter<T, decimal>(p) }
    }; Ofcourse you still have to cast from object to the desired type. UPDATE: As Timwi pointed out in the comments, p => CreatePropertyGetter<T, ...>(p) can be further reduced to: CreatePropertyGetter<T, ...> ."
1191,"You're repeating code blocks all over the place; you may want to abstract some out. For example, calling something like function animatePxProperty(prop, limit, step, interval){
    if(!step) step = 1; //I miss optional arguments :(
    if(!interval) interval = 1;
    var anim = setInterval(
        function() {
            if(parseInt(prop) === parseInt(limit)) clearInterval(anim);
            prop = parseInt(prop)  + step + 'px';
        }, interval
    );
} instead of providing inline anonymous functions to interval (I haven't tested the above, so tweakery may be required). When making comparisons/assignments like (box.style.left === (window.innerWidth - 120) + 'px') { and box.style.left = (
    +box.style.left.replace('px', '') + 1
) + 'px' it's probably better to use parseInt instead of .replace . So var left_val = parseInt(box.style.left);
...
(left_val === (window.innerWidth - 120)) {
...
box.style.left = left_val + 1 + 'px'; Indulge me, because I'm curious. If you can express exactly what you want with three lines of jQuery, why would you want to implement the same with 88 lines of convoluted side-effects?"
1192,"How to manage different views. I answered a question in stackoverflow but I gave a solution that looks a little dirty to me, I'd like your opinion because I think there is a much smarter way to do it. A guest user should be able to choose between two different view modalities. My approach was to implement an action and store the choice in the session.
I paste some relevant code here as well: # application_controller.rb
  def set_view_type # TODO: here is the part I don't like
    session[:view_type] = params[:view_type]
    redirect_to :back
  end

  # x_controller.rb
  def index
    case session[:view_type].to_sym
    when :box render 'index_box'
    else      render 'index_list'
    end
  end Then I use two link_to (instead of radiobutton as in stackoverflow) to choose the view, and those should be visible anytime in the layout, this is why I use application_controller for that. PS: I don't know if it's correct to ask for a question that it's still open in SO, feel free to answer straight there by me, I just think here I'm posting my solution that I would like to be revised."
1193,"First of all, take a look at the Net::SSH library. I don't have much experience with it, so I don't know whether it supports all the options you need. But if it does, using it might be more robust than using the command line utility (you wouldn't have to worry about whether ssh is installed in the place you expect (or at all) and you wouldn't have to worry about escaping the arguments). Assuming you can't (or won't) use Net::SSH , you should at least replace /usr/bin/ssh with just ssh , so at least it still works if ssh is installed in another location in the PATH. nodes = []
Kernel.open('|qnodes | grep -v ""^ "" | grep -v ""^$""') do |f|
  while line = f.gets
    i = line.split(' ').first
    nodes.push(i) if EXCLUDE.select{|x| i =~ x}.empty?
  end
end When you initialize an empty array and then append to it in a loop, that is often a good sign you want to use map and/or select instead. line = f.gets is a bit of an anti-pattern in ruby. The IO class already has methods to iterate a file line-wise. To find out whether none of the elements in an array meet a condition, negating any? seems more idiomatic than building an array with select and check whether it's empty. nodes = Kernel.open('|qnodes | grep -v ""^ "" | grep -v ""^$""') do |f|
  f.lines.map do |line|
    line.split(' ').first
  end.reject do |i|
    EXCLUDE.any? {|x| i =~ x}
  end
end nodes.sort.each {|n| block.call(n)} I would recommend that instead of taking a block and yielding each element, you just return nodes.sort and rename the function to all_nodes . This way you can use all_nodes.each to execute code on all nodes, but you could also use all_nodes.map or all_nodes.select when it makes sense. Open3.popen3(""#{SSH} #{node} \""#{COMMAND}\"""") Note that this will break if COMMAND contains double quotes itself. Generally trying to escape command line arguments by surrounding them with quotes is a bad idea. system and open3 accept multiple arguments exactly to avoid this. If you make SSH an array (with one element per argument) instead of a string, you can use the multiple-arguments version of popen3 and can thus avoid the fickle solution of adding quote around COMMAND to escape spaces, i.e.: Open3.popen3(*(SSH + [node, COMMAND])) IO_CONNECTIONS_TO_REMOTE_PROCESSES = {}
# ...
on_all_nodes do |node|
  stdin, stdout, stderr = Open3.popen3(""#{SSH} #{node} \""#{COMMAND}\"""")
  IO_CONNECTIONS_TO_REMOTE_PROCESSES[node] = [stdin, stdout, stderr]
end If you heeded my above advice about all_nodes you can simplify this using map . I also would suggest not using a Hash here. If you use an array instead, the nodes will stay in the order in which you inserted them, which will mean that you can iterate over that array instead of invoking all_nodes again. has_remote_errors = false

all_nodes.map do |node|
  [node, Open3.popen3(*(SSH + [node, COMMAND]))]
end.each do |node, (stdin, stdout, stderr)|
  stdin.close

  ethread = # ...
  # ...
end This way you removed the complexity of first putting everything into a hash and then getting it out again. while line = stderr.gets Again, this can be written more idiomatically as stderr.each_line do |line| . Same with stdout. first = true This is never used. I can only assume that it's a left over of previous iterations of the code, which is no longer necessary. Obviously it should be removed. # Let the threads finish
t1 = nil
t2 = nil
while [t1, t2].include? nil
  if t1.nil?
    t1 = e_thread.join(0.1) # Gives 1/10 of a second to STDERR
  end
  if t2.nil?
    t2 = o_thread.join(0.1) # Give 1/10 of a second to STDOUT
  end
end I don't see any benefit of doing it this way. Just do: e_thread.join
o_thread.join Note that join ing on one thread does not mean that the other threads stop running - only the main thread does, but that's perfectly okay as you want that anyway."
1194,"Three-table queryset (full outer join?) in Django. I've got three tables I need query to display to a user for a web application I've written. Each table (Url, Note, Quote) has a foreign key relation to the User table. For every User, I need to sort all Bookmarks, Notes and Quotes based on a _date_created_ field, then deliver that to the template as one iterable. This is for a toy/self-learning project so I don't really need to worry about scale. The approach I've taken is this: from operator import attrgetter

from app.models import Url, Note, Quote

date_dict = {}

for url in Url.objects.filter(user=request.user):
    date_dict[url.date_created] = Url.objects.get(date_created=url.date_created)

for note in Note.objects.filter(user=request.user):
    date_dict[note.date_created] = Note.objects.get(date_created=note.date_created)

for quote in Quote.objects.filter(user=request.user):
    date_dict[quote.date_created] = Quote.objects.get(date_created=quote.date_created)

my_query = sorted((date_dict[i] for i in date_dict.iterkeys()), 
                  key=attrgetter(""date_created""), 
                  reverse=True) I have also tried this: from operator import attrgetter
from itertools import chain

from app.models import Url, Note, Quote

items = sorted(chain(Url.objects.filter(user=request.user), 
                     Note.objects.filter(user=request.user), 
                     Quote.objects.filter(user=request.user)), 
               key=attrgetter(""date_created""), 
               reverse=True) I'm concerned how expensive this would get if I had huge data sets (I don't), but from what I've read the second is faster. This code works and does what I expect it to, but is there a better/faster approach?"
1195,"EDIT Removed previous version which was pretty much telling you to use the second method shown above. Your first method loads everything from the database twice. (Django may do some caching, but still) I'm not sure why you are putting everything in the dictionary. The problem with the current implementation is that sorting is done by python rather then in the database. It would be better to have the sorting done in the database. There are two ways I see of doing that. You could have the three different sources sorted by the database. Then you could perform a merge pass to combine them. However, you are probably going to have need a lot of data before that becomes a worthwhile strategy. Sorting will be implemently in C for python which will make it have a speed advantage over a merge which you would have to implement in python. You could redesign your database so Urls, Quotes, and Notes are stored in the same table. That way you could request the database to sort them. Both of these strategies are really only helpful if you end up with a lot of data. If you have that much data you aren't going to want to present it all to the user anyways. The result is that its probably not useful."
1196,"Splitting log file into smaller files. I had a file that looked like this: Mar 06 22:00:00 [10.251.132.246] logger: 10.64.69.219 - - [06/Mar/2011:22:.....
Mar 06 22:00:00 [10.251.132.246] logger: 10.98.137.116 - - [06/Mar/2011:22:0.... that I wanted to split into smaller files using the ip address after ""logger"" This is what I came up with: file = ARGV.shift
split_file = {}
pattern = /logger: ([^\s]*)/
File.open(file, 'r') do |f|
    f.each do |l|
        match = l[pattern]
        if match
            list = split_file[$1]
            list = [] if list == nil
            list << l
            split_file[$1] = list
        end
    end
end

split_file.each_pair do |k, v|
    File.open(""#{file}.#{k}"", ""a+"") do |f|
        v.each do |l|
            f.print l
        end
    end
end Suggestions, warnings, improvements are very welcome :) One thing I noticed is that the new files are created in the same directory as the original file, not at the current working directory (so ./logsplitter.rb ../log.log creates files in the .. directory). Thank you [edit: typo]"
1197,"In response to your follow-up.  If you're really keen to keep the final formatting of the result ""(~d, ~d, ~d)"", you can still do that by formatting a list, you'd just have a slightly more complicated directive. (format t ""The sorted result is (~{~d~^, ~})~%"" 
          (apply #'my-sort-3 (loop repeat 3 collect (random 25)))) In a format directive ~{ ~} denotes a loop. It expects a list, and applies the contained directive to each element. Within curlies in a format directive, ~^ denotes a joining string. Anything after it is repeated except on the last iteration. So, assuming the loop generated (1 2 3) , the result of the above statement would be The sorted result is (3, 2, 1)
NIL For more information on format , check Seibels' chapter on format (in fact the entire book might be useful to you. (That wasn't the Amazon link , by the way, the entire Practical Common Lisp is available for free online)), and the CLHS section on formatted output . If you're up for a challenge, after reading some of the above you should be able to replace this (cond ((eq 'right triangle-type) (status-message ""is a right triangle."" a b c))
    ((eq 'equilateral triangle-type) (status-message ""is an equilateral triangle."" a b c))
    ((eq 'isoceles triangle-type) (status-message ""is an isoceles triangle."" a b c))
    ((eq 'triangle triangle-type) (status-message ""is a non-right, non-isoceles, non-equilateral triangle."" a b c))
    (t (status-message ""is not a triangle."" a b c))) with a single format statement in your triangle assignment."
1198,"Counting the total number of characters in an std::set<std::string>. I have a std::set<std::string> and I need to know the total number of characters (sum of all strings length): static size_t SumLength(size_t value, const std::string &str)
{
    return str.length() + value;
}

size_t TotalLength(std::set<std::string> &stringSet)
{
   return std::accumulate(stringSet.begin(), stringSet.end(), 0, SumLength);
} What do you think of this approach?"
1199,"You should make the parameter to TotalLength const, so you can use it on constant sets. Since TotalLength does not modify its argument, there is no reason not to use a const reference. Also this is a small thing, but I'd change the name of SumLength to AddLength as Sum to me suggests that it operates on multiple strings. Other than that your code looks perfectly fine and straight forward."
1200,"First of all it is a pretty wide-spread convention in ruby to use 2 spaces for indendation not 4. Personally I don't care, but there are some ruby developers who will complain when seeing code indented with 4 spaces, so you'll have an easier time just going with the stream. file = ARGV.shift Unless there is a good reason to mutate ARGV (which in this case doesn't seem to be the case), I'd recommend not using mutating operations. file = ARGV[0] will work perfectly fine here. match = l[pattern]
if match
    list = split_file[$1]
    list = [] if list == nil
    list << l
    split_file[$1] = list
end First of all you should avoid using magic variables. Using MatchData objects is more robust than using magic variables. As an example consider this scenario: Assume that you decide you want to do some processing on the line before storing it in split_file . For this you decide to use gsub. Now your code looks like this: match = l[pattern]
if match
    list = split_file[$1]
    list = [] if list == nil
    list << l.gsub( /some_regex/, ""some replacement"")
    split_file[$1] = list
end However this code is broken. Since gsub also sets $1 , $1 now no longer contains what you think it does and split_file[$1] will not work as expected. This kind of bug can't happen if you use [1] on a match data object instead. Further the whole code can be simplified by using a very useful feature of ruby hashes: default blocks. Hashes in ruby allow you to specify a block which is executed when a key is not found. This way you can create hash of arrays which you can just append to without having to make sure the array exists. For this you need to change the initialization of split_file from split_file = {} to split_file = Hash.new {|h,k| h[k] = [] } . Then you can replace the above code with: match = l.match(pattern)
if match
  split_file[ match[1] ] << l
end One thing I noticed is that the new files are created in the same directory as the original file, not at the current working directory (so ./logsplitter.rb ../log.log creates files in the .. directory). If you want to avoid that use File.basename to extract only the name of the file without the directory from the given path and then build the path of the file to be created from that. I.e.: File.open(""#{ File.basename(file) }.#{k}"", ""a+"") do |f| Speaking of this line: I don't see why you use ""a+"" instead of just ""a"" as the opening mode - you never read from it."
1201,"Much better. You seem to like assignment a bit more than I do, though. You can rewrite that last let as (let* ((a (read-side 1)) (b (read-side 2)) (c (read-side 3)) (triangle-type (classify-triangle a b c)))
  (format t ""classify triangle says ~a ~%"" triangle-type)
  (cond ((eq 'right triangle-type) (status-message ""is a right triangle."" a b c))
        ((eq 'equilateral triangle-type) (status-message ""is an equilateral triangle."" a b c))
        ((eq 'isoceles triangle-type) (status-message ""is an isoceles triangle."" a b c))
        ((eq 'triangle triangle-type) (status-message ""is a non-right, non-isoceles, non-equilateral triangle."" a b c))
        (t (status-message ""is not a triangle."" a b c)))) let* is basically let , except that its arguments are guaranteed to be evaluated in the given order (which means that later bindings can refer to previous ones from the same let* statement). It's good style to use let where you can, but let* is better than creating a temporary nil binding and setq ing it later."
1202,"Multithreaded host pinging application. I'm working on a network monitoring application, that pings an unknown number of hosts. I've made a class PingHost with a function zping and I called it with the help of a timer once every 2 seconds to let the 2 pings to finish, even if one of them gets TimedOut . But I think a better solution is to generate a new thread for every ping, so that the ping of every host would be independent. Can anyone give me a hint how to do this? namespace pinguin
{
    public partial class Form1 : Form
    {
        public Form1()
        { 
            InitializeComponent();
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
            PingHost caca = new PingHost();
            PingHost caca1 = new PingHost();
            this.label1.Text = caca.zping(""89.115.14.160"");
            this.label2.Text = caca1.zping(""89.115.14.129"");
        }

    } public class PingHost
    {
        public string zping(string dest)
        {
            Application.DoEvents();
            Ping sender = new Ping();
            PingOptions options = new PingOptions();
            options.DontFragment = true;

            string data = ""aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"";
            byte[] buffer = Encoding.ASCII.GetBytes(data);
            int timeout = 50;
            int failed = 0;
            int pingAmount = 5;
            string stat = """";
            PingReply reply = sender.Send(dest, timeout, buffer, options);
            if (reply.Status == IPStatus.Success)
            {
                stat = ""ok"";
            }
            else
            {
                stat = ""not ok!"";
            }
            return stat;
        }
    }
}"
1203,"You can use SendAsync : sender.PingCompleted += new PingCompletedEventHandler (PingCompletedCallback);
sender.SendAsync(dest, timeout, buffer, options, textLabel); And the callback: private static void PingCompletedCallback (object label, PingCompletedEventArgs e)
{
   if (e.Reply.Status == IPStatus.Success)
   {
      label.Text = ""ok"";
   }
   else
   {
      label.Text = ""not ok!"";
   }
} Disclaimer: I haven't run this code. I believe the delegate will be able to access the label, but I've had issues with it in the past."
1204,"Game of Life in Haskell. I wondering what people think of this game of life. I don't think it is working properly, but I am interesting in what people think of the general design. module GameOfLife where
import Data.List

--Our types 
type Coord = (Int, Int)
origin = (0, 0)

--Think of an image more like an infinite manifold  
type DiscreteImage a = (Coord -> a)

--Cat is our ""out of bounds""
data GamePiece = Alive | Dead | Cat
    deriving(Show, Eq)

type GameBoard = DiscreteImage GamePiece

type TransitionRule = (GameBoard -> GamePiece)

under_population = make_population_transition Alive Dead (<2)
overcrowding     = make_population_transition Alive Dead (>3)
birth            = make_population_transition Dead Alive (==3)

--Order is not important. Only one transition applies per peice, 
--the others operate like id 
transition_rule :: TransitionRule
transition_rule image = foldl (\image f -> f image) image 
    [
        under_population,
        overcrowding,
        birth
    ] origin

--return a new gameboard that applies the transition rule to every 
--spot on the gameboard
step :: TransitionRule -> GameBoard -> GameBoard
step trans gb = trans . offset gb  

--apply the tranisition rule n number of times
simulate :: Int -> TransitionRule -> GameBoard -> GameBoard
simulate count trans gb = foldl apply_step gb steps where 
  steps = replicate count (step trans)
  apply_step gb s = s gb

--translate the image
offset :: DiscreteImage a -> Coord -> Coord -> a
offset image (offsetX, offsetY) (x, y) = image (offsetX + x, offsetY + y) 

--make a square of coords
square_coords :: Int -> [Coord] 
square_coords radius = [(x, y) | x <- diameter_list, y <- diameter_list] where
        diameter_list = [(negate radius) .. radius]

--return a neighborhood with the center missing
punctured_neighborhood :: Int -> DiscreteImage a -> [a] 
punctured_neighborhood size image = map image $ filter (not . (==origin)) $ square_coords size 


--a little test
main = do 
    let (width, height) = get_bounds test_list
    let board1 = simulate 1 transition_rule test_board
    putStr $ unlines [ unwords [ ppr_peice $ board1 (x, y) | x <- [0..(width -1)]] | 
                y <- [0..(height - 1)]]

test_list = 
    [
        [Alive, Dead, Alive, Dead],
        [Alive, Dead, Dead, Alive],
        [Dead, Alive, Dead, Alive],
        [Dead, Alive, Alive, Alive]
    ]

test_board = image_from_lists test_list Cat

--helpers
population_count = length . filter is_Alive . punctured_neighborhood 1

--does nothing if the origin peice /= from, otherwise test for replacement
make_population_transition from to condition image | image origin == from = 
    if (condition . population_count) image 
            then replace image origin to 
            else image
make_population_transition from to test image | otherwise = image

replace image coord_to_replace value coord = if coord_to_replace == coord 
                                                 then value 
                                                 else image coord

bi f g h x = f x `h` g x

is_Alive Alive = True
is_Alive _ = False

from_Bool True = Alive
from_Bool False = Dead

image_from_lists xs default_value coord@(x, y) = if is_in_bounds1 coord
    then (xs !! x) !! y
    else default_value where
      bounds = get_bounds xs
      is_in_bounds1   = is_in_bounds bounds 

get_bounds xs = if null xs
    then (0, 0)
    else (length xs, length $ head xs)

is_in_bounds (xb, yb) (x, y) = (y < yb && y > -1) && (x < xb && x > -1)

ppr_peice Dead = ""O""
ppr_peice Alive = ""X""
ppr_peice Cat = ""C"""
1205,"C++ string_cast<> template function. In C++, to simplify string conversion between std::string and std::wstring , I created the following utility template functions: #pragma once

#include <vector>
#include <string>
#include <cstring>
#include <cwchar>
#include <cassert>

template<typename Td> 
Td string_cast( const char* pSource, unsigned int codePage = CP_ACP );

template<typename Td> 
Td string_cast( const wchar_t* pSource, unsigned int codePage = 1200 );

template<typename Td> 
Td string_cast( const std::string& source, unsigned int codePage = CP_ACP );

template<typename Td> 
Td string_cast( const std::wstring& source, unsigned int codePage = 1200 );

template<>
std::string string_cast( const char* pSource, unsigned int codePage )
{
    assert( pSource != 0 );
    return std::string( pSource );
}

template<>
std::wstring string_cast( const char* pSource, unsigned int codePage )
{
    assert( pSource != 0 );
    std::size_t sourceLength = std::strlen( pSource );
    if( sourceLength == 0 )
    {
        return std::wstring();
    }

    int length = ::MultiByteToWideChar( codePage, 0, pSource, sourceLength, NULL, 0 );
    if( length == 0 )
    {
        return std::wstring();
    }

    std::vector<wchar_t> buffer( length );
    ::MultiByteToWideChar( codePage, 0, pSource, sourceLength, &buffer[ 0 ], length );

    return std::wstring( buffer.begin(), buffer.end() );
}

template<>
std::string string_cast( const wchar_t* pSource, unsigned int codePage )
{
    assert( pSource != 0 );
    size_t sourceLength = std::wcslen( pSource );
    if( sourceLength == 0 )
    {
        return std::string();
    }

    int length = ::WideCharToMultiByte( codePage, 0, pSource, sourceLength, NULL, 0, NULL, NULL );
    if( length == 0 )
    {
        return std::string();
    }

    std::vector<char> buffer( length );
    ::WideCharToMultiByte( codePage, 0, pSource, sourceLength, &buffer[ 0 ], length, NULL, NULL );

    return std::string( buffer.begin(), buffer.end() );
}

template<>
std::wstring string_cast( const wchar_t* pSource, unsigned int codePage )
{
    assert( pSource != 0 );
    return std::wstring( pSource );
}

template<>
std::string string_cast( const std::string& source, unsigned int codePage )
{
    return source;
}

template<>
std::wstring string_cast( const std::string& source, unsigned int codePage )
{
    if( source.empty() )
    {
        return std::wstring();
    }

    int length = ::MultiByteToWideChar( codePage, 0, source.data(), source.length(), NULL, 0 );
    if( length == 0 )
    {
        return std::wstring();
    }

    std::vector<wchar_t> buffer( length );
    ::MultiByteToWideChar( codePage, 0, source.data(), source.length(), &buffer[ 0 ], length );

    return std::wstring( buffer.begin(), buffer.end() );
}

template<>
std::string string_cast( const std::wstring& source, unsigned int codePage )
{
    if( source.empty() )
    {
        return std::string();
    }

    int length = ::WideCharToMultiByte( codePage, 0, source.data(), source.length(), NULL, 0, NULL, NULL );
    if( length == 0 )
    {
        return std::string();
    }

    std::vector<char> buffer( length );
    ::WideCharToMultiByte( codePage, 0, source.data(), source.length(), &buffer[ 0 ], length, NULL, NULL );

    return std::string( buffer.begin(), buffer.end() );
}

template<>
std::wstring string_cast( const std::wstring& source, unsigned int codePage )
{
    return source;
} Are there any bugs or further optimizations?"
1206,"Calculate the weekday from a date (M-D-Y). This Common Lisp exercise is to write a program that can calculate the weekday given a string of the format ""M-D-Y.""  It was more challenging than I expected.  If you have suggestions about how to simplify this code, I will be very grateful. ;;  2.7 Day of Week. A program for converting Gregorian dates in the form month-day-year to day of the
;;  week is the following. Let the Gregorian date be represented by M-D-Y where we have the following
;;  definitions:
;;    M is the month of the year. Let m be the month number derived from M by the rule m is M - 2 if M >= 3
;;    and m is M + 10 otherwise.
;;    d is the day of the month.
;;    y is the year of the century.
;;    c is the number of the previous century.
;;  The algorithm is as follows:
;;    (a) A is the integer part of (13m - 1)/5.
;;    (b) B is the integer parg of y/4.
;;    (c) C is the integer part of c/4.
;;    (d) D = A + B + C + d + y - 2c.
;;    (e) Make R equal to the remainder of D/7.
;;    (f ) Interpret R as Sunday if R = 0, Monday if R is 1, etc

(defun read-date () (format t ""Enter the gregorian date in the format (M-D-Y): ~%"") (read))


(defun flatten (the-list) 
  (cond ((null the-list) nil)
    ((atom the-list) (list the-list))
    (t (concatenate 'list (flatten (car the-list)) (flatten (cdr the-list))))))

(defun split (split-char string-to-split) 
  (let ((next-split-char (position split-char string-to-split)))
    (if next-split-char (flatten (list (safely-read-from-string (subseq string-to-split 0 next-split-char))
                  (split split-char (subseq string-to-split (+ 1 next-split-char)))))
      (list (safely-read-from-string string-to-split)))))

(defun weekday-code (bigM bigD bigY)
    (let* ((m (if (>= bigM 3) (- bigM 2) (+ bigM 10)))
          (y (mod bigY 100))
          (littleC (/ (- bigY y) 100))
          (A (floor (- (* 13 m) 1) 5))
          (B (floor y 4))
          (C (floor littleC 4))
          (D (- (+ A B C bigD y) (* 2 littleC)))
          (R (mod D 7)))
      (format t ""m: ~a y: ~a c: ~a A: ~a B: ~a C: ~a D: ~a R: ~a ~%"" m y littleC A B C D R)
      R))

(defun check-date-format (bigM bigD bigY)
  (cond ((or (< bigM 1) (> bigM 12)) (error ""The month (~a) is not in the range 1-12."" bigM))
    ((< bigY 0) (error ""The year (~a) is less than 0."" bigY))
    ((or (< bigD 1) (> bigD 31)) (error ""The day (~a) is not in the range 1-31."" bigD))))

(let ((gregorian-date (read-date)))
      (destructuring-bind (bigM bigD bigY) (split #\- gregorian-date)
    (check-date-format bigM bigD bigY)
    (format t ""~a was (or will be) a ~[Sunday~;Monday~;Tuesday~;Wednesday~;Thursday~;Friday~;Saturday~]."" gregorian-date (weekday-code bigM bigD bigY))))"
1207,"Just a stylistic note, take it for what it's worth.  I generally prefer to avoid: if ( usual_case )
{
  // lots of code
}
else
{
  // one line handler
} and instead prefer to go with less indentation, by handling error cases first: if ( ! usual_case )
{
  return one_liner;
}
// no need for indentation or braces anymore... Rewriting one of your functions would look like this: template<>
std::string string_cast( const wchar_t* pSource, unsigned int codePage )
{
  assert( pSource != 0 );
  const size_t sourceLength = std::wcslen( pSource );
  if( sourceLength == 0 )
  {
    return std::string();
  }

  int length = ::WideCharToMultiByte( codePage, 0, pSource, sourceLength, NULL, 0, NULL, NULL );

  std::vector<char> buffer( length );
  ::WideCharToMultiByte( codePage, 0, pSource, sourceLength, &buffer[ 0 ], length, NULL, NULL );

  return std::string( buffer.begin(), buffer.end() );
} It's slightly cleaner: fewer lines, fewer braces, less indentation.  Not much, only slightly, but it adds up with multiple error-case checks, and multiple if-statements. Also, I made sourceLength const because: The sourceLength isn't going to change.  You're going to initialize it, and use it, but you're never going to change it.  Using const enforces that you can't change it, and is considered good practice. Using if (sourceLength = 0) is a classic programming mistake.  Testing for equality, == , and assigning, = , differ only by a single character.  That typo has caused numerous bugs. if sourceLength is constant, sourceLength = 0 fails to compile. reversing the comparison and using if (0 = sourceLength) also catches the typo at compile time - but it's a little weird to read.  Someone nicknamed this ""Yoda conditionals"". So, I made it const to conform to good style, and to catch typo bugs -- especially since I changed the conditional from > to == ."
1210,"If you're allowed to use library functions, split already exists as part of cl-ppcre . There's a pretty rich set of date/time functions in the Lisp core that make this trivial. If it's for learning purposes, by all means, go ahead and do it by hand. But if you're thinking ""What's the best way to get the day-of-week in Lisp?"", that's actually ridiculously simple. (defun day-of-week (day month year)
   (nth-value 6 (decode-universal-time (encode-universal-time 0 0 0 day month year 0)))) Re-arrange order of argumnents to taste. Monday is 0 by default, so you'd need to re-jig your format directive. If you need to be able to handle dates before 1900, there's a more robust version at the Common Lisp Cookbook ."
1211,"Typically, you should almost never need to use a flatten function.  For example, the split function: (defun split (split-char string-to-split) 
  (let ((next-split-char (position split-char string-to-split)))
    (if next-split-char (flatten (list (safely-read-from-string (subseq string-to-split 0 next-split-char))
                  (split split-char (subseq string-to-split (+ 1 next-split-char)))))
      (list (safely-read-from-string string-to-split))))) is equivalent to: (defun split (split-char string-to-split) 
  (let ((next-split-char (position split-char string-to-split)))
    (if next-split-char 
        (cons (safely-read-from-string (subseq string-to-split 0 next-split-char))
              (split split-char (subseq string-to-split (1+ next-split-char))))
        (list (safely-read-from-string string-to-split))))) This assumes safely-read-from-string returns the same as read function.  The flatten helper function is not necessary."
1212,"MVC Controller in Java Swing Apps - Singleton or public static. This article has left me a little confused. In explaining a method on how to design MVC into Java Swing apps the author defines the controller class as Singleton and relays a series of calls to the Controller for each operation. In a view object: ...    
Controller.getInstance().setOwner(this);
Controller.getInstance().setNameTextField(this.nameTextField);
Controller.getInstance().setEmailTextField(this.emailTextField);
Controller.getInstance().processForm();
... And inside the controller class: public void processForm() {
    result1 = doSomethingWithName(this.nameTextField.getText());
    result2 = doSomethingWithEmail(this.emailTextField.getText());
    this.owner.setResult(result1, result2);
} I don't understand why this has been made so complex! Wouldn't it be simpler, less error prone and more modular to simply: Controller.processForm(this, this.nameTextField.getText(), this.emailTextField.getText()); and public static void processForm(OwnerClass owner, String name, String email) {
    result1 = doSomethingWithName(name);
    result2 = doSomethingWithEmail(email);
    this.owner.setResult(result1, result2);
} Is anyone familiar with this design pattern? Is there reason to this method?"
1213,"It's been a long time ago since I last used an MVC approach in Swing, but I immediately notice some things I wouldn't do. Don't use a singleton, singletons are evil! Passing view components to the controller? When I do MVC, I tend to pass the controller to my view elements, preferably just an interface. The view can request actions on the controller. This allows for total decoupling of the view. So you can also switch to something else than Swing. This probably isn't the 'default' approach of MVC with Swing however. So yeah, it seems I would agree with you. Perhaps try looking for other MVC examples with Swing. This article doesn't look particularly appealing IMHO."
1214,"In response to the 4th edit, I was thinking something along the lines of (let* ((a (read-side 1)) (b (read-side 2)) (c (read-side 3)) 
       (triangle-type (classify-triangle a b c))
       (article (if (member triangle-type '(isoceles equilateral)) ""an"" ""a""))
       (tri-name (if (eq triangle-type 'triangle) ""non-right, non-isoceles, non-equilateral"" triangle-type)))
  (format t ""The shape (~d, ~d, ~d) is ~:[not a triangle.~;~a ~(~a~) triangle~]."" a b c triangle-type article tri-name)) Rather than using global parameters, but that works too (it's not as though you'd use either option in actual code)."
1215,"(In response to your 4th edit) You can simplify right-triangle-p by doing more work in the destructuring: (defun right-triangle-p (a b c)
  (destructuring-bind (x y z) (sort (list a b c) #'>)
    (= (expt z 2) (+ (expt y 2) (expt x 2)))))"
1216,"Circular Bounded Queue using C#. As an exercise, I have implemented a circular bounded queue using arrays as the base data structure. I'd appreciate it if someone can review it for me. class BoundedQueue<T> {

    T[] que;
    int head;       // remove from head
    int tail;       // insert at tail


    public BoundedQueue(int quesize)
    {
        head = tail = -1;
        que = new T[quesize];
    }

    public void enqueue(T elem)  // if next index to tail == head => Q is FULL
    {
        int newIndex = nextIndex(tail);
        if ( newIndex == head)
            throw new BoundedQueueException(Full);

        tail = newIndex;
        que[newIndex] = elem;
        if (head == -1)
            head = 0;
    }

    public T dequeue()  // After removing from head, if that was the only element in Q
    // Mark Q to be empty by setting head and tail to -1
    {
        if (head == -1)
            throw new BoundedQueueException(Empty);

        T elem = que[head];
        que[head] = default(T);

        if (head == tail)
        {
            head = tail = -1;
        }
        else
        {
            head = nextIndex(head);
        }

        return elem;
    }

    private int nextIndex(int index)
    {
        return (index + 1) % que.Length;
    }

}"
1217,"Exception handling should be added
to the constructor, handling a negative quesize . Or take a look at Code
Contracts. Instead of initializing head and tail to -1 , you could use nullable ints , and adjust your
logic so it doesn't rely on the
magic number -1 . Implement some missing features.
(might have been left out
intentionally): implement ICollection and IEnumerable , isFull() . A minor point would be naming conventions. In C# method names normally start with a capital letter. Be aware that this is not a thread safe class. Add some comments, this code isn't that self-documenting. Or, where possible, make it self-documenting, e.g. if ( head == tail ) could be if ( Count == 0 ) ."
1218,"A few minor comments. C# typically uses CamelCase for method names. A Peek() method or a Count property could be useful. I would prefer to use an if statement in the NextIndex method instead of the modulus operator. index++
    if (index >= que.Length)
        index = 0;
    return index; I am not sure which would perform faster, I suspect the if, but I think that the if more clearly communicates what you are trying to do."
1219,"Print an integer and its digits reversed. This Common Lisp program is an exercise to print an integer and its digits reversed to the screen: (defun read-number () (format t ""Enter a number: ~%"") (read))

(defun reverse-string (the-string) 
  (if (eq (length the-string) 0) 
    """" 
    (concatenate 'string (reverse-string (subseq the-string 1)) (subseq the-string 0 1))))

(defun reverse-digits (the-number) (reverse-string (write-to-string the-number)))

(let ((the-number (read-number)))
  (format t ""N->: ~a~%<-N: ~a~%"" the-number (reverse-digits the-number)))"
1220,"You're talking about digits and integer, but to me, as an non-lisper, it looks as if you operate on Strings. I would take the number, modulo 10, print that digit. If the rest is > 0 recursively call the function with the (number - digit) / 10. In most languages with integer-arithmetic you can omit the subtraction, since 37/10 => 3 :==: (37-7)/10 => 3 In scala it would look like this: def redigit (n: Int, sofar: Int = 0) : Int = { 
     if (n == 0) sofar else                     
     redigit (n / 10, sofar * 10 + n % 10)}

redigit (123)
321 It uses default arguments. First tests with DrScheme didn't succeed. Here is what I came up with: ;; redigit : number number -> number
(define (redigit in sofar)
  (cond [(< in 1) sofar]
      [else (redigit (/ in 10) (+ (* 10 sofar) (modulo in 10)))]) 
)

(redigit 134 0) But the division is precise and doesn't cut off the digits behind the floting point. I get this error: modulo: expects type  as 1st
  argument, given: 67/5; other arguments
  were: 10 I looked for a function toInt, asInt, floor, round and so on for the term (/ in 10) but I didn't find something useful. Maybe you know it yourself?"
1221,"This problem is more about numbers than strings, so I felt the need to post a non-string-based solution. I've got my original Scheme version, and a Common Lisp adaptation of same. Scheme version: (define (reverse-digits n)
  (let loop ((n n) (r 0))
    (if (zero? n) r
        (loop (quotient n 10) (+ (* r 10) (remainder n 10)))))) Common Lisp translation of the Scheme version: (defun reverse-digits (n)
  (labels ((next (n v)
             (if (zerop n) v
                 (multiple-value-bind (q r)
                     (truncate n 10)
                   (next q (+ (* v 10) r))))))
    (next n 0)))"
1223,"Placing a Google map in Colorbox. I need to place a Google map in Colorbox overlay and am wondering if there's a better way to do this.  I've just started out with Google's tutorial so there's nothing fancy going on. Right now I'm hiding the div that Google loads the map into: <div style=""width:0; height: 0; overflow: hidden;"">
    <div id=""map_canvas"" style=""width:600px; height:400px; ""></div>
</div> Here's the call to Colorbox: var latlng = new google.maps.LatLng(-34.397, 150.644);
var myOptions = { zoom: 8, center: latlng, mapTypeId: google.maps.MapTypeId.ROADMAP };
var map = new google.maps.Map(document.getElementById(""map_canvas""), myOptions);


$(document).ready(function(){

    $(""#farm_on_google_maps"").colorbox({
        inline: true,
        width:700,
        height:450,
        href : '#map_canvas'
        });
}); Even though it works, I wonder if the map could be loaded directly into Colorbox."
